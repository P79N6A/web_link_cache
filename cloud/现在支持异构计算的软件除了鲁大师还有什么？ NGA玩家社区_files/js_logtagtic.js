!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.JSSDK=t()}("undefined"!=typeof window?window:this,function(){var e=null,t=app_key||null,o=location.protocol+"//xy-log2.tagtic.cn/mininfo/v1/logs/"+t,n=null,i=0,a=null,r=0,s="",u={ajax:function(e){e.url=e.url||"",e.method=e.method||"get",e.data=e.data||"",e.callback=e.callback||"",e.async=e.async||!0;var t=null;if("POST"===e.method.toUpperCase()){if("object"==typeof e.data)try{e.data=JSON.stringify(e.data)}catch(t){e.data=""}window.XMLHttpRequest&&"withCredentials"in(t=new window.XMLHttpRequest)&&(t.open("POST",e.url,!0),t.setRequestHeader("Content-Type","text/plain"),t.onreadystatechange=function(){t.readyState},t.send(e.data))}},md5:function(e){return hex_md5(e+"")},setCookie:function(e,t,o){var n=this.GetFirstLevelDomain();o=o||24;var i=new Date;i.setTime(i.getTime()+36e5*o),document.cookie=e+"="+escape(t)+";expires="+i.toGMTString()+";domain="+n+";path=/"},getCookie:function(e){return null!==(e=window.document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)")))?unescape(e[2]):null},GetFirstLevelDomain:function(e){if(e){if(!(e=e.match(/^(?:[a-z0-9]+:\/\/)?([^\/]+)/)))return"unknow";e=e[1]}else e=document.location.hostname;return(e=e.match(/[^\.]+\.(?:(?:com|co|net|org|gov|edu|mil|biz|name|info|mobi|pro|travel|museum|int|areo|post|rec)\.)?[^\.]+$/))?e[0]:"unknow"},addEvent:function(e,t,o,n){commonui.aE(e,t,o)}};function d(e){e.appkey&&"app_key"!==t&&u.ajax({method:"post",url:o,data:e})}function c(){}return function(o,c){if(o){var p={cookie:u.getCookie("taihe"),page_id:a,short_cookie:u.getCookie("taihe_session"),appkey:t,http_url:s,timestamp:(new Date).toISOString(),event:"duration",duration:parseInt(((new Date).getTime()-e)/1e3)};d(p)}var m=c||window.location.href,l=u.GetFirstLevelDomain();function f(o){if(o.cookie=u.getCookie("taihe"),o.page_id=a,o.short_cookie=u.getCookie("taihe_session"),o.appkey=t,!(o.http_url.search("http:")<0)&&o.cookie){if("jump"===o.event){if(o=function(e){if(e.to_target.indexOf("http")<0)return e.to_target=null,e;var t=u.GetFirstLevelDomain(e.to_target);l===t&&(e.to_target=null);return e}(o),!r){var n={cookie:u.getCookie("taihe"),page_id:a,short_cookie:u.getCookie("taihe_session"),appkey:t,http_url:m,timestamp:(new Date).toISOString(),event:"duration",duration:parseInt(((new Date).getTime()-e)/1e3)};d(n),r=1}if(o.to_target)return void d(o)}if("load"!==o.event){if("close"===o.event){var n={cookie:u.getCookie("taihe"),page_id:a,short_cookie:u.getCookie("taihe_session"),appkey:t,http_url:m,timestamp:(new Date).toISOString(),event:"duration",duration:parseInt(((new Date).getTime()-e)/1e3)};d(n)}}else d(o)}}if(e=(new Date).getTime(),a=u.md5(m+e),!u.getCookie("taihe")){i=1;var g=navigator.userAgent+(new Date).getTime(),h=u.md5(g);u.setCookie("taihe",h,43800)}u.getCookie("taihe_session")?u.setCookie("taihe_session",u.getCookie("taihe_session"),1/6):u.setCookie("taihe_session",u.md5((new Date).getTime()),1/6);u.addEvent(window,"beforeunload",function(e){var t=e.target.activeElement.nodeName.toLowerCase();if("a"!=t){var o={to_target:e.target.links[0].href,http_url:m,timestamp:(new Date).toISOString(),event:"close"};f(o)}}),u.addEvent(document.body,"click",function(e){for(var t=e.target||e.srcElement,o=0;o<3;o++){if(!t)return;if("A"==t.nodeName)return void f({to_target:t.getAttribute("href"),http_url:m,timestamp:(new Date).toISOString(),event:"jump"});t=t.parentNode}}),_=o?s:document.referrer?document.referrer:null,k={status:200,http_user_agent:navigator.userAgent,request_method:"get",timestamp:(new Date).toISOString(),http_url:m,http_x_forwarded_for:n,event:"load",is_new:i,http_referer:_},f(k),s=m;var _,k}(),void 0==window.JSSDK&&(window.JSSDK=c),c});