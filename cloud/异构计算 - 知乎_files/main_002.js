webpackJsonp([7],{1276:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function c(e){var t=e.onRef,n=e.listClassName,r=e.itemClassName,o=e.className,a=e.children,c=i(e,["onRef","listClassName","itemClassName","className","children"]);return d.a.createElement("div",O({ref:t,className:m()(n,o)},c),f.Children.map(a,function(e){return"string"==typeof e?d.a.createElement("span",{className:r},e):e?Object(f.cloneElement)(e,{className:m()(r,e.props.className)}):e}))}n.d(t,"a",function(){return _}),n.d(t,"b",function(){return C}),n.d(t,"d",function(){return k}),n.d(t,"c",function(){return j});var l,s,u=n(1),p=n.n(u),f=n(0),d=n.n(f),h=n(2),m=n.n(h),b=n(26),v=n.n(b),y=n(265),g=n(1301),w=n(1379),E=(n.n(w),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C=function(e){return d.a.createElement(c,O({listClassName:"ContentItem-cells",itemClassName:"ContentItem-cell"},e))},_=function(e){return d.a.createElement(c,O({listClassName:"ContentItem-actions",itemClassName:"ContentItem-action"},e))},k=function(e){return d.a.createElement(c,O({listClassName:"ContentItem-status",itemClassName:"ContentItem-statusItem"},e))},T=(s=l=function(e){function t(){var e,n,a,i;r(this,t);for(var c=arguments.length,l=Array(c),s=0;s<c;s++)l[s]=arguments[s];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.onRef=function(e){a.domNode=e,a.props.onRef&&a.props.onRef(e)},i=n,o(a,i)}return a(t,e),E(t,[{key:"componentDidMount",value:function(){var e=this;Object(y.a)(this.domNode,function(){var t=e.props,n=t.data;n=void 0===n?{}:n;var r=n.type,o=n.id,a=t.lastreadTouchable;e.context.currentUser&&a&&r&&o&&Object(g.c)("article"===r?"post":r,o,g.b)})}},{key:"render",value:function(){var e=v()(this.props,["noTrackCardShow","lastreadTouchable","data","onRef"]),t=e.className,n=e.title,r=e.meta,o=e.children,a=e.extra,c=e.image,l=i(e,["className","title","meta","children","extra","image"]),s=d.a.createElement(d.a.Fragment,null,n&&d.a.createElement("h2",{className:"ContentItem-title"},n),r&&d.a.createElement("div",{className:"ContentItem-meta"},r));return d.a.createElement("div",O({ref:this.onRef,className:m()("ContentItem",t)},l),c||a?d.a.createElement("div",{className:"ContentItem-main"},c&&d.a.createElement("div",{className:"ContentItem-image"},c),d.a.createElement("div",{className:"ContentItem-head"},s),a&&d.a.createElement("div",{className:"ContentItem-extra"},a)):s,o)}}]),t}(f.Component),l.contextTypes={currentUser:p.a.object},s),j={plain:"plain",default:"default",interactive:"interactive"};t.e=T},1277:function(e,t,n){"use strict";var r=n(13),o=n.n(r),a=n(0),i=n.n(a),c=n(2),l=n.n(c),s=(n(1294),function(e){var t=e.className,n=e.title,r=e.options,a=e.children,c=o()(e,["className","title","options","children"]);return i.a.createElement("div",Object.assign({className:l()("List",t)},c),(n||r)&&i.a.createElement("div",{className:"List-header"},i.a.createElement("h4",{className:"List-headerText"},n),i.a.createElement("div",{className:"List-headerOptions"},r)),a)}),u=s,p=function(e){var t=e.className,n=e.tabIndex,r=e.meta,o=e.children;return i.a.createElement("div",{className:l()("List-item",t),tabIndex:n},r&&i.a.createElement("div",{className:"List-itemMeta"},r),o)},f=p,d=n(1295),h=function(){return i.a.createElement(f,{className:"List-item--holder"},i.a.createElement(d.a,{inline:!0,title:!0,width:"350",bottom:"20"}),i.a.createElement("div",{style:{marginBottom:"20px"}},i.a.createElement(d.a,{avatar:!0,right:"16"}),i.a.createElement(d.a,{inline:!0,width:"200",height:"18",bottom:"3"})),i.a.createElement(d.a,null),i.a.createElement(d.a,null),i.a.createElement(d.a,{width:"550"}))},m=function(){return i.a.createElement(f,{className:"List-item--holder"},i.a.createElement(d.a,{title:!0,width:"360",bottom:"20"}),i.a.createElement(d.a,{width:"280"}))},b=function(e){return e.rich?i.a.createElement("div",null,i.a.createElement(h,null),i.a.createElement(h,null),i.a.createElement(h,null)):i.a.createElement("div",null,i.a.createElement(m,null),i.a.createElement(m,null),i.a.createElement(m,null),i.a.createElement(m,null))},v=b;n.d(t,"b",function(){return u}),n.d(t,!1,function(){return v}),n.d(t,"a",function(){return f})},1281:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return e&&e.startsWith("//")?"https:"+e:e}function c(e,t){var n=t.id,r=t.type;return{shareText:e.shareTexts[""+r+n]}}function l(e){return Object.keys(e).map(function(t){return t+"="+encodeURIComponent(e[t])}).join("&")}var s,u,p=n(1),f=n.n(p),d=n(0),h=n.n(d),m=n(5),b=(n.n(m),n(2)),v=n.n(b),y=n(1382),g=n.n(y),w=n(111),E=n.n(w),O=n(8),C=n(72),_=n(3),k=n(6),T=n(187),j=n(104),S=n(1283),P=n(526),x=n(17),N=n(10),R=n(1384),I=(n.n(R),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),D=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),A=(u=s=function(e){function t(){var e,n,a,c;r(this,t);for(var s=arguments.length,u=Array(s),p=0;p<s;p++)u[p]=arguments[p];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),a.state={qrCodeUrl:"",url:""},a.shouldShowMenu=function(){var e=a.props,t=e.onTogglerClick,n=e.disabled;return!1!==t()&&!n},a.handleTogglerClick=function(e){if(!a.shouldShowMenu())return void e.preventDefault();a.onShare(e)},a.open=function(e){a.shouldShowMenu()&&(a.loadQrcodeImage(),a.menu.popover.open(),a.onShare(e))},a.onShare=function(e){var t=a.props,n=t.id,r=t.type,o=t.getShareText,i=t.zaShareId;o(n,r),k.default.trackEvent(e&&e.target,I({action:"Share",element:"Button",is_intent:!0,element_name:N.O[r]},i&&{id:i}))},a.copyLink=function(){var e=a.props,t=e.type,n=e.title,r=e.authorName,o=e.href,c=e.showNotification,l=j.b[t]||"",s=n?n+" - ":"",u=r&&"匿名用户"!==r&&l?r+"的"+l+" - ":"",p=o?Object(T.c)(o):a.url();g()(""+s+u+"知乎\n"+i(p)),c("链接复制成功！")},a.url=function(){var e=a.props,t=e.id,n=e.type;return i(Object(T.c)(a.props.url))||location.origin+"/"+n+"/"+t},a.loadQrcodeImage=function(){var e=a.state.qrCodeUrl;if(!e){var t=location.protocol+"//www.zhihu.com/",n=a.url();e=t+"qrcode?"+l({url:n+"#showWechatShareTip"}),a.setState({qrCodeUrl:e,url:n})}},a.shareToWeibo=function(){var e={appKey:"3063806388"},t=a.props.shareText;t&&(e.title=t);var n="http://service.weibo.com/share/share.php?"+l(e);window.open(n,"_blank","width=615,height=505")||(location.href=n)},c=n,o(a,c)}return a(t,e),D(t,[{key:"componentDidUpdate",value:function(e){this.props.positionStatus!==e.positionStatus&&this.menu.popover.close()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.togglerClassName,o=t.positionStatus,a=t.toggler,i=t.type,c=t.disabled,l=t.getShortcutScope,s=this.state.qrCodeUrl,u=h.a.createElement("div",{className:v()("ShareMenu-toggler",r)},s&&h.a.createElement("img",{className:"ShareMenu-fakeQRCode",src:s,alt:"微信二维码"}),Object(d.cloneElement)(a,{onMouseEnter:this.loadQrcodeImage,disabled:c}));return h.a.createElement(h.a.Fragment,null,h.a.createElement(S.b,{keyMap:{SHARE:"f x"},handlers:{SHARE:this.open},getScope:l}),h.a.createElement(C.c,{className:v()("ShareMenu",n),positionStatus:o,ref:function(t){e.menu=t},toggler:u,onClick:this.handleTogglerClick},h.a.createElement(C.b,{className:"ShareMenu-button",onClick:this.copyLink},h.a.createElement(O._17,{size:20,className:"ShareMenu-Icon--normal",color:"#9FADC7"}),"复制链接"),"live"===i||h.a.createElement(C.b,{className:"ShareMenu-button",onClick:this.shareToWeibo},h.a.createElement(O._75,{size:17,className:"ShareMenu-Icon--small"}),"新浪微博"),h.a.createElement(C.b,{tag:"div",className:"ShareMenu-wechat",noActive:!0},h.a.createElement(_.c,{className:"ShareMenu-button",preset:"plain"},h.a.createElement(O._74,{size:17,className:"ShareMenu-Icon--small",color:"#60C84D"}),"微信扫一扫"),h.a.createElement("img",{className:"ShareMenu-qrCode",src:s,alt:"微信二维码"}))))}}]),t}(d.Component),s.propTypes={toggler:f.a.node,onTogglerClick:f.a.func,zaShareId:f.a.number,getShortcutScope:f.a.func},s.defaultProps={toggler:h.a.createElement(_.c,{preset:"plain",icon:O._58,label:"分享"}),onTogglerClick:E.a},u);t.a=Object(m.connect)(c,{showNotification:x.g,getShareText:P.b},null,{withRef:!0})(A)},1283:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function f(e){window.scrollTo({top:e.getBoundingClientRect().top+window.pageYOffset-window.innerHeight/10})}function d(e){if(!e.matches(A)){e.tabIndex=-1;var t=function t(){e.removeAttribute("tabindex"),e.removeEventListener("blur",t)};e.addEventListener("blur",t)}e.focus(),f(e)}function h(e,t){var n=!0,r=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var c=a.value;if(c.contains(e))return t.indexOf(c)}}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return-1}var m,b,v,y,g=n(0),w=n.n(g),E=n(5),O=n(1312),C=n.n(O),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),k=(b=m=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),_(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.keyMap;this.mousetrap=new C.a,Object.keys(t).forEach(function(n){e.mousetrap.bind(t[n],function(t){var r=e.props,o=r.enable,a=r.handlers;o&&a[n](t)})})}},{key:"componentWillUnmount",value:function(){this.mousetrap.reset()}},{key:"render",value:function(){return null}}]),t}(g.Component),m.defaultProps={enable:!0},b),T=Object(E.connect)(function(e){return{enable:"production"!==e.env.trafficSource}},null)(k),j=n(1),S=n.n(j),P=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),x=(y=v=function(e){function t(){return i(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),P(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.keyMap;this.mousetrap=new C.a,Object.keys(t).forEach(function(n){e.mousetrap.bind(t[n],function(t){var r=e.props,o=r.getScope,a=r.enable,i=r.handlers;if(a&&o){var c=o();c&&c.contains(document.activeElement)&&i[n](t)}})})}},{key:"componentWillUnmount",value:function(){this.mousetrap.reset()}},{key:"render",value:function(){return null}}]),t}(g.Component),v.propTypes={enable:S.a.bool,getScope:S.a.func},v.defaultProps={enable:!0},y),N=Object(E.connect)(function(e){return{enable:"production"!==e.env.trafficSource}},null)(x),R=n(2),I=n.n(R),D=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),A="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]",M={FOCUS_FIRST:"g g",FOCUS_LAST:"G",FOCUS_PREV:"k",FOCUS_NEXT:"j"},L=function(e){function t(){var e,n,r,o;s(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.lastActiveIndex=0,r.containerRef=w.a.createRef(),r.getElements=function(){if(!r.containerRef||!r.containerRef.current)return[];var e=r.props.selector;return Array.from(r.containerRef.current.querySelectorAll(e))},r.focusFirst=function(){var e=r.getElements();r.focus(e,0)},r.focusLast=function(){var e=r.getElements();r.focus(e,e.length-1)},r.focusPrev=function(){var e=r.getElements(),t=document.activeElement,n=t?h(t,e):-1;return-1===n?void r.focus(e,r.lastActiveIndex):n>0?void r.focus(e,n-1):void 0},r.focusNext=function(){var e=r.getElements(),t=document.activeElement,n=t?h(t,e):-1;return-1===n?void r.focus(e,r.lastActiveIndex):n<e.length-1?void r.focus(e,n+1):void 0},o=n,u(r,o)}return p(t,e),D(t,[{key:"focus",value:function(e,t){d(e[t]),this.lastActiveIndex=t}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,r={FOCUS_FIRST:this.focusFirst,FOCUS_LAST:this.focusLast,FOCUS_PREV:this.focusPrev,FOCUS_NEXT:this.focusNext};return w.a.createElement(g.Fragment,null,w.a.createElement(T,{keyMap:M,handlers:r}),w.a.createElement("div",{className:I()("ListShortcut",t),ref:this.containerRef},n))}}]),t}(g.Component),U=L;n.d(t,!1,function(){return T}),n.d(t,"b",function(){return N}),n.d(t,"a",function(){return U})},1286:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,c,l=n(1),s=n.n(l),u=n(0),p=n.n(u),f=n(8),d=n(3),h=n(6),m=n(260),b=n(1385),v=(n.n(b),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=(c=i=function(e){function t(){var e,n,a,i;r(this,t);for(var c=arguments.length,l=Array(c),s=0;s<c;s++)l[s]=arguments[s];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.click=function(e){a.handleClick(e)},a.handleClick=function(e){var t=a.props,n=t.zaInfos,r=n.toggleComment,o=n.getCommentAction,i=t.positionStatus,c=t.onClick,l=t.commentsShown;if(h.default.trackEvent(a,v({action:o?o(!l):"Comment",element:"Button",is_intent:!0},r&&{id:r})),c){var s="fixed"===i?"fixed":"bottom";c(e,{commentsShown:!a.props.commentsShown,commentPattern:s})}},i=n,o(a,i)}return a(t,e),y(t,[{key:"componentDidMount",value:function(){this.props.onInstance(this)}},{key:"componentWillUnmount",value:function(){this.props.onInstance(null)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.count,r=e.commentsShown,o=e.commentClosed,a=void 0;if(r)a="收起评论";else{var i=n&&!o;a=i?Object(m.a)(n)+" 条评论":"添加评论"}return p.a.createElement(d.c,{preset:"plain",className:t,onClick:this.handleClick,icon:f.A,label:a})}}]),t}(u.Component),i.propTypes={commentsShown:s.a.bool,count:s.a.number,zaInfos:s.a.shape({id:s.a.number,getCommentAction:s.a.func}),onInstance:s.a.func},i.defaultProps={zaInfos:{},onInstance:function(){return null}},c);t.a=g},1287:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,c,l=n(1),s=n.n(l),u=n(0),p=n.n(u),f=n(169),d=n(520),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=(c=i=function(e){function t(){var e,n,a,i;r(this,t);for(var c=arguments.length,l=Array(c),s=0;s<c;s++)l[s]=arguments[s];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.handlePackup=function(){var e=a.props.onClose;window.scrollTo(0,a.originPageYOffset),e&&e()},i=n,o(a,i)}return a(t,e),h(t,[{key:"componentWillReceiveProps",value:function(e){"bottom"===e.commentPattern&&e.shown&&!this.props.shown&&(this.originPageYOffset=window.pageYOffset)}},{key:"render",value:function(){var e=this.props,t=e.shown,n=e.parent,r=e.commentPattern,o=e.onClose,a=e.byComment,i=e.needLoadCommentPermission,c=e.apps,l=e.isMobile,s=e.onOrderChange,u=e.onItemLike,h=e.onPaginationClick,m=e.isAutoblur,b=e.onMount,v=e.zaInfo;return t?"bottom"===r?p.a.createElement(d.a,{isAutoblur:m,parent:n,commentPattern:r,handlePackupButton:this.handlePackup,needLoadCommentPermission:i,isMobile:l,apps:c,onOrderChange:s,onItemLike:u,onPaginationClick:h,onMount:b,zaInfo:v}):p.a.createElement(f.b,{size:"fullPage",onClose:o,maskClosable:!1},t&&"fixed"===r&&p.a.createElement(d.a,{parent:n,commentPattern:r,byComment:a,needLoadCommentPermission:i,onOrderChange:s,onItemLike:u,onPaginationClick:h,onMount:b,zaInfo:v})):null}}]),t}(u.Component),i.propTypes={byComment:s.a.oneOfType([s.a.number,s.a.string]),parent:s.a.object,shown:s.a.bool,commentPattern:s.a.string,onClose:s.a.func,needLoadCommentPermission:s.a.bool,apps:s.a.string,isMobile:s.a.bool,onOrderChange:s.a.func,onItemLike:s.a.func,onPaginationClick:s.a.func,isAutoblur:s.a.bool,onMount:s.a.func,zaInfo:s.a.object},i.defaultProps={commentPattern:"fixed",apps:"heifetz"},c);t.a=m},1288:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function h(e){return{isMobile:Object(ee.j)(e).Mobile}}var m=n(1),b=n.n(m),v=n(0),y=n.n(v),g=n(5),w=n(2),E=n.n(w),O=n(3),C=n(280),_=n(8),k=n(1291),T=n(484),j=n(1310),S=n(493),P=n(288),x=n(265),N=n(500),R=n(68),I=n(6),D=n(1283),A=n(1276),M=n(513),L=n(262),U=(n(1380),"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}),B=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),F=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={tipShown:!1,tipContent:"",tipX:0,tipY:0,tipPosition:"bottom"},e.handleMouseDown=e.handleMouseDown.bind(e),e.handleCopy=e.handleCopy.bind(e),e.handleTipClose=e.handleTipClose.bind(e),e.rightClickX=-1,e.rightClickY=-1,e}return a(t,e),B(t,[{key:"getRange",value:function(e){if(e&&e.rangeCount>0)return e.getRangeAt(0)}},{key:"getExtraCopyright",value:function(e,t,n){var r=["作者："+t,"链接："+e,"来源：知乎","著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"],o=["",""];return r=n?r.concat(o):o.concat(r)}},{key:"getCopyText",value:function(e,t,n,r){var o=this.getExtraCopyright(t,n,r).join("\n");return r?o+e:e+o}},{key:"getRangeHtml",value:function(e){var t=document.createElement("div");return t.appendChild(e.cloneContents()),t.outerHTML}},{key:"getCopyHtml",value:function(e,t,n,r){var o=this.getExtraCopyright(t,n,r).join("<br />");return"<div>"+(r?o+e:e+o)+"</div>"}},{key:"randomRange",value:function(e,t){return Math.floor(Math.random()*(t-e)+e)}},{key:"addCopyright",value:function(e,t,n){if(window.getSelection){var r=window.getSelection(),o=this.getRange(r),a=o.toString().trim(),i=this.getRangeHtml(o);if(a&&!(a.length<128)){var c=a.length>=512,l=this.getCopyHtml(i,t,n,c),s=this.getCopyText(a,t,n,c),u=e.nativeEvent.clipboardData;if("object"===(void 0===u?"undefined":U(u))){if(u.setData("text/html",'<meta charset="utf-8">'+l),u.setData("text/plain",s),u.getData("text/plain")&&u.getData("text/plain").length>0)return void e.preventDefault()}var p=document.createElement("div");p.innerHTML=l;var f=p.firstChild;f.style.position="fixed",f.style.left="-9999px",document.body.appendChild(f),r.selectAllChildren(f),setTimeout(function(){document.body.removeChild(f),r.removeAllRanges(),r.addRange(o)},200)}}}},{key:"showTip",value:function(e,t){if(window.getSelection){var n=window.getSelection(),r=this.getRange(n),o=r.toString().trim(),a=this.randomRange(44,66);if(!(o.length<=a)){e.preventDefault(),e.stopPropagation();var i=r.getBoundingClientRect(),c=window.pageYOffset,l=this.rightClickX,s=this.rightClickY,u=void 0,p="bottom";if(-1!==s)u=s+3;else{var f=this.props.viewPort,d=i.top+c,h=i.bottom+c,m=c+f.top+52,b=c+f.bottom-52;h<m?u=m-52:h<b?u=h:(p="top",u=d>m&&d<b?d:b+52)}var v=-1!==l?l+3:i.left+(i.right-i.left)/2-12;this.setState({tipShown:!0,tipContent:t,tipX:v,tipY:u,tipPosition:p}),this.rightClickX=-1,this.rightClickY=-1}}}},{key:"handleTipClose",value:function(){this.setState({tipShown:!1})}},{key:"handleCopy",value:function(e){var t=this.context.currentUser,n=this.props.data,r=n.author,o=n.type,a=n.id,i=n.question,c=n.reshipmentSettings,l=n.relationship;l=void 0===l?{}:l;var s=l.isAuthorized,u="";if("article"===o?u="https://zhuanlan.zhihu.com/p/"+a:"answer"===o&&(u="https://www.zhihu.com/question/"+i.id+"/answer/"+a),!t||t.urlToken!==r.urlToken)switch(c){case"disallowed":this.showTip(e,y.a.createElement("a",{href:"https://www.zhihu.com/terms#sec-licence-6"},"禁止转载"));break;case"need_payment":if(!s){this.showTip(e,y.a.createElement("a",{href:"https://www.zhihu.com/copyright/apply?answer="+a},"申请转载"));break}this.showTip(e,"已获授权，复制成功");default:this.addCopyright(e,u,r.name)}}},{key:"handleMouseDown",value:function(e){3===e.nativeEvent.which&&(this.rightClickX=e.pageX,this.rightClickY=e.pageY)}},{key:"render",value:function(){var e=this.props,t=e.onRef,n=e.tag,r=e.html,o=e.children,a=e.onClick,i=e.className,c=e.itemProp,l=e.style,s=e.prefix,u=this.state,p=u.tipShown,f=u.tipContent,d=u.tipX,h=u.tipY,m=u.tipPosition;return y.a.createElement("div",{ref:t,onClick:a,className:i,style:l},s,y.a.createElement(L.a,{itemProp:c,tag:n,html:r,onCopy:this.handleCopy,onMouseDown:this.handleMouseDown,className:"CopyrightRichText-richText"}),o,y.a.createElement(M.a,{shown:p,timeout:1e4,hideOnClick:!0,onClose:this.handleTipClose,x:d,y:h,position:m,content:f,className:"CopyrightRichText-tooltip"}))}}]),t}(v.Component);F.contextTypes={currentUser:b.a.object},F.propTypes={onRef:b.a.func,viewPort:b.a.object};var V,z,q=F,H=n(508),W=n(19),G=n(486),X=n.n(G),Y=n(481),K=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Q=i(["发布于",""],["发布于",""]),Z=i(["编辑于",""],["编辑于",""]),J=(z=V=function(e){function t(){return c(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),K(t,[{key:"render",value:function(){var e=this.props,t=e.href,n=e.created,r=e.updated,o=e.onClick;return y.a.createElement("div",{className:"ContentItem-time"},y.a.createElement(W.Link,{to:t,target:"_blank",onClick:o},y.a.createElement("span",{"data-tooltip":X()(Q,Object(Y.d)(n))},r!==n?X()(Z,Object(Y.g)(r)):X()(Q,Object(Y.g)(n)))))}}]),t}(v.Component),V.propTypes={href:b.a.string,created:b.a.number,updated:b.a.number},z),$=J,ee=n(70),te=n(530),ne=n(1301);n(1381);n.d(t,"a",function(){return $});var re,oe,ae,ie,ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},le=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),se=/.*?(class="link-box")/,ue=800,pe=400,fe=(re=Object(g.connect)(h,{updateReadStatus:te.b},null,{withRef:!0}))((ie=ae=function(e){function t(){var e,n,r,o;p(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state=ce({},r.getInitTruncatedState(r.props),{shouldSticky:!1,offset:0}),r.truncateContent=function(){var e=r.props.isMobile,t=e?pe:ue,n=r.props.expandedHeight||t;(!r.content||r.content.scrollHeight<n)&&r.setState({isTruncated:!1,isExpanded:!1}),r.content&&r.content.scrollHeight>r.content.offsetHeight&&r.setState({contentCollapsed:!0})},r.updateStateInBrowser=function(){var e=r.props,t=e.excerpt,n=e.html,o=e.expanded,a=e.cover,i=e.unescapable,c=e.limit,l=e.limitWithImage,s=e.truncateHTMLOptions,u=e.truncateDisabled,p=!0,f=r.state.truncatedContent;if(t&&(se.test(t)||u))f=t;else if(!i){var d=a?l:c,h=r.truncate(n,d,s);p=h.isTruncated,f=h.content}return{isTruncated:p,isExpanded:n&&o,truncatedContent:f,previewImg:null}},r.checkOpenInAppStyle=function(e){},r.toggle=function(e){r.isCollapsed()?r.handleExpand(e):r.handleCollapse(e)},r.handleExpand=function(e){var t=r.props.zaIds.expand;I.default.trackEvent(r,ce({action:"Expand",name:e&&e.target.textContent},t&&{id:t}));var n=r.props.onExpand;if(n)return void n(e);var o=r.props,a=o.onToggleExpend,i=o.data,c=i.type,l=i.id;r.context.currentUser&&Object(ne.c)("article"===c?"post":c,l,ne.a);a&&a(!0),r.setState({isExpanded:!0},function(){"article"===c&&Object(x.a)(r.el,function(){I.default.trackEvent(r,{action:"ReadFinish"})})})},r.handleCollapse=function(){var e=r.props.onToggleExpend;I.default.trackEvent(r,{action:"Collapse",element:"Button"});e&&e(!1),r.setState({isExpanded:!1},function(){return r.checkOpenInAppStyle(!1)})},r.handlePreview=function(e){var t=r.state,n=t.isExpanded,o=t.isTruncated,a=o&&!n,i=e.target;!a&&"IMG"===i.tagName&&i.classList.contains("zh-lightbox-thumb")&&r.setState({previewImg:i})},r.handlePositionStatusChange=function(e){var t=r.props.onPositionStatusChange;t&&(t(e),r.checkOpenInAppStyle("fixed"===e))},r.handleObserve=function(e){var t=e[0].intersectionRatio;if(t||!document.querySelector("#root").style.position){var n=t>0;n!==r.state.shouldSticky&&(r.setState({shouldSticky:n}),n||r.checkOpenInAppStyle(!1))}},r.handleTrunObserve=function(e){var t=r.props,n=t.data,o=(n.type,n.id,t.updateReadStatus,e[0]),a=o.intersectionRatio,i=o.isIntersecting;r.truncateComputed||(a>0||i)&&(setTimeout(function(){return r.truncateContent()}),r.truncateComputed=!0)},r.isCollapsed=function(){var e=r.props,t=e.after,n=e.before,o=e.unescapable,a=r.state,i=a.isExpanded,c=a.isTruncated;return!n&&!t||o?c&&!i:!i},o=n,f(r,o)}return d(t,e),le(t,[{key:"componentDidMount",value:function(){var e=this;this.setState(ce({},this.updateStateInBrowser(),{viewPort:{top:148,bottom:window.innerHeight-56}})),Object(x.a)(this.el,function(){var t=e.props,n=t.data,r=n.type,o=n.id,a=t.expanded;e.context.currentUser&&a&&Object(ne.c)("article"===r?"post":r,o,ne.a)})}},{key:"componentWillReceiveProps",value:function(e){this.props.data.id!==e.data.id&&this.setState(this.getInitTruncatedState(e))}},{key:"componentWillUpdate",value:function(e,t){if(this.state.isExpanded&&!t.isExpanded){var n=this.el.getBoundingClientRect();n.top<this.props.topExcludedHeight&&(this.rect=n,this.scroll=window.pageYOffset)}}},{key:"componentDidUpdate",value:function(e,t){if(t.isExpanded&&!this.state.isExpanded&&this.rect){var n=this.rect,r=n.top,o=n.bottom,a=n.height,i=this.el.offsetHeight,c=window,l=c.innerHeight,s=o<l?i-a:r-(l-i);window.scrollTo(0,this.scroll+s),this.rect=null,this.scroll=null}}},{key:"getInitTruncatedState",value:function(e){var t=e.excerpt,n=e.html,r=e.expanded,o=e.unescapable;return{isTruncated:t.length<=n.length,isExpanded:r,truncatedContent:o?n:t,previewImg:null}}},{key:"truncate",value:function(e,t,n){var r=Object(N.b)(e,t,n);return{isTruncated:r.isTruncated,content:r.content}}},{key:"renderActions",value:function(){var e=this,t=this.props,n=t.children,r=t.unescapable,o=t.noCollapsed,a=t.expandText,i=void 0===a?"展开阅读全文":a,c=t.onClick,l=t.videoData,s=this.state,u=s.isExpanded,p=s.isTruncated,f=s.shouldSticky,d=s.offset;if(!u)return[r&&p&&!l&&y.a.createElement(O.c,{key:"expand-button",preset:"plain",className:"ContentItem-rightButton",onClick:c||this.handleExpand},i,y.a.createElement(_.g,{className:"ContentItem-arrowIcon",center:!0})),n&&y.a.createElement(A.a,{key:"actions"},n)];var h=(n||!o)&&y.a.createElement(A.a,{className:"RichContent-actions"},n,!o&&y.a.createElement(O.c,{"data-zop-retract-question":!0,preset:"plain",className:"ContentItem-rightButton",onClick:this.handleCollapse},y.a.createElement("span",{className:"RichContent-collapsedText"},"收起"),y.a.createElement(_.g,{className:"ContentItem-arrowIcon is-active",center:!0})));return f&&h?y.a.createElement(T.a,{offset:d,bottom:!0,container:function(){return e.el.parentNode},onPositionStatusChange:this.handlePositionStatusChange},h):h}},{key:"renderText",value:function(){var e=this,t=this.props,n=t.html,r=t.excerpt,o=t.data,a=t.itemProp,i=void 0===a?"text":a,c=t.expandText,l=void 0===c?"阅读全文":c,s=t.onClick,u=t.prefix,p=t.unescapable,f=t.collapsedHeight,d=this.state,h=d.truncatedContent,m=d.previewImg,b=d.viewPort,v=d.contentCollapsed,g=this.isCollapsed(),w=h||r,C="answer"===o.type?Object(j.a)(n):n,T=g?w:C,S=y.a.createElement(q,ce({itemProp:i,key:g,className:E()("RichContent-inner",{"RichContent-inner--collapsed":v}),style:g&&p?{maxHeight:f}:null,tag:"span",onRef:function(t){e.content=t},data:o,html:T,viewPort:b,prefix:u},g&&{onClick:s||this.handleExpand}),!p&&g&&y.a.createElement(O.c,{preset:"plain",className:"ContentItem-more"},l,y.a.createElement(_.g,{className:"ContentItem-arrowIcon",center:!0})),m&&y.a.createElement(k.a,{img:m,onClose:function(){return e.setState({previewImg:null})}}));return p?y.a.createElement(P.a,{rootMargin:"200px 0px 200px 0px",onObserve:this.handleTrunObserve},S):S}},{key:"render",value:function(){var e=this,n=this.props,r=n.unescapable,o=n.after,a=n.before,i=n.extra,c=n.cover,l=n.hasVideo,s=n.renderCanExpandExtra,u=n.className,p=n.videoData,f=n.handleClickVideoMoreButton,d=n.getShortcutScope,h=this.state.isExpanded,m=this.isCollapsed(),b=p?y.a.createElement(v.Fragment,null,y.a.createElement(H.a,{data:p}),y.a.createElement("p",{className:"RichContent-videoMore",onClick:f},"点击查看全文")):this.renderText(),g=h?y.a.createElement(P.a,{rootMargin:"-240px 0px",onObserve:this.handleObserve},b):b;return y.a.createElement("div",{className:E()("RichContent",u,{"is-collapsed":m,"RichContent--unescapable":r}),ref:function(t){e.el=t},onClick:this.handlePreview},y.a.createElement(D.b,{keyMap:{TOGGLE_EXPAND:"o"},handlers:{TOGGLE_EXPAND:this.toggle},getScope:d}),!m&&a,!r&&m&&c&&y.a.createElement(t.Cover,{url:c,hasVideo:l,onClick:this.handleExpand}),g,i||"function"==typeof s&&s(h,this.handleExpand),!m&&o,this.renderActions())}}]),t}(v.Component),ae.contextTypes={currentUser:b.a.object},ae.propTypes={unescapable:b.a.bool,expanded:b.a.bool,noCollapsed:b.a.bool,limit:b.a.number,limitWithImage:b.a.number,collapsedHeight:b.a.number,html:b.a.string,excerpt:b.a.string,truncateDisabled:b.a.bool,before:b.a.node,after:b.a.node,prefix:b.a.node,extra:b.a.node,renderCanExpandExtra:b.a.func,topExcludedHeight:b.a.number,onPositionStatusChange:b.a.func,type:b.a.string,data:b.a.object,cover:b.a.string,hasVideo:b.a.bool,truncateHTMLOptions:b.a.object,expandText:b.a.string,onToggleExpend:b.a.func,videoData:b.a.object,handleClickVideoMoreButton:b.a.func,zaIds:b.a.shape({expand:b.a.number}),getShortcutScope:b.a.func},ae.defaultProps={limit:160,limitWithImage:100,expanded:!1,unescapable:!1,topExcludedHeight:60,excerpt:"",hasVideo:!1,data:{},collapsedHeight:400,zaIds:{}},ae.Cover=function(e){var t=e.url,n=e.hasVideo,r=u(e,["url","hasVideo"]);return y.a.createElement("div",ce({className:E()("RichContent-cover",{"RichContent-cover--mobile":!1})},r),y.a.createElement("div",{className:"RichContent-cover-inner"},y.a.createElement(S.a,{thumbnail:Object(R.a)(t,"60w"),url:Object(R.a)(t,"400x224"),alt:"cover"})),n&&y.a.createElement(C.a,{className:"RichContent-cover-play"}))},oe=ie))||oe;t.b=fe},1290:function(e,t,n){"use strict";var r=function(e,t,n,r,o,a,i,c){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=[n,r,o,a,i,c],u=0;l=new Error(t.replace(/%s/g,function(){return s[u++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}};e.exports=r},1291:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return{x:e.left+e.width/2,y:e.top+e.height/2}}var c=n(1),l=n.n(c),s=n(0),u=n.n(s),p=n(2),f=n.n(p),d=n(68),h=n(485),m=n(48),b=n(174),v=n(1323),y=(n.n(v),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),g={top:10,left:20},w={top:0,left:0},E=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={transEnded:!1,rect:null,translate:null,scale:null,url:null},e.getBoundingClientRect=function(){var t=e.props,n=t.img,r=t.data,o=n.getBoundingClientRect(),a=o.left,i=o.top,c=o.width,l=o.height,s=r.width,u=r.height,p={left:a,top:i,width:c,height:l},f=1;return s>u?(p.height=l,f=l/u,p.width=s*f,p.left=a+(c-p.width)/2,p.top=i+(l-p.height)/2):s<u&&(p.width=c,f=c/s,p.height=u*f,p.left=a+(c-p.width)/2,p.top=i+(l-p.height)/2),p},e.handleClick=e.handleClick.bind(e),e.handleTransEnd=e.handleTransEnd.bind(e),e.handleOriginLoad=e.handleOriginLoad.bind(e),e}return a(t,e),y(t,[{key:"componentWillMount",value:function(){h.a();var e=this.props,t=e.img,n=e.isOriginalUrl,r=this.loadImg=new Image;r.src=Object(d.a)(t.dataset.original,"r"),r.addEventListener("load",this.handleOriginLoad),this.setState({rect:!1===n?this.getBoundingClientRect():t.getBoundingClientRect()})}},{key:"componentDidMount",value:function(){var e=this,t=this.props.img,n=t.dataset.rawwidth,r=t.naturalWidth;setTimeout(function(){return e.setState(Object.assign({},e.computeTransition(e.state.rect,{width:n||r})))})}},{key:"componentWillUnmount",value:function(){this.loadImg.removeEventListener("load",this.handleOriginLoad),h.b()}},{key:"handleClick",value:function(){this.setState({translate:null,scale:null})}},{key:"handleTransEnd",value:function(){var e=this.state,t=e.translate,n=e.scale,r=this.props.onClose;t&&n?(this.setState({transEnded:!0}),this.scrollNode.style.overflow="auto"):r()}},{key:"handleOriginLoad",value:function(e){this.setState({url:e.target.src})}},{key:"computeTransition",value:function(e,t){var n=this.props,r=n.transitionType,o=n.data,a=Object(m.a)(navigator.userAgent).Mobile?w:g,c=a.top,l=a.left,s=window,u=s.innerWidth,p=s.innerHeight,f={left:0,top:0,width:u,height:p},d=i(f),h={width:f.width-2*l,height:f.height-2*c},b={},v={},y=void 0;return 1===r?(b.width=h.width>o.width?o.width:h.width,y=b.width/o.width,b.height=o.height*y,v={x:(h.width-b.width)/2+l,y:b.height<h.height?(h.height-b.height)/2+c:g.top}):(b.width=h.width>t.width?t.width:h.width,y=b.width/e.width,b.height=e.height*y,v={x:d.x-e.width/2,y:(b.height<h.height?d.y:g.top+b.height/2)-e.height/2}),{translate:v,scale:y}}},{key:"render",value:function(){var e=this,t=this.props,n=t.img,r=t.isOriginalUrl,o=t.data,a=t.transitionType,i=t.className,c=this.state,l=c.translate,s=c.scale,p=c.rect,h=c.url,v=c.transEnded,y=l&&s,E=1,O="",C=void 0;if(1===a){var _=Object(m.a)(navigator.userAgent).Mobile?w:g,k=_.left;C=Math.min(window.innerWidth-2*k,o.width);var T=p.width/C;O=y?"translate3d("+l.x+"px, "+l.y+"px, 0) scale3d(1, 1, 1) ":"translate3d("+p.left+"px, "+p.top+"px, 0) scale3d("+T+", "+T+", 1) ",E=y?1:0}else O=y?"translate3d("+l.x+"px ,"+l.y+"px,0) scale3d("+s+","+s+",1) ":"translate3d("+p.left+"px,"+p.top+"px,0)";return u.a.createElement(b.a,null,u.a.createElement("div",{className:f()("ImageView",i,{"is-active":y}),style:{paddingBottom:g.top},onClick:this.handleClick},u.a.createElement("div",{className:"ImageView-inner",ref:function(t){e.scrollNode=t}},u.a.createElement("img",{ref:function(t){e.imgEl=t},src:!1===r?Object(d.a)(n.dataset.original,"r"):v&&h||n.src,className:f()("ImageView-img",{"ImageView-transformOrigin":1===a}),style:{width:C||p.width,transform:O,opacity:E},onTransitionEnd:this.handleTransEnd,alt:"preview"}))))}}]),t}(s.Component);E.propTypes={img:l.a.object.isRequired,onClose:l.a.func.isRequired},t.a=E},1293:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e){var t=e.className,n=e.meta,o=e.children,a=s()(e,["className","meta","children"]),i=f.Children.only(o),c=i.type.displayName,l={className:m()("Tabs-link",i.props.className)};return void 0!==n&&(l.children=[].concat(r(f.Children.toArray(i.props.children)),[d.a.createElement("span",{key:"meta",className:"Tabs-meta"},n)])),"Link"!==c&&"IndexLink"!==c||(l.activeClassName="is-active"),d.a.createElement("li",Object.assign({role:"tab",className:m()("Tabs-item",t,{"Tabs-item--noMeta":void 0===n})},a),Object(f.cloneElement)(i,l))}n.d(t,"a",function(){return c});var l=n(13),s=n.n(l),u=n(1),p=n.n(u),f=n(0),d=n.n(f),h=n(2),m=n.n(h),b=n(1343),v=(n.n(b),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),y=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),v(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.onRef,r=s()(e,["className","onRef"]);return d.a.createElement("ul",Object.assign({ref:n,role:"tablist",className:m()("Tabs",t)},r))}}]),t}(f.Component);c.propTypes={meta:p.a.node},t.b=y},1294:function(e,t){},1295:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=(n(1341),function(e){var t=e.avatar,n=e.bottom,r=e.button,a=e.className,c=e.height,l=e.icon,s=e.inline,u=e.right,p=e.style,f=void 0===p?{}:p,d=e.title,h=e.width,m=Object.assign({},f);return h&&(m.width=h+"px"),c&&(m.height=c+"px"),n&&(m.marginBottom=n+"px"),u&&(m.marginRight=u+"px"),o.a.createElement("div",{className:i()("Holder",a,{"Holder--inline":s,"Holder--title":d,"Holder--icon":l,"Holder--button":r,"Holder--avatar":t}),style:m})}),l=c;n.d(t,"a",function(){return l})},1300:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e,t){var n=t.id,r=e.entities.topics,o=e.loading.local;return{topic:r[n],isLoading:Boolean(o["topic/"+n])}}function l(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f,d,h,m,b,v,y=n(1),g=n.n(y),w=n(0),E=n.n(w),O=n(5),C=n(2),_=n.n(C),k=n(71),T=n(26),j=n.n(T),S=n(3),P=n(489),x=n(499),N=n(6),R=n(262),I=n(67),D=n(10),A=n(101),M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),U=(d=f=function(e){function t(){var e,n,r,i;o(this,t);for(var c=arguments.length,l=Array(c),s=0;s<c;s++)l[s]=arguments[s];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.load=function(){var e=r.props,t=e.dispatch,n=e.id;t(Object(A.q)(n))},r.track=function(){var e=r.props.topic;r.hoverCardElement&&e&&(N.default.setModule(r.hoverCardElement,{module:"TopicItem"},{card:{content:{type:"Topic",token:e.id,item_num:e.questionsCount,follower_num:e.followersCount}}}),N.default.trackCardShow(r.hoverCardElement))},r.handleFollow=r.context.authRequired(function(){var e=!r.props.topic.isFollowing;N.default.trackEvent(r.hoverCardElement,{action:e?"Follow":"UnFollow",element:"Button"});var t=r.props,n=t.dispatch,o=t.id;n(Object(A.A)(o))},D.L.follow),r.handleOpen=function(){r.load(),r.track()},i=n,a(r,i)}return i(t,e),L(t,[{key:"isTopicReady",value:function(){var e=this.props.topic||{},t=e.questionsCount,n=e.followersCount,r=e.bestAnswersCount;return!(void 0===t&&void 0===n&&void 0===r)}},{key:"render",value:function(){var e=this,t=this.props,n=t.toggler,o=t.topic,a=t.id,i=t.isLoading,c=t.onRef,l=r(t,["toggler","topic","id","isLoading","onRef"]),s=o||{},u=s.name,p=s.introduction,f=s.questionsCount,d=s.followersCount,h=s.bestAnswersCount,m=s.avatarUrl,b=s.isFollowing,v="//www.zhihu.com/topic/"+a;return E.a.createElement(x.b,M({toggler:n,preventCloseOnTarget:!0,isLoading:i,onOpen:this.handleOpen,size:"large"},l,{onRef:function(t){c&&"function"==typeof c&&c(t),e.hoverCardElement=t}}),E.a.createElement(x.a,{title:E.a.createElement("a",{target:"_blank",href:v},u),avatarUrl:m}),p&&E.a.createElement("div",null,E.a.createElement(R.a,{className:"HoverCard-description",html:p})),E.a.createElement("div",null,this.isTopicReady()&&E.a.createElement(P.a,null,E.a.createElement(P.a.Item,{tag:I.a,preset:"plain",a:!0,to:v+"/questions",name:"问题",value:f,target:"_blank"}),E.a.createElement(P.a.Item,{tag:I.a,preset:"plain",a:!0,to:v+"/top-answers",name:"精华",value:h,target:"_blank"}),E.a.createElement(P.a.Item,{tag:I.a,preset:"plain",a:!0,to:v+"/followers",name:"关注者",target:"_blank",value:d})),E.a.createElement("div",{className:"HoverCard-buttons"},o&&E.a.createElement(S.c,{preset:"primary",color:b?"grey":"blue",onClick:this.handleFollow},b?"已关注":"关注话题"))))}}]),t}(w.Component),f.contextTypes={authRequired:g.a.func},d),B=Object(O.connect)(c)(U),F=n(70),V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),q=(h=Object(O.connect)(function(e){return{ua:Object(F.j)(e)}}))((v=b=function(e){function t(){return s(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),z(t,[{key:"render",value:function(){var e=this.props,t=e.ua,n=e.topic,r=n.name,o=n.avatarUrl,a=n.id,i=e.avatar,c=e.avatarProps,s=e.noHoverCard,u=e.noLink,p=e.style,f=e.className,d=e.children,h=l(e,["ua","topic","avatar","avatarProps","noHoverCard","noLink","style","className","children"]),m=void 0===s?t.Mobile:s,b=void 0;b=i?E.a.createElement(k.a,V({className:"TopicLink-avatar",url:o,alt:r},c)):d||r,u||m||(b=E.a.createElement(B,{toggler:b,id:a}));var v=u?"span":"a";return E.a.createElement(v,V({style:p,className:_()("TopicLink",f),href:"//www.zhihu.com/topic/"+a,target:"_blank"},j()(h,["dispatch"])),b)}}]),t}(w.Component),b.propTypes={topic:g.a.object.isRequired,user:g.a.object,avatar:g.a.bool,noHoverCard:g.a.bool,noLink:g.a.bool,style:g.a.object,className:g.a.string,children:g.a.node},b.defaultProps={avatar:!1,noLink:!1},m=v))||m;t.a=q},1301:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return l});var r=n(105),o=n.n(r),a=n(184),i=function(e,t){var n=[];return o()(function(){for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];n.push(o),setTimeout(function(){n.length&&(t(n),n.length=0)},e)},function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return String(t)})}(550,function(e){return Object(a.b)("/lastread/touch",{method:"POST",form:{items:JSON.stringify(e)}})}),c="read",l="touch";t.c=i},1302:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function P(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function R(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var A,M,L,U,B,F,V,z,q,H,W,G,X,Y,K,Q,Z,J,$,ee,te=n(0),ne=n.n(te),re=n(2),oe=n.n(re),ae=n(8),ie=["online_roundtable","relevant","editor_recommendation","roundtable","special","weekly","daily"],ce={online_roundtable:ae._27,relevant:ae._26,editor_recommendation:ae._25,roundtable:ae._27,special:ae._28,weekly:ae._29,daily:ae._24},le={online_roundtable:"知乎圆桌",relevant:"亲自答",editor_recommendation:"编辑推荐",roundtable:"知乎圆桌精选",special:"专题收录",weekly:"知乎周刊收录",daily:"知乎日报收录"},se={relevant:"亲自答",editor_recommendation:"编辑推荐",roundtable:"圆桌精选",special:"专题收录",weekly:"周刊收录",daily:"日报收录"},ue={online_roundtable:"此回答被收录进圆桌精选",relevant:"此回答由问题相关方亲自撰写"},pe={online_roundtable:"前往圆桌",roundtable:"前往圆桌",special:"前往专题",weekly:"前往周刊",daily:"前往日报"},fe={online_roundtable:"圆桌",relevant:"亲自答",editor_recommendation:"编辑推荐",roundtable:"圆桌",special:"专题收录",weekly:"周刊收录",daily:"日报收录"},de=(n(1454),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),he={alpha:1,group:"GYL02A"},me={brand_special:ae.o},be=de({},ce,{COMMERCIAL_ICONS:me}),ve=function(e){return"GBL07A"===(e||he).group?"commercial":"positive"},ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.labelInfo;if(!t)return null;var n=t.type,r=t.text,o=t.foregroundColor,a=ve(o),i=be[n];return ne.a.createElement("span",{className:oe()("Label-icon","Label-iconColor--"+a)},ne.a.createElement(i,{center:!0,className:"Label-iconImg"}),r)},ge=n(1),we=n.n(ge),Ee=n(5),Oe=(n(1455),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Ce=(M=A=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),Oe(t,[{key:"render",value:function(){var e=this.props,t=e.commercial,n=e.positive,r=e.neutral,o=e.circle,a=e.paidContent;if(!(t||n||r||o||a))return null;var i=[a,t,n,r,o].filter(Boolean).slice(0,2);return ne.a.createElement("div",{className:"Labels"},i.map(function(e,t){return ne.a.createElement("div",{className:"Labels-item",key:t},e)}))}}]),t}(ne.a.Component),A.propTypes={commercial:we.a.node,positive:we.a.node,neutral:we.a.node,circle:we.a.node,paidContent:we.a.node},M),_e=Ce,ke=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return[le[e],t].filter(Boolean).join(" · ")},Te=function(e,t){switch(t){case"online_roundtable":return e.onlineRoundtable?{icon:ce[t],title:ke(t,e.onlineRoundtable.name),shortTitle:se[t],description:ue[t],link:"https://www.zhihu.com/roundtable/"+e.onlineRoundtable.urlToken,linkDescription:pe[t],zaName:fe[t]}:null;case"relevant":return e.relevantInfo&&e.relevantInfo.isRelevant?{icon:ce[t],title:ke(t),shortTitle:se[t],description:ue[t],zaName:fe[t]}:null;default:var n=e.includedInfos?e.includedInfos.find(function(e){return e.type===t}):null;return n?{icon:ce[t],title:ke(t,n.title),shortTitle:se[t],description:ue[t],link:n.url,linkDescription:pe[t],zaName:fe[t]}:null}},je=Te,Se=n(1456),Pe=n.n(Se),xe=n(522),Ne=n(6),Re=(n(1461),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Ie=(U=L=function(e){function t(){var e,n,r,o;i(this,t);for(var a=arguments.length,l=Array(a),s=0;s<a;s++)l[s]=arguments[s];return n=r=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={expanded:!1,width:null},r.bar=null,r.list=null,r.popover=null,r.trackListCardShow=Pe()(function(){Ne.default.setModule(r.list,{module:"Content",module_name:"正向列表卡片"}),Ne.default.trackCardShow(r.list,{id:3770})}),r.expand=function(){r.props.isMobile&&r.setState({width:r.bar.getBoundingClientRect().width}),r.setState({expanded:!0},r.trackListCardShow)},r.collapse=function(){r.setState({expanded:!1})},r.handleToggle=function(){r.state.expanded?r.collapse():r.expand()},r.handleDismiss=function(e){r.state.expanded&&(r.bar.contains(e.target)||r.popover.contains(e.target)||r.collapse())},o=n,c(r,o)}return l(t,e),Re(t,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleDismiss),document.addEventListener("touchstart",this.handleDismiss)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleDismiss),document.removeEventListener("touchstart",this.handleDismiss)}},{key:"render",value:function(){var e=this,t=this.props,n=t.isMobile,r=t.data,o=t.isExpandable,a=t.renderBar,i=t.renderItems,c=o(r);return ne.a.createElement("div",{className:"PositiveLabelLayout"},ne.a.createElement("div",{ref:function(t){return e.bar=t},className:"PositiveLabelLayout-bar"},a(r,{expandable:c,onExpand:this.handleToggle})),c&&ne.a.createElement(xe.a,{onRef:function(t){return e.popover=t},className:oe()("PositiveLabelLayout-popover",{"is-mobile":n}),isOpen:this.state.expanded,target:this.bar,placement:n?"bottom":"bottom-right",arrowed:n,listenResize:!0},ne.a.createElement("div",{ref:function(t){return e.list=t},className:"PositiveLabelLayout-list",style:{width:this.state.width}},i(r))))}}]),t}(ne.a.Component),L.propTypes={isMobile:we.a.bool.isRequired,data:we.a.object.isRequired,isExpandable:we.a.func.isRequired,renderBar:we.a.func.isRequired,renderItems:we.a.func.isRequired},L.defaultProps={isMobile:!1},U),De=Ie,Ae=n(265),Me=(n(1462),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Le=(F=B=function(e){function t(){var e,n,r,o;s(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.root=null,r.handleLinkClick=function(e){var t=r.props,n=t.link,o=t.onLinkClick,a=t.zaName;Ne.default.trackEvent(r.root,{id:3771,name:"一个"},{button:{text:a}}),o&&o(e,n)},o=n,u(r,o)}return p(t,e),Me(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.expandable,r=t.zaName;Ne.default.setModule(this.root,{module:"Content",module_name:r}),Object(Ae.a)(this.root,function(){Ne.default.trackCardShow(e.root,{id:3769,name:n?"多个":"一个"})})}},{key:"renderDesktopContent",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.description,o=e.meta,a=e.link,i=e.linkDescription;return ne.a.createElement("div",{className:"PositiveLabelBar-content"},ne.a.createElement(t,{className:"PositiveLabelBar-icon"}),ne.a.createElement("div",{className:"PositiveLabelBar-main"},ne.a.createElement("span",{className:"PositiveLabelBar-title"},n),r&&ne.a.createElement("span",{className:"PositiveLabelBar-description"}," "+r)),(a||o)&&ne.a.createElement("div",{className:"PositiveLabelBar-side"},a&&!o&&ne.a.createElement("span",{className:"PositiveLabelBar-link"},i&&ne.a.createElement("span",{className:"PositiveLabelBar-linkDescription"},i),ne.a.createElement(ae.i,{className:"PositiveLabelBar-linkIcon"})),o&&ne.a.createElement("span",{className:"PositiveLabelBar-meta"},o)))}},{key:"renderMobileContent",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.shortTitle,o=e.description,a=e.meta,i=e.link,c=e.expandable;return ne.a.createElement("div",{className:"PositiveLabelBar-content"},ne.a.createElement(t,{className:"PositiveLabelBar-icon"}),ne.a.createElement("div",{className:"PositiveLabelBar-main"},ne.a.createElement("span",{className:"PositiveLabelBar-title"},a?r||n:n),o&&!a&&ne.a.createElement("span",{className:"PositiveLabelBar-description"}," "+o),a&&ne.a.createElement("span",{className:"PositiveLabelBar-meta"}," "+a)),(i||c)&&ne.a.createElement("div",{className:"PositiveLabelBar-side"},i&&!c&&ne.a.createElement("span",{className:"PositiveLabelBar-link"},ne.a.createElement(ae.i,{className:"PositiveLabelBar-linkIcon"})),c&&ne.a.createElement("span",{className:"PositiveLabelBar-expand"},"点击查看")))}},{key:"render",value:function(){var e=this,t=this.props,n=t.isMobile,r=t.link,o=t.expandable,a=t.onExpand,i=n?this.renderMobileContent():this.renderDesktopContent();return r&&!o?ne.a.createElement("a",{ref:function(t){return e.root=t},className:"PositiveLabelBar PositiveLabelBar--link",href:r,onClick:this.handleLinkClick},i):o?ne.a.createElement("div",{ref:function(t){return e.root=t},className:"PositiveLabelBar PositiveLabelBar--expandable",onClick:a},i):ne.a.createElement("div",{ref:function(t){return e.root=t},className:"PositiveLabelBar"},i)}}]),t}(ne.a.Component),B.propTypes={isMobile:we.a.bool.isRequired,icon:we.a.func.isRequired,title:we.a.string.isRequired,shortTitle:we.a.string,description:we.a.string,meta:we.a.string,link:we.a.string,linkDescription:we.a.string,onLinkClick:we.a.func,expandable:we.a.bool.isRequired,onExpand:we.a.func,zaName:we.a.string},B.defaultProps={isMobile:!1,expandable:!1},F),Ue=Le,Be=(n(1463),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Fe=(z=V=function(e){function t(){var e,n,r,o;f(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.root=null,r.handleLinkClick=function(e){var t=r.props,n=t.link,o=t.onLinkClick,a=t.zaName;Ne.default.trackEvent(r.root,{id:3771,name:"一个"},{button:{text:a}}),o&&o(e,n)},o=n,d(r,o)}return h(t,e),Be(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.expandable,r=t.zaName;Ne.default.setModule(this.root,{module:"Content",module_name:r}),Object(Ae.a)(this.root,function(){Ne.default.trackCardShow(e.root,{id:3769,name:n?"多个":"一个"})})}},{key:"renderDesktopContent",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.description,o=e.linkDescription;return ne.a.createElement("div",{className:"PositiveLabelRoundtableBar-content"},ne.a.createElement(t,{className:"PositiveLabelRoundtableBar-icon"}),ne.a.createElement("div",{className:"PositiveLabelRoundtableBar-main"},ne.a.createElement("div",{className:"PositiveLabelRoundtableBar-header"},ne.a.createElement("span",{className:"PositiveLabelRoundtableBar-title"},n),ne.a.createElement("span",{className:"PositiveLabelRoundtableBar-badge"},"进行中")),ne.a.createElement("div",{className:"PositiveLabelRoundtableBar-description"},r)),ne.a.createElement("div",{className:"PositiveLabelRoundtableBar-side"},ne.a.createElement("span",{className:"PositiveLabelRoundtableBar-link"},ne.a.createElement("span",{className:"PositiveLabelRoundtableBar-linkDescriptio"},o),ne.a.createElement(ae.i,{className:"PositiveLabelRoundtableBar-linkIcon"}))))}},{key:"renderMobileContent",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.description;return ne.a.createElement("div",{className:"PositiveLabelRoundtableBar-content"},ne.a.createElement(t,{className:"PositiveLabelRoundtableBar-icon"}),ne.a.createElement("div",{className:"PositiveLabelRoundtableBar-main"},ne.a.createElement("div",{className:"PositiveLabelRoundtableBar-header"},ne.a.createElement("span",{className:"PositiveLabelRoundtableBar-title"},n),ne.a.createElement("span",{className:"PositiveLabelRoundtableBar-badge"},"进行中")),ne.a.createElement("div",{className:"PositiveLabelRoundtableBar-description"},r)),ne.a.createElement("div",{className:"PositiveLabelRoundtableBar-side"},ne.a.createElement("span",{className:"PositiveLabelRoundtableBar-link"},ne.a.createElement(ae.i,{className:"PositiveLabelRoundtableBar-linkIcon"}))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.isMobile,r=t.link,o=n?this.renderMobileContent():this.renderDesktopContent();return ne.a.createElement("a",{ref:function(t){return e.root=t},className:"PositiveLabelRoundtableBar PositiveLabelRoundtableBar--link",href:r,onClick:this.handleLinkClick},o)}}]),t}(ne.a.Component),V.propTypes={isMobile:we.a.bool.isRequired,icon:we.a.func.isRequired,title:we.a.string.isRequired,description:we.a.string,meta:we.a.string,link:we.a.string,linkDescription:we.a.string,onLinkClick:we.a.func,expandable:we.a.bool.isRequired,onExpand:we.a.func,zaName:we.a.string},V.defaultProps={isMobile:!1,expandable:!1},z),Ve=Fe,ze=(n(1464),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),qe=(H=q=function(e){function t(){var e,n,r,o;m(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=b(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.root=null,r.handleLinkClick=function(e){var t=r.props,n=t.link,o=t.onLinkClick,a=t.zaName;Ne.default.trackEvent(r.root,{id:3771,name:"多个"},{button:{text:a}}),o&&o(e,n)},o=n,b(r,o)}return v(t,e),ze(t,[{key:"renderContent",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.description,o=e.link;return ne.a.createElement("div",{className:"PositiveLabelItem-content"},ne.a.createElement(t,{className:"PositiveLabelItem-icon"}),ne.a.createElement("div",{className:"PositiveLabelItem-main"},ne.a.createElement("span",{className:"PositiveLabelItem-title"},n),r&&ne.a.createElement("span",{className:"PositiveLabelItem-description"}," "+r)),o&&ne.a.createElement("div",{className:"PositiveLabelItem-side"},ne.a.createElement("span",{className:"PositiveLabelItem-link"},ne.a.createElement(ae.i,{className:"PositiveLabelItem-linkIcon"}))))}},{key:"render",value:function(){var e=this,t=this.props.link,n=this.renderContent();return t?ne.a.createElement("a",{ref:function(t){return e.root=t},className:"PositiveLabelItem PositiveLabelItem--link",href:t,onClick:this.handleLinkClick},n):ne.a.createElement("div",{ref:function(t){return e.root=t},className:"PositiveLabelItem"},n)}}]),t}(ne.a.Component),q.propTypes={isMobile:we.a.bool.isRequired,icon:we.a.func.isRequired,title:we.a.string.isRequired,description:we.a.string,link:we.a.string,onLinkClick:we.a.func,zaName:we.a.string},q.defaultProps={isMobile:!1},H),He=qe,We=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ge=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Xe=function(e){var t=ie.map(function(t){return{type:t,props:je(e,t)}}).filter(function(e){return e.props});return t.length?{items:t}:null},Ye=(G=W=function(e){function t(){var e,n,r,o;y(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.isExpandable=function(e){return e.items.length>1&&"online_roundtable"!==e.items[0].type},r.renderBar=function(e,t){var n=t.expandable,o=t.onExpand,a=r.props,i=a.isMobile,c=a.onLinkClick,l=e.items[0],s=l.type,u=l.props,p=We({isMobile:i},u,{meta:n?"relevant"===s?"及 "+(e.items.length-1)+" 项收录":i?"等 "+e.items.length+" 项收录":"共 "+e.items.length+" 项收录":null,onLinkClick:c,expandable:n,onExpand:o});return"online_roundtable"===s?ne.a.createElement(Ve,p):ne.a.createElement(Ue,p)},r.renderItems=function(e){var t=r.props,n=t.isMobile,o=t.onLinkClick;return e.items.map(function(e){var t=e.type,r=e.props;return ne.a.createElement(He,We({key:t,isMobile:n},r,{onLinkClick:o}))})},o=n,g(r,o)}return w(t,e),Ge(t,[{key:"render",value:function(){var e=this.props,t=e.isMobile,n=e.data,r=Xe(n);return r?ne.a.createElement("div",{className:"PositiveLabel"},ne.a.createElement(De,{isMobile:t,data:r,isExpandable:this.isExpandable,renderBar:this.renderBar,renderItems:this.renderItems})):null}}]),t}(ne.a.Component),W.propTypes={isMobile:we.a.bool.isRequired,data:we.a.object.isRequired,onLinkClick:we.a.func},W.defaultProps={isMobile:!1},G),Ke=Ye,Qe=Ke,Ze=(n(1465),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Je=(Y=X=function(e){function t(){var e,n,r,o;E(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=O(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleLinkClick=function(e){var t=r.props.onLinkClick;t&&t(e)},o=n,O(r,o)}return C(t,e),Ze(t,[{key:"componentDidMount",value:function(){Ne.default.trackCardShow(this,{id:4027})}},{key:"renderDesktopContent",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.description;return ne.a.createElement("div",{className:"CircleLabelBar"},ne.a.createElement("div",{className:"CircleLabelBar-content"},ne.a.createElement(t,{className:"CircleLabelBar-icon"}),ne.a.createElement("div",{className:"CircleLabelBar-main"},ne.a.createElement("span",{className:"CircleLabelBar-title"},n),r&&ne.a.createElement("span",{className:"CircleLabelBar-description"}," "+r))))}},{key:"renderMobileContent",value:function(){var e=this,t=this.props,n=t.icon,r=t.title,o=t.linkDescription;return ne.a.createElement("div",{className:"CircleLabelBar",onClick:function(t){return e.handleLinkClick(t)}},ne.a.createElement("div",{className:"CircleLabelBar-content"},ne.a.createElement(n,{className:"CircleLabelBar-icon"}),ne.a.createElement("div",{className:"CircleLabelBar-main"},ne.a.createElement("span",{className:"CircleLabelBar-title"},r)),ne.a.createElement("div",{className:"CircleLabelBar-side"},ne.a.createElement("span",{className:"CircleLabelBar-link"},o&&ne.a.createElement("span",{className:"CircleLabelBar-linkDescription"},o),ne.a.createElement(ae.i,{className:"CircleLabelBar-linkIcon"})))))}},{key:"render",value:function(){var e=this.props.isMobile;return ne.a.createElement("div",null,e?this.renderMobileContent():this.renderDesktopContent())}}]),t}(ne.a.Component),X.propTypes={isMobile:we.a.bool.isRequired,icon:we.a.func.isRequired,title:we.a.string.isRequired,link:we.a.string,linkDescription:we.a.string,onLinkClick:we.a.func},X.defaultProps={isMobile:!1},Y),$e=Je,et=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),nt=function(e){return e?{icon:ae._49,title:"圈内说 · "+e.realmName+"认证用户撰写",hasDesktopLink:!1,hasMobileLink:!0,linkDescription:"查看 "+e.realmMemberCount+" 个回答",id:e.id}:null},rt=(Q=K=function(e){function t(){return _(this,t),k(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return T(t,e),tt(t,[{key:"render",value:function(){var e=this.props,t=e.isMobile,n=e.circleInfo,r=e.onLinkClick,o=nt(n);return o?ne.a.createElement("div",{className:"CircleLabel"},ne.a.createElement($e,et({isMobile:t},o,{onLinkClick:r}))):null}}]),t}(ne.a.Component),K.propTypes={isMobile:we.a.bool.isRequired,circleInfo:we.a.object.isRequired,onLinkClick:we.a.func},K.defaultProps={isMobile:!1},Q),ot=rt,at=ot,it=n(275),ct=(n(1466),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),lt={PURCHASE_REQUIRED:"purchase_required",VIP_FREE:"vip_free",PURCHASED:"purchased"},st=(J=Z=function(e){function t(){var e,n,r,o;j(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=S(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleClick=function(){var e=r.props.link;it.default.dispatch("base/openURL",{url:e})},o=n,S(r,o)}return P(t,e),ct(t,[{key:"renderMainContent",value:function(){var e=this.props,t=e.theme,n=e.paidInfo.type,r="dark"===t;switch(n){case lt.PURCHASE_REQUIRED:return ne.a.createElement(ne.a.Fragment,null,ne.a.createElement(ae._38,{className:"PaidContentLabel-icon"}),"包含付费内容");case lt.PURCHASED:return ne.a.createElement(ne.a.Fragment,null,ne.a.createElement(ae._38,{className:"PaidContentLabel-icon"}),"已购付费内容");case lt.VIP_FREE:return ne.a.createElement(ne.a.Fragment,null,r?ne.a.createElement(ae._73,{className:"PaidContentLabel-icon"}):ne.a.createElement(ae._72,{className:"PaidContentLabel-icon"}),"会员免费内容");default:return null}}},{key:"render",value:function(){var e=this.props.paidInfo.type,t=e===lt.VIP_FREE;return ne.a.createElement("div",{className:oe()("PaidContentLabel",{"PaidContentLabel-vipFree":t})},ne.a.createElement("div",{className:"PaidContentLabel-main"},this.renderMainContent()),ne.a.createElement(ae._11,{onClick:this.handleClick,className:"PaidContentLabel-HelpOutline"}))}}]),t}(ne.a.Component),Z.propTypes={link:we.a.string,paidInfo:we.a.object.isRequired,onPaidContentLabelClick:we.a.func},J),ut=st,pt=ut,ft=n(510),dt=n(263),ht=(n(1467),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),mt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),bt=($=Object(dt.a)())(ee=function(e){function t(){var e,n,r,o;x(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=N(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.isFetched=!1,r.loadLabels=function(){var e=r.props,t=e.loadLabel,n=e.item;if(n){var o=n.isLabeled,a=n.id,i=n.type;o&&!r.isFetched&&(t(i,a),r.isFetched=!0)}},o=n,N(r,o)}return R(t,e),mt(t,[{key:"componentDidMount",value:function(){this.loadLabels()}},{key:"componentDidUpdate",value:function(){this.loadLabels()}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.item,r=e.commercialLabels,o=e.neutralLabels,a=null,i=null,c=null,l={item:n,isMobile:!1};return n&&n.isLabeled&&(t?(a=ne.a.createElement(Qe,ht({},l,{data:t})),i=ne.a.createElement(at,ht({},l,{circleInfo:t.circleInfo})),c=t&&t.paidInfo&&ne.a.createElement(pt,{paidInfo:t.paidInfo})):(a=ne.a.createElement("div",{className:"LabelContainer-placeholder"}),i=null)),ne.a.createElement("div",{className:"LabelContainer"},ne.a.createElement(_e,{positive:a,neutral:o,commercial:r,circle:i,paidContent:c}))}}]),t}(ne.a.Component))||ee;bt.propTypes={data:we.a.object,item:we.a.object.isRequired,commercialLabels:we.a.node,neutralLabels:we.a.node};var vt=function(e,t){var n=t.item;return{data:Object(ft.b)(e,n)}},yt=Object(Ee.connect)(vt,{loadLabel:ft.c})(bt),gt=n(26),wt=n.n(gt),Et=n(50),Ot=n.n(Et),Ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_t=["answer","article","post","item"],kt=function(e){return e.itemType||_t.find(function(t){return e[t]})},Tt=function(e){var t=function(t){var n=t.showLabelInfo,r=void 0===n||n,o=t.showLabels,a=void 0===o||o,i=D(t,["showLabelInfo","showLabels"]),c=kt(i),l=i,s=[];return a||s.push("isLabeled"),r||(s.push("labelInfo"),s.push("hermesLabel")),c&&s.length>0&&(l=Ct({},l,I({},c,wt()(i[c],s)))),ne.a.createElement(e,l)};return Ot()(Object(Ee.connect)(function(e,t){return{useNewLabels:Object(ft.d)(e,t[kt(t)])}})(t),e)},jt=Tt,St=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pt=Object(te.createContext)({showLabelInfo:!0,showLabels:!0}),xt=Pt.Provider,Nt=Pt.Consumer,Rt=function(e){return function(t){var n=ne.a.createElement(Nt,null,function(n){return ne.a.createElement(e,St({},t,{showLabelProps:n}))});return Ot()(n,e)}};n.d(t,"b",function(){return ye}),n.d(t,"a",function(){return yt}),n.d(t,"d",function(){return jt}),n.d(t,"c",function(){return xt}),n.d(t,!1,function(){return Nt}),n.d(t,"e",function(){return Rt})},1303:function(e,t,n){"use strict";function r(e){var t=e.annotationDetail;if(!t||!t.showOuter)return null;var n=t.reason,r=t.reasonDescription;return a.a.createElement("span",{className:"AnnotationTag"},n===c?"该内容已被标记":r)}t.a=r;var o=n(0),a=n.n(o),i=n(1435),c=(n.n(i),32300)},1304:function(e,t,n){"use strict";function r(e){var t=e.badge;if(!e.isOrg)return!1;var n=Object(o.a)(t)||{};return Boolean(n.identityInfo)}t.a=r;var o=n(182)},1305:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return O});var i,c,l=n(1),s=n.n(l),u=n(0),p=n.n(u),f=n(6),d=n(481),h=n(260),m=n(482),b=n(532),v=n(170),y=n(534),g=n(1276),w=n(1386),E=(n.n(w),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),O=(c=i=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"componentDidMount",value:function(){var e=this.props.user;f.default.setModule(this,{module:"UserItem"},{card:{content:{type:"User",member_hash_id:e.id,follower_num:e.followerCount}}})}},{key:"renderRewardDetails",value:function(){var e=this.props.user,t=e.amount,n=e.rewardCreated;return p.a.createElement("div",{className:"ContentItem-rewardDetails"},p.a.createElement("p",{className:"ContentItem-rewardAmount"},t&&"赞赏了 ￥"+t/100),p.a.createElement("p",{className:"ContentItem-rewardTime"},Object(d.e)(n)))}},{key:"render",value:function(){var e=this.props,t=e.user,n=t.urlToken,r=t.isFollowed,o=t.isFollowing,a=t.answerCount,i=t.articlesCount,c=t.followerCount,l=t.id,s=e.user,u=e.type,f=e.isRewardList,d=e.action,w=e.meta,E=e.status,O=e.noTrackCardShow,C=e.onClick,_=e.currentUser,k=!n,T=_&&_.id===l,j=void 0!==d?d:!T&&!k&&p.a.createElement(m.a,{id:s.urlToken,type:u||s.type,preset:m.a.PRESETS.primary,gender:s.gender,isFollowing:o,onClick:C}),S=void 0!==w?w:k||p.a.createElement(y.a,{user:s}),P=void 0!==E?p.a.createElement(g.d,null,E):!k&&p.a.createElement(g.d,null,Boolean(a)&&Object(h.a)(a)+" 回答",Boolean(i)&&Object(h.a)(i)+" 文章",Boolean(c)&&Object(h.a)(c)+" 关注者");return p.a.createElement(g.e,{data:s,image:p.a.createElement(v.a,{className:"UserItem-avatar",avatar:!0,avatarProps:{size:60},user:s,target:"_blank"}),title:p.a.createElement("div",{className:"UserItem-title"},p.a.createElement(v.a,{className:"UserItem-name",user:s,target:"_blank"}),p.a.createElement(b.a,{isFollowing:o,isFollowed:r})),meta:p.a.createElement("div",null,S,P),noTrackCardShow:O,extra:f?this.renderRewardDetails():j})}}]),t}(u.Component),i.contextTypes={authRequired:s.a.func},i.propTypes={action:s.a.node,status:s.a.node,meta:s.a.node,type:s.a.string,isRewardList:s.a.bool,onClick:s.a.func,currentUser:s.a.object},c)},1306:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),c=n.n(i),l=n(2),s=n.n(l),u=n(3),p=n(169),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function(e){function t(){var e,n,a,i;r(this,t);for(var c=arguments.length,l=Array(c),s=0;s<c;s++)l[s]=arguments[s];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.handleSubmit=function(){var e=a.props,t=e.onSubmit;(0,e.onCancel)(),t()},i=n,o(a,i)}return a(t,e),f(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.subtitle,r=e.shown,o=e.onCancel,a=e.className,i=e.isMobile,l=c.a.createElement(u.c,{key:"confirm",preset:"primary",color:"blue",onClick:this.handleSubmit},"确认"),f=c.a.createElement(u.c,{key:"cancel",onClick:o},"取消"),d=i?[f,l]:[l,f];return c.a.createElement(p.b,{wrapperClassName:"ConfirmModal-wrapper",className:s()("ConfirmModal",a),title:t,size:i?"small":"default",subtitle:n,onClose:o,closeButton:!1,buttonGroupOnly:!0},r&&c.a.createElement(p.a,{direction:i?"horizontal":"vertical"},d))}}]),t}(i.Component);t.a=d},1307:function(e,t,n){"use strict";function r(e){var t=e.className;return a.a.createElement("span",{className:c()("ActivityItem-StickyMark",t)},"置顶")}var o=n(0),a=n.n(o),i=n(2),c=n.n(i);n(1468);n.d(t,"a",function(){return r})},1310:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var o=["DIV","P","BLOCKQUOTE","PRE","CODE","OL","UL","H1","H2","H3","H4","H5","H6"],a=function(e){return o.includes(e.nodeName)||e.classList&&(e.classList.contains("video-box")||e.classList.contains("link-box")||e.classList.contains("origin_image")||e.classList.contains("content_image"))};t.a=function(e){if("undefined"==typeof window)return e;if(-1!==e.indexOf("<p>"))return e;var t=document,n=t.createElement("div");n.innerHTML=e;var o=[].concat(r(n.childNodes)),i=!0,c=!1,l=void 0;try{for(var s,u=o[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var p=s.value;if("BR"===p.nodeName&&p.previousSibling&&"BR"!==p.previousSibling.nodeName&&p.nextSibling&&"BR"===p.nextSibling.nodeName){for(var f=t.createElement("p"),d=p.previousSibling;d&&!a(d)&&("BR"!==d.nodeName||d.previousSibling&&"BR"!==d.previousSibling.nodeName&&!a(d.previousSibling));){var h=f.childNodes;h.length>0?f.insertBefore(d,h[0]):f.appendChild(d),d=p.previousSibling}f.childNodes.length>0&&(n.insertBefore(f,p),p.nextSibling.parentNode.removeChild(p.nextSibling),p.parentNode.removeChild(p))}}}catch(e){c=!0,l=e}finally{try{!i&&u.return&&u.return()}finally{if(c)throw l}}return n.innerHTML}},1311:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d,h,m,b,v,y,g=n(0),w=n.n(g),E=n(1),O=n.n(E),C=n(5),_=n(8),k=n(72),T=n(21),j=n(112),S=(n(1373),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),P=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),x={all:"开放评论",censor:"预审评论",nobody:"关闭评论"},N={all:"允许任何人评论",follower:"允许关注我的人评论",censor:"评论由我筛选后显示",followee:"允许我关注的人评论",paid:"付费用户可评论",nobody:"关闭评论"},R=(d=Object(C.connect)(function(e){return{isOrg:Object(T.f)(e)}}))((b=m=function(e){function t(){var e,n,i,c;o(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=i=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),i.handleClickOption=function(e){var t=i.props,n=t.isOrg,r=t.target,o=t.onChange,a=t.current;if(e!==a){if(!r)return void o(e);var c=r.id;r.adminClosedComment?Object(j.b)("此内容无法更改评论权限",{theme:"red-ghost"}):n||"censor"!==e&&"censor"!==a?o(c,e):Object(j.a)("你确定要更改评论权限吗？",{content:"censor"===e?"更改后，已有评论不变，新评论需要经过筛选才会公开显示":"更改后，所有待筛选评论都会被公开显示出来"}).then(function(){return o(c,e)}).catch(function(){return null})}},i.getCommentPermission=function(){var e=i.props.target,t=e&&"answer"===e.type&&"paid"===e.answerType;return Object.keys(N).filter(function(n){if("paid"!==n||t)return"follower"!==n||e&&"article"===e.type}).reduce(function(e,t){return S({},e,r({},t,N[t]))},{})},c=n,a(i,c)}return i(t,e),P(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.isOrg,r=t.current,o=n?x:this.getCommentPermission();return w.a.createElement(g.Fragment,null,Object.keys(o).map(function(t){var n=t===r;return w.a.createElement(k.b,{key:t,onClick:function(){return e.handleClickOption(t)},className:"CommentPermission-item"},n&&w.a.createElement(_.w,{text:!0,center:!0}),o[t])}))}}]),t}(g.Component),m.propTypes={current:O.a.string.isRequired,target:O.a.object,onChange:O.a.func.isRequired},h=b))||h,I=R,D=n(42),A=n(1374),M=n.n(A),L=n(168),U=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),B=(v=Object(L.a)({view:{id:3038},trackCardShow:!0}))(y=function(e){function t(){return c(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),U(t,[{key:"render",value:function(){return w.a.createElement("img",{src:M.a,style:{maxWidth:"200px",marginTop:"30px"},alt:"delete-comment-success"})}}]),t}(g.Component))||y;B.showModal=function(e){D.b.open(function(t){var n=e||{},r=n.reportText;return setTimeout(t,2e3),w.a.createElement(D.b,{title:"举报成功",onClose:t},w.a.createElement("div",{style:{textAlign:"center"}},w.a.createElement("div",null,r||"你的举报我们已经收到，处理完成后将会私信告知处理结果。"),w.a.createElement(B,null)))})};var F=B,V=n(3),z=n(268),q=(n(1375),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),H=function(e){function t(){var e,n,r,o;u(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={reportModalShown:!1},r.handleSubmit=function(){var e=r.props,t=e.id,n=e.onDelete,o=e.onClose;n(t),o()},r.handleReportModalOpen=function(){return r.setState({reportModalShown:!0})},r.handleReportModalClose=function(){r.setState({reportModalShown:!1}),r.handleSubmit()},r.handleSuccess=function(){r.handleSubmit()},o=n,p(r,o)}return f(t,e),q(t,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.shown,r=e.onClose,o=e.reportAndDeleteExperiment;return w.a.createElement(g.Fragment,null,w.a.createElement(D.b,{title:"你确定要删除这条评论吗？",closeButton:null,maskClosable:!1,hotKeyClosable:!1,onClose:r,footer:o&&w.a.createElement("div",{className:"CommentDeleteAndReport-extra"},"评论若构成举报条件可以",w.a.createElement(V.c,{preset:"link",onClick:this.handleReportModalOpen},"删除并举报"))},n&&w.a.createElement(D.a,{direction:"horizontal"},w.a.createElement(V.c,{onClick:r},"取消"),w.a.createElement(V.c,{preset:"primary",color:"blue",onClick:this.handleSubmit},"确定"))),w.a.createElement(z.a,{title:"删除成功，请选择举报理由",subtitle:"",shown:this.state.reportModalShown,type:"comment",urlToken:t,zaEnabled:!0,onSuccess:this.handleSuccess,onClose:this.handleReportModalClose}))}}]),t}(g.Component),W=H;n.d(t,"c",function(){return I}),n.d(t,"a",function(){return W}),n.d(t,"b",function(){return F})},1312:function(e,t,n){var r;!function(o,a,i){function c(e,t,n){if(e.addEventListener)return void e.addEventListener(t,n,!1);e.attachEvent("on"+t,n)}function l(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return E[e.which]?E[e.which]:O[e.which]?O[e.which]:String.fromCharCode(e.which).toLowerCase()}function s(e,t){return e.sort().join(",")===t.sort().join(",")}function u(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}function p(e){if(e.preventDefault)return void e.preventDefault();e.returnValue=!1}function f(e){if(e.stopPropagation)return void e.stopPropagation();e.cancelBubble=!0}function d(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function h(){if(!w){w={};for(var e in E)e>95&&e<112||E.hasOwnProperty(e)&&(w[E[e]]=e)}return w}function m(e,t,n){return n||(n=h()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function b(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus"),e.split("+"))}function v(e,t){var n,r,o,a=[];for(n=b(e),o=0;o<n.length;++o)r=n[o],_[r]&&(r=_[r]),t&&"keypress"!=t&&C[r]&&(r=C[r],a.push("shift")),d(r)&&a.push(r);return t=m(r,a,t),{key:r,modifiers:a,action:t}}function y(e,t){return null!==e&&e!==a&&(e===t||y(e.parentNode,t))}function g(e){function t(e){e=e||{};var t,n=!1;for(t in w)e[t]?n=!0:w[t]=0;n||(C=!1)}function n(e,t,n,r,o,a){var i,c,l=[],u=n.type;if(!b._callbacks[e])return[];for("keyup"==u&&d(e)&&(t=[e]),i=0;i<b._callbacks[e].length;++i)if(c=b._callbacks[e][i],(r||!c.seq||w[c.seq]==c.level)&&u==c.action&&("keypress"==u&&!n.metaKey&&!n.ctrlKey||s(t,c.modifiers))){var p=!r&&c.combo==o,f=r&&c.seq==r&&c.level==a;(p||f)&&b._callbacks[e].splice(i,1),l.push(c)}return l}function r(e,t,n,r){b.stopCallback(t,t.target||t.srcElement,n,r)||!1===e(t,n)&&(p(t),f(t))}function o(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t=l(e);if(t)return"keyup"==e.type&&E===t?void(E=!1):void b.handleKey(t,u(e),e)}function i(){clearTimeout(y),y=setTimeout(t,1e3)}function h(e,n,o,a){function c(n){r(o,n,e),"keyup"!==a&&(E=l(n)),setTimeout(t,10)}w[e]=0;for(var s=0;s<n.length;++s){var u=s+1===n.length,p=u?c:function(t){return function(){C=t,++w[e],i()}}(a||v(n[s+1]).action);m(n[s],p,a,e,s)}}function m(e,t,r,o,a){b._directMap[e+":"+r]=t,e=e.replace(/\s+/g," ");var i,c=e.split(" ");if(c.length>1)return void h(e,c,t,r);i=v(e,r),b._callbacks[i.key]=b._callbacks[i.key]||[],n(i.key,i.modifiers,{type:i.action},o,e,a),b._callbacks[i.key][o?"unshift":"push"]({callback:t,modifiers:i.modifiers,action:i.action,seq:o,level:a,combo:e})}var b=this;if(e=e||a,!(b instanceof g))return new g(e);b.target=e,b._callbacks={},b._directMap={};var y,w={},E=!1,O=!1,C=!1;b._handleKey=function(e,o,a){var i,c=n(e,o,a),l={},s=0,u=!1;for(i=0;i<c.length;++i)c[i].seq&&(s=Math.max(s,c[i].level));for(i=0;i<c.length;++i)if(c[i].seq){if(c[i].level!=s)continue;u=!0,l[c[i].seq]=1,r(c[i].callback,a,c[i].combo,c[i].seq)}else u||r(c[i].callback,a,c[i].combo);var p="keypress"==a.type&&O;a.type!=C||d(e)||p||t(l),O=u&&"keydown"==a.type},b._bindMultiple=function(e,t,n){for(var r=0;r<e.length;++r)m(e[r],t,n)},c(e,"keypress",o),c(e,"keydown",o),c(e,"keyup",o)}if(o){for(var w,E={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},O={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},C={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},_={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},k=1;k<20;++k)E[111+k]="f"+k;for(k=0;k<=9;++k)E[k+96]=k.toString();g.prototype.bind=function(e,t,n){var r=this;return e=e instanceof Array?e:[e],r._bindMultiple.call(r,e,t,n),r},g.prototype.unbind=function(e,t){var n=this;return n.bind.call(n,e,function(){},t)},g.prototype.trigger=function(e,t){var n=this;return n._directMap[e+":"+t]&&n._directMap[e+":"+t]({},e),n},g.prototype.reset=function(){var e=this;return e._callbacks={},e._directMap={},e},g.prototype.stopCallback=function(e,t){var n=this;return!((" "+t.className+" ").indexOf(" mousetrap ")>-1)&&(!y(t,n.target)&&("INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable))},g.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)},g.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(E[t]=e[t]);w=null},g.init=function(){var e=g(a);for(var t in e)"_"!==t.charAt(0)&&(g[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},g.init(),o.Mousetrap=g,void 0!==e&&e.exports&&(e.exports=g),void 0!==(r=function(){return g}.call(t,n,t,e))&&(e.exports=r)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},1313:function(e,t,n){"use strict";function r(e){var t=e.annotationDetail,n=e.className;if(!t)return null;var r=t.detail,o=t.member,i=t.reasonDescription,c=t.type,l=o?o.name+"：":"";return a.a.createElement("section",{className:s()("Annotation-mark",n)},a.a.createElement("header",{className:"Annotation-header"},"strong"===c&&a.a.createElement(u.e,{size:16,center:!0,text:!0,className:"Annotation-alert"}),a.a.createElement("h1",{className:"Annotation-markTitle"},i||"该内容已被标记")),(r||l)&&a.a.createElement(p.a,{className:"Annotation-markSummary",html:""+l+(r||"未填写原因")}))}t.a=r;var o=n(0),a=n.n(o),i=n(1),c=n.n(i),l=n(2),s=n.n(l),u=n(8),p=n(264),f=n(1434);n.n(f);r.propTypes={annotationDetail:c.a.shape({reason:c.a.number.isRequired,reasonDescription:c.a.string,type:c.a.oneOf(["strong","weak"]).isRequired,detail:c.a.string,member:c.a.shape({name:c.a.string.isRequired}),showOuter:c.a.bool}).isRequired}},1323:function(e,t){},1324:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(0),u=n.n(s),p=n(1),f=n.n(p),d=n(3),h=n(42),m=(n(1345),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),b=function(e){function t(){var e,n,a,i;r(this,t);for(var c=arguments.length,l=Array(c),s=0;s<c;s++)l[s]=arguments[s];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.state={logoutModalShown:!1},a.handleLogoutModalShow=function(){a.setState({logoutModalShown:!0})},a.handleLogoutModalHide=function(){a.setState({logoutModalShown:!1})},a.handleClick=function(){var e=a.context.currentUser;e&&e.urlToken?a.handleLogoutModalShow():location.href="https://www.zhihu.com/org/signup"},i=n,o(a,i)}return a(t,e),m(t,[{key:"render",value:function(){var e=this.state.logoutModalShown;return u.a.createElement(s.Fragment,null,u.a.createElement(d.c,{className:"OrgCreateButton",onClick:this.handleClick},"申请开通知乎机构号"),e&&u.a.createElement(h.b,{className:"OrgCreateButton-logoutModal",title:"开通提示",onClose:this.handleLogoutModalHide},u.a.createElement("p",null,"若想访问机构号注册页面，请您请先退出当前帐号登录状态"),u.a.createElement(h.a,null,u.a.createElement(d.c,{preset:"primary",color:"blue",onClick:function(){location.href="/logout?next=/org/signup"}},"退出登录"),u.a.createElement(d.c,{onClick:this.handleLogoutModalHide},"我再想想"))))}}]),t}(s.Component);b.contextTypes={currentUser:f.a.object};var v=b,y=(n(1346),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),g=function(e){function t(){return i(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),y(t,[{key:"render",value:function(){var e=this,t=(new Date).getFullYear();return u.a.createElement("footer",{className:"Footer",ref:function(t){e.footerEl=t}},u.a.createElement("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"//liukanshan.zhihu.com/"},"刘看山"),u.a.createElement("span",{className:"Footer-dot"}),u.a.createElement("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"/question/19581624"},"知乎指南"),u.a.createElement("span",{className:"Footer-dot"}),u.a.createElement("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"/terms"},"知乎协议"),u.a.createElement("span",{className:"Footer-dot"}),u.a.createElement("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"/term/privacy"},"知乎隐私保护指引"),u.a.createElement("br",null),u.a.createElement("a",{className:"Footer-item",target:"_blank",href:"/app"},"应用"),u.a.createElement("span",{className:"Footer-dot"}),u.a.createElement("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"https://app.mokahr.com/apply/zhihu"},"工作"),u.a.createElement("span",{className:"Footer-dot"}),u.a.createElement(v,{className:"Footer-item"}),u.a.createElement("br",null),u.a.createElement("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"https://zhuanlan.zhihu.com/p/51068775"},"侵权举报"),u.a.createElement("span",{className:"Footer-dot"}),u.a.createElement("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"http://www.12377.cn"},"网上有害信息举报专区"),u.a.createElement("br",null),u.a.createElement("span",{className:"Footer-item"},"违法和不良信息举报：010-82716601"),u.a.createElement("br",null),u.a.createElement("a",{className:"Footer-item",target:"_blank",href:"/jubao"},"儿童色情信息举报专区"),u.a.createElement("br",null),u.a.createElement("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"https://zhstatic.zhihu.com/assets/zhihu/certificates/certificate-ICP.png"},"电信与服务业务经营许可证"),u.a.createElement("br",null),u.a.createElement("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"https://zhstatic.zhihu.com/assets/zhihu/certificates/certificate-1.jpeg"},"网络文化经营许可证"),u.a.createElement("br",null),u.a.createElement("a",{className:"Footer-item",target:"_blank",href:"/contact"},"联系我们"),u.a.createElement("span",null," © ",t," 知乎"))}}]),t}(s.Component);t.a=g},1325:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function I(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function D(e){var t=e.className,n=e.commercial;if(!(n&&n.tail&&n.tail.url&&n.tail.message))return null;var r=n.tail,o=r.url,a=r.message;return ye.a.createElement("a",{className:we()("CommercialQuestionTail",t),href:o},a,ye.a.createElement(_e._23,{className:"CommercialQuestionTail-Icon",center:!0,text:!0}))}function A(e){var t=e.markInfo,n=Ye.x[t.markType];if(!n)return null;var r=t.roundtable&&"https://www.zhihu.com/roundtable/"+t.roundtable.urlToken;return r?ye.a.createElement("a",{href:r},n):ye.a.createElement("span",null,n)}function M(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function B(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var F,V,z,q,H,W,G,X,Y,K,Q,Z,J,$,ee,te,ne,re,oe,ae,ie,ce,le,se,ue,pe,fe,de,he,me=n(1),be=n.n(me),ve=n(0),ye=n.n(ve),ge=n(2),we=n.n(ge),Ee=n(5),Oe=n(19),Ce=n(494),_e=n(8),ke=n(6),Te=n(3),je=n(29),Se=n(72),Pe=n(178),xe=n(31),Ne=(n(1338),n(43)),Re=n(169),Ie=32305,De=[{code:32309,description:"收到大量反对"},{code:32301,description:"可能包含争议观点"},{code:32302,description:"可能存在事实性错误",placeholder:"为了避免对您造成误导，请谨慎甄别"},{code:32303,description:"可能涉及金钱往来",placeholder:"为保障您的财产安全，请谨慎判断"},{code:32304,description:"可能包含剧透"},{code:32306,description:"可能包含具体的医疗建议",placeholder:"网络上的医疗建议仅供参考，如有需要请咨询专业人士或前往医疗机构就医"},{code:32307,description:"可能包含令人不适的图片或视频",placeholder:"为保障您的阅读体验，请谨慎浏览"},{code:32308,description:"已有回应"},{code:32300,description:"其他"}],Ae=(n(1437),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Me=(V=F=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),Ae(t,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.value,r=e.onChange,o=e.className;return ye.a.createElement("div",{className:we()("RadioButtons",o)},t.map(function(e,t){var o=e.value,a=e.text,i=e.placeholder;return ye.a.createElement("label",{key:t,className:"RadioButtons-item"},ye.a.createElement("span",{className:"RadioButtons-text"},a),ye.a.createElement("input",{type:"radio",className:"RadioButtons-input",value:o,checked:n===o,onChange:function(){return r(o,i)}}))}))}}]),t}(ve.PureComponent),F.propTypes={options:be.a.arrayOf(be.a.shape({value:be.a.string,text:be.a.string,placeholder:be.a.string})).isRequired,value:be.a.string,onChange:be.a.func,className:be.a.string},V),Le=(n(1438),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Ue=function(){return n.e(1).then(n.bind(null,1210))},Be=De.map(function(e){var t=e.code,n=e.description,r=e.placeholder;return{text:n,value:String(t),placeholder:r}}),Fe=function(e){var t=De.find(function(t){return t.code===e});return t&&t.description},Ve=(q=z=function(e){function t(){var e,n,r,o;i(this,t);for(var a=arguments.length,l=Array(a),s=0;s<a;s++)l[s]=arguments[s];return n=r=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={selectedReasonCode:null,isReasonDescriptionEmpty:!0},r.handleReasonCodeChange=function(e,t){r.setState({selectedReasonCode:Number(e),selectedReasonPlaceholder:t||""}),r.input&&r.input.resetWithValue(t||"")},r.handleAddAnnotation=function(){var e=r.props,t=e.addAnnotation,n=e.type,o=e.urlToken,a=e.showNotification,i=e.onClose;t(n,o,r.state.selectedReasonCode,r.input.toHTML()).then(function(){i(),a&&a("标记内容成功")})},r.handleReasonDescriptionChange=function(e){r.setState({isReasonDescriptionEmpty:e.isEmpty})},o=n,c(r,o)}return l(t,e),Le(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,r=t.shown,o=t.className,a=this.state,i=a.selectedReasonCode,c=a.isReasonDescriptionEmpty,l=a.selectedReasonPlaceholder,s=Fe(i),u=32300===i;return ye.a.createElement(Re.b,{title:"标记内容",subtitle:"请选择标记原因",onClose:n,className:o},r&&ye.a.createElement("div",null,ye.a.createElement("div",{className:"AddAnnotationModal-body"},ye.a.createElement(Me,{options:Be,onChange:this.handleReasonCodeChange,value:String(i)}),i&&ye.a.createElement("div",null,ye.a.createElement("div",{className:"AddAnnotationModal-description"},s,"（",u?"必填":"选填","）"),ye.a.createElement(Ne.a,{getComponent:Ue,multiline:!0,richtext:!0,allowMention:!0,large:!0,spread:!0,minRows:2,onRef:function(t){e.input=t},defaultValue:l,placeholder:"请填写原因",onChange:this.handleReasonDescriptionChange}))),ye.a.createElement(Re.a,{direction:"horizontal",className:"AddAnnotationModal-buttonGroup"},ye.a.createElement(Te.c,{preset:"primary",color:"blue",onClick:this.handleAddAnnotation,size:"spread",disabled:!i||u&&c},"标记"))))}}]),t}(ve.PureComponent),z.propTypes={addAnnotation:be.a.func.isRequired,onClose:be.a.func.isRequired,shown:be.a.bool.isRequired,type:be.a.oneOf([0,1,2]).isRequired,urlToken:be.a.oneOfType([be.a.number,be.a.string]),showNotification:be.a.func,className:be.a.string},q),ze=n(16),qe=n(48),He=n(69),We=(n(1439),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Ge=(W=H=function(e){function t(){var e,n,r,o;s(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={isReasonDescriptionEmpty:!0},r.handleCancelAnnotation=function(){var e=r.props,t=e.cancelAnnotation,n=e.type,o=e.urlToken,a=e.showNotification,i=e.onClose;t(n,o,Ie,r.input.value).then(function(){i(),a&&a("撤销标记成功")})},r.handleReasonDescriptionChange=function(e){return r.setState({isReasonDescriptionEmpty:e.isEmpty})},o=n,u(r,o)}return p(t,e),We(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,r=t.shown,o=t.className,a=this.state.isReasonDescriptionEmpty;return ye.a.createElement(Re.b,{title:"你确定要撤销这条内容的标记吗？",onClose:n,className:o},r&&ye.a.createElement("div",{className:"CancelAnnotationModal"},ye.a.createElement(He.a,{multiline:!0,large:!0,spread:!0,onRef:function(t){e.input=t},placeholder:"请填写撤销原因（必填）",onChange:this.handleReasonDescriptionChange,className:"CancelAnnotationModal-Input"}),ye.a.createElement(Re.a,{direction:"horizontal"},Object(ze.a)()&&!Object(qe.a)(window.navigator.userAgent).Mobile&&ye.a.createElement(Te.c,{onClick:n,size:"spread"},"取消"),ye.a.createElement(Te.c,{preset:"primary",color:"blue",onClick:this.handleCancelAnnotation,size:"spread",className:"CancelAnnotationModal-CancelButton",disabled:a},"撤销标记"))))}}]),t}(ve.PureComponent),H.propTypes={cancelAnnotation:be.a.func.isRequired,onClose:be.a.func.isRequired,shown:be.a.bool.isRequired,type:be.a.oneOf([0,1,2]).isRequired,urlToken:be.a.oneOfType([be.a.number.isRequired,be.a.string.isRequired]),showNotification:be.a.func,className:be.a.string},W),Xe=n(492),Ye=n(10),Ke=n(171),Qe=n(7),Ze=n(35),Je=n(4),$e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},et=$e({},Object(Je.a)("collaboration",["ADD_ANNOTATION","CANCEL_ANNOTATION"])),tt=function(e){return e===Ye.b?"answers":e===Ye.d?"pins":e===Ye.c?"articles":null},nt=function(e,t,n,r){return{API:{types:et.ADD_ANNOTATION,endpoint:"v3/collaboration/annotation",method:"POST",body:Object(Ze.a)(Object(Qe.decamelizeKeys)({objectType:e,urlToken:t,reason:n,detail:r}))},UPDATE:{success:function(n){var r=tt(e);return r?f({},r,f({},t,n)):null}}}},rt=function(e,t,n,r){return{API:{types:et.CANCEL_ANNOTATION,endpoint:"v3/collaboration/annotation_cancel",method:"POST",body:Object(Ze.a)(Object(Qe.decamelizeKeys)({objectType:e,urlToken:t,reason:n,detail:r}))},UPDATE:{success:function(n){var r=tt(e);return r?f({},r,f({},t,$e({},n,{annotationDetail:null}))):null}}}},ot=n(17),at=n(289),it=n(270),ct=n(70),lt=n(190),st=n(21),ut=n(1304),pt=n(497),ft=n(1347),dt=n(1311),ht=n(168),mt=n(1369),bt=n(274),vt=n(1313),yt=n(1440),gt=n.n(yt),wt=function(e){var t=e.answer,n=e.canCollapse,r=t.isNormal,o=void 0===r||r,a=t.collapsedBy,i=t.reviewInfo;i=void 0===i?{}:i;var c=i.isReviewing,l=i.tips,s=t.suggestEdit;s=void 0===s?{}:s;var u=s.title,p=s.unnormalDetails;p=void 0===p?{}:p;var f=p.reason,d=p.description,h=t.collapseReason;return c?ye.a.createElement("div",{key:"negativeLabels",className:"AnswerItem-status"},l):o?"community"===a?ye.a.createElement("div",{key:"negativeLabels",className:"AnswerItem-statusContent"},ye.a.createElement("div",{className:"AnswerItem-statusReason"},"该回答已被折叠 ",ye.a.createElement("span",null,ye.a.createElement("a",{target:"_blank",href:"/question/20120168","data-tooltip":"点击了解更多",className:"AnswerItem-complaintHelp"},ye.a.createElement(_e._11,{className:"AnswerItem-complaintIcon",width:16})))),h&&ye.a.createElement("div",{className:"AnswerItem-statusDescription"},"折叠原因：",h)):"org"!==a||n?null:ye.a.createElement("div",{key:"negativeLabels",className:"AnswerItem-status"},"回答被提问机构移至隐藏区（",ye.a.createElement("a",{href:"/org-intro#org-question",target:"_blank"},"为什么？"),"）"):ye.a.createElement("div",{key:"negativeLabels",className:"AnswerItem-statusContent"},ye.a.createElement("div",{className:"AnswerItem-statusReason"},d,"：",f),ye.a.createElement("div",{className:"AnswerItem-statusDescription"},"作者修改内容通过后，回答会重新显示恢复正常 ",ye.a.createElement("a",{target:"_blank",href:"/question/24752645",className:"AnswerItem-statusLink"},u)))},Et=function(e){var t=e.answer,n=e.canCollapse,r=t.collapsedBy,o=t.relevantInfo;o=void 0===o?{}:o;var a=o.relevantType;return Object(Ke.i)(t)||Object(Ke.j)(t)||"org"===r&&!n?ye.a.createElement("div",{className:"AnswerItem-meta",key:"commercial"},"brand_special"===a&&ye.a.createElement("div",{className:"AnswerItem-commercialBadge AnswerItem-commercialBadge-brand"},ye.a.createElement(_e.o,{size:16}),ye.a.createElement("b",null,"品牌特邀："),"本文由品牌邀请撰写"),"brand_best"===a&&ye.a.createElement("span",{className:"AnswerItem-sticky","data-tooltip":"本回答由品牌设为精选","data-tooltip-position":"bottom"},"品牌精选")):null},Ot=function(e){var t=e.answer,n=t.annotationDetail,r=t.reviewInfo;r=void 0===r?{}:r;var o=r.isReviewing,a=t.isNormal,i=void 0===a||a,c=t.collapsedBy;return!o&&i&&"community"!==c&&n?ye.a.createElement(vt.a,{key:"neutral",annotationDetail:n}):null},Ct=function(e){var t=e.answer;return Object(Ke.j)(t)?ye.a.createElement("div",{className:"AnswerItem-commercialBadge",key:"positive"},ye.a.createElement(gt.a,{style:{marginRight:"6px",verticalAlign:"text-bottom"},size:16}),ye.a.createElement("b",null,"亲自答："),"此回答由问题相关方亲自撰写"):null},_t=n(1283),kt=n(1397),Tt=n(1303),jt=n(1276),St=n(1281),Pt=n(1326),xt=n(1286),Nt=n(1287),Rt=n(268),It=n(1398),Dt=n(487),At=n(1328),Mt=n(1288),Lt=n(1349),Ut=(n(1447),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Bt=(X=G=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),Ut(t,[{key:"render",value:function(){var e=this.props.activateReward;return ye.a.createElement("div",{className:"Reward"},ye.a.createElement("button",{className:"Reward-activateBtn",onClick:e},"开启赞赏"),ye.a.createElement("div",{className:"Reward-activateHint"},"赞赏开启后，读者将可以付费支持你的创作。"))}}]),t}(ve.Component),G.propTypes={activateReward:be.a.func},X),Ft=(n(1448),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Vt=(K=Y=function(e){function t(){return b(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,e),Ft(t,[{key:"render",value:function(){var e=this.props,t=e.tagline,n=e.activateReward,r=e.totalMoney,o=e.showRewarders;return ye.a.createElement("div",null,ye.a.createElement("div",{className:"Reward-tagline"},t||Ye.i,ye.a.createElement("a",{className:"Reward-editButton",onClick:n},ye.a.createElement(je.a,{left:!0,name:"modify"}),ye.a.createElement("span",null,"编辑"))),Boolean(r)&&ye.a.createElement("div",{className:"Reward-money"},ye.a.createElement("span",{onClick:o},"￥ ",r.toFixed(2))))}}]),t}(ve.Component),Y.propTypes={activateReward:be.a.func,tagline:be.a.string,totalMoney:be.a.number,showRewarders:be.a.func},K),zt=n(1327),qt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ht=(Z=Q=function(e){function t(){return g(this,t),w(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),qt(t,[{key:"render",value:function(){var e=this.props,t=e.modalShown,n=e.onLoad,r=e.items,o=e.voteupCount,a=e.isRewardList,i=e.onClose,c=e.notice;return ye.a.createElement(Re.b,{size:"fullPage",onClose:i},t&&ye.a.createElement(zt.a,{items:r,text:"赞赏了",isFetching:!1,isDrained:!1,voteupCount:o,onLoad:n,isRewardList:a,notice:c,type:"rewardPeople"}))}}]),t}(ve.Component),Q.propTypes={onLoad:be.a.func,modalShown:be.a.bool},Z),Wt=n(260),Gt=(n(1449),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Xt=(J=Object(ht.a)({module:"UserList",moduleName:"*** 人已赞赏"}))((te=ee=function(e){function t(){var e,n,r,o;O(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=C(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={hoverName:""},r.hoverUser=function(e){r.setState({hoverName:e.target.dataset.name})},o=n,C(r,o)}return _(t,e),Gt(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.users,r=t.handleListShown,o=t.rewardMemberCount,a=t.onUserClick,i=this.state.hoverName,c=n.slice(0,5);return ye.a.createElement("div",{className:"Reward-count"},ye.a.createElement("p",{className:"Reward-User-text",onClick:r},Object(Wt.a)(o)+" 人已赞赏"),ye.a.createElement("div",null,c.map(function(t,n){return ye.a.createElement(Oe.Link,{key:n,to:"//www.zhihu.com/"+t.userType+"/"+t.urlToken,className:"Reward-User-img","data-hover-title":i,target:"_blank",onClick:a},ye.a.createElement("img",{src:t.avatarUrl,className:"Reward-User-avatar","data-name":t.name,"data-index":n,onMouseOver:e.hoverUser,alt:"赞赏用户"}))}),o>6&&ye.a.createElement("span",{className:"Reward-MoreUser",onClick:r},ye.a.createElement("i",null),ye.a.createElement("i",null),ye.a.createElement("i",null))))}}]),t}(ve.Component),ee.propTypes={users:be.a.array,handleListShown:be.a.func,rewardMemberCount:be.a.number,onUserClick:be.a.func},ee.defaultProps={users:[]},$=te))||$,Yt=Xt,Kt=(n(1450),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Qt=(re=ne=function(e){function t(){return k(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return j(t,e),Kt(t,[{key:"render",value:function(){var e=this.props,t=e.rewardMemberCount,n=e.handleListShown,r=e.isAuthor,o=e.users,a=e.onUserClick;return t?ye.a.createElement(Yt,{users:o,onUserClick:a,handleListShown:n,rewardMemberCount:t}):ye.a.createElement("div",{className:"Reward-countZero"},r?"还没有人赞赏。":"还没有人赞赏，快来当第一个赞赏的人吧！")}}]),t}(ve.Component),ne.propTypes={rewardMemberCount:be.a.number,handleListShown:be.a.func,isAuthor:be.a.bool,users:be.a.array,onUserClick:be.a.func},re),Zt=(n(1451),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Jt=(ae=oe=function(e){function t(){return S(this,t),P(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return x(t,e),Zt(t,[{key:"render",value:function(){var e=this.props,t=e.tagline,n=e.onClick;return ye.a.createElement("div",null,ye.a.createElement("div",{className:"Reward-tagline"},t||Ye.i),ye.a.createElement("button",{className:"Reward-rewardBtn",onClick:n},"赞赏"))}}]),t}(ve.Component),oe.propTypes={onClick:be.a.func,tagline:be.a.string},ae),$t=(n(1452),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),en=function(){return n.e(0).then(n.bind(null,2903)).then(function(e){return e.TipjarDialog})},tn=(ie=Object(Ee.connect)(null,{updateAnswerReward:Ke.y,updateArticleReward:it.l,createArticleTipjar:it.b,getRewardUserDetails:it.i,getPagingArticleRewardUser:it.f,getPagingArticleRewardUserDetails:it.g,getArticleRewardUser:it.e,updateEntitiesUsers:it.m,getRewardUser:it.h,createTipjar:it.c,removeTradeNumber:it.k,onRewardSuccess:it.j,showNotification:ot.g}))((se=le=function(e){function t(){var e,n,r,o;N(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=R(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={TipjarRender:!1,modalShown:!1,rewardModalShown:!1},r.onSubmitReward=function(e){xe.a.set("isRewardable",!0),r.updateReward(e),r.unactivateReward()},r.onPaySuccess=function(){var e=r.props,t=e.reward,n=e.currentUser,o=e.id,a=e.type,i=t[a][o].users,c=[n];Array.isArray(i)&&(i.push(n),c=i),r.props.onRewardSuccess(c,o,a),r.colseTijarDialog(),r.props.showNotification("你已赞赏成功！")},r.onLoad=function(e){"article"===r.props.type?"normal"===e?r.onLoadArticleRewardUser():r.onLoadArticleRewardUserDetails():r.onLoadRewardUser()},r.onLoadArticleRewardUser=function(){var e=r.props.id;r.props.getArticleRewardUser(e)},r.onLoadArticleRewardUserDetails=function(){var e=r.props,t=e.id;e.isAuthor?r.props.getPagingArticleRewardUserDetails(t):r.props.getPagingArticleRewardUser(t)},r.onLoadRewardUser=function(){var e=r.props,t=e.id;e.isAuthor?r.props.getRewardUserDetails(r.props.id):r.props.getRewardUser(t).then(function(e){var t=e.payload.data;if(t.length>0){var n={};t.forEach(function(e){n[e.urlToken]=e}),r.props.updateEntitiesUsers(n)}})},r.handleListShown=function(e){var t=r.props.onRewardUserMoreClick;t&&t(e),r.setState({modalShown:!0})},r.handleListHide=function(){r.setState({modalShown:!1})},r.updateReward=function(e){var t=r.props,n=t.type,o=t.id,a=t.rewardInfo.canOpenReward;if("article"===n){var i=!!a||void 0;r.props.updateArticleReward(o,e,i)}else r.props.updateAnswerReward(o,e)},r.activateReward=function(){r.setState({rewardModalShown:!0})},r.unactivateReward=function(){r.setState({rewardModalShown:!1})},r.showRewarders=function(){r.setState({modalShown:!0})},r.addReward=r.context.authRequired(function(e,t){var n=r.props,o=n.id;"article"===n.type?r.props.createArticleTipjar(o,e):r.props.createTipjar(o,e,t)},void 0,ot.b),r.handleRewardButtonClick=function(e){var t=r.props.onRewardButtonClick;t&&t(e),r.setState({TipjarRender:!0})},r.colseTijarDialog=function(){r.setState({TipjarRender:!1})},r.removeTradeNumber=function(){var e=r.props,t=e.id,n=e.type;r.props.removeTradeNumber(t,n)},o=n,R(r,o)}return I(t,e),$t(t,[{key:"componentDidMount",value:function(){var e=this.props.rewardInfo;e&&e.isRewardable&&this.onLoad("normal")}},{key:"render",value:function(){var e=this,t=this.props,n=t.currentUser,r=t.isAuthor,o=t.isMobile,a=t.id,i=t.reward,c=t.author,l=t.type,s=t.ua,u=t.rewardInfo,p=u.canOpenReward,f=u.isRewardable,d=u.tagline,h=u.rewardTotalMoney,m=u.rewardMemberCount,b=t.onRewardUserClick;if(r&&n&&"organization"===n.userType)return null;var v=this.state,y=v.TipjarRender,g=v.modalShown,w=v.rewardModalShown,E=ye.a.createElement(Lt.a,{submitRewardText:function(t){return e.onSubmitReward(t)},onClose:this.unactivateReward,tagline:d,edit:!0});if(r&&p)return ye.a.createElement("div",null,ye.a.createElement(Bt,{activateReward:this.activateReward}),w&&E);if(f){var O=i&&i[l][a]||{},C=O.tradeNumber,_=O.users,k=O.notice,T=ye.a.createElement(Ht,{modalShown:g,items:_,voteupCount:m,onLoad:this.onLoad,isRewardList:r,notice:k,onClose:this.handleListHide}),j=ye.a.createElement(Qt,{rewardMemberCount:m,handleListShown:this.handleListShown,onUserClick:b,users:_,isAuthor:r});if(!r)return ye.a.createElement("div",{className:"Reward"},ye.a.createElement(Jt,{tagline:d,onClick:this.handleRewardButtonClick}),j,w&&E,T,ye.a.createElement(Ne.a,{getComponent:en,author:c,tagline:d,isMobile:o,ua:s,addReward:this.addReward,colseTijarDialog:this.colseTijarDialog,tradeNumber:C,removeTradeNumber:this.removeTradeNumber,onPaySuccess:this.onPaySuccess,TipjarRender:y,type:l}));var S=(Number(h)||0)/100;return ye.a.createElement("div",{className:"Reward"},ye.a.createElement(Vt,{tagline:d,activateReward:this.activateReward,totalMoney:S,showRewarders:this.showRewarders}),w&&E,T,j)}return null}}]),t}(ye.a.Component),le.propTypes={reward:be.a.object,isAuthor:be.a.bool,author:be.a.object,id:be.a.number,rewardInfo:be.a.object,currentUser:be.a.object,ua:be.a.object,type:be.a.string,isMobile:be.a.bool,onRewardButtonClick:be.a.func,onRewardUserClick:be.a.func,onRewardUserMoreClick:be.a.func},le.contextTypes={authRequired:be.a.func},le.defaultProps={rewardInfo:{},type:"answer"},ce=se))||ce,nn=n(1306),rn=(n(1453),D),on=n(1302),an=n(1307),cn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=t.contentExpanded,r=t.unescapable,o=e.labelInfo,a=e.hermesLabel;return ye.a.createElement(ve.Fragment,null,!n&&!r&&ye.a.createElement(on.b,{labelInfo:o||a}))},ln=n(1399),sn=(n(1389),function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()),un=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),pn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fn=function(e){return"plain"===e||"special-plain"===e},dn=fn,hn=function(e){return"special-plain"===e},mn={allowed:"允许规范转载",need_payment:"允许付费转载",disallowed:"禁止转载"},bn=function(e){var t=e.thumbnail,n=e.voteupCount,r=e.question.id,o=e.id,a=e.createdTime,i=e.updatedTime,c=e.commentCount;return{image:t,upvoteCount:n,url:"https://www.zhihu.com/question/"+r+"/answer/"+o,dateCreated:new Date(1e3*a).toISOString(),dateModified:new Date(1e3*i).toISOString(),commentCount:c}},vn=(ue=Object(ht.a)(function(e){var t=e.answer,n=e.trackCardShow,r=void 0===n||n,o=e.zaInfos,a=void 0===o?{}:o;return pn({module:"AnswerItem",card:{has_image:Boolean(t.thumbnailExtraInfo&&"image"===t.thumbnailExtraInfo.type),has_video:Boolean(t.thumbnailExtraInfo&&"video"===t.thumbnailExtraInfo.type),content:{type:"Answer",token:t.id&&t.id.toString(),upvote_num:t.voteupCount,comment_num:t.commentCount,publish_timestamp:new Date(t.createTime).getTime(),parent_token:t.question&&t.question.id.toString(),author_member_hash_id:t.author&&t.author.id,video_id:t.thumbnailExtraInfo&&t.thumbnailExtraInfo.videoId}},content:{type:"Answer",token:t.id}},a.index&&{index:a.index},a.cardShow&&{view:{id:a.cardShow}},{trackCardShow:r})}),pe=Object(Ee.connect)(function(e,t){var n=e.entities,r=n.drafts,o=void 0===r?{}:r,a=n.questions,i=n.answers,c=e.reward,l=e.switches,s=e.video.shareVideoDetail,u=t.answer,p=t.relatedTo,f=i[u.id]?pn({},i[u.id]):u;a[f.question.id]&&(f.question=pn({},u.question,a[f.question.id]));var d=Object(st.c)(e),h=["question","answer"].includes(p),m=Object(ct.e)(e)&&h,b=Object(ct.d)(e);return{draft:u&&o["question_"+u.question.id],answer:f,ua:Object(at.i)(e),reward:c,switches:l,isHuman:m,edition:b,referer:Object(ct.g)(e),shouldOia:Object(ct.h)(e)&&h,shouldSpecialOia:Object(ct.i)(e),canOia:Object(ct.b)(e),isWechat:e.env.userAgent.Wechat,concernedUpvoters:Object(Ke.d)(e,{id:u.id}),currentUser:d,shareVideoDetail:s,isBrandAnswer:Object(Ke.h)(u)}},{updateAnswerVote:Ke.C,updateAnswerUnhelpful:Ke.B,updateAnswerReshipmentSettings:Ke.x,updateAnswerCommentPermission:Ke.w,updateAnswerCollapsed:Ke.v,updateAnswerStick:Ke.z,deleteAnswer:Ke.f,restoreAnswer:Ke.s,updateAnswer:Ke.u,loadAnswerForSettings:Ke.p,showNotification:ot.g,addAnnotation:nt,cancelAnnotation:rt,addRewardTagline:it.a,updateAnswerReward:Ke.y,getVoteDownReason:Ke.g,selectVoteDownReason:Ke.t,loadAnswerConcernedVoters:Ke.m,loadCurrentUser:st.j,loadVideoDetails:lt.d}),ue(fe=Object(Oe.withRouter)(fe=pe(fe=Object(on.d)((he=de=function(e){function t(){var e,n,r,o;L(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=U(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={commentsShown:!1,reportModalShown:!1,deleteModalShown:!1,collapseModalShown:!1,favlistsShown:!1,editing:!1,commentPattern:"fixed",addAnnotationModalShown:!1,cancelAnnotationModalShown:!1,guideShown:!1,shareVideoQuery:r.getShareVideoId(),shouldShowVideoDetails:!1,contentExpanded:r.props.expanded,hasFetchedLabels:!1},r.onCloseReward=function(){var e=r.props.answer.id;xe.a.set("isRewardable",!1),r.props.updateAnswerReward(e,"")},r.openModal=function(e,t){r.setState(pn({},t))},r.openDeleteModal=function(){setTimeout(function(){r.setState({deleteModalShown:!0})})},r.closeModal=function(){r.setState({commentsShown:!1});var e=r.props.onCloseComment;"function"==typeof e&&e()},r.closeDeleteModal=function(){r.setState({deleteModalShown:!1})},r.disableAuth=function(){var e=r.props,t=(e.edition,e.router);t=void 0===t?{}:t;var n=t.location;n=void 0===n?{}:n;n.pathname;return!1}(),r.loadAnswerConcernedVoters=function(){var e=r.props,t=e.concernedUpvoters,n=e.answer,o=e.loadAnswerConcernedVoters;!t&&r.context.currentUser&&o(n.id)},r.handleExpand=function(e){var t=r.props.onToggleExpand;e&&r.loadAnswerConcernedVoters(),t&&t(e),r.setState({contentExpanded:e})},r.handleVote=r.context.authRequired(function(e){var t=r.props,n=t.answer.id;(0,t.updateAnswerVote)(n,e)},Ye.L.vote),r.handleUpdateUnhelpful=r.context.authRequired(function(){var e=r.props,t=e.answer,n=t.id,o=t.relationship.isNothelp,a=e.updateAnswerUnhelpful,i=!o;ke.default.trackEvent(r,{action:i?"NoHelp":"UnNoHelp",element:"Button"}),a(n,i)},Ye.L.unhelpful),r.handleReshipmentSettings=function(e){var t=r.props,n=t.answer.id,o=t.updateAnswerReshipmentSettings,a=t.loadCurrentUser,i=t.currentUser;if("need_payment"===e){(void 0===i.caEnabled?a("ca_enabled"):Promise.resolve()).then(function(){r.props.currentUser.caEnabled?o(n,e):window.open("/copyright/invite")})}else o(n,e)},r.handleLoadAnswerForSettings=function(){var e=r.props,t=e.answer.id;(0,e.loadAnswerForSettings)(t)},r.handleDeleteAnswer=function(){var e=r.props,t=e.answer.id;(0,e.deleteAnswer)(t)},r.handlePositionStatusChange=function(e){r.setState({positionStatus:e})},r.handleCollapseModalShow=function(){r.setState({collapseModalShown:!0})},r.handleCollapseModalHide=function(){r.setState({collapseModalShown:!1})},r.handleUpdateAnswerCollapsed=function(){var e=r.props,t=e.answer,n=t.id,o=t.collapsedBy,a=e.updateAnswerCollapsed,i=e.showNotification;return"community"===o?i("该回答因违反社区规范已被管理员折叠，暂无法公开","red"):a(n)},r.handleUpdateAnswerStick=function(){var e=r.props,t=e.answer.id;return(0,e.updateAnswerStick)(t)},r.handleRestoreAnswer=function(){var e=r.props,t=e.answer,n=t.id,o=t.question;(0,e.restoreAnswer)(o.id,n)},r.handleStartEditAnswer=function(){if(r.props.hasPublishingDraft)return void Pe.a.alert("你有一份对该回答的修改正在发布中，请等待发布完成后再次修改。");r.setState({editing:!0},function(){r.answerForm.getWrappedInstance().focus()})},r.handleCancelEditAnswer=function(){r.setState({editing:!1});var e=r.props,t=e.onCloseEditing,n=e.onCloseComment;"function"==typeof n&&n(),"function"==typeof t&&t()},r.handleSubmitAnswer=function(e){var t=r.props,n=t.answer.id,o=t.updateAnswer;return r.handleCancelEditAnswer(),o(n,e).then(function(e){return ke.default.trackEvent(r,{action:"StatusReport"},{status:{result:"Success",event:{action:"Edit"}}}),e})},r.handleReportOpen=function(){var e=r.props.zaInfos.report;ke.default.trackEvent(r,pn({action:"Report",element:"Button",is_intent:!0},e&&{id:e})),r.context.authRequired(function(){return r.setState({reportModalShown:!0})},Ye.L.report)()},r.handleReportHide=function(){r.setState({reportModalShown:!1})},r.handleLoadVoteDownReason=function(){var e=r.props,t=e.answer.question.id;(0,e.getVoteDownReason)(t)},r.handleSelectVoteDownReason=function(e){var t=r.props,n=t.answer.id,o=t.selectVoteDownReason,a=t.showNotification;o(n,e.reasonId).then(function(e){a(e.payload.message)})},r.handleSetShowVoteDownReason=function(e){xe.a.set(Ye.u,e?"TRUE":"FALSE")},r.handleFavlistsShown=function(e){var t=r.props,n=t.shouldOia,o=t.zaInfos.favlists;return ke.default.trackEvent(r,pn({action:"Collect",element:"Button",is_intent:!0},o&&{id:o})),n?void r.createOpenInAppHandler("collect_answer")(e):r.disableAuth?void r.handleToggleGuide():void r.context.authRequired(function(){return r.setState({favlistsShown:!0})},Ye.L.favlists)()},r.handleFavlistHide=function(){r.setState({favlistsShown:!1})},r.handleLogMoreClick=function(){var e=r.props.zaInfos.options;ke.default.trackEvent(r,pn({action:"Click",element_name:"MoreAction"},e&&{id:e}))},r.handleShowAddAnnotationModal=function(){return r.setState({addAnnotationModalShown:!0})},r.handleCloseAddAnnotationModal=function(){return r.setState({addAnnotationModalShown:!1})},r.handleShowCancelAnnotationModal=function(){return r.setState({cancelAnnotationModalShown:!0})},r.handleCloseCancelAnnotationModal=function(){return r.setState({cancelAnnotationModalShown:!1})},r.handleToggleGuide=function(){r.setState({guideShown:!r.state.guideShown})},r.handleClickVideoMoreButton=function(){r.setState({shouldShowVideoDetails:!1})},r.getShortcutScope=function(){return r.props.getShortcutScope?r.props.getShortcutScope(r.contentItem):r.contentItem},r.startEditing=function(){var e=r.props,t=e.answer.relationship;t=void 0===t?{}:t;var n=t.isAuthor,o=e.editable;r.context.currentUser&&n&&o&&r.handleStartEditAnswer()},r.addRewardTagline=function(e){var t=r.props.answer.id;Object(it.a)(e,t)},r.createOpenInAppHandler=function(e){var t=r.props,n=t.answer,o=n.type,a=n.id,i=t.edition,c=t.location.query,l=t.referer;return function(t){t.preventDefault(),Object(Xe.b)(t,{href:Object(pt.a)({type:o,id:a},{utm_content:e,edition:i,query:c,referer:l})})}},r.renderLabels=function(){var e=r.props,t=e.useNewLabels,n=e.answer,o=e.canCollapse,a=e.relatedTo,i=r.state.contentExpanded,c=wt({answer:n,canCollapse:o}),l=Ot({answer:n}),s=Et({answer:n,canCollapse:o}),u=Ct({answer:n});if(t){if(c)return{labels:[c],editingLabels:[]};var p=[ye.a.createElement(on.a,{key:"labels",item:n,commercialLabels:s,neutralLabels:l})];return i||a?{labels:p,editingLabels:p}:{labels:[],editingLabels:p}}var f=[l,s,u];return{labels:[c].concat(f),editingLabels:f}},r.renderPrefix=function(){var e=r.props,t=e.answer,n=e.relatedTo,o=r.state.contentExpanded,a={contentExpanded:o,unescapable:Boolean(n)};return cn(t,a)},o=n,U(r,o)}return B(t,e),un(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.expanded,r=t.byComment,o=t.editing,a=t.loadVideoDetails,i=this.state.shareVideoQuery;i&&a(i).then(function(){e.setState({shouldShowVideoDetails:!0})}),n&&this.loadAnswerConcernedVoters(),r&&setTimeout(function(){return e.setState({commentsShown:Boolean(r)})}),o&&this.startEditing()}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props.answer,r=n.reshipmentSettings,o=n.commentPermission,a=e.answer,i=a.reshipmentSettings,c=a.commentPermission,l=e.editing;!r&&i&&!o&&c&&setTimeout(function(){return t.settingsTogglerEl.click()}),l&&!this.props.editing&&this.startEditing()}},{key:"getShareVideoId",value:function(){this.props.location;return null}},{key:"renderReshipmentSettings",value:function(e){var t=this;return Object.keys(mn).map(function(n){var r=Object(ft.a)(n,e);return ye.a.createElement(Se.b,{key:n,onClick:function(){return t.handleReshipmentSettings(n)},className:Object(ft.b)(n,e)},r&&ye.a.createElement(je.a,{className:"Button-icon",name:r}),mn[n])})}},{key:"renderAnswerExtraInfo",value:function(){var e=this.props,t=e.answer,n=t.id,r=t.type,o=t.voteupCount,a=t.markInfos,i=e.actor,c=e.action,l=e.isHuman,s=e.concernedUpvoters,u=e.useNewLabels,p=a&&a.length>0,f=p&&!u;if(!f&&!o)return null;var d=i&&i.urlToken,h=f&&a.filter(function(e){return Ye.x[e.markType]}).map(function(e,t){return ye.a.createElement(ve.Fragment,{key:t},0!==t&&"、",ye.a.createElement(A,{markInfo:e}))});return l&&!1||ye.a.createElement("div",{className:"AnswerItem-extraInfo",key:"answerExtraInfo"},f&&h.length&&ye.a.createElement(Ce.CJKSpace,null,"收录于",h),f&&Boolean(o)&&" · ",ye.a.createElement(Pt.a,{id:n,type:r,voteupCount:o,upvotedFollowees:(s||[]).filter(function(e){return d!==e.urlToken}),too:"voted"===c}))}},{key:"renderSettings",value:function(){var e=this,t=this.context.currentUser,n=this.props,r=n.answer,o=r.collapsedBy,a=r.relationship;a=void 0===a?{}:a;var i=a.isAuthor,c=r.reshipmentSettings,l=r.commentPermission,s=r.question.questionType,u=r.rewardInfo;u=void 0===u?{}:u;var p=u.isRewardable,f=void 0!==p&&p,d=r.relevantInfo,h=n.answer,m=n.canCollapse;return t&&i?c&&l?ye.a.createElement(Se.c,{key:"settings",toggler:ye.a.createElement(Te.c,{preset:"plain",onRef:function(t){e.settingsTogglerEl=t},icon:_e._57,label:"设置"}),reversed:!0,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selectMenuItem"},this.renderReshipmentSettings(c),ye.a.createElement(Se.a,null),ye.a.createElement(dt.c,{target:h,onChange:this.props.updateAnswerCommentPermission,current:h.commentPermission}),ye.a.createElement(Se.a,null),f&&ye.a.createElement(Se.b,{onClick:this.onCloseReward},"关闭赞赏"),ye.a.createElement(Se.b,{onClick:this.openDeleteModal},"删除"),"commercial"===s&&m&&"nobody"===o&&(!d||"brand_special"!==d.relevantType)&&[ye.a.createElement(Se.a,{key:"MenuDivider"}),ye.a.createElement(Se.b,{key:"MenuItem",onClick:this.handleUpdateAnswerCollapsed},"隐藏")]):ye.a.createElement(Te.c,{key:"settings",preset:"plain",onClick:this.handleLoadAnswerForSettings,icon:_e._57,label:"设置"}):null}},{key:"renderReshipment",value:function(e,t){var n=this;return"need_payment"===t?ye.a.createElement(Se.b,{onClick:function(){ke.default.trackEvent(n,{action:"Authorize",element:"Button",is_intent:!0})},tag:"a",href:"/copyright/apply?answer="+e,target:"_blank"},"申请授权"):"disallowed"===t?ye.a.createElement(Se.b,{tag:"a",target:"_blank",href:"/terms#sec-licence-6"},"禁止转载"):null}},{key:"renderOptions",value:function(){var e=this;if(!this.context.currentUser)return null;var t=this.props,n=t.answer,r=t.canCollapse,o=t.renderExtraOptions,a=n.id,i=n.reshipmentSettings,c=n.relationship;c=void 0===c?{}:c;var l=c.isAuthor,s=c.isNothelp,u=n.collapsedBy,p=n.question.questionType,f=n.annotationAction,d=void 0===f?[]:f,h=n.annotationDetail,m={toggler:ye.a.createElement(Te.c,{preset:"plain",className:"OptionsButton",icon:_e.I,"aria-label":"更多"}),reversed:!0,onOpen:this.handleLogMoreClick,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selfMenuItem"},b="commercial"===p,v="nobody"!==u;return l?null:ye.a.createElement(Se.c,pn({},m,{key:"options"}),!1,r&&!b&&ye.a.createElement(Se.b,{onClick:v?this.handleUpdateAnswerCollapsed:this.handleCollapseModalShow},v?"取消隐藏":"隐藏"),r&&b&&!v&&ye.a.createElement(Se.b,{onClick:this.handleUpdateAnswerCollapsed},"隐藏"),d&&d.some(function(e){return Ye.a.add===e})&&!h&&ye.a.createElement(Se.b,{onClick:this.handleShowAddAnnotationModal},"标记内容"),d&&d.some(function(e){return Ye.a.cancel===e})&&h&&ye.a.createElement(Se.b,{onClick:this.handleShowCancelAnnotationModal},"撤销标记"),ye.a.createElement(Se.b,{onClick:this.handleUpdateUnhelpful},s?"撤销没有帮助":"没有帮助"),ye.a.createElement(Se.b,{onClick:this.handleReportOpen},"举报"),this.renderReshipment(a,i),o&&o({itemClassName:"AnswerItem-selfMenuItem",getContainer:function(){return e.contentItem}}))}},{key:"renderMeta",value:function(){var e=this.props.answer,t=bn(e);return Object.keys(t).map(function(e){return ye.a.createElement("meta",{key:e,itemProp:e,content:t[e]})})}},{key:"renderBrandQuestionPrizeTip",value:function(){var e=this.props.answer,t=e.id,n=e.question.prize;n=void 0===n?{}:n;var r=n.winnersAnswerTokens,o=n.prizes;if(!n.status)return null;var a=["一","二","三"],i=null;return o&&r&&r.forEach(function(e,n){e.includes(t)&&null===i&&(i=o&&o[1]&&o[1].name?"得"+a[n]+"等奖":"奖")}),i&&ye.a.createElement("div",{className:"AnswerItem-brandQuestionPrizeTip"},"该回答在有奖问答中获",i)}},{key:"renderBrandEntityTrack",value:function(){var e=this.state.contentExpanded,t=this.props,n=t.answer,r=t.expanded,o=t.isBrandAnswer,a=n.question;return(r||e)&&(a&&"commercial"===a.questionType||o)?ye.a.createElement(kt.a,{type:n.type,id:n.id}):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.answer,r=t.reward,o=t.answer,a=o.id,i=o.isNormal,c=void 0===i||i,l=o.isDelete,s=o.question,u=o.rewardInfo,p=o.question,f=p.title,d=p.id,h=p.questionType,m=p.isMuted,b=p.voteDownReason,v=p.commercial,y=o.author,g=o.excerpt,w=o.content,E=o.editableContent,O=o.voteupCount,C=o.commentCount,_=o.adminClosedComment,k=o.relationship;k=void 0===k?{}:k;var T=k.voting,j=k.isAuthor,S=o.collapsedBy,P=o.isSticky,x=o.createdTime,N=o.updatedTime,R=o.thumbnail,I=o.thumbnailExtraInfo,D=o.reviewInfo;D=void 0===D?{}:D;var A=D.isReviewing,L=D.editType,U=o.relevantInfo;U=void 0===U?{}:U;var B=U.relevantType,F=o.annotationDetail,V=t.relatedTo,z=t.editable,q=t.byComment,H=t.draft,W=t.expanded,G=t.lastreadTouchable,X=t.preset,Y=t.canCollapse,K=t.canStick,Q=t.itemProp,Z=void 0===Q?"answer":Q,J=t.addAnnotation,$=t.cancelAnnotation,ee=t.showNotification,te=t.dataZaIndex,ne=t.blockReading,re=t.edition,oe=t.switches,ae=(t.isWechat,t.lessExcerpt),ie=(t.isHuman,t.ua),ce=t.shouldSpecialOia,le=t.shareVideoDetail,se=t.shouldOia,ue=t.formatContent,pe=t.zaInfos,fe=pe.expand,de=pe.title,he=pe.voteUp,me=pe.thank,be=pe.voteDown,ve=pe.toggleComment,ge=pe.share,Ee=pe.getCommentAction,Ce=t.handleToggleSticky,ke=t.renderActionButtons,Se="function"==typeof Ce,Pe=this.context.currentUser,xe="/question/"+d+"/answer/"+a,Ne=this.state,Re=Ne.reportModalShown,Ie=Ne.deleteModalShown,De=Ne.collapseModalShown,Ae=Ne.favlistsShown,Me=Ne.editing,Le=Ne.commentsShown,Ue=Ne.commentPattern,Be=Ne.addAnnotationModalShown,Fe=Ne.cancelAnnotationModalShown,ze=Ne.positionStatus,qe=Ne.shareVideoQuery,He=Ne.shouldShowVideoDetails,We=Ne.contentExpanded,Xe=qe&&He?{title:le.title,thumbnail:le.coverUrl,isLens:!0,id:qe,isPlayable:!0,url:"https://www.zhihu.com/video/"+qe}:null;if(l)return ye.a.createElement("div",{className:"AnswerItem-deleted"},"你已经删除了该问题的回答，如果需要修改，请先  ",ye.a.createElement("a",{onClick:this.handleRestoreAnswer},"撤销删除"));var Ke=!(A&&"create"===L),Qe="commercial"===h,Ze="nobody"!==S,Je=hn(X)||ye.a.createElement(Dt.a,{className:we()("AnswerItem-authorInfo",{"AnswerItem-authorInfo--related":V}),key:"authorInfo",preset:dn(X)?"plain":"default",author:y,relatedTo:V}),$e=this.renderAnswerExtraInfo(),et=this.renderLabels(),tt=et.labels,nt=et.editingLabels;if(Me)return ye.a.createElement("div",null,Je,nt,$e,ye.a.createElement(It.a,{className:"AnswerItem-form",bordered:!0,isEdit:!0,ref:function(t){e.answerForm=t},question:s,defaultValue:E,onDeleteDraft:this.handleCancelEditAnswer,onCancel:this.handleCancelEditAnswer,onSubmit:this.handleSubmitAnswer,isRewardable:u.isRewardable,addRewardTagline:this.addRewardTagline}));var rt=fn(X)?[[Je].concat(M(tt)),$e]:[[Je].concat(M(tt),[$e]),null],ot=sn(rt,2),at=ot[0],it=ot[1],ct="mainEntityOfPage"===Z||"acceptedAnswer"===Z,lt=ce&&!ct;return ye.a.createElement(jt.e,{onRef:function(t){e.contentItem=t},className:"AnswerItem","data-za-index":te,"data-zop":JSON.stringify({authorName:y.name,itemId:a,title:f,type:"answer"}),data:n,meta:at,title:!V&&ye.a.createElement("div",{itemProp:"zhihu:question",itemType:"http://schema.org/Question",itemScope:!0},ye.a.createElement("meta",{itemProp:"url",content:"https://www.zhihu.com/question/"+d}),ye.a.createElement("meta",{itemProp:"name",content:f}),Se&&this.props.isSticky&&ye.a.createElement(an.a,null),ye.a.createElement(Oe.Link,pn({to:xe,target:"_blank","data-za-detail-view-element_name":"Title"},de&&{"data-za-detail-view-id":de}),f)),lastreadTouchable:G,name:a,itemProp:Z,itemType:"http://schema.org/Answer",itemScope:!0},ye.a.createElement(_t.b,{keyMap:{COMMENT:"c",BOOKMARK:"s c"},handlers:{COMMENT:function(t){return e.commentButton&&e.commentButton.click(t)},BOOKMARK:this.handleFavlistsShown},getScope:this.getShortcutScope}),this.renderMeta(),Qe&&this.renderBrandQuestionPrizeTip(),this.renderBrandEntityTrack(),(c||j)&&ye.a.createElement(Mt.b,pn({getShortcutScope:this.getShortcutScope,onToggleExpend:this.handleExpand},lt&&{expandText:"App 内查看"},!1,{cover:R,hasVideo:Boolean(I&&"video"===I.type),videoData:Xe,handleClickVideoMoreButton:this.handleClickVideoMoreButton,unescapable:Boolean(V),expanded:W,onPositionStatusChange:this.handlePositionStatusChange,before:it,excerpt:ue?ue(g,n):g,html:ue?ue(w||g,n):w||g,prefix:this.renderPrefix(),after:ye.a.createElement("div",null,ye.a.createElement(rn,{className:"AnswerItem-CommercialQuestionTail",commercial:v}),!Xe&&ye.a.createElement(Mt.a,pn({created:x,updated:N,href:xe},se&&{onClick:this.createOpenInAppHandler("click_answer")})),Pe&&j&&z&&ye.a.createElement("a",{className:"AnswerItem-editButton",onClick:this.handleStartEditAnswer},ye.a.createElement(je.a,{left:!0,name:"modify"}),ye.a.createElement("span",{className:"AnswerItem-editButtonText"},"修改",H&&H.editableContent&&"（有未发布的编辑草稿）")),Pe&&ye.a.createElement(tn,{reward:r,currentUser:Pe,rewardInfo:u,isAuthor:j,id:a,author:y,ua:ie})),data:n,onClick:lt?this.createOpenInAppHandler("expand_answer"):this.disableAuth&&ne&&this.handleToggleGuide},ae?{limit:74}:{},{zaIds:{expand:fe}}),Ke&&Y&&Qe&&Ze&&ye.a.createElement(Te.c,{className:we()("ContentItem-rightButton AnswerItem-mainAction AnswerItem-open",{"AnswerItem-mainAction--disabled":"community"===S}),onClick:this.handleUpdateAnswerCollapsed},"公开回答"),Ke&&K&&!Ze&&"brand_special"!==B&&ye.a.createElement(Te.c,{className:"ContentItem-rightButton AnswerItem-mainAction AnswerItem-stick",onClick:this.handleUpdateAnswerStick},P?"取消精选":"设为精选"),ke({componentList:[{name:"vote",component:Ke&&ye.a.createElement(At.a,pn({key:"vote",getShortcutScope:this.getShortcutScope,disabled:Qe&&m,count:O},se&&{onClick:this.createOpenInAppHandler("vote_answer")},{onVote:this.handleVote,disableAuth:this.disableAuth,voting:T,isOwner:j,handleToggleGuide:this.handleToggleGuide,isShowVoteDownMenu:Pe&&oe.isAnswerOpposeReasonVisiable,positionStatus:ze,voteDownReason:b,onLoadVoteDownReason:this.handleLoadVoteDownReason,onSelectVoteDownReason:this.handleSelectVoteDownReason,onSetVoteDownReason:this.handleSetShowVoteDownReason,zaIds:{voteUp:he,voteDown:be}}))},{name:"comment",component:Ke&&ye.a.createElement(xt.a,pn({onInstance:function(t){return e.commentButton=t},getShortcutScope:this.getShortcutScope,key:"comment",onClick:this.openModal},!1,{commentsShown:Le,commentClosed:_,count:C,positionStatus:ze,zaInfos:{toggleComment:ve,getCommentAction:Ee}}))},{name:"share",component:Ke&&!0&&ye.a.createElement(St.a,{getShortcutScope:this.getShortcutScope,key:"share",id:a,type:"answer",title:f,authorName:y&&y.name,href:xe,positionStatus:ze,zaShareId:ge})},{name:"favlist",component:Ke&&(!Pe||!Pe.isOrg)&&!re.yidianzixun&&ye.a.createElement(Te.c,{key:"favlist",preset:"plain",onClick:this.handleFavlistsShown,icon:_e._61,label:"收藏"})},{name:"thank",component:Ke&&!j&&ye.a.createElement(ln.a,{getShortcutScope:this.getShortcutScope,key:"thank",zaInfo:me,answer:n})},{name:"sticky",component:Se&&j&&Object(ut.a)(Pe)&&ye.a.createElement(Te.c,{key:"sticky",preset:"plain",onClick:Ce,icon:this.props.isSticky?_e._64:_e._63,label:this.props.isSticky?"取消置顶":"置顶"})},{name:"options",component:Ke&&this.renderOptions()},{name:"settings",component:this.renderSettings()},{name:"annotation",component:!We&&ye.a.createElement(Tt.a,{key:"annotation",annotationDetail:F})}]})),ye.a.createElement(Nt.a,{shown:Le,parent:n,byComment:q,commentPattern:Ue,onClose:this.closeModal}),ye.a.createElement(Rt.a,{type:"answer",urlToken:a,shown:Re,onClose:this.handleReportHide,zaEnabled:!0}),ye.a.createElement(Ve,{addAnnotation:J,onClose:this.handleCloseAddAnnotationModal,shown:Be,type:Ye.b,urlToken:a,showNotification:ee}),ye.a.createElement(Ge,{cancelAnnotation:$,onClose:this.handleCloseCancelAnnotationModal,shown:Fe,type:Ye.b,urlToken:a,showNotification:ee}),Pe&&j&&ye.a.createElement(nn.a,{title:"你确定要删除自己的答案吗？",subtitle:"答案内容不会被永久删除，你还可以撤消本次删除操作。",shown:Ie,onCancel:this.closeDeleteModal,onSubmit:this.handleDeleteAnswer}),Y&&ye.a.createElement(nn.a,{title:"隐藏答案",subtitle:"隐藏后该回答将不展示也不流通，是否确定隐藏？",shown:De,onCancel:this.handleCollapseModalHide,onSubmit:this.handleUpdateAnswerCollapsed}),ye.a.createElement(bt.a,{id:a,type:"answer",shown:Ae,onClose:this.handleFavlistHide,zaEnabled:!0}),!1)}}]),t}(ve.PureComponent),de.contextTypes=pn({currentUser:be.a.object,authRequired:be.a.func},!1),de.propTypes={relatedTo:be.a.oneOf(["question","answer"]),editable:be.a.bool,preset:be.a.oneOf(["special-plain","plain","primary"]),lessExcerpt:be.a.bool,shareVideoDetail:be.a.object,formatContent:be.a.func,renderExtraOptions:be.a.func,zaInfos:mt.a,onToggleExpand:be.a.func,useNewLabels:be.a.bool.isRequired,renderActionButtons:be.a.func,getShortcutScope:be.a.func},de.defaultProps={editable:!1,preset:"primary",zaInfos:{},renderActionButtons:ln.b},fe=he))||fe)||fe)||fe)||fe);n.d(t,"a",function(){return vn})},1326:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function u(e,t){var n=t.id,r=t.type,o=e.entities.users,a=e[F[r]]||{},i=a.voters,c=void 0===i?{}:i,l=a.concernedUpvoters,u=void 0===l?{}:l,p=c[n]||{isFetching:!1,isDrained:!1,order:"normal",ids:[]},f=p.isFetching,d=p.isDrained,h=p.order,m=p.ids,b=u[n]||{ids:[]},v=b.ids;return{isFetching:f,isDrained:d,order:h,items:[].concat(s(v),s(m.filter(function(e){return!v.includes(e)}))).map(function(e){return o[e]})}}var p=n(0),f=n.n(p),d=n(5),h=n(171),m=n(490),b=n(488),v=n(278),y=n(1),g=n.n(y),w=n(169),E=n(104),O=n(494),C=n(3),_=n(260),k=n(170),T=function(e){var t=e.upvotedFollowees,n=e.voteupCount,r=e.actionText,o=e.canClick,a=e.onClick;if(!n)return null;var i=t.length,c=i===n?"":Object(_.a)(n)+" 人";return f.a.createElement(O.CJKSpace,null,t.map(function(e,t){return f.a.createElement("span",{key:t},t>0&&"、",f.a.createElement(k.a,{key:t,noBadge:!0,user:e},e.name))}),i>0&&n-i>0&&"等",o?f.a.createElement(C.c,{preset:"plain",onClick:a},c,r):c+r)};T.propTypes={voteupCount:g.a.number.isRequired,upvotedFollowees:g.a.array.isRequired,actionText:g.a.string.isRequired,canClick:g.a.bool,onClick:g.a.func},T.defaultProps={voteupCount:0,actionText:"赞了",upvotedFollowees:[]};var j,S,P,x,N,R,I=T,D=n(1327),A=(n(1442),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),M=(S=j=function(e){function t(){var e,n,a,i;r(this,t);for(var c=arguments.length,l=Array(c),s=0;s<c;s++)l[s]=arguments[s];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.state={modalShown:!1},a.handleListHide=function(){return a.setState({modalShown:!1})},a.handleListShown=function(){return a.setState({modalShown:!0})},i=n,o(a,i)}return a(t,e),A(t,[{key:"componentWillReceiveProps",value:function(){var e=this.props.modalShown;e&&!this.state.modalShown&&this.setState({modalShown:e})}},{key:"render",value:function(){var e=this.props,t=e.voteupCount,n=e.upvotedFollowees,r=e.openable,o=e.type,a=e.too,i=e.isFetching,c=e.isDrained,l=e.items,s=e.onLoad;if(t<=0)return null;var u=this.state.modalShown,p=void 0;return p="pin"===o?"为该"+E.b[o]+"鼓掌":"column"===o?"关注":(a?"也":"")+("answer"===o?"赞同":"赞")+"了该"+E.b[o],f.a.createElement("span",{className:"Voters"},f.a.createElement(I,{canClick:r,onClick:this.handleListShown,voteupCount:t,upvotedFollowees:n,actionText:p}),f.a.createElement(w.b,{size:"fullPage",onClose:this.handleListHide},u&&f.a.createElement(D.a,{isFetching:i,isDrained:c,text:"column"===o?"关注了":"赞同了",items:l,voteupCount:t,onLoad:s})))}}]),t}(p.Component),j.propTypes={openable:g.a.bool,upvotedFollowees:g.a.array,id:g.a.oneOfType([g.a.number,g.a.string]),type:g.a.oneOf(["pin","answer","article","column"]).isRequired,modalShown:g.a.bool},j.defaultProps={openable:!0},S),L=M,U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),F={answer:"answers",article:"articles",pin:"pins",column:"columns"},V=(P=Object(d.connect)(u,{loadAnswerVoters:h.q,loadArticleVoters:m.c,loadPinVoters:b.f,loadColumnsFollowers:v.c}))((R=N=function(e){function t(){var e,n,r,o;i(this,t);for(var a=arguments.length,l=Array(a),s=0;s<a;s++)l[s]=arguments[s];return n=r=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.handleLoad=function(){var e=r.props,t=e.type,n=e.id,o=e.loadAnswerVoters,a=e.loadPinVoters,i=e.loadArticleVoters,c=e.loadColumnsFollowers;switch(t){case"answer":return o(n);case"pin":return a(n);case"article":return i(n);case"column":return c(n);default:return null}},o=n,c(r,o)}return l(t,e),B(t,[{key:"render",value:function(){return f.a.createElement(L,U({onLoad:this.handleLoad},this.props))}}]),t}(p.Component),N.propsTypes=U({},L.propsTypes),N.defaultProps=U({},L.defaultProps),x=R))||x;t.a=V},1327:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,c,l=n(1),s=n.n(l),u=n(0),p=n.n(u),f=n(1277),d=n(260),h=n(261),m=n(1344),b=n(1305),v=n(1441),y=(n.n(v),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),w=(c=i=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),g(t,[{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.isDrained,r=e.items,o=e.voteupCount,a=e.onLoad,i=e.text,c=e.isRewardList,l=e.notice,s=e.type,u=e.currentUser,v={getContainer:function(e){return e}};return p.a.createElement("div",{className:"VoterList"},p.a.createElement(m.a,{header:Object(d.a)(o)+" 人"+(i||"赞同了")}),c&&l&&p.a.createElement("div",{className:"VoterList-description"},p.a.createElement("p",null,l)),p.a.createElement(h.b,y({className:"VoterList-content",isLoading:t,isDrained:n,onLoad:a,placeholder:p.a.createElement(h.a,{className:"List-item",withAvatar:!0})},v),r&&r.map(function(e,t){return p.a.createElement(f.a,{key:t+"."+e.urlToken},p.a.createElement(b.a,{currentUser:u,user:e,isRewardList:c,meta:null,type:s}))})))}}]),t}(u.Component),i.propTypes={isFetching:s.a.bool.isRequired,isDrained:s.a.bool.isRequired,items:s.a.array.isRequired,voteupCount:s.a.number.isRequired,text:s.a.string.isRequired,onLoad:s.a.func.isRequired,isRewardList:s.a.bool,type:s.a.string,currentUser:s.a.object},c);t.a=w},1328:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u,p,f=n(1),d=n.n(f),h=n(0),m=n.n(h),b=n(2),v=n.n(b),y=n(3),g=n(8),w=n(6),E=n(260),O=n(31),C=n(527),_=n(1283),k=n(29),T=n(73),j=(n(1387),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),S=(p=u=function(e){function t(){var e,n,r,i;o(this,t);for(var c=arguments.length,l=Array(c),s=0;s<c;s++)l[s]=arguments[s];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={step:0},r.toggleStep=function(){r.setState({step:0===r.state.step?1:0},function(){r.popover.position()})},r.handleNeverShowVoteDownReason=function(){r.props.onSetVoteDownReason(!1),r.popover.close()},r.handleSelectReason=function(e){r.props.onSelectVoteDownReason(e),r.popover.close()},i=n,a(r,i)}return i(t,e),j(t,[{key:"componentDidUpdate",value:function(){"absolute"===this.props.positionStatus&&this.popover.close()}},{key:"render",value:function(){var e=this,t=this.props,n=t.reasonList,o=t.positionStatus,a=this.state.step,i=[].concat(r(n)).sort(function(e,t){return e.sort-t.sort});return m.a.createElement(T.a,{className:"VoteDownReasonMenu",targetClassName:"VoteDownReasonMenu-target",positionStatus:o,toggler:this.props.toggler,onOpen:function(){e.setState({step:0})},getContainer:function(){return document.querySelector(".ContentItem-actions")},onClick:this.props.onTogglerClick,ref:function(t){e.popover=t,e.props.popoverRef&&e.props.popoverRef(t)},placement:"top",arrowed:!0,preventCloseOnTarget:!0},m.a.createElement("div",{className:"VoteDownReasonMenu-container"},m.a.createElement("div",{className:"VoteDownReasonMenu-header"},0===a&&"已反对，你觉得",1===a&&"不再显示该反馈功能？"),m.a.createElement("div",{className:"VoteDownReasonMenu-action"},0===a&&m.a.createElement("span",{className:"preventCloseOnTarget",onClick:this.toggleStep},"不再显示"),0===a&&m.a.createElement("div",{className:"VoteDownReasonMenu-spliter"}),m.a.createElement(y.c,{preset:"plain",className:"VoteDownReasonMenu-closeButton",onClick:function(){e.popover.close()},"aria-label":"关闭"},m.a.createElement(k.a,{className:"VoteDownReasonMenu-closeIcon",name:"remove",width:12,height:12,fill:"#a5b6cf"}))),0===a&&m.a.createElement("div",{className:"VoteDownReasonMenu-reasonList"},i.map(function(t){return m.a.createElement("div",{className:"VoteDownReasonMenu-reason",key:t.reasonId,onClick:function(){e.handleSelectReason(t)}},t.name)})),1===a&&m.a.createElement("div",{className:"VoteDownReasonMenu-disableReason"},m.a.createElement("div",{className:"VoteDownReasonMenu-disableReasonHint"},"你可以在「设置」页面中的「屏蔽」开启。"),m.a.createElement("div",{className:"VoteDownReasonMenu-disableReasonButtonList"},m.a.createElement(y.c,{className:"preventCloseOnTarget",onClick:this.toggleStep},"返回"),m.a.createElement(y.c,{color:"blue",onClick:this.handleNeverShowVoteDownReason},"不再显示")))))}}]),t}(h.Component),u.defaultProps={reasonList:[]},p),P=S,x=n(10);n(1388);n.d(t,"a",function(){return M});var N,R,I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),A=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),M=(R=N=function(e){function t(){var e,n,r,o;c(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.shouldShowMenu=function(){var e=r.props,t=e.voting,n=e.voteDownReason,o=e.onLoadVoteDownReason;return!(!e.isShowVoteDownMenu||"FALSE"===O.a.get(x.u)||(-1===t?(r.popover.close(),1):!n&&(r.isPendingForVoteDownReason=!0,o(),1)))},r.onVote=r.context.authRequired(function(e){r.props.onVote(e)},x.L.vote),r.voteUp=function(e){var t=r.props.voting,n=1===t?["UnUpvote","neutral"]:["Upvote","up"],o=D(n,2),a=o[0],i=o[1];r.vote(e,a,i)},r._voteDown=function(e){var t=r.props.voting,n=-1===t?["UnDownvote","neutral"]:["Downvote","down"],o=D(n,2),a=o[0],i=o[1];r.vote(e,a,i)},r.vote=function(e,t,n){var o=r.props,a=o.disableAuth,i=o.handleToggleGuide,c=o.onClick,l=o.type,s=o.zaIds,u=s.voteUp,p=s.voteDown,f=t.includes("Upvote")?u:p;return"article"===l&&"down"===n&&Object(C.a)(e,2315),w.default.trackEvent(e&&e.target,I({action:t,element:"Button"},f&&{id:f})),c?void c(e):a?void i():void r.onVote(n)},r.voteDown=function(e){r.shouldShowMenu()&&r.popover.open(),r._voteDown(e)},r.handleTogglerClick=function(e){r.shouldShowMenu()||e.preventDefault(),r._voteDown(e)},r.renderVoteUpButton=function(){var e=r.props,t=e.isOwner,n=e.count,o=e.voting,a=e.disabled,i=e.hideDesc,c=1===o?"已赞同 ":"赞同 ";return m.a.createElement(y.c,{className:v()("VoteButton VoteButton--up",{"is-active":1===o}),disabled:t||a,onClick:r.voteUp,"aria-label":"赞同"},m.a.createElement(g._69,{center:!0,size:10,className:"VoteButton-TriangleUp"}),!i&&c,0!==n&&Object(E.b)(n))},r.renderVoteDownButton=function(){var e=r.props,t=e.voting,n=e.disabled;return m.a.createElement(y.c,{className:v()("VoteButton VoteButton--down",{"is-active":-1===t},{"VoteButton--mobileDown":!1}),disabled:n,onClick:r._voteDown,"aria-label":"反对"},m.a.createElement(g._68,{center:!0,size:10}))},o=n,l(r,o)}return s(t,e),A(t,[{key:"componentWillReceiveProps",value:function(e){e.voteDownReason&&this.isPendingForVoteDownReason&&(this.isPendingForVoteDownReason=!1,this.popover.open())}},{key:"render",value:function(){var e=this,t=this.props,n=t.isOwner,r=t.positionStatus,o=t.isShowVoteDownMenu,a=t.voteDownReason,i=t.getShortcutScope,c=o&&!0;return m.a.createElement("span",null,m.a.createElement(_.b,{keyMap:{VOTE_UP:"v",VOTE_DOWN:"d"},handlers:{VOTE_UP:this.voteUp,VOTE_DOWN:this.voteDown},getScope:i}),this.renderVoteUpButton(),!n&&!c&&this.renderVoteDownButton(),!n&&c&&m.a.createElement(P,{reasonList:a,toggler:this.renderVoteDownButton(),popoverRef:function(t){return e.popover=t},positionStatus:r,onTogglerClick:this.handleTogglerClick,onSelectVoteDownReason:this.props.onSelectVoteDownReason,onSetVoteDownReason:this.props.onSetVoteDownReason}))}}]),t}(h.Component),N.contextTypes={authRequired:d.a.func},N.propTypes={voting:d.a.oneOf([-1,0,1]).isRequired,disabled:d.a.bool,type:d.a.string,hideDesc:d.a.bool,zaIds:d.a.shape({voteUp:d.a.number,voteDown:d.a.number}),getShortcutScope:d.a.func},N.defaultProps={voting:0,disabled:!1,type:"",hideDesc:!1,zaIds:{}},R)},1329:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return function(t,n){var o=n().entities.lives[e],a=!o.isLiked;return t({API:{types:x.UPDATE_LIKED,endpoint:"v3/lives/"+e+"/like",method:a?"POST":"DELETE"},UPDATE:{request:{lives:r({},e,{isLiked:a,likedNum:o.likedNum+(a?1:-1)})},failure:{lives:r({},e,o)}}})}}function a(e){return function(t,n){var o=n().entities.liveCourses[e],a=!o.isLiked;return t({API:{types:x.UPDATE_COURSE_LIKED,endpoint:"v3/lives/course/"+e+"/like",method:a?"POST":"DELETE"},UPDATE:{request:{liveCourses:r({},e,{isLiked:a,likedNum:o.likedNum+(a?1:-1)})},failure:{liveCourses:r({},e,o)}}})}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){return function(t,n){var r=n().entities.ebooks[e],o=!(r.relationship||{}).voting;return t({API:{types:R.FOLLOW,method:o?"POST":"DELETE",endpoint:"v3/books/"+e+"/voters"},UPDATE:{request:{ebooks:i({},e,{relationship:N({},r.relationship,{voting:o}),voteupCount:r.voteupCount+(o?1:-1)})},failure:{ebooks:i({},e,r)}}})}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){return function(t,n){var r=n(),o=r.entities.promotions,a=o[e],i=a.voteupCount,c=a.voting,s=c?0:1;return t({API:{types:A.LIKE,endpoint:"v3/promotions/"+e+"/voters",query:{voting:s},method:"POST"},UPDATE:{request:{promotions:l({},e,{voteupCount:i+(c?-1:1),voting:s})},success:function(t){return{promotions:l({},e,t)}},failure:{promotions:l({},e,a)}},NOTIFICATION:{failure:D.a}})}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d,h,m,b,v=n(1),y=n.n(v),g=n(0),w=n.n(g),E=n(5),O=n(2),C=n.n(O),_=n(3),k=n(29),T=n(6),j=n(260),S=n(104),P=n(4),x=Object(P.a)("live",["UPDATE_LIKED","UPDATE_COURSE_LIKED"]),N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R=Object(P.a)("ebook",["FOLLOW","UNFOLLOW"]),I=n(490),D=n(17),A=Object(P.a)("promotion",["LIKE"]),M=n(488),L=n(10),U=(n(1469),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),B={ebook:"updateEBookVoters",live:"updateLiveLiked",live_course:"updateLiveCourseLiked",article:"updateArticleLike",promotion:"updatePromotionLike",pin:"updatePinsLike"},F=(d=Object(E.connect)(null,{updateEBookVoters:c,updateLiveLiked:o,updateLiveCourseLiked:a,updateArticleLike:I.d,updatePromotionLike:s,updatePinsLike:M.h}))((b=m=function(e){function t(){var e,n,r,o;u(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleToggleVote=r.context.authRequired(function(e){var t=r.props,n=t.liked,o=t.type,a=t.id,i=!n;T.default.trackEvent(e.target,{action:i?"Upvote":"UnUpvote",element:"Button"});var c=B[o];r.props[c](a,i)},L.L.vote),o=n,p(r,o)}return f(t,e),U(t,[{key:"render",value:function(){var e=this.props,t=e.liked,n=e.count,r=e.className,o=e.icon,a=void 0===o?"like":o,i=e.disabled,c=e.disableAuth,l=e.handleToggleGuide;return w.a.createElement(_.c,{className:C()("LikeButton",{"is-active":t},r),onClick:c?l:this.handleToggleVote,disabled:i},w.a.createElement(k.a,{name:a}),Object(j.b)(n))}}]),t}(g.Component),m.contextTypes={authRequired:y.a.func},m.propTypes={type:y.a.oneOf(S.a).isRequired,id:y.a.oneOfType([y.a.number,y.a.string]).isRequired,icon:y.a.string,liked:y.a.bool,count:y.a.number},h=b))||h;t.a=F},1336:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return h});var i=n(1),c=n.n(i),l=n(0),s=n.n(l),u=n(18),p=(n.n(u),n(175)),f=(n.n(p),n(484)),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.check=function(){var e=n.props.offset,t=e,r=n.childNodes.map(function(e){return Object(u.findDOMNode)(e)}).filter(function(e){return e}).map(function(e){var t=window.getComputedStyle(e);return e.offsetHeight+parseInt(t.marginBottom,10)+parseInt(t.marginTop,10)}),o=n.el&&n.el.clientHeight,a=document.documentElement.clientHeight-e;if(n.sticky&&n.sticky.updateHeight(),o>a){var i=o;r.every(function(e){return!(i<a)&&(i-=e,!0)}),t=e-o+i}n.state.stickyOffset!==t&&n.setState({stickyOffset:t})},n.childNodes=[],n.state={stickyOffset:e.offset},n}return a(t,e),d(t,[{key:"componentDidMount",value:function(){this.resizeHandler=Object(p.subscribe)("resize",this.check),this.timeout=setTimeout(this.check)}},{key:"componentWillUnmount",value:function(){this.resizeHandler.unsubscribe(),clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.className,o=t.onRef;return s.a.createElement("div",{className:r,ref:o},s.a.createElement(f.a,{offset:this.state.stickyOffset,ref:function(t){e.sticky=t}},s.a.createElement("div",{ref:function(t){e.el=t}},l.Children.toArray(n).map(function(t,n){return Object(l.cloneElement)(t,{ref:function(t){e.childNodes[n]=t}})}))))}}]),t}(l.Component);h.propTypes={offset:c.a.number,onRef:c.a.func,className:c.a.string},h.defaultProps={offset:0,onRef:function(){},className:""}},1338:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s,u,p=n(1),f=n.n(p),d=n(0),h=n.n(d),m=n(48),b=n(18),v=n(6),y=n(515),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E=function(e,t,n,r){return e?{card:{content:e}}:w({},t&&{card:t},n&&{list:n},r&&{attached_info_bytes:r})},O=(u=s=function(e){function t(){var e,n,a,i;r(this,t);for(var c=arguments.length,l=Array(c),s=0;s<c;s++)l[s]=arguments[s];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.handleViewed=function(){var e=a.props.extra;setTimeout(function(){v.default.trackCardShow(a,{},e)})},a.trackEvent=function(e,t,n){v.default.trackEvent(e,t,w({},a.props.extra,n))},i=n,o(a,i)}return a(t,e),g(t,[{key:"componentDidMount",value:function(){this.setModule()}},{key:"componentDidUpdate",value:function(){this.setModule()}},{key:"setModule",value:function(){var e=this.props,t=e.module,n=e.index,r=e.isAd,o=e.moduleName,a=e.content,i=e.list,c=e.card,l=e.attachedInfoBytes;if(t){var s=Object(b.findDOMNode)(this);s&&v.default.setModule(s,{module:t,index:n,is_ad:r,module_name:o},E(a,c,i,l))}}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.trackCardShow,r=e.children,o="string"==typeof r.type?r:Object(d.cloneElement)(r,{trackEvent:this.trackEvent});return n?h.a.createElement(y.a,{id:t,onViewed:this.handleViewed},o):o}}]),t}(d.Component),s.propTypes={id:f.a.string,module:f.a.string,index:f.a.string,isAd:f.a.bool,content:f.a.object,extra:f.a.object,trackCardShow:f.a.bool,attachedInfoBytes:f.a.string},s.defaultProps={id:null,module:null,index:null,isAd:!1,content:null,extra:null,attachedInfoBytes:null,trackCardShow:!1},u),C=O,_=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}}(),n(169)),k=n(492),T=n(79);n(1372);n.d(t,"a",function(){return D});var j,S,P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),R={zhihu:"注册或登录",wechat:"使用微信快速登录",weibo:"使用微博快速登录",qq:"使用 QQ 快速登录"},I={qq:"qqconn",weibo:"sina",wechat:"wechat_mp"},D=(S=j=function(e){function t(){var e,n,r,o;i(this,t);for(var a=arguments.length,l=Array(a),s=0;s<a;s++)l[s]=arguments[s];return n=r=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.jumpToOAuthUrl=function(e){var t=r.props,n=t.redirectUrl,o=void 0===n?location.href:n,a=t.edition,i=t.utm,c=Object(T.b)(o,a,i),l=c.utmSource,s=c.refSource,u=Object(m.a)(navigator.userAgent),p=u.isZhihu;if("zhihu"===e)return void(location.href=p?"zhihu://signin?next="+o:"https://www.zhihu.com/signin?next="+o+(l?"?utm_source="+l:""));location.href="https://www.zhihu.com/oauth/redirect/login/"+I[e]+"?next=/oauth/account_callback&from="+encodeURIComponent(o)+"&utm_source="+l+"&ref_source="+s},r.renderSignButtons=function(){var e=r.props.buttons;return"string"==typeof e?r.renderSingleSignButton({name:e}):e.map(function(e){return"string"==typeof e?r.renderSingleSignButton({name:e}):"object"===(void 0===e?"undefined":x(e))?r.renderSingleSignButton(e):null})},r.renderSingleSignButton=function(e){var t=e.name,n=e.text,o=e.fill,a=e.color,i="#fff"===o||"#ffffff"===o;return-1===Object.keys(R).indexOf(t)?null:h.a.createElement("button",{className:"SignInModal-button-"+t,key:t,style:{backgroundColor:o,borderColor:i?"#0f88eb":o,color:i?"#0f88eb":a},onClick:function(){r.jumpToOAuthUrl(t)}},n||R[t])},o=n,c(r,o)}return l(t,e),N(t,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.utm,r=e.edition,o=r.yidianzixun,a=r.baidu,i=e.urlScheme,c=this.props.title||(a||!i?"":"打开 App 或")+"登录后继续操作";return o&&(c="打开知乎 App 继续操作"),h.a.createElement(_.b,{size:"small",className:"SignInModal",title:c,onClose:t},h.a.createElement(C,{module:"SignForm",moduleName:c,trackCardShow:!0},h.a.createElement("div",{className:"SignInModal-content"},i&&!a&&h.a.createElement(k.a,P({className:"SignInModal-openInAppButton",href:i},n),"立即打开",o?"":" App"),!o&&this.renderSignButtons())))}}]),t}(d.Component),j.propTypes={onClose:f.a.func.isRequired,urlScheme:f.a.string,redirectUrl:f.a.string,edition:f.a.object,buttons:f.a.oneOfType([f.a.array,f.a.string])},j.defaultProps={buttons:["zhihu"],edition:{},utm:{}},S)},1339:function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"…";return e.length>t?e.slice(0,t)+n:e}t.a=r},1341:function(e,t){},1343:function(e,t){},1344:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(1376);n.n(c);t.a=function(e){var t=e.header,n=e.options,r=e.className,a=e.onRef,c=e.showOptions,l=void 0===c||c;return o.a.createElement("div",{className:i()("Topbar",r,!1),ref:a},o.a.createElement("div",{className:"Topbar-title"},t),l&&o.a.createElement("div",{className:"Topbar-options"},n))}},1345:function(e,t){},1346:function(e,t){},1347:function(e,t,n){"use strict";function r(e,t){return e===t?"check":null}function o(e,t){return e===t?"is-selected":null}t.a=r,t.b=o},1348:function(e,t){},1349:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return e.replace(/^「/,"").replace(/」$/,"")}n.d(t,"a",function(){return E});var c,l,s=n(0),u=n.n(s),p=n(1),f=n.n(p),d=n(2),h=n.n(d),m=n(169),b=n(69),v=n(3),y=n(10),g=n(1444),w=(n.n(g),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),E=(l=c=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.onChangeInputType=function(e){n.setState({checked:e.target.checked})},n.onChangeInputValue=function(e){n.setState({text:e.target.value})},n.submit=function(){var e=n.state.text;n.props.submitRewardText(e)};var a=e.tagline;return n.state={text:i(a)||"予人玫瑰，手有余香",checked:!0},n}return a(t,e),w(t,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.edit,r=this.state,o=r.text,a=r.checked;return u.a.createElement(m.b,{onClose:t,className:"RewardForm-rewardModal"},u.a.createElement("p",{className:"RewardForm-rewardTitle"},n?"编辑赞赏描述":"开启赞赏"),u.a.createElement(b.a,{className:"RewardForm-rewardInput",maxLength:"20",type:"text",value:o,onChange:this.onChangeInputValue}),u.a.createElement("div",{className:"RewardForm-remark"},!n&&u.a.createElement("div",{className:"RewardForm-Protocol"},u.a.createElement("input",{className:"RewardForm-rewardCheckbox",type:"checkbox",onChange:this.onChangeInputType,checked:a}),u.a.createElement("p",null,"我已同意",u.a.createElement("a",{className:"RewardForm-rewardLink",href:"/terms/tipjar"},"《知乎赞赏功能使用协议》"))),u.a.createElement("p",{className:"RewardForm-prompting"},"还可以输入"+(20-o.length)+"个字")),u.a.createElement(v.c,{className:h()("RewardForm-rewardSubmit",{"RewardForm-rewardSubmit-disabled":!a}),onClick:this.submit,disabled:!a},"确定"))}}]),t}(s.Component),c.propTypes={onClose:f.a.func,submitRewardText:f.a.func,edit:f.a.bool,tagline:f.a.string},c.defaultProps={tagline:y.i},l)},1369:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(1),o=n.n(r),a=o.a.shape({cardShow:o.a.number,expand:o.a.number,title:o.a.number,voteUp:o.a.number,voteDown:o.a.number,share:o.a.number,favlists:o.a.number,thank:o.a.number,options:o.a.number,report:o.a.number,toggleComment:o.a.number,getCommentAction:o.a.func})},1372:function(e,t){},1373:function(e,t){},1374:function(e,t,n){e.exports=n.p+"assets/deleteComment.97d8abc0.gif"},1375:function(e,t){},1376:function(e,t){},1377:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(){_="pointer"}function c(){_="wheel"}function l(){C||(window.addEventListener("click",i),window.addEventListener("wheel",c,{passive:!0}),window.addEventListener("mousewheel",c,{passive:!0}),window.addEventListener("touchmove",c,{passive:!0}),C=!0)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=n(0),b=n.n(m),v=n(1),y=n.n(v),g=n(18),w=n(484),E=n(175),O=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),C=!1,_="pointer",k=function(e){function t(){var e;r(this,t);for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];var c=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a)));return c.currentDirection=null,c.lastEmitDirection=null,c.startPosition=0,c.previousPosition=0,c.handleScroll=function(){var e=window.pageYOffset;if(!(e<0)){var t=e<c.previousPosition?"up":"down";t!==c.currentDirection&&(c.currentDirection=t,c.startPosition=c.previousPosition),c.previousPosition=e;var n=c.props,r=n.threshold,o=n.emitOnce,a=n.onScrollUp,i=n.onScrollDown;Math.abs(c.startPosition-e)>=r&&("wheel"!==_||o&&c.lastEmitDirection===t||("up"===t&&a&&a(),"down"===t&&i&&i()),c.lastEmitDirection=t,c.startPosition=e)}},c}return a(t,e),O(t,[{key:"componentDidMount",value:function(){l();var e=this.props,t=e.throttleRate,n=e.useRAF,r=window.pageYOffset;this.startPosition=r,this.previousPosition=r,this.subscription=Object(E.subscribe)("scroll",this.handleScroll,{throttleRate:t,useRAF:n})}},{key:"componentWillUnmount",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"render",value:function(){return this.props.children||null}}]),t}(m.Component);k.propTypes={throttleRate:y.a.number,useRAF:y.a.bool,emitOnce:y.a.bool,threshold:y.a.number,onScrollUp:y.a.func,onScrollDown:y.a.func},k.defaultProps={threshold:100,useRAF:!0,emitOnce:!0};var T,j,S=k,P=n(10),x=(n(1378),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),N=(j=T=function(e){function t(){var e,n,r,o;s(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={enabled:!1,shown:!1},r.handleScrollUp=function(){r.state.shown&&r.canToggle()&&r.setState({shown:!1})},r.handleScrollDown=function(){!r.state.shown&&r.canToggle()&&r.setState({shown:!0})},r.handlePositionStatusChange=function(e){r.canToggle()&&("normal"!==e?r.enable():r.disable())},o=n,u(r,o)}return p(t,e),x(t,[{key:"componentDidMount",value:function(){this.appHeader=document.querySelector(".AppHeader"),this.portal=document.createElement("div"),this.portal.classList.add("PageHeader"),this.appHeader.appendChild(this.portal),this.renderPortal()}},{key:"componentWillReceiveProps",value:function(e){this.renderPortal(e)}},{key:"componentDidUpdate",value:function(e,t){var n=t.shown,r=this.state.shown,o=this.props.onStatusChange;n!==r&&o&&o(r),!n&&r&&(this.appHeader.classList.add("is-hidden"),this.portal.classList.add("is-shown")),n&&!r&&(this.appHeader.classList.remove("is-hidden"),this.portal.classList.remove("is-shown"))}},{key:"componentWillUnmount",value:function(){this.appHeader.classList.remove("is-hidden"),Object(g.unmountComponentAtNode)(this.portal),this.appHeader.removeChild(this.portal)}},{key:"canToggle",value:function(){return!(this.props.prevent||document.activeElement&&document.activeElement.closest(".SearchBar"))}},{key:"enable",value:function(){this.setState({enabled:!0,shown:!0})}},{key:"disable",value:function(){this.setState({enabled:!1,shown:!1})}},{key:"renderPortal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;Object(g.unstable_renderSubtreeIntoContainer)(this,e.children,this.portal)}},{key:"render",value:function(){var e=this.props.offset,t=this.state.enabled;return b.a.createElement("div",null,b.a.createElement(w.a,{offset:e,onPositionStatusChange:this.handlePositionStatusChange},b.a.createElement("div",null)),t&&b.a.createElement(S,{onScrollUp:this.handleScrollUp,onScrollDown:this.handleScrollDown}))}}]),t}(m.Component),T.propTypes={prevent:y.a.bool,offset:y.a.number,onStatusChange:y.a.func},T.defaultProps={prevent:!1,offset:P.f},j),R=N;n.d(t,"a",function(){return D});var I=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),D=function(e){function t(){var e,n,r,o;f(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={show:!1},o=n,d(r,o)}return h(t,e),I(t,[{key:"componentDidMount",value:function(){this.appHeader=document.querySelector(".AppHeader"),this.setState({show:Boolean(this.appHeader)})}},{key:"render",value:function(){return this.state.show?b.a.createElement(R,this.props):null}}]),t}(m.Component)},1378:function(e,t){},1379:function(e,t){},1380:function(e,t){},1381:function(e,t){},1382:function(e,t,n){"use strict";function r(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function o(e,t){var n,o,c,l,s,u,p=!1;t||(t={}),n=t.debug||!1;try{c=a(),l=document.createRange(),s=document.getSelection(),u=document.createElement("span"),u.textContent=e,u.style.all="unset",u.style.position="fixed",u.style.top=0,u.style.clip="rect(0, 0, 0, 0)",u.style.whiteSpace="pre",u.style.webkitUserSelect="text",u.style.MozUserSelect="text",u.style.msUserSelect="text",u.style.userSelect="text",document.body.appendChild(u),l.selectNode(u),s.addRange(l);if(!document.execCommand("copy"))throw new Error("copy command was unsuccessful");p=!0}catch(a){n&&console.error("unable to copy using execCommand: ",a),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData("text",e),p=!0}catch(a){n&&console.error("unable to copy using clipboardData: ",a),n&&console.error("falling back to prompt"),o=r("message"in t?t.message:i),window.prompt(o,e)}}finally{s&&("function"==typeof s.removeRange?s.removeRange(l):s.removeAllRanges()),u&&document.body.removeChild(u),c()}return p}var a=n(1383),i="Copy to clipboard: #{key}, Enter";e.exports=o},1383:function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach(function(t){e.addRange(t)}),t&&t.focus()}}},1384:function(e,t){},1385:function(e,t){},1386:function(e,t){},1387:function(e,t){},1388:function(e,t){},1389:function(e,t){},1390:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{publishSource:!0,clientOffset:null},n=t.publishSource,r=t.clientOffset,o=t.getSourceClientOffset;(0,p.default)((0,d.default)(e),"Expected sourceIds to be an array.");var a=this.getMonitor(),i=this.getRegistry();(0,p.default)(!a.isDragging(),"Cannot call beginDrag while dragging.");for(var c=0;c<e.length;c++)(0,p.default)(i.getSource(e[c]),"Expected sourceIds to be registered.");for(var l=null,s=e.length-1;s>=0;s--)if(a.canDragSource(e[s])){l=e[s];break}if(null!==l){var u=null;r&&((0,p.default)("function"==typeof o,"When clientOffset is provided, getSourceClientOffset must be a function."),u=o(l));var f=i.getSource(l),h=f.beginDrag(a,l);(0,p.default)((0,m.default)(h),"Item must be an object."),i.pinSource(l);var b=i.getSourceType(l);return{type:y,itemType:b,item:h,sourceId:l,clientOffset:r,sourceClientOffset:u,isSourcePublic:n}}}function a(){if(this.getMonitor().isDragging())return{type:g}}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.clientOffset,r=void 0===n?null:n;(0,p.default)((0,d.default)(e),"Expected targetIds to be an array.");var o=e.slice(0),a=this.getMonitor(),i=this.getRegistry();(0,p.default)(a.isDragging(),"Cannot call hover while not dragging."),(0,p.default)(!a.didDrop(),"Cannot call hover after drop.");for(var c=0;c<o.length;c++){var l=o[c];(0,p.default)(o.lastIndexOf(l)===c,"Expected targetIds to be unique in the passed array.");var s=i.getTarget(l);(0,p.default)(s,"Expected targetIds to be registered.")}for(var u=a.getItemType(),f=o.length-1;f>=0;f--){var h=o[f],m=i.getTargetType(h);(0,v.default)(m,u)||o.splice(f,1)}for(var b=0;b<o.length;b++){var y=o[b];i.getTarget(y).hover(a,y)}return{type:w,targetIds:o,clientOffset:r}}function c(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.getMonitor(),r=this.getRegistry();(0,p.default)(n.isDragging(),"Cannot call drop while not dragging."),(0,p.default)(!n.didDrop(),"Cannot call drop twice during one drag operation.");var o=n.getTargetIds().filter(n.canDropOnTarget,n);o.reverse(),o.forEach(function(o,a){var i=r.getTarget(o),c=i.drop(n,o);(0,p.default)(void 0===c||(0,m.default)(c),"Drop result must either be an object or undefined."),void 0===c&&(c=0===a?{}:n.getDropResult()),e.store.dispatch({type:E,dropResult:s({},t,c)})})}function l(){var e=this.getMonitor(),t=this.getRegistry();(0,p.default)(e.isDragging(),"Cannot call endDrag while not dragging.");var n=e.getSourceId();return t.getSource(n,!0).endDrag(e,n),t.unpinSource(),{type:O}}Object.defineProperty(t,"__esModule",{value:!0}),t.END_DRAG=t.DROP=t.HOVER=t.PUBLISH_DRAG_SOURCE=t.BEGIN_DRAG=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.beginDrag=o,t.publishDragSource=a,t.hover=i,t.drop=c,t.endDrag=l;var u=n(517),p=r(u),f=n(24),d=r(f),h=n(28),m=r(h),b=n(1520),v=r(b),y=t.BEGIN_DRAG="dnd-core/BEGIN_DRAG",g=t.PUBLISH_DRAG_SOURCE="dnd-core/PUBLISH_DRAG_SOURCE",w=t.HOVER="dnd-core/HOVER",E=t.DROP="dnd-core/DROP",O=t.END_DRAG="dnd-core/END_DRAG"},1391:function(e,t,n){"use strict";function r(e){return{type:c,sourceId:e}}function o(e){return{type:l,targetId:e}}function a(e){return{type:s,sourceId:e}}function i(e){return{type:u,targetId:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.addSource=r,t.addTarget=o,t.removeSource=a,t.removeTarget=i;var c=t.ADD_SOURCE="dnd-core/ADD_SOURCE",l=t.ADD_TARGET="dnd-core/ADD_TARGET",s=t.REMOVE_SOURCE="dnd-core/REMOVE_SOURCE",u=t.REMOVE_TARGET="dnd-core/REMOVE_TARGET"},1392:function(e,t,n){"use strict";function r(e,t){}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},1396:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),c=n.n(i),l=n(2),s=n.n(l),u=n(77),p=n.n(u),f=(n(1431),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),d=function(e){function t(){var e;r(this,t);for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];var c=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a)));return c.state={uid:p()()},c.handleChange=function(e){var t=e.target.files;t&&c.uploadFiles(t),c.setState({uid:p()()})},c.uploadFiles=function(e){var t=c.props.multiple,n=p()(),r=Array.prototype.slice.call(e);if(!t)return void c.upload(r[0],n);r.map(function(e){c.upload(e,n)})},c.upload=function(e,t){var n=c.props,r=n.beforeUpload,o=n.customUpload,a=n.onStart,i=n.onSuccess,l=n.onError,s=void 0;if(r&&(s=r(e)),!1!==s&&o){var u={file:e,uid:t,status:"uploading"};a&&a(u),Promise.resolve().then(function(){return o({file:e})}).then(function(e){i&&i(Object.assign({},u,{remoteInfo:e,status:"success"}))}).catch(function(e){l&&l(Object.assign({},u,{remoteInfo:e,status:"error"}))})}},c}return a(t,e),f(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.accept,r=e.multiple,o=e.disabled,a=e.onRef,i=e.onClick,l=e.children;return c.a.createElement("label",{className:s()("UploadPicture-wrapper",t)},c.a.createElement("input",{type:"file",accept:n,multiple:r,className:"UploadPicture-input",disabled:o,ref:a,onChange:this.handleChange,onClick:i}),l)}}]),t}(c.a.Component);d.defaultProps={multiple:!1,disabled:!1},n.d(t,"a",function(){return d})},1397:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){var n=t.os,r=t.id,o=t.sessionId,a=t.type;return e.replace("__OS__",n).replace("__REQUESTID__",o).replace("__SESSIONID__",o).replace("__ATOKEN__",r).replace("__AID__",r).replace("__PAGETYPE__",a)}var c,l,s=n(0),u=n.n(s),p=n(5),f=n(537),d=n.n(f),h=n(276),m=n.n(h),b=n(179),v=n(536),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=(c=Object(p.connect)(function(e){return{ua:e.env.userAgent}},{loadBrandEntityTrackUrl:v.b}))(l=function(e){function t(){var e,n,a,c;r(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),a.state={urls:null,logged:!1},a.handleObserve=function(e){e&&a.log()},a.log=function(){a.state.logged||Promise.resolve(a.state.urls||a.load().then(function(e){if(e)return e=a.normalize(e),a.setState({urls:e}),e})).then(function(e){return e.map(function(e){return e&&Object(b.c)(e)})}).then(function(){return a.setState({logged:!0})})},a.load=function(){var e=a.props,t=e.type,n=e.id;return(0,e.loadBrandEntityTrackUrl)({type:t,id:n}).then(function(e){return e&&e.payload&&e.payload.data})},a.normalize=function(e){var t=m()(),n=a.props,r=n.ua,o=n.id,c=n.type,l=encodeURIComponent("其他");r.Android?l="android":r.iOS&&(l="ios");var s={os:l,id:o,sessionId:t,type:c};return e.map(function(e){return i(e,s)})},c=n,o(a,c)}return a(t,e),y(t,[{key:"render",value:function(){return!this.state.logged&&u.a.createElement(d.a,{rootMargin:"0px 0px 0px 0px",onChange:this.handleObserve})}}]),t}(s.Component))||l,w=g;n.d(t,"a",function(){return w})},1398:function(e,t,n){"use strict";function r(e,t,n){var r=!1,o=V()(function(){r=!1,e.apply(void 0,arguments)},t,n);return Object.assign(function(){r=!0,o.apply(void 0,arguments)},{cancel:o.cancel,flush:o.flush,isPending:function(){return r}})}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b,v,y,g,w,E=n(1),O=n.n(E),C=n(0),_=n.n(C),k=n(5),T=n(2),j=n.n(T),S=n(486),P=n.n(S),x=n(8),N=n(3),R=n(29),I=n(72),D=n(511),A=n(484),M=n(180),L=n(178),U=n(481),B=n(31),F=n(110),V=n.n(F),z=n(485),q=n(6),H=n(483),W=n(169),G=(n(1348),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),X="AnswerOrg::know",Y=function(e){function t(){var e,n,r,i;o(this,t);for(var c=arguments.length,l=Array(c),s=0;s<c;s++)l[s]=arguments[s];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.handleHide=function(){B.a.set(X,!0),r.props.onClose()},i=n,a(r,i)}return i(t,e),G(t,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose;return _.a.createElement(W.b,{title:"机构帐号提问规则",subtitle:"这是一个「机构提问」，请在回答前了解以下规则",onClose:n},t&&_.a.createElement("div",null,_.a.createElement("ul",{className:"AnswerModal-list"},_.a.createElement("li",null,"1. 提问机构如需使用你的回答，由提问机构联系你，共同商定确认使用条件。"),_.a.createElement("li",null,"2.「机构提问」下的回答，站内传播与社区公共提问下的回答有所区别。"),_.a.createElement("li",null,"3. 提问机构可能「隐藏」回答，被「隐藏」回答不在社区内流通。")),_.a.createElement("a",{className:"AnswerModal-moreLink",href:"/org-intro#org-question",target:"_blank"},"了解更多"),_.a.createElement(W.a,{direction:"horizontal"},_.a.createElement(N.c,{onClick:this.handleHide},"不再显示"),_.a.createElement(N.c,{color:"blue",preset:"primary",onClick:n},"知道了"))))}}],[{key:"getKnown",value:function(){return B.a.get(X)}}]),t}(C.Component),K=n(42),Q=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Z="AnswerBrand::know",J=function(e){function t(){var e,n,r,o;c(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleHide=function(){B.a.set(Z,!0),r.props.onClose()},o=n,l(r,o)}return s(t,e),Q(t,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose;return _.a.createElement(K.b,{title:"品牌提问规则",subtitle:"这是一个「品牌提问」，请在回答前了解：",onClose:n},t&&_.a.createElement("div",null,_.a.createElement("p",null,"「品牌提问」由品牌方管理，回答由品牌方筛选后展示，传播与社区提问有所区别。回答著作权归作者所有。"),_.a.createElement("a",{className:"AnswerModal-moreLink",href:"/introduction/brand_question",target:"_blank"},"了解品牌提问"),_.a.createElement(K.a,{direction:"horizontal"},_.a.createElement(N.c,{onClick:this.handleHide},"知道了，继续回答"),_.a.createElement(N.c,{color:"blue",preset:"primary",onClick:n},"取消"))))}}],[{key:"getKnown",value:function(){return B.a.get(Z)}}]),t}(C.Component),$=(n(1443),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),ee=function(e){function t(){var e,n,r,o;u(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleChange=function(e){var t=r.props.handleChange,n=e.target.checked;t(e),q.default.trackEvent(r.circle,{id:4063,action:n?"Open":"Close"})},o=n,p(r,o)}return f(t,e),$(t,[{key:"componentDidMount",value:function(){q.default.trackCardShow(this,{id:4062})}},{key:"render",value:function(){var e=this,t=this.props,n=t.draft,r=t.isAnswerRewardable,o=t.isChecked;return _.a.createElement("label",{className:j()("CircleEntry-openCircleLabel",{"CircleEntry-openCircleLabel--withoutReward":!n&&!r,"CircleEntry-openCircleDraftsLabel":n,"CircleEntry-openCircleDraftsLabel--withoutReward":n&&!r}),ref:function(t){e.circle=t},htmlFor:"CircleEntry-openCircleInput"},_.a.createElement("input",{type:"checkbox",id:"CircleEntry-openCircleInput",checked:o,onChange:this.handleChange}),"发布到圈内说")}}]),t}(C.Component),te=ee,ne=n(1306),re=n(514),oe=n(1349),ae=n(1311),ie=n(99),ce=n(270),le=n(17),se=n(21),ue=n(523),pe=n(1347),fe=function(){return B.a.set("documentUploadAttentionHidden","true")},de=function(){return"true"!==B.a.get("documentUploadAttentionHidden")},he=n(1445),me=n.n(he),be=n(10),ve=(n(1446),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),ye=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["草稿保存于",""],["草稿保存于",""]),ge={allowed:"允许规范转载",need_payment:"允许付费转载",disallowed:"禁止转载"},we=(b=Object(k.connect)(function(e,t){var n=e.entities,r=n.questions,o=n.drafts,a=void 0===o?{}:o,i=n.answers,c=e.switches,l=Object(se.c)(e),s=Object.values(i).filter(function(e){return e.author&&e.author.urlToken===(l&&l.urlToken)})[0]||{},u=s.rewardInfo&&s.rewardInfo.tagline;return{question:r[t.question.id]||t.question,draft:a["question_"+t.question.id],switches:c,rewardTagline:u,currentUser:l}},{addDraft:ie.b,updateDraft:ie.J,deleteDraft:ie.i,showNotification:le.g,updateQuestionRewardinfo:ce.n,loadCurrentUser:se.j},null,{withRef:!0}))((g=y=function(e){function t(e,n){d(this,t);var r=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));w.call(r);var o=r.props,a=o.defaultValue,i=o.draft,c=i?i.editableContent:a,l=i?i.updatedTime:0;return r.state={draft:c,content:{toHTML:function(){return""}},isEmpty:!c,isTyping:!1,isChecked:n.isCheckedCircle,reshipmentSettings:null,commentPermission:null,answerModalShown:!1,focusing:!1,selectedText:null,loadingShown:!1,isUploading:!1,rewardNotication:!0,checked:e.isRewardable,isFullscreen:!1,isToolbarSticky:!1,isLeaveActive:!1,documentUploadAttentionShown:!1,dateNow:0,rewardModalShown:!1,lastUpdatedTime:l,rewardTagline:e.rewardTagline},r.hasEdited=!1,r}return m(t,e),ve(t,[{key:"componentDidMount",value:function(){var e=this;this.shouldAnswerOrgQuestionModalShow=!Y.getKnown(),this.onFocusAuthChecked=!1,this.attentionShowTimeout=setTimeout(this.updateAttentionState,2e3),document.addEventListener("compositionstart",this.onCompositionStart),document.addEventListener("compositionend",this.onCompositionEnd),window.onbeforeunload=function(){return e.state.isUploading||e.composition||e.syncDraft.isPending()||e.props.draft&&e.props.draft.updating?"草稿尚未保存完毕，确定离开此页？":void 0},this.setState({dateNow:Date.now()}),this.reRenderTimer=setInterval(function(){return e.setState({dateNow:Date.now()})},6e4);var t=this.props,n=t.currentUser,r=t.loadCurrentUser;!n||void 0!==n.lastCommentPermission&&void 0!==n.caEnabled||r("last_comment_permission,ca_enabled")}},{key:"componentWillReceiveProps",value:function(e,t){var n=this.state,r=e.currentUser,o={};if(n.reshipmentSettings||void 0===r.caEnabled||(o.reshipmentSettings=r.caEnabled?"need_payment":"allowed"),t.isCheckedCircle!==n.isChecked&&this.setState({isChecked:t.isCheckedCircle}),n.commentPermission||void 0===r.lastCommentPermission||(o.commentPermission=r.lastCommentPermission),Object.keys(o).length&&this.setState(o),!this.draftLoaded&&!this.state.draft&&!this.props.draft&&e.draft){var a=e.draft.editableContent;a&&(this.setState({draft:a,isEmpty:!a}),this.editable&&!this.editable.toHTML()&&this.editable.resetWithValue(a)),this.draftLoaded=!0}}},{key:"componentDidUpdate",value:function(e,t){var n=this,r=this.state,o=r.focusing,a=r.documentUploadAttentionShown;if(this.props.tagline){var i=B.a.get("rewardNotication");o&&!i&&(this.setState({rewardNotication:!1}),B.a.set("rewardNotication",!0),this.timeout=setTimeout(function(){n.setState({rewardNotication:!0})},2e3))}var c=a,l=t.documentUploadAttentionShown;c&&!l&&(this.attentionHideTimeout=setTimeout(this.hideAttention,5e3))}},{key:"componentWillUnmount",value:function(){this.syncDraft.cancel(),document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd),window.onbeforeunload=null,this.timeout&&clearTimeout(this.timeout),this.reRenderTimer&&clearInterval(this.reRenderTimer),this.clearAttentionTimeout()}},{key:"getCloneContent",value:function(){return this.editable.state.editorState.getCurrentContent()}},{key:"clearAttentionTimeout",value:function(){this.attentionShowTimeout&&clearTimeout(this.attentionShowTimeout),this.attentionHideTimeout&&clearTimeout(this.attentionHideTimeout)}},{key:"deleteDraft",value:function(){var e=this.props,t=e.question,n=e.draft,r=e.deleteDraft;n&&r(t.id)}},{key:"renderReshipmentSettings",value:function(e){var t=this;return Object.keys(ge).map(function(n){var r=Object(pe.a)(n,e);return _.a.createElement(I.b,{key:n,onClick:function(){return t.handleReshipmentSettings(n)},className:Object(pe.b)(n,e)},r&&_.a.createElement(R.a,{className:"Button-icon",name:r}),ge[n])})}},{key:"renderFooter",value:function(){var e=this,t=this.props,n=t.draft,r=t.isEdit,o=t.switches,a=t.rewardTagline,i=t.question,c=i.commercial,l=i.relationship.isAnonymous,s=i.circleInfo;s=void 0===s?{}:s;var u=s.canWriteCircle,p=this.state,f=p.checked,d=p.commentPermission,h=p.focusing,m=p.isEmpty,b=p.isTyping,v=p.isChecked,y=p.isFullscreen,g=p.loadingShown,w=p.reshipmentSettings,E=p.rewardNotication,O=p.rewardModalShown,C=p.rewardTagline,k=p.selectedText,T=p.dateNow,S=null;if(g)S=_.a.createElement(M.a,{count:3});else if(k)S=k.length+" 个字";else if(n){var x=null;x=n.updating||b?"草稿保存中…":n.updated&&T<1e3*n.updatedTime+6e4?"草稿已保存":n.updateFailed?_.a.createElement("span",{className:"AnswerForm-draftStatus--failed"},"草稿保存失败"):P()(ye,Object(U.e)(n.updatedTime)),S=_.a.createElement("div",null,_.a.createElement(N.c,{preset:"plain",className:"AnswerForm-delete","aria-label":"删除草稿","data-tooltip":"删除草稿",onClick:this.onDeleteDraftModalShow},_.a.createElement(R.a,{name:"delete"})),x)}else c&&c.tip&&c.tip.message&&(S=c.tip.message);var D=_.a.createElement("div",{className:j()("AnswerForm-footer",{"AnswerForm-footer--hidden":!y&&!h&&m})},_.a.createElement("div",{className:"AnswerForm-footerContent AnswerForm-container"},_.a.createElement("div",{className:"AnswerForm-status"},S),!E&&_.a.createElement("span",{className:"AnswerForm-Notication"},"你的回答可以开启赞赏了"),!l&&u&&_.a.createElement(te,{isChecked:v,draft:n,isAnswerRewardable:o.isAnswerRewardable,handleChange:this.onChangecircleSettings}),o.isAnswerRewardable&&_.a.createElement("div",{className:"AnswerForm-openRewardButton"},_.a.createElement("label",{className:j()("AnswerForm-openRewardLabel",{"AnswerForm-openRewardDraftsLabel":n}),ref:function(t){e.label=t},htmlFor:"AnswerForm-openRewardInput"},_.a.createElement("input",{type:"checkbox",id:"AnswerForm-openRewardInput",checked:f,onChange:this.onChangerewardSettings}),"开启赞赏"),O&&_.a.createElement(oe.a,{submitRewardText:this.onSubmitReward,onClose:this.unactivateReward,tagline:C||a,edit:!1})),_.a.createElement("div",{className:"AnswerForm-footerRight"},r?_.a.createElement("a",{className:"AnswerForm-cancel",onClick:this.onCancel},n?"保存草稿并离开":"取消"):_.a.createElement(I.c,{toggler:_.a.createElement(N.c,{preset:"plain",onRef:function(t){e.settingsTogglerEl=t}},_.a.createElement(R.a,{left:!0,name:"setting"}),"设置"),reversed:!0,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selectMenuItem"},this.renderReshipmentSettings(w),_.a.createElement(I.a,null),_.a.createElement(ae.c,{onChange:this.handleChangeCommentPermission,current:d})),_.a.createElement(N.c,{className:"AnswerForm-submit",preset:"primary",color:"blue",onClick:this.onSubmit},r?"提交修改":"提交回答"))));return y?D:_.a.createElement(A.a,{bottom:!0,container:function(){return e.form}},D)}},{key:"render",value:function(){var e=this,t=this.props,n=t.bordered,r=t.className,o=t.defaultValue,a=t.draft,i=t.isEdit,c=t.question,l=t.currentUser,s=this.state,u=s.deleteDraftModalShown,p=s.isFullscreen,f=s.isToolbarSticky,d=s.isLeaveActive,h=s.documentUploadAttentionShown,m=(i?"修改":"写")+"回答...";"commercial"===c.questionType&&(m="这是一个「品牌提问」，请在回答前了解：「品牌提问」由品牌方管理，回答由品牌方筛选后展示，传播与社区提问有所区别。回答著作权归作者所有。");var b=_.a.createElement(re.a,{className:j()("AnswerForm-editor","AnswerForm-container",{isToolbarSticky:f}),onRef:function(t){e.editable=t},large:!0,spread:!0,allowDragAndDrop:!0,allowLinkCard:!0,allowMention:!0,allowToolbar:!0,allowUploadDocument:!0,allowVideoTitleChange:!0,allowToolbarSticky:!p,showDocumentUploadAttention:h,toolbarStickyOffset:be.f,getToolbarPlugins:this.getToolbarPlugins,minRows:3,placeholder:m,defaultValue:a?a.editableContent:o,onChange:this.onChangeContent,onAfterChange:this.onAfterChangeContent,onFocus:this.onFocusWithAuth,onSelectText:this.onSelectText,onSubmit:this.onSubmit,onError:this.handleError,onLoadStart:this.onLoadStart,onLoadEnd:this.onLoadEnd,onUploadStart:this.handleUploadStart,onUploadEnd:this.handleUploadEnd,onUploadError:this.handleUploadError,onBeforeVideoUpload:this.handleBeforeVideoUpload,onBeforeCommand:this.handleEditorCommand,logo:me.a,location:c.title,editingContentType:"answer"});return _.a.createElement(H.a,{module:"AnswerEditView",content:{type:"Answer",parent_token:String(c.id),author_member_hash_id:l.id}},_.a.createElement("form",{ref:function(t){e.form=t},className:j()("AnswerForm",r,{"AnswerForm--bordered":n}),onSubmit:function(e){return e.preventDefault()},noValidate:!0},p&&_.a.createElement("div",{className:j()("AnswerForm-fullscreenBackdrop",{isLeaveActive:d})}),_.a.createElement("div",{className:j()({"AnswerForm-fullscreenContent":p,isLeaveActive:d}),ref:function(t){return e.fullscreenContent=t}},_.a.createElement("div",{className:j()({"AnswerForm-fullscreenScroller":p}),ref:function(t){return e.scroller=t},onScroll:this.handleScroll},p&&_.a.createElement("div",{className:"AnswerForm-container",ref:this.handleFullscreenRef},_.a.createElement("div",{className:"AnswerForm-title"},c.title)),p&&_.a.createElement(N.c,{className:"AnswerForm-exitFullscreenButton",onClick:this.exitFullscreen,onMouseDown:function(e){return e.preventDefault()}},_.a.createElement(x._6,{text:!0,center:!0})," 退出全屏模式"),b),this.renderFooter()),p&&_.a.cloneElement(b,{readOnly:!0,className:"AnswerForm-cloneEditor",defaultValue:this.getCloneContent(),allowToolbarSticky:!1,onRef:function(t){return e.cloneEditor=t}}),"org"===c.questionType&&_.a.createElement(Y,{shown:this.state.answerModalShown,onClose:this.handleAnswerModalHide}),"commercial"===c.questionType&&_.a.createElement(J,{shown:this.state.answerModalShown,onClose:this.handleAnswerModalHide}),_.a.createElement(ne.a,{title:"清除草稿",subtitle:i?"你确定要清除保存的草稿并取消编辑吗？":"你确定要清除保存的草稿吗？",shown:u,onCancel:this.onDeleteDraftModalHide,onSubmit:this.onDeleteDraft})))}}]),t}(C.Component),y.propTypes={question:O.a.object,bordered:O.a.bool,isEdit:O.a.bool,defaultValue:O.a.string},y.defaultProps={bordered:!1,isEdit:!1},y.contextTypes={authRequired:O.a.func,isCheckedCircle:O.a.bool,onChangecircleSettings:O.a.func},w=function(){var e=this;this.onCompositionStart=function(){e.composition=!0,e.syncDraft.cancel()},this.onCompositionEnd=function(){e.composition=!1,e.prevValue&&e.syncDraft(e.prevValue),e.prevValue=null},this.onChangeContent=function(t){e.loggingDeltaTime||(e.loggingDeltaTime=!0,e.startCompositionTime=Math.floor((new Date).getTime()/1e3)),e.hasEdited=!0,e.setState({content:t,isEmpty:t.isEmpty,isTyping:!0}),e.composition?e.prevValue=t:e.syncDraft(t)},this.onAfterChangeContent=function(e){var t=e.getSelection(),n=t.getFocusKey(),r=document.querySelector('[data-offset-key="'+n+'-0-0"]');if(r){var o=64-(window.innerHeight-r.getBoundingClientRect().bottom);if(o>=0){var a=window.pageYOffset+o;scrollTo(0,a)}}},this.onChangeReshipmentSettings=function(t){if("need_payment"===t&&!e.props.currentUser.caEnabled)return void window.open("/copyright/invite");e.setState({reshipmentSettings:t})},this.onChangerewardSettings=function(t){var n=t.target.checked,r=e.props,o=r.question,a=o.relationship.isAnonymous,i=o.id,c=r.showNotification,l=e.state.rewardTagline;return a?void c("匿名回答无法开启赞赏，请先取消匿名","red"):!n||l?(e.setState({rewardTagline:"",checked:!1}),void e.props.updateQuestionRewardinfo(i,!1)):void e.activateReward()},this.onSubmitReward=function(t){e.setState({rewardTagline:t,checked:!0});var n=e.props.question.id;Promise.resolve(e.props.updateQuestionRewardinfo(n,!0)).then(function(){return e.unactivateReward()})},this.onDeleteDraftModalShow=function(){e.setState({deleteDraftModalShown:!0})},this.onDeleteDraft=function(){e.props.isEdit||(e.editable.reset(),e.setState({draft:"",content:{toHTML:function(){return""}},isEmpty:!0})),e.deleteDraft();var t=e.props.onDeleteDraft;t&&t()},this.onDeleteDraftModalHide=function(){e.setState({deleteDraftModalShown:!1})},this.onSubmit=this.context.authRequired(function(t){var n=e.state,r=n.reshipmentSettings,o=n.commentPermission,a=n.rewardTagline,i=n.isChecked;if(!e.editable)return void e.props.onCancel();var c=e.editable.toHTML();if(c){var l=e.props,s=l.isEdit,u=l.onSubmit,p=l.showNotification,f=l.question,d=f.questionType,h=f.circleInfo;h=void 0===h?{}:h;var m=h.canWriteCircle;if(e.editable.hasVideo("upload"))return void e.handleError("video-uploading");if(e.editable.hasImage("upload"))return void e.handleError("image-uploading");if(e.editable.hasImage("error")||e.editable.hasVideo("error")&&!e.editable.hasVideo("error-review"))return t.persist(),void L.a.alert("草稿中含有上传失败的内容，请更改后重新提交",{title:"上传失败"});if(e.editable.hasVideo("error-review")||e.editable.hasVideo("censor"))return t.persist(),void L.a.alert("视频中包含未通过审核的信息，请更改后重新提交",{title:"视频未通过审核"});var b={content:c};s||(b.reshipmentSettings=r||"allowed",b.commentPermission=o||"all"),b.rewardSetting={canReward:Boolean(a),tagline:a},m&&(b.isCircle=i);var v=s?"Edit":"Answer";Promise.resolve(u(b)).then(function(){"commercial"===d&&p("已发布！由品牌筛选后进入推荐区。")}),q.default.trackEvent(e,{action:v,is_intent:!1})}}),this.onCancel=function(){var t=e.props.onCancel;return e.editable.hasVideo("upload")?void e.handleError("video-uploading-draft"):e.editable.hasImage("upload")?void e.handleError("image-uploading-draft"):(e.hasEdited&&e.syncDraftImmediately(),void(t&&t()))},this.onFocus=function(){"org"===e.props.question.questionType&&e.shouldAnswerOrgQuestionModalShow&&e.handleAnswerOrgQuestionModalShow(),e.setState({focusing:!0})},this.onFocusWithAuth=function(){return e.onFocusAuthChecked?e.onFocus():(e.onFocusAuthChecked=!0,e.context.authRequired(e.onFocus)())},this.onSelectText=function(t){e.setState({selectedText:t.replace(/\s/g,"")})},this.onLoadStart=function(){e.setState({loadingShown:!0})},this.onLoadEnd=function(){e.setState({loadingShown:!1})},this.getToolbarPlugins=function(){var t=e.state,n=t.isFullscreen,r=t.isLeaveActive;return(!n||r)&&_.a.createElement(D.a,{key:"enterFullscreen",icon:_.a.createElement(x._5,{text:!0}),className:"AnswerForm-enterFullscreenButton",onClick:e.toggleFullscreen},"全屏模式")},this.updateAttentionState=function(){var t=de();return e.setState({documentUploadAttentionShown:t})},this.hideAttention=function(){return e.clearAttentionTimeout(),e.state.documentUploadAttentionShown&&fe(),e.setState({documentUploadAttentionShown:!1})},this.toggleFullscreen=function(){var t=e.state.isFullscreen,n=function(){var t=e.scroller.querySelector(".Editable");return t?t.offsetTop:0};e.scrollTop=t?e.scroller.scrollTop-n():Math.max(-e.scroller.getBoundingClientRect().top,0),e.setState({isFullscreen:!t},function(){e.state.isFullscreen?e.scrollTop>0&&(e.scroller.scrollTop=e.scrollTop+n()):window.scrollTo(0,e.scroller.getBoundingClientRect().top-document.documentElement.getBoundingClientRect().top+e.scrollTop)})},this.exitFullscreen=function(){e.cloneEditor.resetWithValue(e.getCloneContent());var t=function t(){e.fullscreenContent.removeEventListener("animationend",t),e.setState({isLeaveActive:!1}),e.toggleFullscreen()};e.fullscreenContent.addEventListener("animationend",t),e.setState({isLeaveActive:!0})},this.handleFullscreenRef=function(t){t?z.a():(z.b(),e.setState({isToolbarSticky:!1}))},this.handleScroll=function(){e.isHandleScrollPending||(e.isHandleScrollPending=!0,requestAnimationFrame(function(){var t=e.state,n=t.isFullscreen,r=t.isToolbarSticky,o=!1;if(n&&e.scroller){var a=e.scroller.querySelector(".Editable-toolbar");o=!!a&&e.scroller.scrollTop===a.offsetTop}o!==r&&e.setState({isToolbarSticky:o}),e.isHandleScrollPending=!1}))},this.closeRewardModal=function(){e.label.click()},this.handleUploadStart=function(){e.setState({isUploading:!0})},this.handleUploadEnd=function(){e.setState({isUploading:!1})},this.handleUploadError=function(t,n){switch(n){case"video":e.handleError("video-upload-error");break;case"image":e.handleError("image-upload-error",t)}},this.handleAnswerOrgQuestionModalShow=function(){e.setState({answerModalShown:!0}),e.shouldAnswerOrgQuestionModalShow=!1},this.handleAnswerModalHide=function(){e.setState({answerModalShown:!1})},this.syncDraftImmediately=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.state.content,n=t.toHTML(),r=e.state.lastUpdatedTime,o=Math.floor((new Date).getTime()/1e3),a=void 0;a=!r||e.startCompositionTime-r>180?o-e.startCompositionTime:o-r,e.setState({isTyping:!1}),n?e.updateDraft(n,a).then(function(t){t.payload&&t.payload.updatedTime&&e.setState({lastUpdatedTime:t.payload.updatedTime}),e.loggingDeltaTime=!1,delete e.startCompositionTime,q.default.trackEvent(e,{action:"AutoSave"})}):e.deleteDraft()},this.syncDraft=r(this.syncDraftImmediately,2e3),this.updateDraft=function(t,n){var r=e.props,o=r.question.id,a=r.draft,i=r.addDraft,c=r.updateDraft;return a?c(o,t,n):i(o,t,n)},this.focus=function(){e.editable&&e.editable.focus()},this.hasVideo=function(){return!!e.editable&&e.editable.hasVideo()},this.handleChangeCommentPermission=function(t,n){var r=void 0===n?t:n;e.setState({commentPermission:r})},this.handleReshipmentSettings=function(t){"need_payment"!==t||e.props.currentUser.caEnabled||window.open("/copyright/invite"),e.setState({reshipmentSettings:t})},this.handleError=function(t,n){Object(ue.b)(t,n,e.props.showNotification)},this.handleEditorCommand=function(t){"insert-video"!==t&&"click-more"!==t||e.hideAttention()},this.handleBeforeVideoUpload=function(){var t=e.props.question;return!t.relationship||!t.relationship.isAnonymous},this.unactivateReward=function(){e.setState({rewardModalShown:!1})},this.activateReward=function(){e.setState({rewardModalShown:!0})},this.onChangecircleSettings=function(t){var n=t.target.checked,r=e.context.onChangecircleSettings;e.setState({isChecked:n}),r(n)}},v=g))||v;t.a=we},1399:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,c,l,s,u=function(e){return e.componentList.filter(function(e){var t=e.component;return Boolean(t)}).map(function(e){return e.component})},p=n(0),f=n.n(p),d=function(e){var t=e.data,n=e.name,r=e.component;return{name:n,component:r?f.a.createElement(r,{key:n,data:t}):null}},h=n(1),m=n.n(h),b=n(5),v=n(26),y=n.n(v),g=n(6),w=n(8),E=n(3),O=(n(72),n(171)),C=n(263),_=n(1283),k=n(10),T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),S=function(e){var t=e.relationship;return t=void 0===t?{}:t,t.isThanked?"取消感谢":"感谢"},P={answer:m.a.object.isRequired,renderThankButtonText:m.a.func,zaInfo:m.a.number,getShortcutScope:m.a.func},x=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(Object.keys(P)),["updateAnswerThank"]),N=(i=Object(C.a)(null))((s=l=function(e){function t(){var e,n,a,i;r(this,t);for(var c=arguments.length,l=Array(c),s=0;s<c;s++)l[s]=arguments[s];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.handleUpdateThanked=a.context.authRequired(function(e){var t=a.props,n=t.answer,r=n.id,o=n.relationship.isThanked,i=t.updateAnswerThank,c=t.zaInfo,l=!o;g.default.trackEvent(e.target,T({action:l?"Thank":"UnThank",element:"Button"},c&&{id:c})),i(r,l)},k.L.thank),i=n,o(a,i)}return a(t,e),j(t,[{key:"componentDidMount",value:function(){this.props.onRef(this)}},{key:"componentWillUnmount",value:function(){this.props.onRef(null)}},{key:"render",value:function(){var e=this.props,t=e.answer,n=e.renderThankButtonText,r=e.getShortcutScope,o=y()(this.props,x),a=n(t);return f.a.createElement(f.a.Fragment,null,f.a.createElement(_.b,{keyMap:{THANK:"t"},handlers:{THANK:this.handleUpdateThanked},getScope:r}),f.a.createElement(E.c,T({preset:"plain",onClick:this.handleUpdateThanked,icon:w._8,label:a},o)))}}]),t}(f.a.Component),l.contextTypes={authRequired:m.a.func},l.propTypes=P,l.defaultProps={renderThankButtonText:S,onRef:function(){}},c=s))||c,R=Object(b.connect)(null,{updateAnswerThank:O.A})(N);n.d(t,"b",function(){return u}),n.d(t,!1,function(){return d}),n.d(t,"a",function(){return R})},1400:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=e.trackUrl,r=void 0===n?[]:n,o=e.id;if(0!==r.length){var a="other";t.Android?a="android":t.iOS&&(a="ios");var i=Z()();r.forEach(function(e){(new Image).src=e.replace("__OS__",a).replace("__ADPLATFORM__",a).replace("__REQUESTID__",i).replace("__SESSIONID__",i).replace("__ATOKEN__",o).replace("__PAGETYPE__","article")})}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l,s,u,p,f,d=n(1),h=n.n(d),m=n(0),b=n.n(m),v=n(19),y=n(5),g=n(8),w=n(1338),E=n(1313),O=n(3),C=n(493),_=n(68),k=n(6),T=n(487),j=n(1281),S=n(1329),P=n(1328),x=n(1302),N=n(1326),R=n(1303),I=n(168),D=n(10),A=n(497),M=n(1304),L=n(1286),U=n(1287),B=n(512),F=n(1276),V=n(1288),z=n(274),q=n(1307),H=n(70),W=n(490),G=n(1369),X=n(4),Y=Object(X.a)("brand",["GET_URL"]),K=function(e){return{API:{types:Y.GET_URL,endpoint:"/brand/track",method:"GET",fetchOptions:{credentials:"include",failsafe:!0,timeout:100},query:{target_url:"https://zhuanlan.zhihu.com/p/"+e}},FAILSAFE:!0,UPDATE:{success:function(t){return{articles:r({},e,{trackUrl:t.data||[]})}}}}},Q=n(276),Z=n.n(Q),J=(n(1470),function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()),$=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},te=function(e){return"plain"===e||"special-plain"===e},ne=te,re=function(e){return"special-plain"===e},oe=function(e){var t=e.title,n=e.id,r=e.created,o=e.updated,a=e.commentCount,i=e.imageUrl,c=e.thumbnail;return{headline:t,url:"https://"+D.h+"/p/"+n,datePublished:new Date(1e3*r).toISOString(),dateModified:new Date(1e3*o).toISOString(),commentCount:a,image:i||c}},ae=function(e){return e.thumbnailExtraInfo&&"video"===e.thumbnailExtraInfo.type?{cover:e.thumbnail,hasVideo:!0}:{cover:e.imageUrl||e.thumbnail,hasVideo:!1}},ie=(l=Object(I.a)(function(e){var t=e.article,n=e.trackCardShow,r=void 0===n||n,o=e.zaInfos;o=void 0===o?{}:o;var a=o.cardShow;return ee({module:"PostItem",card:{has_image:Boolean(t.thumbnailExtraInfo&&"image"===t.thumbnailExtraInfo.type),has_video:Boolean(t.thumbnailExtraInfo&&"video"===t.thumbnailExtraInfo.type),content:{type:"Post",token:t.id.toString(),upvote_num:t.voteupCount,comment_num:t.commentCount,publish_timestamp:1e3*t.created,parent_token:t.column&&t.column.id,author_member_hash_id:t.author.id,video_id:t.thumbnailExtraInfo&&t.thumbnailExtraInfo.videoId}}},a&&{view:{id:a}},{trackCardShow:r})}),s=Object(y.connect)(function(e){return{edition:Object(H.d)(e),referer:Object(H.g)(e),ua:e.env.userAgent}},{updateArticleVote:W.e,getTrackUrl:K}),l(u=s(u=Object(v.withRouter)(u=Object(x.d)((f=p=function(e){function t(){var e,n,r,c;a(this,t);for(var l=arguments.length,s=Array(l),u=0;u<l;u++)s[u]=arguments[u];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.state={commentsShown:!1,favlistsShown:!1,commentPattern:"fixed",positionStatus:null,guideShown:!1,contentExpanded:!1,hasFetchedLabels:!1},r.disableAuth=function(){var e=r.props,t=(e.edition,e.router);t=void 0===t?{}:t;var n=t.location;n=void 0===n?{}:n;n.pathname;return!1}(),r.handleCommentsShown=function(e,t){r.setState(t)},r.handleCommentsHide=function(){r.setState({commentsShown:!1})},r.handlePositionStatusChange=function(e){r.setState({positionStatus:e})},r.handleFavlistsButtonClick=function(){var e=r.props.zaInfos.favlists;if(k.default.trackEvent(r,ee({action:"Collect",element:"Button",is_intent:!0},e&&{id:e})),r.disableAuth)return void r.handleToggleGuide();r.handleFavlistsShown()},r.handleFavlistsShown=r.context.authRequired(function(){return r.setState({favlistsShown:!0})},D.L.favlists),r.handleFavlistHide=function(){r.setState({favlistsShown:!1})},r.handleToggleGuide=function(){r.setState({guideShown:!r.state.guideShown})},r.handleVote=function(e){var t=r.props,n=t.article.id;(0,t.updateArticleVote)(n,e)},r.handleLogMoreClick=function(){var e=r.props.zaInfos.options;k.default.trackEvent(r,ee({action:"Click",element_name:"MoreAction"},e&&{id:e}))},r.handleToggleExpand=function(e){var t=r.props,n=t.onToggleExpand,a=t.getTrackUrl,i=t.article,c=t.ua;if(n&&n(e),e){(i.trackUrl?Promise.resolve():a(i.id)).then(function(){return o(r.props.article,c)})}r.setState({contentExpanded:e})},r.renderPrefix=function(){var e=r.props.article,t=e.labelInfo,n=e.hermesLabel,o=r.state.contentExpanded;return!t&&!n||o?null:b.a.createElement(x.b,{labelInfo:t||n})},c=n,i(r,c)}return c(t,e),$(t,[{key:"renderStatus",value:function(){var e=this.props,t=e.article,n=e.article,r=n.annotationDetail,o=n.reviewInfo;o=void 0===o?{}:o;var a=o.isReviewing,i=o.tips,c=e.useNewLabels,l=this.state.contentExpanded;if(a)return b.a.createElement("div",{className:"ArticleItem-status"},i);var s=r?b.a.createElement(E.a,{annotationDetail:r}):null;return l?c?b.a.createElement(x.a,{neutralLabels:s,item:t}):s:null}},{key:"renderArticleExtraInfo",value:function(){var e=this.props,t=e.actor,n=e.action,r=e.article,o=r.upvotedFollowees,a=void 0===o?[]:o,i=r.voteupCount,c=r.id,l=r.type,s=t&&t.urlToken;return i?b.a.createElement("div",{className:"ArticleItem-extraInfo",key:"articleExtraInfo"},b.a.createElement(N.a,{id:c,type:l,voteupCount:i,upvotedFollowees:a.filter(function(e){return s!==e.urlToken}),too:"voted"===n})):null}},{key:"renderMeta",value:function(){var e=this.props.article,t=oe(e);return Object.keys(t).map(function(e){return b.a.createElement("meta",{key:e,itemProp:e,content:t[e]})})}},{key:"renderSuggestEdit",value:function(){var e=this.props.article,t=e.isNormal,n=void 0===t||t,r=e.suggestEdit;r=void 0===r?{}:r;var o=r.title,a=r.status,i=r.reason;return a&&!n?b.a.createElement("div",{className:"AnswerItem-statusContent"},b.a.createElement("div",{className:"AnswerItem-statusReason"},i),b.a.createElement("div",{className:"AnswerItem-statusDescription"},"作者修改内容通过后，文章会重新显示恢复正常 ",b.a.createElement("a",{target:"_blank",href:"/question/24752645",className:"AnswerItem-statusLink"},o))):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.article,r=t.article,o=r.id,a=r.title,i=r.author,c=r.excerpt,l=r.content,s=r.voteupCount,u=r.voting,p=r.type,f=r.created,d=r.updated,h=r.imageUrl,m=r.commentCount,v=r.adminClosedComment,y=r.reviewInfo;y=void 0===y?{}:y;var E=y.isReviewing,k=y.editType,x=r.annotationDetail,N=t.preset,I=t.lastreadTouchable,H=t.itemProp,W=void 0===H?"article":H,G=t.edition,X=t.ua,Y=t.lessExcerpt,K=t.location.query,Q=t.referer,Z=t.formatContent,$=t.zaInfos,oe=$.expand,ie=$.title,ce=$.voteUp,le=$.voteDown,se=$.toggleComment,ue=$.share,pe=$.report,fe=$.options,de=$.getCommentAction,he=t.renderOptions,me=t.isSticky,be=t.handleToggleSticky,ve=this.state,ye=ve.positionStatus,ge=ve.favlistsShown,we=ve.commentsShown,Ee=ve.commentPattern,Oe=ve.contentExpanded,Ce=this.context,_e=Ce.currentUser,ke=Ce.isMobile,Te=D.h+"/p/"+o,je=!(E&&"create"===k),Se=_e&&_e.urlToken===i.urlToken,Pe=this.renderSuggestEdit(),xe="function"==typeof be,Ne=!re(N)&&b.a.createElement(T.a,ee({key:"authorInfo"},ne(N)&&{preset:"plain"},{author:i,className:"ArticleItem-authorInfo"})),Re=this.renderArticleExtraInfo(),Ie=te(N)?[Ne,Re]:[[Ne,Re],null],De=J(Ie,2),Ae=De[0],Me=De[1];return b.a.createElement(F.e,{className:"ArticleItem",onRef:function(t){e.contentItem=t},"data-zop":JSON.stringify({authorName:i.name,itemId:o,title:a,type:"article"}),data:n,title:b.a.createElement(b.a.Fragment,null,xe&&me&&b.a.createElement(q.a,null),b.a.createElement("a",ee({href:Te,target:"_blank","data-za-detail-view-element_name":"Title"},ie&&{"data-za-detail-view-id":ie}),a)),meta:Ae,lastreadTouchable:I,itemProp:W,itemType:"http://schema.org/SocialMediaPosting",itemScope:!0},this.renderMeta(),this.renderStatus(),!Pe||Se?b.a.createElement(V.b,ee({itemProp:"articleBody",data:n,excerpt:Z?Z(c,n):c,html:Z?Z(l||c,n):l||c,onToggleExpend:this.handleToggleExpand,prefix:this.renderPrefix(),before:b.a.createElement("div",null,Me,h&&b.a.createElement(C.a,{className:"ArticleItem-image",thumbnail:Object(_.a)(h,"60w"),url:h,alt:a})),after:b.a.createElement(V.a,{href:Te,created:f,updated:d})},Y?{limit:74}:{},{onPositionStatusChange:this.handlePositionStatusChange},ae(n),{zaIds:{expand:oe}}),je&&(ke?b.a.createElement(S.a,{id:o,type:p,liked:Boolean(u),count:s,disabled:Se,handleToggleGuide:this.handleToggleGuide,disableAuth:this.disableAuth}):b.a.createElement(P.a,{type:p,count:s,onVote:this.handleVote,voting:u,isOwner:Se,handleToggleGuide:this.handleToggleGuide,zaIds:{voteUp:ce,voteDown:le}})),je&&b.a.createElement(L.a,{onClick:this.handleCommentsShown,commentsShown:we,commentClosed:v,count:m,positionStatus:ye,zaInfos:{toggleComment:se,getCommentAction:de}}),je&&b.a.createElement(j.a,{id:o,type:"article",url:Te,title:a,authorName:i&&i.name,positionStatus:ye,zaShareId:ue}),je&&(!_e||!_e.isOrg)&&!G.yidianzixun&&b.a.createElement(O.c,{preset:"plain",onClick:this.handleFavlistsButtonClick,icon:g._61,label:"收藏"}),xe&&Se&&Object(M.a)(_e)&&b.a.createElement(O.c,{preset:"plain",onClick:be,icon:me?g._64:g._63,label:me?"取消置顶":"置顶"}),je&&!Se&&!0&&_e&&b.a.createElement(B.a,{id:o,type:p,zaReportId:pe}),je&&he&&he(function(){return e.contentItem},fe),!Oe&&b.a.createElement(R.a,{annotationDetail:x})):this.renderSuggestEdit(),this.disableAuth&&this.state.guideShown&&b.a.createElement(w.a,{redirectUrl:Te,urlScheme:Object(A.a)({type:"article",id:o},{edition:G,query:K,referer:Q}),buttons:[X.Wechat?{name:"wechat",text:"快速登录",fill:"#fff"}:"zhihu"],onClose:this.handleToggleGuide}),b.a.createElement(U.a,{parent:n,commentPattern:Ee,shown:we,onClose:this.handleCommentsHide}),b.a.createElement(z.a,{id:o,type:"article",shown:ge,onClose:this.handleFavlistHide,zaEnabled:!0}))}}]),t}(m.Component),p.contextTypes={currentUser:h.a.object,authRequired:h.a.func,isMobile:h.a.bool},p.propTypes={preset:h.a.string,lessExperpt:h.a.bool,formatContent:h.a.func,renderOptions:h.a.func,zaInfos:G.a},p.defaultProps={preset:"primary",zaInfos:{}},u=f))||u)||u)||u)||u);t.a=ie},1431:function(e,t){},1433:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,c,l,s,u=n(1),p=n.n(u),f=n(0),d=n.n(f),h=n(29),m=n(8),b=n(481),v=n(260),y=n(1313),g=n(1303),w=n(1276),E=n(1288),O=n(1281),C=n(67),_=n(1286),k=n(1287),T=n(482),j=n(168),S=n(1436),P=(n.n(S),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),x=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),N={placeholders:{img:" [图片] "}},R=(i=Object(j.a)(function(e){var t=e.question,n=e.trackCardShow,r=void 0===n||n;return{module:"QuestionItem",card:{content:{type:"Question",token:t.id.toString(),item_num:t.answerCount,comment_num:t.commentCount,follower_num:t.followerCount,publish_timestamp:1e3*t.created}},trackCardShow:r}}))((s=l=function(e){function t(){var e,n,a,i;r(this,t);for(var c=arguments.length,l=Array(c),s=0;s<c;s++)l[s]=arguments[s];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.state={collapsed:!0,commentPattern:"fixed",commentsShown:!1},a.handleOpenComment=function(e){var t=e.target.parentNode.className.includes("is-fixed")?"fixed":"bottom",n=a.state.modalShown,r=!("bottom"===t&&n);a.setState({modalShown:r,commentPattern:t})},a.handleCommentsShown=function(e,t){a.setState(t)},a.handleCommentsHide=function(){a.setState({commentsShown:!1})},a.handlePackupButton=function(){a.setState({modalShown:!1}),a.CommentsButtonEl.scrollIntoView({block:"start",behavior:"smooth"}),window.scrollTo(0,window.pageYOffset-window.screen.height/2)},a.handleContentToggleExpand=function(e){a.setState({collapsed:!e})},i=n,o(a,i)}return a(t,e),x(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.preset,r=t.question,o=t.question,a=o.id,i=o.title,c=o.type,l=o.created,s=o.answerCount,u=o.followerCount,p=o.isMuted,f=o.questionType,j=o.detail,S=o.commentCount,x=o.adminClosedComment,R=o.relationship,I=void 0===R?{}:R,D=o.annotationDetail,A=t.action,M=(t.isConcise,t.isAnonymousFollowing),L=t.lastreadTouchable,U=t.zaInfos,B=U.follow,F=U.options,V=t.renderOptions,z=this.state,q=z.commentsShown,H=z.commentPattern,W=z.collapsed,G={id:a,type:c},X="/question/"+a;return d.a.createElement(w.e,{data:r,lastreadTouchable:L,onRef:function(t){e.contentItem=t},title:d.a.createElement("div",{className:"QuestionItem-title"},d.a.createElement("a",{href:X,target:"_blank","data-za-detail-view-name":"Title"},i),M&&d.a.createElement(h.a,{className:"QuestionItem-icon",name:"inconspicuous"}),"commercial"===f&&p&&d.a.createElement("span",{className:"QuestionItem-muteStatus"},"待推广"))},!W&&D&&d.a.createElement(y.a,{annotationDetail:D}),n===w.c.default&&d.a.createElement(w.d,null,Object(b.c)(l),Object(v.a)(s)+" 个回答",Object(v.a)(u)+" 个关注"),n===w.c.interactive&&d.a.createElement(E.b,{data:r,html:j||"",excerpt:r.excerpt,limit:60,limitWithImage:60,truncateHTMLOptions:N,onToggleExpend:this.handleContentToggleExpand},A||d.a.createElement(T.a,P({},G,{isFollowing:(I&&{}.hasOwnProperty.call(I,"isFollowing")?I:r).isFollowing,zaId:B})),[d.a.createElement(_.a,{key:"comment",onClick:this.handleCommentsShown,commentsShown:q,commentClosed:x,count:S}),d.a.createElement(O.a,P({key:"share"},G,{title:i,href:X})),Boolean(s)&&d.a.createElement(C.a,{key:"linkbutton",preset:"plain",to:X,target:"_blank"},d.a.createElement(m.f,{style:{marginRight:"4px"},center:!0,text:!0}),Object(v.a)(s)," 个回答"),V&&V(function(){return e.contentItem},F),W&&D&&d.a.createElement(g.a,{annotationDetail:D})]),d.a.createElement(k.a,{parent:r,commentPattern:H,shown:q,onClose:this.handleCommentsHide}))}}]),t}(f.Component),l.propTypes={preset:p.a.oneOf(Object.keys(w.c)).isRequired,isAnonymousFollowing:p.a.bool,contentShown:p.a.bool,zaInfos:p.a.shape({follow:p.a.number,options:p.a.number}),renderOptions:p.a.func},l.contextTypes={currentUser:p.a.object},l.defaultProps={preset:w.c.default,zaInfos:{}},c=s))||c;t.a=R},1434:function(e,t){},1435:function(e,t){},1436:function(e,t){},1437:function(e,t){},1438:function(e,t){},1439:function(e,t){},1440:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),a=r(n(34)),i=function(e){return o.default.createElement(a.default,Object.assign({width:"18",height:"18",viewBox:"0 0 18 18"},e),o.default.createElement("g",{fill:"none",fillRule:"evenodd"},o.default.createElement("path",{fill:"#C2A469",d:"M12.17 2.18l2.077.372c.613.11 1.092.588 1.201 1.2l.372 2.079c.038.211.12.412.243.588L17.27 8.15c.356.51.356 1.188 0 1.698l-1.207 1.732a1.485 1.485 0 0 0-.243.588l-.372 2.078a1.485 1.485 0 0 1-1.2 1.201l-2.079.372c-.211.038-.412.12-.588.243L9.85 17.27a1.485 1.485 0 0 1-1.698 0l-1.732-1.207a1.485 1.485 0 0 0-.588-.243l-2.078-.372a1.485 1.485 0 0 1-1.201-1.2l-.372-2.079a1.485 1.485 0 0 0-.243-.588L.73 9.85a1.485 1.485 0 0 1 0-1.698l1.207-1.732c.122-.176.205-.377.243-.588l.372-2.078a1.485 1.485 0 0 1 1.2-1.201l2.079-.372c.211-.038.412-.12.588-.243L8.15.73a1.485 1.485 0 0 1 1.698 0l1.732 1.207.588.243z"}),o.default.createElement("path",{fill:"#FFF",d:"M9 11c-.481 0-.893-.19-1.236-.571a1.982 1.982 0 0 1-.514-1.373V5.945c0-.535.171-.993.514-1.374C8.107 4.191 8.52 4 9 4s.893.19 1.236.571c.343.381.514.839.514 1.374v3.11c0 .535-.171.993-.514 1.374-.343.38-.755.571-1.236.571zm3.143-2.889a.367.367 0 0 1 .107.264v.75c0 .863-.278 1.614-.832 2.253-.555.639-1.24 1.005-2.057 1.098v1.774c.002.2-.119.301-.361.301s-.363-.1-.361-.301v-1.774c-.816-.093-1.502-.46-2.057-1.098a3.326 3.326 0 0 1-.832-2.253v-.75c0-.102.036-.19.107-.264A.34.34 0 0 1 6.111 8a.34.34 0 0 1 .254.111.367.367 0 0 1 .107.264v.75c0 .723.248 1.341.742 1.854.495.514 1.09.771 1.786.771s1.291-.257 1.786-.77a2.578 2.578 0 0 0 .742-1.855v-.75c0-.102.035-.19.107-.264A.341.341 0 0 1 11.889 8c.098 0 .182.037.254.111z"})))},c=i;t.default=c},1441:function(e,t){},1442:function(e,t){},1443:function(e,t){},1444:function(e,t){},1445:function(e,t,n){e.exports=n.p+"assets/logo.f6eef033.png"},1446:function(e,t){},1447:function(e,t){},1448:function(e,t){},1449:function(e,t){},1450:function(e,t){},1451:function(e,t){},1452:function(e,t){},1453:function(e,t){},1454:function(e,t){},1455:function(e,t){},1456:function(e,t,n){function r(e){return o(2,e)}var o=n(1457);e.exports=r},1457:function(e,t,n){function r(e,t){var n;if("function"!=typeof t)throw new TypeError(a);return e=o(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var o=n(1458),a="Expected a function";e.exports=r},1458:function(e,t,n){function r(e){var t=o(e),n=t%1;return t===t?n?t-n:t:0}var o=n(1459);e.exports=r},1459:function(e,t,n){function r(e){if(!e)return 0===e?e:0;if((e=o(e))===a||e===-a){return(e<0?-1:1)*i}return e===e?e:0}var o=n(1460),a=1/0,i=1.7976931348623157e308;e.exports=r},1460:function(e,t,n){function r(e){if("number"==typeof e)return e;if(a(e))return i;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(c,"");var n=s.test(e);return n||u.test(e)?p(e.slice(2),n?2:8):l.test(e)?i:+e}var o=n(80),a=n(188),i=NaN,c=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,p=parseInt;e.exports=r},1461:function(e,t){},1462:function(e,t){},1463:function(e,t){},1464:function(e,t){},1465:function(e,t){},1466:function(e,t){},1467:function(e,t){},1468:function(e,t){},1469:function(e,t){},1470:function(e,t){},1472:function(e,t,n){"use strict";function r(e,t,n){if("string"!=typeof t){if(p){var f=u(t);f&&f!==p&&r(e,f,n)}var d=c(t);l&&(d=d.concat(l(t)));for(var h=0;h<d.length;++h){var m=d[h];if(!(o[m]||a[m]||n&&n[m])){var b=s(t,m);try{i(e,m,b)}catch(e){}}}return e}return e}var o={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i=Object.defineProperty,c=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols,s=Object.getOwnPropertyDescriptor,u=Object.getPrototypeOf,p=u&&u(Object);e.exports=r},1473:function(e,t,n){"use strict";function r(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=Object.prototype.hasOwnProperty,a=0;a<n.length;a+=1){if(!o.call(t,n[a])||e[n[a]]!==t[n[a]])return!1;if(e[n[a]]!==t[n[a]])return!1}return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},1474:function(e,t,n){"use strict";function r(e){return Boolean(e&&"function"==typeof e.dispose)}t.__esModule=!0,t.default=r,e.exports=t.default},1475:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.FILE="__NATIVE_FILE__",t.URL="__NATIVE_URL__",t.TEXT="__NATIVE_TEXT__"},1487:function(e,t,n){!function(t,r){e.exports=r(n(1),n(0),n(18))}(0,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n;var i=function(e){var t="undefined"==typeof DOMParser?null:new DOMParser;return t?t.parseFromString(e,"text/html"):null},c=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if("text/html"===r.type){r.getAsString(function(e){var n=i(e).querySelector("img");n&&n.src&&t(n.src)});break}}},l=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=!("undefined"==typeof window||"undefined"==typeof navigator||!("ontouchstart"in window||navigator.msMaxTouchPoints>0)),f="undefined"!=typeof File,d={touch:{react:{down:"onTouchStart",mouseDown:"onMouseDown",drag:"onTouchMove",drop:"onTouchEnd",move:"onTouchMove",mouseMove:"onMouseMove",up:"onTouchEnd",mouseUp:"onMouseUp"},native:{down:"touchstart",mouseDown:"mousedown",drag:"touchmove",drop:"touchend",move:"touchmove",mouseMove:"mousemove",up:"touchend",mouseUp:"mouseup"}},desktop:{react:{down:"onMouseDown",drag:"onDragOver",drop:"onDrop",move:"onMouseMove",up:"onMouseUp"},native:{down:"mousedown",drag:"dragStart",drop:"drop",move:"mousemove",up:"mouseup"}}},h=p?d.touch:d.desktop,m="undefined"!=typeof window&&window.devicePixelRatio?window.devicePixelRatio:1,b=function(e,t,n,r,o,a){if(0===a)e.rect(t,n,r,o);else{var i=r-a,c=o-a;e.translate(t,n),e.arc(a,a,a,Math.PI,1.5*Math.PI),e.lineTo(i,0),e.arc(i,a,a,1.5*Math.PI,2*Math.PI),e.lineTo(r,c),e.arc(i,c,a,2*Math.PI,.5*Math.PI),e.lineTo(a,o),e.arc(a,c,a,.5*Math.PI,Math.PI),e.translate(-t,-n)}},v=function(e){function i(){var e,t,n,a;r(this,i);for(var l=arguments.length,u=Array(l),p=0;p<l;p++)u[p]=arguments[p];return t=n=o(this,(e=i.__proto__||Object.getPrototypeOf(i)).call.apply(e,[this].concat(u))),n.state={drag:!1,my:null,mx:null,image:{x:.5,y:.5}},n.handleMouseDown=function(e){(e=e||window.event).preventDefault(),n.setState({drag:!0,mx:null,my:null})},n.handleMouseUp=function(){n.state.drag&&(n.setState({drag:!1}),n.props.onMouseUp())},n.handleMouseMove=function(e){if(e=e||window.event,!1!==n.state.drag){var t=e.targetTouches?e.targetTouches[0].pageX:e.clientX,r=e.targetTouches?e.targetTouches[0].pageY:e.clientY,o={mx:t,my:r},a=n.props.rotate;if(a%=360,a=a<0?a+360:a,n.state.mx&&n.state.my){var i=n.state.mx-t,c=n.state.my-r,l=n.state.image.width*n.props.scale,u=n.state.image.height*n.props.scale,p=n.getCroppingRect(),f=p.x,d=p.y;f*=l,d*=u;var h=function(e){return e*(Math.PI/180)},m=Math.cos(h(a)),b=Math.sin(h(a)),v=d+-i*b+c*m,y={x:(f+i*m+c*b)/l+1/n.props.scale*n.getXScale()/2,y:v/u+1/n.props.scale*n.getYScale()/2};n.props.onPositionChange(y),o.image=s({},n.state.image,y)}n.setState(o),n.props.onMouseMove(e)}},n.handleDragOver=function(e){(e=e||window.event).preventDefault()},n.handleDrop=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.event;if(e.stopPropagation(),e.preventDefault(),e.dataTransfer){var t=e.dataTransfer,r=t.files,o=t.items;r&&r.length?(n.props.onDropFile(e),n.loadImageFile(r[0])):o&&o.length&&c(o,function(e){return n.loadImage(e)})}},n.setCanvas=function(e){n.canvas=e},a=t,o(n,a)}return a(i,t.Component),u(i,[{key:"isVertical",value:function(){return this.props.rotate%180!=0}},{key:"getBorders",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.border;return Array.isArray(e)?e:[e,e]}},{key:"getDimensions",value:function(){var e=this.props,t=e.width,n=e.height,r=e.rotate,o=e.border,a={},i=this.getBorders(o),c=l(i,2),s=c[0],u=c[1],p=t,f=n;return this.isVertical()?(a.width=f,a.height=p):(a.width=p,a.height=f),a.width+=2*s,a.height+=2*u,{canvas:a,rotate:r,width:t,height:n,border:o}}},{key:"getImage",value:function(){var e=this.getCroppingRect(),t=this.state.image;e.x*=t.resource.width,e.y*=t.resource.height,e.width*=t.resource.width,e.height*=t.resource.height;var n=document.createElement("canvas");this.isVertical()?(n.width=e.height,n.height=e.width):(n.width=e.width,n.height=e.height);var r=n.getContext("2d");return r.translate(n.width/2,n.height/2),r.rotate(this.props.rotate*Math.PI/180),r.translate(-n.width/2,-n.height/2),this.isVertical()&&r.translate((n.width-n.height)/2,(n.height-n.width)/2),r.drawImage(t.resource,-e.x,-e.y),n}},{key:"getImageScaledToCanvas",value:function(){var e=this.getDimensions(),t=e.width,n=e.height,r=document.createElement("canvas");return this.isVertical()?(r.width=n,r.height=t):(r.width=t,r.height=n),this.paintImage(r.getContext("2d"),this.state.image,0,1),r}},{key:"getXScale",value:function(){var e=this.props.width/this.props.height,t=this.state.image.width/this.state.image.height;return Math.min(1,e/t)}},{key:"getYScale",value:function(){var e=this.props.height/this.props.width,t=this.state.image.height/this.state.image.width;return Math.min(1,e/t)}},{key:"getCroppingRect",value:function(){var e=this.props.position||{x:this.state.image.x,y:this.state.image.y},t=1/this.props.scale*this.getXScale(),n=1/this.props.scale*this.getYScale(),r={x:e.x-t/2,y:e.y-n/2,width:t,height:n},o=0,a=1-r.width,i=0,c=1-r.height;return(t>1||n>1)&&(o=-r.width,a=1,i=-r.height,c=1),s({},r,{x:Math.max(o,Math.min(r.x,a)),y:Math.max(i,Math.min(r.y,c))})}},{key:"isDataURL",value:function(e){if(null===e)return!1;var t=/^\s*data:([a-z]+\/[a-z]+(;[a-z-]+=[a-z-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=\-._~:@\/?%\s]*\s*$/i;return!!e.match(t)}},{key:"loadImage",value:function(e){f&&e instanceof File?this.loadImageFile(e):"string"==typeof e&&this.loadImageURL(e)}},{key:"loadImageURL",value:function(e){var t=new Image;t.onload=this.handleImageReady.bind(this,t),t.onerror=this.props.onLoadFailure,!this.isDataURL(e)&&this.props.crossOrigin&&(t.crossOrigin=this.props.crossOrigin),t.src=e}},{key:"loadImageFile",value:function(e){var t=this,n=new FileReader;n.onload=function(e){return t.loadImageURL(e.target.result)},n.readAsDataURL(e)}},{key:"componentDidMount",value:function(){var e=n.findDOMNode(this.canvas).getContext("2d");if(this.props.image&&this.loadImage(this.props.image),this.paint(e),document){var t=h.native;document.addEventListener(t.move,this.handleMouseMove,!1),document.addEventListener(t.up,this.handleMouseUp,!1),p&&(document.addEventListener(t.mouseMove,this.handleMouseMove,!1),document.addEventListener(t.mouseUp,this.handleMouseUp,!1))}}},{key:"componentWillUnmount",value:function(){if(document){var e=h.native;document.removeEventListener(e.move,this.handleMouseMove,!1),document.removeEventListener(e.up,this.handleMouseUp,!1),p&&(document.removeEventListener(e.mouseMove,this.handleMouseMove,!1),document.removeEventListener(e.mouseUp,this.handleMouseUp,!1))}}},{key:"componentDidUpdate",value:function(e,t){var r=n.findDOMNode(this.canvas),o=r.getContext("2d");o.clearRect(0,0,r.width,r.height),this.paint(o),this.paintImage(o,this.state.image,this.props.border),e.image===this.props.image&&e.width===this.props.width&&e.height===this.props.height&&e.position===this.props.position&&e.scale===this.props.scale&&e.rotate===this.props.rotate&&t.my===this.state.my&&t.mx===this.state.mx&&t.image.x===this.state.image.x&&t.image.y===this.state.image.y||this.props.onImageChange()}},{key:"handleImageReady",value:function(e){var t=this.getInitialSize(e.width,e.height);t.resource=e,t.x=.5,t.y=.5,this.setState({drag:!1,image:t},this.props.onImageReady),this.props.onLoadSuccess(t)}},{key:"getInitialSize",value:function(e,t){var n=void 0,r=void 0,o=this.getDimensions();return o.height/o.width>t/e?r=e*((n=this.getDimensions().height)/t):n=t*((r=this.getDimensions().width)/e),{height:n,width:r}}},{key:"componentWillReceiveProps",value:function(e){(e.image&&this.props.image!==e.image||this.props.width!==e.width||this.props.height!==e.height)&&this.loadImage(e.image)}},{key:"paintImage",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:m;if(t.resource){var o=this.calculatePosition(t,n);e.save(),e.translate(e.canvas.width/2,e.canvas.height/2),e.rotate(this.props.rotate*Math.PI/180),e.translate(-e.canvas.width/2,-e.canvas.height/2),this.isVertical()&&e.translate((e.canvas.width-e.canvas.height)/2,(e.canvas.height-e.canvas.width)/2),e.scale(r,r),e.globalCompositeOperation="destination-over",e.drawImage(t.resource,o.x,o.y,o.width,o.height),e.restore()}}},{key:"calculatePosition",value:function(e,t){e=e||this.state.image;var n=this.getBorders(t),r=l(n,2),o=r[0],a=r[1],i=this.getCroppingRect(),c=e.width*this.props.scale,s=e.height*this.props.scale,u=-i.x*c,p=-i.y*s;return this.isVertical()?(u+=a,p+=o):(u+=o,p+=a),{x:u,y:p,height:s,width:c}}},{key:"paint",value:function(e){e.save(),e.scale(m,m),e.translate(0,0),e.fillStyle="rgba("+this.props.color.slice(0,4).join(",")+")";var t=this.props.borderRadius,n=this.getDimensions(),r=this.getBorders(n.border),o=l(r,2),a=o[0],i=o[1],c=n.canvas.height,s=n.canvas.width;t=Math.max(t,0),t=Math.min(t,s/2-a,c/2-i),e.beginPath(),b(e,a,i,s-2*a,c-2*i,t),e.rect(s,0,-s,c),e.fill("evenodd"),e.restore()}},{key:"render",value:function(){var e=this.getDimensions(),n={width:e.canvas.width,height:e.canvas.height,cursor:this.state.drag?"grabbing":"grab"},r={width:e.canvas.width*m,height:e.canvas.height*m,style:s({},n,this.props.style)};return r[h.react.down]=this.handleMouseDown,r[h.react.drag]=this.handleDragOver,this.props.disableDrop||(r[h.react.drop]=this.handleDrop),p&&(r[h.react.mouseDown]=this.handleMouseDown),t.createElement("canvas",s({ref:this.setCanvas},r))}}]),i}();return v.propTypes={scale:e.number,rotate:e.number,image:e.oneOfType([e.string].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(f?[e.instanceOf(File)]:[]))),border:e.oneOfType([e.number,e.arrayOf(e.number)]),borderRadius:e.number,width:e.number,height:e.number,position:e.shape({x:e.number,y:e.number}),color:e.arrayOf(e.number),style:e.object,crossOrigin:e.oneOf(["","anonymous","use-credentials"]),onDropFile:e.func,onLoadFailure:e.func,onLoadSuccess:e.func,onImageReady:e.func,onImageChange:e.func,onMouseUp:e.func,onMouseMove:e.func,onPositionChange:e.func,disableDrop:e.bool},v.defaultProps={disableDrop:!1,scale:1,rotate:0,border:25,borderRadius:0,width:200,height:200,color:[0,0,0,.5],style:{},onDropFile:function(){},onLoadFailure:function(){},onLoadSuccess:function(){},onImageReady:function(){},onImageChange:function(){},onMouseUp:function(){},onMouseMove:function(){},onPositionChange:function(){}},v})},1488:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(13),u=n.n(s),p=n(0),f=n.n(p),d=n(8),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=function(e){function t(){var e;r(this,t);for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];var c=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a)));return c.handleMouseMove=function(e){1!==e.buttons&&1!==e.which||c.handleChange(e)},c.handleChange=function(e){var t=c.input.value;c.value!==t&&(c.value=t,c.props.onChange&&c.props.onChange(e))},c}return a(t,e),h(t,[{key:"componentDidMount",value:function(){this.value=this.input.value}},{key:"render",value:function(){var e=this;return f.a.createElement("input",Object.assign({},this.props,{onMouseMove:this.handleMouseMove,onClick:this.handleChange,onKeyDown:this.handleChange,onChange:this.handleChange,ref:function(t){e.input=t}}))}}]),t}(p.Component),b=m,v=(n(1503),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),y=function(e){function t(){return i(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),v(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=u()(e,["className"]);return f.a.createElement("div",{className:t},f.a.createElement(d._59,{size:18}),f.a.createElement(b,Object.assign({type:"range",className:"RangeInput",min:"1",max:"2",step:"0.01"},n)),f.a.createElement(d._59,{size:22}))}}]),t}(p.Component),g=y;n.d(t,"a",function(){return g})},1491:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return{x:e.left+e.width/2,y:e.top+e.height/2}}function c(){var e=Object(x.a)(navigator.userAgent).Mobile?D:I,t=e.top,n=e.left,r=window,o=r.innerWidth,a=r.innerHeight,c={left:0,top:0,width:o,height:a},l=i(c),s=2*(A+M+n),u=o,p=0;return o<1e3+s?u=o-s:(u=1e3,p=(o-(1e3+s))/2),{x:l.x,y:l.y,imgContainerWidth:u,imgContainerHeight:c.height-2*t,left:p,top:t}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=n(1),y=n.n(v),g=n(0),w=n.n(g),E=n(5),O=n(2),C=n.n(O),_=n(8),k=n(29),T=n(3),j=n(68),S=n(1291),P=n(485),x=n(48),N=n(174),R=(n(1514),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),I={top:10,left:20},D={top:0,left:0},A=72,M=24,L=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getBoundingClientRect=function(e,t){var n=t.width,r=t.height,o={top:0,left:0,width:0,height:0},a=1;return e.width>e.height?(o.height=r,a=r/e.height,o.width=e.width*a,o.left="-"+(o.width-n)/2):e.width<e.height?(o.width=n,a=n/e.width,o.height=e.height*a,o.top="-"+(o.height-r)/2):(o.width=n,o.height=r),o},n.getParentNode=function(){for(var e=n.props.img,t=e.parentNode,r=void 0;t&&"BODY"!==t.nodeName;){if(t.classList.contains("Image-Wrapper-Preview"))return r=t;t=t.parentNode}return r},n.getChildImgNode=function(e){if(e){var t=e.childNodes,r=n.state.index,o=void 0,a=r;return r>=t.length?(a=t.length-1,o=t[a]):o=t[a],{img:o.querySelector(".Image-Preview"),index:a}}},n.setImageElAttr=function(){var e=n.state,t=e.width,r=e.transition,o=n.props.images,a=n.getParentNode(),i=n.getChildImgNode(a);if(i&&i.img){var c=i.img.getBoundingClientRect(),l=n.getBoundingClientRect(o[i.index],{width:c.width,height:c.height}),s=n.imgEl.getBoundingClientRect(),u=n.containerClientRect,p=u.left,f=u.top,d={x:s.left+s.width/2-p-l.width/2,y:s.top+s.height/2-f-l.height/2},h=t/l.width;if("transition"===r)return void n.setState({translate:null,scale:null,opacity:-1,transform:"translate3d("+(c.left-p)+"px,"+(c.top-f)+"px,0)"});n.setState({transition:""},function(){n.setState({rect:c,transition:"",width:l.width,height:l.height,translate:d,scale:h,transform:"translate3d("+d.x+"px ,"+d.y+"px,0) scale3d("+h+","+h+",1)"})}),setTimeout(function(){n.setState({transition:"transition",translate:null,scale:null,transform:"translate3d("+(c.left-p)+"px,"+(c.top-f)+"px,0)",opacity:-1})},20)}},n.getImageSize=function(e){var t=n.containerClientRect,r=t.imgContainerWidth,o=t.imgContainerHeight,a=e.width,i=e.height,c=!1,l=1;return(e.width>r||e.height>o)&&(e.width>r&&(l=r/e.width,a=e.width*l,i=l*e.height),i>o&&(l=o/i,i*=l,a*=l),c=!0),n.setState({cursorZoomIn:c}),{width:a,height:i}},n.handleResizeCallback=function(){n.containerClientRect=c();var e=n.state.index,t=n.props.images;n.setState(Object.assign({transition:"fixed",transform:""},n.getImageSize(t[e])))},n.handleClick=function(e){var t=n.state.cursorZoomIn,r=e.target;r&&r.classList&&r.classList.contains("ImageGallery-Img")&&t&&n.setState({previewImage:r}),(r.classList.contains("ImageGallery")||r.classList.contains("ImageGallery-Inner"))&&n.setImageElAttr()},n.handleTransEnd=function(){var e=n.state,t=e.translate,r=e.scale,o=n.props.onClose;t&&r||o()},n.handlePreviewImageClose=function(){n.setState({previewImage:null},function(){P.a()})},n.handleKeyUpCallback=function(e){39===e.keyCode?n.handleCutImage(1):37===e.keyCode&&n.handleCutImage(-1)},n.handleCutImage=function(e){var t=n.state.index+e,r=n.props.images;t<r.length&&t>=0&&n.setState(Object.assign({index:t,transition:"fixed",transform:""},n.getImageSize(r[t])))},n.state={transEnded:!1,translate:null,scale:null,url:null,index:e.index||0,width:0,height:0,rect:null,transition:"transition",previewImage:null,transform:"",cursorZoomIn:!1,opacity:1},n.containerClientRect=c(),n}return a(t,e),R(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.data,n=e.img,r=n.getBoundingClientRect();P.a();var o=this.containerClientRect,a=o.left,i=o.top,c=this.getBoundingClientRect(t,{width:r.width,height:r.height}),l={left:r.left-a+Number(c.left),top:r.top-i+Number(c.top)};this.setState({rect:c,width:c.width,height:c.height,transform:"translate3d("+l.left+"px, "+l.top+"px, 0)"})}},{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState(Object.assign({},e.computeTransition(e.props.index)))},20),window.addEventListener("keyup",this.handleKeyUpCallback),window.addEventListener("resize",this.handleResizeCallback)}},{key:"componentWillUnmount",value:function(){P.b(),window.removeEventListener("keyup",this.handleKeyUpCallback),window.removeEventListener("resize",this.handleResizeCallback)}},{key:"computeTransition",value:function(e){var t=this.props.images,n=t[e],r=this.containerClientRect,o=r.x,a=r.y,i=r.left,c=r.top,l=this.getImageSize(n),s=l.width;if(this.imgEl){var u=this.imgEl.getBoundingClientRect(),p=s/u.width,f={x:o-u.width/2-i,y:a-u.height/2-c};return{translate:f,scale:p,transform:"translate3d("+f.x+"px ,"+f.y+"px,0) scale3d("+p+","+p+",1)"}}}},{key:"render",value:function(){var e=this,t=this.props.images,n=this.state,r=n.translate,o=n.index,a=n.width,i=n.height,c=n.transition,l=n.previewImage,s=n.transform,u=n.cursorZoomIn,p=n.opacity,f=this.containerClientRect,d=f.left,h=f.top,m=f.imgContainerWidth,b=f.imgContainerHeight,v=Object(x.a)(navigator.userAgent).Mobile?D:I,y=v.left,g=t[o];return w.a.createElement(N.a,null,w.a.createElement("div",{className:C()("ImageGallery",{"is-active":r}),onClick:this.handleClick},w.a.createElement("div",{className:"ImageGallery-Content",style:{width:m+2*(A+M+y)+"px",height:b+"px",left:d+"px",top:h+"px"}},!l&&t.length>1&&w.a.createElement("a",{className:C()("ImageGallery-arrow-left",{"ImageGallery-arrow-disabled":0===o}),style:{left:y+"px"},onClick:function(){return e.handleCutImage(-1)}},w.a.createElement(_.h,{fill:"#fff",size:42})),w.a.createElement("div",{className:"ImageGallery-Inner",ref:function(t){e.scrollNode=t}},w.a.createElement("img",{ref:function(t){e.imgEl=t},src:Object(j.a)(g.url,"r"),className:C()("ImageGallery-Img",{"ImageGallery-transition":"transition"===c,"ImageGallery-fixed":"fixed"===c,"ImageGallery-CursorZoomIn":u}),style:{width:a,height:i,transform:s,opacity:p},onTransitionEnd:this.handleTransEnd,alt:"preview","data-rawwidth":g.width,"data-rawheight":g.height,"data-thumbnail":g.thumbnail,"data-original":Object(j.a)(g.url,"r"),"data-actualsrc":Object(j.a)(g.url,"b")})),!l&&t.length>1&&w.a.createElement("a",{className:C()("ImageGallery-arrow-right",{"ImageGallery-arrow-disabled":o>=t.length-1}),onClick:function(){return e.handleCutImage(1)},style:{right:y+"px"}},w.a.createElement(_.i,{fill:"#fff",size:42}))),!l&&w.a.createElement("a",{className:"ImageGallery-close",onClick:this.setImageElAttr},w.a.createElement(_.z,{fill:"#fff"})),l&&w.a.createElement(S.a,{img:l,onClose:this.handlePreviewImageClose})))}}]),t}(g.Component);L.propTypes={img:y.a.object.isRequired,data:y.a.object.isRequired,onClose:y.a.func.isRequired};var U=L,B=n(493),F=(n(1515),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),V=function(e){function t(e){l(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setImageAttr=function(){var e=n.state,t=e.width,r=e.height;if(!t||!r){var o=n.divEl.getBoundingClientRect();t=t||o.width,r=r||o.width,n.setState({width:t,height:r})}var a=n.getBoundingClientRect({width:t,height:r});n.setState({imageWidth:a.width,imageHeight:a.height,imageTop:a.top,imageLeft:a.left})},n.getBoundingClientRect=function(e){var t=e.width,r=e.height,o=n.props.data,a={top:0,let:0,width:0,height:0},i=1;return o.width>o.height?(a.height=r,i=r/o.height,a.width=o.width*i,a.left="-"+(a.width-t)/2):(a.width=t,i=t/o.width,a.height=o.height*i,a.top="-"+(a.height-r)/2),a},n.handlePreviewImageOpen=function(e){var t=n.props.onPreviewImageOpen;e.persist(),t&&t(e)||n.setState({previewImage:n.imgWrapper.querySelector("img")})},n.handlePreviewImageClose=function(){n.setState({previewImage:null})},n.state={width:e.width||0,height:e.height||0,imageWidth:0,imageHeight:0,imageTop:0,imageLeft:0,previewImage:null},n}return u(t,e),F(t,[{key:"componentDidMount",value:function(){this.setImageAttr()}},{key:"render",value:function(){var e=this,t=this.state,n=t.width,r=t.height,o=t.previewImage,a=t.imageWidth,i=t.imageHeight,c=t.imageTop,l=t.imageLeft,s=this.props,u=s.data,p=s.images,f=s.index,d=s.surplus,h=s.previewType,m=void 0===h?1:h,b=s.data.isGif,v=s.vague,y=s.previewTransitionType,g=void 0===y?0:y;return w.a.createElement("div",{onClick:this.handlePreviewImageOpen,className:"Thumbnail-Wrapper",ref:function(t){e.divEl=t},style:{width:n?n+"px":"",height:r?r+"px":""}},w.a.createElement("span",{ref:function(t){e.imgWrapper=t},className:C()({"Image-PreviewVague":v})},v?w.a.createElement(B.a,{className:"Image-Preview",url:b?Object(j.a)(u.thumbnail,"xl"):Object(j.a)(u.url,"xl"),width:n,height:r,alt:"cover",thumbnail:b?Object(j.a)(u.thumbnail,"xl"):Object(j.a)(u.url,"xl"),"data-rawwidth":u.width,"data-rawheight":u.height,"data-thumbnail":u.thumbnail,"data-original":Object(j.a)(u.url,"r"),"data-actualsrc":Object(j.a)(u.url,"b")}):w.a.createElement("img",{className:"Image-Preview",src:b?u.thumbnail:Object(j.a)(u.url,"r"),width:a,height:i,style:{top:c+"px",left:l+"px"},alt:"preview","data-rawwidth":u.width,"data-rawheight":u.height,"data-thumbnail":u.thumbnail,"data-original":Object(j.a)(u.url,"r"),"data-actualsrc":Object(j.a)(u.url,"b")})),d>0&&w.a.createElement("em",{className:"Thumbnail-Surplus-Sign"},"+"+d),b&&w.a.createElement("em",{className:"Thumbnail-Gif-Sign"},"GIF"),o&&(1===m?w.a.createElement(U,{img:o,data:u,index:f,images:p,onClose:this.handlePreviewImageClose}):w.a.createElement(S.a,{img:o,isOriginalUrl:!v,transitionType:g,data:u,onClose:this.handlePreviewImageClose})))}}]),t}(g.Component);V.propTypes={width:y.a.number,height:y.a.number,index:y.a.number,surplus:y.a.number,data:y.a.object,images:y.a.array,onPreviewImageOpen:y.a.func};var z,q,H,W,G=n(488),X=n(1326),Y=n(487),K=n(1281),Q=n(1307),Z=n(1276),J=n(1288),$=n(512),ee=n(553),te=n(1286),ne=n(1287),re=n(6),oe=n(260),ae=n(104),ie=n(10),ce=(n(1516),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),le={pin:"updatePinsReaction"},se=(z=Object(E.connect)(null,{updatePinsReaction:G.i}))((W=H=function(e){function t(){var e,n,r,o;p(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleToggleVote=r.context.authRequired(function(e){var t=r.props,n=t.reactioned,o=t.type,a=t.id,i=!n;re.default.trackEvent(e.target,{action:i?"Upvote":"UnUpvote",element:"Button"});var c=le[o];r.props[c](a,i)},ie.L.vote),o=n,f(r,o)}return d(t,e),ce(t,[{key:"render",value:function(){var e=this.props,t=e.reactioned,n=e.count,r=e.className,o=e.icon,a=void 0===o?"clap":o,i=e.disabled;return w.a.createElement(T.c,{className:C()("ReactionButton",{"is-active":t},r),onClick:this.handleToggleVote,disabled:i},w.a.createElement(k.a,{name:a,width:20,height:20}),Object(oe.a)(n))}}]),t}(g.Component),H.contextTypes={authRequired:y.a.func},H.propTypes={type:y.a.oneOf(ae.a).isRequired,id:y.a.oneOfType([y.a.number,y.a.string]).isRequired,icon:y.a.string,reactioned:y.a.bool,count:y.a.number},q=W))||q,ue=se,pe=n(1306),fe=n(508),de=n(168),he=n(1304);n(1517);n.d(t,"a",function(){return Oe});var me,be,ve,ye,ge,we=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oe=(me=Object(de.a)(function(e){var t=e.pin,n=e.trackCardShow,r=void 0===n||n,o=e.zaInfos;o=void 0===o?{}:o;var a=o.cardShow;return Ee({module:"PinItem",card:{content:{type:"Pin",id:String(t.id),author_member_hash_id:t&&t.author.id}}},a&&{view:{id:a}},{trackCardShow:r})}),be=Object(E.connect)(function(e,t){var n=t.pin;return n&&"string"==typeof n.author?{pin:Object.assign({},n,{author:e.entities.users[n.author]})}:{}},{deletePin:G.c}),me(ve=be((ge=ye=function(e){function t(e){h(this,t);var n=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={commentPattern:"fixed",commentsShown:!1,deleteModalShown:!1},n.openDeleteModal=function(){n.setState({deleteModalShown:!0})},n.closeDeleteModal=function(){n.setState({deleteModalShown:!1})},n.handlePositionStatusChange=function(e){n.setState({positionStatus:e})},n.handleDeletePin=function(){var e=n.context.authRequired,t=n.props,r=t.pin.id;return e((0,t.deletePin)(r),ie.L.deletePin)},n.handleCommentsShown=function(e,t){n.setState(t)},n.handleCommentsHide=function(){n.setState({commentsShown:!1})},n.renderQuoteContents=function(e,t){var n=e.content;return w.a.createElement("blockquote",{key:t,className:"PinItem-3lineBlockquote"},n)},n.renderLinkContents=function(e,t,n){var r=e.url,o=e.title,a=e.imageUrl,i=e.subtype;return"text"===n?w.a.createElement("a",{className:C()("link-text",{"PinItem-contentTitle":!!o,"PinItem-contentUrl":!o}),href:r,target:"_blank",key:t},w.a.createElement(k.a,{stroke:"#BBC1CC",width:16,height:16,name:"link"})," ",o||r):w.a.createElement("a",{className:"link-box",href:r,target:"_blank",key:t},w.a.createElement("span",{className:"content"},w.a.createElement("span",{className:C()("title",{"PinItem-contentTitle":!!o,"PinItem-contentUrl":!o})},o||r),o&&w.a.createElement("span",null,(r.match(/^https?:\/\/([^\/?#]+)(?:[\/?#]|$)/i)||[])[1],i&&w.a.createElement("span",{className:"subtype"},i))),a&&w.a.createElement("img",{className:"thumbnail",src:a,alt:"头像"}))},n.renderVideoContents=function(e,t){var r=e.videoId||e.id,o=e.thumbnail||e.coverInfo&&e.coverInfo.thumbnail,a={title:"",thumbnail:o,isLens:!0,id:r,isPlayable:!0,url:"https://www.zhihu.com/video/"+r};return w.a.createElement(fe.a,{key:t,isAppView:n.isAppView,data:a})},n.renderRepinContents=function(e){return e&&e.content&&e.content[0]?w.a.createElement("div",{className:C()("PinItem-RichText","PinItem-content-repin")},w.a.createElement("div",{className:"repin-text"},w.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.author.name+" :\n              "+("text"===e.content[0].type&&e.content[0].content)}})),n.renderPinContents(e.content,"text"),e.repin&&n.renderRepinContents(e.repin)):e&&e.isDeleted?w.a.createElement("div",{className:C()("PinItem-RichText","PinItem-content-repin")},w.a.createElement("div",{className:"repin-text"},e.deletedReason)):null},n.renderPinContents=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],r=e.filter(function(e){return e.url&&"image"===e.type}),o=[];return w.a.createElement("div",{className:C()("RichText","ztext","PinItem-remainContentRichText")},e.map(function(e,a){var i=e.type;return"quote"===i?n.renderQuoteContents(e,a):"link"===i?n.renderLinkContents(e,a,t):"video"===i?n.renderVideoContents(e,a):("image"===i&&o.length<4&&e.url&&o.push(w.a.createElement(V,{data:e,key:a,vague:!0,index:o.length,images:r,surplus:r.length>4&&3===o.length?r.length-4:0})),null)}),o.length>0&&w.a.createElement("div",{className:"Image-Wrapper-Preview"},o))},n.renderRemainContents=function(){var e=n.props.pin,t=e.id,r=e.created,o=e.updated,a=e.repin,i=e.content,c="//"+ie.j+"/pin/"+t;return w.a.createElement("div",null,n.renderPinContents(i),n.renderRepinContents(a),w.a.createElement(J.a,{href:c,created:r,updated:o}))},n.contentHTML=n.getContentHTML(e.pin),n}return b(t,e),we(t,[{key:"componentWillReceiveProps",value:function(e){this.contentHTML=this.getContentHTML(e.pin)}},{key:"getContentHTML",value:function(e){if(!e||!e.content)return"";var t=e.content,n="";return"text"===t[0].type&&(n=t[0].content),n}},{key:"render",value:function(){var e=this.props,t=e.pin,n=e.pin,r=n.id,o=n.type,a=n.author,i=n.upvotedFollowees,c=void 0===i?[]:i,l=n.virtuals;l=void 0===l?{}:l;var s=l.reactionType,u=n.commentCount,p=n.reactionCount,f=n.adminClosedComment,d=e.actor,h=e.action,m=e.preset,b=e.lastreadTouchable,v=e.isSticky,y=e.handleToggleSticky,g=this.state,E=g.positionStatus,O=g.deleteModalShown,C=g.expanded,j=this.context.currentUser,S=j&&j.urlToken===a.urlToken,P=d&&d.urlToken,x="plain"===m,N="like"===s,R=w.a.createElement(X.a,{id:r,type:o,voteupCount:p,openable:!1,upvotedFollowees:c.filter(function(e){return P!==e.urlToken}),too:"voted"===h}),I=this.state,D=I.commentsShown,A=I.commentPattern,M=null;x&&(M=R);var L="function"==typeof y;return w.a.createElement(Z.e,{data:t,meta:x||w.a.createElement("div",null,w.a.createElement(Y.a,{key:"authorInfo",author:a,className:"PinItem-authorInfo"}),R),className:"PinItem",lastreadTouchable:b},w.a.createElement(J.b,{prefix:L&&v&&w.a.createElement(Q.a,null),alwaysShowPrefix:!0,data:t,html:this.contentHTML,before:M,excerpt:this.contentHTML,expanded:C,onPositionStatusChange:this.handlePositionStatusChange,renderCanExpandExtra:this.renderRemainContents},w.a.createElement(ue,{reactioned:Boolean(N),count:p,id:r,type:"pin"}),w.a.createElement(te.a,{onClick:this.handleCommentsShown,commentsShown:D,commentClosed:f,count:u,positionStatus:E}),w.a.createElement(K.a,{id:r,type:"pin",authorName:a&&a.name,href:"//"+ie.j+"/pin/"+r,positionStatus:E}),(!j||!j.isOrg)&&w.a.createElement(ee.a,{id:r,type:"pin"}),!S&&w.a.createElement($.a,{type:"pin",id:r}),L&&S&&Object(he.a)(j)&&w.a.createElement(T.c,{preset:"plain",onClick:y,icon:v?_._64:_._63,label:v?"取消置顶":"置顶"}),S&&w.a.createElement(T.c,{preset:"plain",onClick:this.openDeleteModal},w.a.createElement(k.a,{left:!0,name:"delete"}),"删除")),S&&w.a.createElement(pe.a,{title:"你确定要删除自己的想法吗？",shown:O,onCancel:this.closeDeleteModal,onSubmit:this.handleDeletePin}),w.a.createElement(ne.a,{parent:t,commentPattern:A,shown:D,onClose:this.handleCommentsHide}))}}]),t}(g.Component),ye.contextTypes={authRequired:y.a.func,currentUser:y.a.object},ve=ge))||ve)||ve)},1492:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(13),c=n.n(i),l=n(0),s=n.n(l),u=n(2),p=n.n(u),f=(n(1534),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),d=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),f(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=c()(e,["className"]);return s.a.createElement("textarea",Object.assign({},n,{className:p()(t,"TextArea")}))}}]),t}(l.Component),h=d;n.d(t,"a",function(){return h})},1493:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=n(0),l=n.n(c),s=n(2),u=n.n(s),p=(n(1797),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),f(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.alt,o=r(e,["className","alt"]);return l.a.createElement("img",p({className:u()("ImageAlias",t),alt:n},o))}}]),t}(c.Component),h=d;t.a=h},1503:function(e,t){},1504:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),c=n.n(i),l=n(2),s=n.n(l),u=(n(1505),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),p=void 0;!function(e){e.BLACK="black",e.WHITE="white"}(p||(p={}));var f=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.maskClassName,r=e.shown,o=e.background,a=e.children,i=e.fullContent;return c.a.createElement("div",{className:s()("Mask",t,{"Mask-hidden":!r})},c.a.createElement("div",{className:s()("Mask-mask","Mask-mask--"+o,n)}),a&&c.a.createElement("div",{className:i?"Mask-content--full":"Mask-content"},a))}}]),t}(c.a.Component);f.defaultProps={shown:!1,background:p.BLACK};var d=f;n.d(t,"a",function(){return d}),n.d(t,!1,function(){return p})},1505:function(e,t){},1506:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return h});var i=n(0),c=n.n(i),l=n(71),s=n(2),u=n.n(s),p=n(1711),f=(n.n(p),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),d=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),f(t,[{key:"render",value:function(){var e=this.props,t=e.url,n=e.className,r=e.style;return c.a.createElement("div",{className:u()("UserAvatar",n),style:r},c.a.createElement(l.a,{className:"UserAvatar-inner",url:t,size:160}))}}]),t}(i.Component),h=function(e){var t=e.className;return c.a.createElement("div",{className:u()(t,"UserAvatar","UserAvatar-holder")})};t.b=d},1514:function(e,t){},1515:function(e,t){},1516:function(e,t){},1517:function(e,t){},1518:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e){E.default.apply(void 0,["DragDropContext","backend"].concat(Array.prototype.slice.call(arguments)));var t=_(e),n=C(t);return function(e){var t,r,c=e.displayName||e.name||"Component",u=(r=t=function(t){function r(){return o(this,r),a(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return i(r,t),s(r,[{key:"getDecoratedComponentInstance",value:function(){return(0,v.default)(this.child,"In order to access an instance of the decorated component it can not be a stateless component."),this.child}},{key:"getManager",value:function(){return n.dragDropManager}},{key:"getChildContext",value:function(){return n}},{key:"render",value:function(){var t=this;return f.default.createElement(e,l({},this.props,{ref:function(e){t.child=e}}))}}]),r}(p.Component),t.DecoratedComponent=e,t.displayName="DragDropContext("+c+")",t.childContextTypes=O,r);return(0,g.default)(u,e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.unpackBackendForEs5Users=t.createChildContext=t.CHILD_CONTEXT_TYPES=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=c;var p=n(0),f=r(p),d=n(1),h=r(d),m=n(1723),b=n(1290),v=r(b),y=n(1472),g=r(y),w=n(1392),E=r(w),O=t.CHILD_CONTEXT_TYPES={dragDropManager:h.default.object.isRequired},C=t.createChildContext=function(e,t){return{dragDropManager:new m.DragDropManager(e,t)}},_=t.unpackBackendForEs5Users=function(e){var t=e;return"object"===(void 0===t?"undefined":u(t))&&"function"==typeof t.default&&(t=t.default),(0,v.default)("function"==typeof t,"Expected the backend to be a function or an ES6 module exporting a default function. Read more: http://react-dnd.github.io/react-dnd/docs-drag-drop-context.html"),t}},1519:function(e,t,n){"use strict";function r(e,t){return e===t||e&&t&&e.x===t.x&&e.y===t.y}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case l.BEGIN_DRAG:return{initialSourceClientOffset:t.sourceClientOffset,initialClientOffset:t.clientOffset,clientOffset:t.clientOffset};case l.HOVER:return r(e.clientOffset,t.clientOffset)?e:c({},e,{clientOffset:t.clientOffset});case l.END_DRAG:case l.DROP:return s;default:return e}}function a(e){var t=e.clientOffset,n=e.initialClientOffset,r=e.initialSourceClientOffset;return t&&n&&r?{x:t.x+r.x-n.x,y:t.y+r.y-n.y}:null}function i(e){var t=e.clientOffset,n=e.initialClientOffset;return t&&n?{x:t.x-n.x,y:t.y-n.y}:null}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=o,t.getSourceClientOffset=a,t.getDifferenceFromInitialOffset=i;var l=n(1390),s={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null}},1520:function(e,t,n){"use strict";function r(e,t){return(0,a.default)(e)?e.some(function(e){return e===t}):e===t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(24),a=function(e){return e&&e.__esModule?e:{default:e}}(o)},1521:function(e,t,n){var r=n(1522),o=n(495),a=n(502),i=o(function(e,t){return a(e)?r(e,t):[]});e.exports=i},1522:function(e,t,n){function r(e,t,n,r){var p=-1,f=a,d=!0,h=e.length,m=[],b=t.length;if(!h)return m;n&&(t=c(t,l(n))),r?(f=i,d=!1):t.length>=u&&(f=s,d=!1,t=new o(t));e:for(;++p<h;){var v=e[p],y=null==n?v:n(v);if(v=r||0!==v?v:0,d&&y===y){for(var g=b;g--;)if(t[g]===y)continue e;m.push(v)}else f(t,y,r)||m.push(v)}return m}var o=n(285),a=n(524),i=n(525),c=n(269),l=n(185),s=n(286),u=200;e.exports=r},1523:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){var e=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments[1]),t=arguments[2];switch(e.type){case u.HOVER:break;case p.ADD_SOURCE:case p.ADD_TARGET:case p.REMOVE_TARGET:case p.REMOVE_SOURCE:return f;case u.BEGIN_DRAG:case u.PUBLISH_DRAG_SOURCE:case u.END_DRAG:case u.DROP:default:return d}var n=e.targetIds,r=t.targetIds,o=(0,c.default)(n,r),a=!1;if(0===o.length){for(var i=0;i<n.length;i++)if(n[i]!==r[i]){a=!0;break}}else a=!0;if(!a)return f;var l=r[r.length-1],s=n[n.length-1];return l!==s&&(l&&o.push(l),s&&o.push(s)),o}function a(e,t){return e!==f&&(e===d||void 0===t||(0,s.default)(t,e).length>0)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o,t.areDirty=a;var i=n(1732),c=r(i),l=n(1524),s=r(l),u=n(1390),p=n(1391),f=[],d=[]},1524:function(e,t,n){var r=n(269),o=n(1525),a=n(495),i=n(1526),c=a(function(e){var t=r(e,i);return t.length&&t[0]===e[0]?o(t):[]});e.exports=c},1525:function(e,t,n){function r(e,t,n){for(var r=n?i:a,p=e[0].length,f=e.length,d=f,h=Array(f),m=1/0,b=[];d--;){var v=e[d];d&&t&&(v=c(v,l(t))),m=u(v.length,m),h[d]=!n&&(t||p>=120&&v.length>=120)?new o(d&&v):void 0}v=e[0];var y=-1,g=h[0];e:for(;++y<p&&b.length<m;){var w=v[y],E=t?t(w):w;if(w=n||0!==w?w:0,!(g?s(g,E):r(b,E,n))){for(d=f;--d;){var O=h[d];if(!(O?s(O,E):r(e[d],E,n)))continue e}g&&g.push(E),b.push(w)}}return b}var o=n(285),a=n(524),i=n(525),c=n(269),l=n(185),s=n(286),u=Math.min;e.exports=r},1526:function(e,t,n){function r(e){return o(e)?e:[]}var o=n(502);e.exports=r},1527:function(e,t,n){"use strict";function r(e,t){if(e===t)return!0;if("object"!==(void 0===e?"undefined":o(e))||null===e||"object"!==(void 0===t?"undefined":o(t))||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=Object.prototype.hasOwnProperty,i=0;i<n.length;i+=1){if(!a.call(t,n[i]))return!1;var c=e[n[i]],l=t[n[i]];if(c!==l||"object"===(void 0===c?"undefined":o(c))||"object"===(void 0===l?"undefined":o(l)))return!1}return!0}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=r},1528:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e){var t,n,r=e.DecoratedComponent,c=e.createHandler,d=e.createMonitor,b=e.createConnector,v=e.registerHandler,g=e.containerDisplayName,E=e.getType,C=e.collect,T=e.options,j=T.arePropsEqual,S=void 0===j?_.default:j,P=r.displayName||r.name||"Component",x=(n=t=function(e){function t(e,n){o(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.handleChange=r.handleChange.bind(r),r.handleChildRef=r.handleChildRef.bind(r),(0,y.default)("object"===s(r.context.dragDropManager),"Could not find the drag and drop manager in the context of %s. Make sure to wrap the top-level component of your app with DragDropContext. Read more: http://react-dnd.github.io/react-dnd/docs-troubleshooting.html#could-not-find-the-drag-and-drop-manager-in-the-context",P,P),r.manager=r.context.dragDropManager,r.handlerMonitor=d(r.manager),r.handlerConnector=b(r.manager.getBackend()),r.handler=c(r.handlerMonitor),r.disposable=new m.SerialDisposable,r.receiveProps(e),r.state=r.getCurrentState(),r.dispose(),r}return i(t,e),u(t,[{key:"getHandlerId",value:function(){return this.handlerId}},{key:"getDecoratedComponentInstance",value:function(){return this.decoratedComponentInstance}},{key:"shouldComponentUpdate",value:function(e,t){return!S(e,this.props)||!(0,O.default)(t,this.state)}}]),u(t,[{key:"componentDidMount",value:function(){this.isCurrentlyMounted=!0,this.disposable=new m.SerialDisposable,this.currentType=null,this.receiveProps(this.props),this.handleChange()}},{key:"componentWillReceiveProps",value:function(e){S(e,this.props)||(this.receiveProps(e),this.handleChange())}},{key:"componentWillUnmount",value:function(){this.dispose(),this.isCurrentlyMounted=!1}},{key:"receiveProps",value:function(e){this.handler.receiveProps(e),this.receiveType(E(e))}},{key:"receiveType",value:function(e){if(e!==this.currentType){this.currentType=e;var t=v(e,this.handler,this.manager),n=t.handlerId,r=t.unregister;this.handlerId=n,this.handlerMonitor.receiveHandlerId(n),this.handlerConnector.receiveHandlerId(n);var o=this.manager.getMonitor(),a=o.subscribeToStateChange(this.handleChange,{handlerIds:[n]});this.disposable.setDisposable(new m.CompositeDisposable(new m.Disposable(a),new m.Disposable(r)))}}},{key:"handleChange",value:function(){if(this.isCurrentlyMounted){var e=this.getCurrentState();(0,O.default)(e,this.state)||this.setState(e)}}},{key:"dispose",value:function(){this.disposable.dispose(),this.handlerConnector.receiveHandlerId(null)}},{key:"handleChildRef",value:function(e){this.decoratedComponentInstance=e,this.handler.receiveComponent(e)}},{key:"getCurrentState",value:function(){var e=C(this.handlerConnector.hooks,this.handlerMonitor);return e}},{key:"render",value:function(){return f.default.createElement(r,l({},this.props,this.state,{ref:k(r)?this.handleChildRef:null}))}}]),t}(p.Component),t.DecoratedComponent=r,t.displayName=g+"("+P+")",t.contextTypes={dragDropManager:h.default.object.isRequired},n);return(0,w.default)(x,r)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=c;var p=n(0),f=r(p),d=n(1),h=r(d),m=n(1746),b=n(266),v=(r(b),n(1290)),y=r(v),g=n(1472),w=r(g),E=n(1473),O=r(E),C=n(1527),_=r(C),k=function(e){return Boolean(e&&e.prototype&&"function"==typeof e.prototype.render)}},1529:function(e,t,n){"use strict";function r(e){if("string"!=typeof e.type){var t=e.type.displayName||e.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors.You can either wrap "+t+" into a <div>, or turn it into a drag source or a drop target itself.")}}function o(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!(0,i.isValidElement)(t)){return void e(t,n)}var o=t;r(o);var a=n?function(t){return e(t,n)}:e;return(0,l.default)(o,a)}}function a(e){var t={};return Object.keys(e).forEach(function(n){var r=e[n],a=o(r);t[n]=function(){return a}}),t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i=n(0),c=n(1754),l=function(e){return e&&e.__esModule?e:{default:e}}(c)},1530:function(e,t,n){"use strict";function r(e,t){return t===e||null!==t&&null!==e&&(0,a.default)(t,e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(1473),a=function(e){return e&&e.__esModule?e:{default:e}}(o)},1531:function(e,t,n){"use strict";function r(e,t){return"string"==typeof e||"symbol"===(void 0===e?"undefined":o(e))||t&&(0,i.default)(e)&&e.every(function(e){return r(e,!1)})}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=r;var a=n(24),i=function(e){return e&&e.__esModule?e:{default:e}}(a)},1532:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSafari=t.isFirefox=void 0;var r=n(105),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.isFirefox=(0,o.default)(function(){return/firefox/i.test(navigator.userAgent)}),t.isSafari=(0,o.default)(function(){return Boolean(window.safari)})},1533:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){return e.filter(function(e){var t=e.name;return!/^创建[\s\S]*话题$/.test(t)&&!t.includes("（知乎用户）")})}},1534:function(e,t){},1681:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s,u,p,f,d=n(1),h=n.n(d),m=n(0),b=n.n(m),v=n(2),y=n.n(v),g=n(8),w=n(1504),E=n(1396),O=n(1506),C=n(1487),_=n.n(C),k=n(3),T=n(42),j=n(1488),S=(n(1712),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),P=(u=s=function(e){function t(){var e,n,a,i;r(this,t);for(var c=arguments.length,l=Array(c),s=0;s<c;s++)l[s]=arguments[s];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.state={range:1,image:a.props.image},a.handleSave=function(){var e=a.editorEl.getImage(),t=a.props.type;e&&e.toBlob(a.uploadBlob,t)},a.uploadBlob=function(e){(0,a.props.uploadImage)(e,"avatar")},a.resetUpload=function(){a.setState({range:1,image:""}),a.props.resetUpload()},i=n,o(a,i)}return a(t,e),S(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.range,r=t.image,o=this.props,a=o.title,i=o.width,c=o.height;return b.a.createElement(T.b,{onClose:this.resetUpload,className:"UploadImageModal-modal",title:"编辑"+a,subtitle:"调整"+a+"尺寸和位置"},b.a.createElement("div",null,b.a.createElement("div",{className:"UploadImageModal-container"},b.a.createElement(_.a,{ref:function(t){e.editorEl=t},image:r,width:i,height:c,border:40,color:[247,248,250,.9],scale:parseFloat(n)})),b.a.createElement(j.a,{value:n,onChange:function(t){return e.setState({range:t.target.value})}}),b.a.createElement(T.a,null,b.a.createElement(k.c,{color:"blue",preset:"primary",onClick:this.handleSave},"保存"))))}}]),t}(b.a.Component),s.propTypes={resetUpload:h.a.func,uploadImage:h.a.func,image:h.a.string,type:h.a.string,width:h.a.number,height:h.a.number,title:h.a.string},s.defaultProps={title:"头像",type:"image/png",width:160,height:160},u),x=(n(1713),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),N=3,R=(f=p=function(e){function t(){i(this,t);var e=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.beforeUpload=function(t){return t?t.size>1024*N*1024?(e.props.handleShowNotifcation("请上传小于 "+N+"M 的图片。"),e.resetUpload(),!1):void e.setState({modalShown:!0,image:window.URL.createObjectURL(t),type:t.type}):(e.resetUpload(),!1)},e.resetUpload=function(){e.setState({modalShown:!1},function(){e.inputEl.value=""})},e.state={modalShown:!1,maskShown:!1},e}return l(t,e),x(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props,r=n.avatarUpload,o=n.updateProfile,a=e.avatarUpload;(a&&!r||r&&a&&r.id!==a.id)&&o({avatarUrl:a.url},{avatarHash:a.id}).then(function(){return t.resetUpload()})}},{key:"render",value:function(){var e=this,t=this.props,n=t.url,r=t.className,o=t.style,a=t.inEditPage,i=t.round,c=t.uploadImage,l=this.state,s=l.modalShown,u=l.maskShown,p=l.image,f=l.type;return b.a.createElement("div",null,b.a.createElement("div",{className:y()("UserAvatarEditor",r),onMouseEnter:function(){return e.setState({maskShown:!0})},onMouseLeave:function(){return e.setState({maskShown:!1})},style:o},b.a.createElement(O.b,{url:n,className:y()({"UserAvatar-round":i})}),b.a.createElement(E.a,{accept:"image/png,image/jpeg",onRef:function(t){e.inputEl=t},beforeUpload:this.beforeUpload},b.a.createElement(w.a,{className:"UserAvatarEditor-mask",maskClassName:y()("UserAvatarEditor-maskInner",{"UserAvatarEditor-maskRoundInner":i}),shown:a||u},b.a.createElement(g.v,{size:36,className:"UserAvatarEditor-cameraIcon"}),b.a.createElement("div",{className:"UserAvatarEditor-maskInnerText"},"修改我的头像")))),s&&b.a.createElement(P,{resetUpload:this.resetUpload,image:p,uploadImage:c,type:f}))}}]),t}(m.Component),p.propTypes={url:h.a.string,handleShowNotifcation:h.a.func,avatarUpload:h.a.object,updateProfile:h.a.func.isRequired,inEditPage:h.a.bool,round:h.a.bool},p.defaultProps={inEditPage:!0},f);t.a=R},1684:function(e,t,n){"use strict";function r(e,t){return Object(i.DropTarget)(e,u,p)(Object(i.DragSource)(e,s,f)(t))}function o(e){return function(t){return Object(i.DropTarget)(e,u,p)(Object(i.DragSource)(e,s,f)(t))}}t.a=o,n.d(t,"c",function(){return r});var a=n(18),i=(n.n(a),n(1722)),c=(n.n(i),n(1760)),l=n.n(c),s={beginDrag:function(e){return{index:e.index}}},u={hover:function(e,t,n){var r=t.getItem().index,o=e.index;if(r!==o){var i=Object(a.findDOMNode)(n).getBoundingClientRect(),c=i.height/2,l=t.getClientOffset(),s=l.y-i.top;r<o&&s<c||r>o&&s>c||(e.onMoveCard(r,o),t.getItem().index=o)}}},p=function(e){return{connectDropTarget:e.dropTarget()}},f=function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}};t.b=Object(i.DragDropContext)(l.a)},1711:function(e,t){},1712:function(e,t){},1713:function(e,t){},1722:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1518);Object.defineProperty(t,"DragDropContext",{enumerable:!0,get:function(){return r(o).default}});var a=n(1743);Object.defineProperty(t,"DragDropContextProvider",{enumerable:!0,get:function(){return r(a).default}});var i=n(1744);Object.defineProperty(t,"DragLayer",{enumerable:!0,get:function(){return r(i).default}});var c=n(1745);Object.defineProperty(t,"DragSource",{enumerable:!0,get:function(){return r(c).default}});var l=n(1755);Object.defineProperty(t,"DropTarget",{enumerable:!0,get:function(){return r(l).default}})},1723:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1724);Object.defineProperty(t,"DragDropManager",{enumerable:!0,get:function(){return r(o).default}});var a=n(1740);Object.defineProperty(t,"DragSource",{enumerable:!0,get:function(){return r(a).default}});var i=n(1741);Object.defineProperty(t,"DropTarget",{enumerable:!0,get:function(){return r(i).default}});var c=n(1742);Object.defineProperty(t,"createTestBackend",{enumerable:!0,get:function(){return r(c).default}})},1724:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1725),c=r(i),l=n(1729),s=r(l),u=n(1390),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),f=n(1735),d=r(f),h=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e);var r=(0,c.default)(s.default);this.context=n,this.store=r,this.monitor=new d.default(r),this.registry=this.monitor.registry,this.backend=t(this),r.subscribe(this.handleRefCountChange.bind(this))}return a(e,[{key:"handleRefCountChange",value:function(){var e=this.store.getState().refCount>0;e&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!e&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1)}},{key:"getContext",value:function(){return this.context}},{key:"getMonitor",value:function(){return this.monitor}},{key:"getBackend",value:function(){return this.backend}},{key:"getRegistry",value:function(){return this.registry}},{key:"getActions",value:function(){function e(e){return function(){for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var i=e.apply(t,o);void 0!==i&&n(i)}}var t=this,n=this.store.dispatch;return Object.keys(p).filter(function(e){return"function"==typeof p[e]}).reduce(function(t,n){var r=p[n];return t[n]=e(r),t},{})}}]),e}();t.default=h},1725:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){function r(){v===b&&(v=b.slice())}function a(){return m}function c(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return r(),v.push(e),function(){if(t){t=!1,r();var n=v.indexOf(e);v.splice(n,1)}}}function u(e){if(!(0,i.default)(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(y)throw new Error("Reducers may not dispatch actions.");try{y=!0,m=h(m,e)}finally{y=!1}for(var t=b=v,n=0;n<t.length;n++){(0,t[n])()}return e}function p(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");h=e,u({type:s.INIT})}function f(){var e,t=c;return e={subscribe:function(e){function n(){e.next&&e.next(a())}if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");return n(),{unsubscribe:t(n)}}},e[l.default]=function(){return this},e}var d;if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(o)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var h=e,m=t,b=[],v=b,y=!1;return u({type:s.INIT}),d={dispatch:u,subscribe:c,getState:a,replaceReducer:p},d[l.default]=f,d}t.__esModule=!0,t.ActionTypes=void 0,t.default=o;var a=n(266),i=r(a),c=n(1726),l=r(c),s=t.ActionTypes={INIT:"@@redux/INIT"}},1726:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,r){var o,a=n(1728);o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var i=Object(a.a)(o);t.default=i}.call(t,n(9),n(1727)(e))},1727:function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},1728:function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}t.a=r},1729:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return{dirtyHandlerIds:(0,f.default)(e.dirtyHandlerIds,t,e.dragOperation),dragOffset:(0,i.default)(e.dragOffset,t),refCount:(0,u.default)(e.refCount,t),dragOperation:(0,l.default)(e.dragOperation,t),stateId:(0,h.default)(e.stateId)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=n(1519),i=r(a),c=n(1730),l=r(c),s=n(1731),u=r(s),p=n(1523),f=r(p),d=n(1734),h=r(d)},1730:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case c.BEGIN_DRAG:return o({},e,{itemType:t.itemType,item:t.item,sourceId:t.sourceId,isSourcePublic:t.isSourcePublic,dropResult:null,didDrop:!1});case c.PUBLISH_DRAG_SOURCE:return o({},e,{isSourcePublic:!0});case c.HOVER:return o({},e,{targetIds:t.targetIds});case l.REMOVE_TARGET:return-1===e.targetIds.indexOf(t.targetId)?e:o({},e,{targetIds:(0,i.default)(e.targetIds,t.targetId)});case c.DROP:return o({},e,{dropResult:t.dropResult,didDrop:!0,targetIds:[]});case c.END_DRAG:return o({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var a=n(1521),i=function(e){return e&&e.__esModule?e:{default:e}}(a),c=n(1390),l=n(1391),s={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null}},1731:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(arguments[1].type){case o.ADD_SOURCE:case o.ADD_TARGET:return e+1;case o.REMOVE_SOURCE:case o.REMOVE_TARGET:return e-1;default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(1391)},1732:function(e,t,n){var r=n(300),o=n(495),a=n(1733),i=n(502),c=o(function(e){return a(r(e,i))});e.exports=c},1733:function(e,t,n){function r(e,t,n){var r=e.length;if(r<2)return r?i(e[0]):[];for(var c=-1,l=Array(r);++c<r;)for(var s=e[c],u=-1;++u<r;)u!=c&&(l[c]=o(l[c]||s,e[u],t,n));return i(a(l,1),t,n)}var o=n(1522),a=n(516),i=n(189);e.exports=r},1734:function(e,t,n){"use strict";function r(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+1}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},1735:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(517),c=r(i),l=n(24),s=r(l),u=n(1520),p=r(u),f=n(1736),d=r(f),h=n(1519),m=n(1523),b=function(){function e(t){o(this,e),this.store=t,this.registry=new d.default(t)}return a(e,[{key:"subscribeToStateChange",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.handlerIds;(0,c.default)("function"==typeof e,"listener must be a function."),(0,c.default)(void 0===r||(0,s.default)(r),"handlerIds, when specified, must be an array of strings.");var o=this.store.getState().stateId,a=function(){var n=t.store.getState(),a=n.stateId;try{a===o||a===o+1&&!(0,m.areDirty)(n.dirtyHandlerIds,r)||e()}finally{o=a}};return this.store.subscribe(a)}},{key:"subscribeToOffsetChange",value:function(e){var t=this;(0,c.default)("function"==typeof e,"listener must be a function.");var n=this.store.getState().dragOffset,r=function(){var r=t.store.getState().dragOffset;r!==n&&(n=r,e())};return this.store.subscribe(r)}},{key:"canDragSource",value:function(e){var t=this.registry.getSource(e);return(0,c.default)(t,"Expected to find a valid source."),!this.isDragging()&&t.canDrag(this,e)}},{key:"canDropOnTarget",value:function(e){var t=this.registry.getTarget(e);if((0,c.default)(t,"Expected to find a valid target."),!this.isDragging()||this.didDrop())return!1;var n=this.registry.getTargetType(e),r=this.getItemType();return(0,p.default)(n,r)&&t.canDrop(this,e)}},{key:"isDragging",value:function(){return Boolean(this.getItemType())}},{key:"isDraggingSource",value:function(e){var t=this.registry.getSource(e,!0);return(0,c.default)(t,"Expected to find a valid source."),!(!this.isDragging()||!this.isSourcePublic())&&(this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e))}},{key:"isOverTarget",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shallow:!1},n=t.shallow;if(!this.isDragging())return!1;var r=this.registry.getTargetType(e),o=this.getItemType();if(!(0,p.default)(r,o))return!1;var a=this.getTargetIds();if(!a.length)return!1;var i=a.indexOf(e);return n?i===a.length-1:i>-1}},{key:"getItemType",value:function(){return this.store.getState().dragOperation.itemType}},{key:"getItem",value:function(){return this.store.getState().dragOperation.item}},{key:"getSourceId",value:function(){return this.store.getState().dragOperation.sourceId}},{key:"getTargetIds",value:function(){return this.store.getState().dragOperation.targetIds}},{key:"getDropResult",value:function(){return this.store.getState().dragOperation.dropResult}},{key:"didDrop",value:function(){return this.store.getState().dragOperation.didDrop}},{key:"isSourcePublic",value:function(){return this.store.getState().dragOperation.isSourcePublic}},{key:"getInitialClientOffset",value:function(){return this.store.getState().dragOffset.initialClientOffset}},{key:"getInitialSourceClientOffset",value:function(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:"getClientOffset",value:function(){return this.store.getState().dragOffset.clientOffset}},{key:"getSourceClientOffset",value:function(){return(0,h.getSourceClientOffset)(this.store.getState().dragOffset)}},{key:"getDifferenceFromInitialOffset",value:function(){return(0,h.getDifferenceFromInitialOffset)(this.store.getState().dragOffset)}}]),e}();t.default=b},1736:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){(0,d.default)("function"==typeof e.canDrag,"Expected canDrag to be a function."),(0,d.default)("function"==typeof e.beginDrag,"Expected beginDrag to be a function."),(0,d.default)("function"==typeof e.endDrag,"Expected endDrag to be a function.")}function i(e){(0,d.default)("function"==typeof e.canDrop,"Expected canDrop to be a function."),(0,d.default)("function"==typeof e.hover,"Expected hover to be a function."),(0,d.default)("function"==typeof e.drop,"Expected beginDrag to be a function.")}function c(e,t){if(t&&(0,m.default)(e))return void e.forEach(function(e){return c(e,!1)});(0,d.default)("string"==typeof e||"symbol"===(void 0===e?"undefined":p(e)),t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}function l(e){var t=(0,w.default)().toString();switch(e){case E.SOURCE:return"S"+t;case E.TARGET:return"T"+t;default:(0,d.default)(!1,"Unknown role: "+e)}}function s(e){switch(e[0]){case"S":return E.SOURCE;case"T":return E.TARGET;default:(0,d.default)(!1,"Cannot parse handler ID: "+e)}}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=n(517),d=r(f),h=n(24),m=r(h),b=n(1737),v=r(b),y=n(1391),g=n(1739),w=r(g),E={SOURCE:"SOURCE",TARGET:"TARGET"},O=function(){function e(t){o(this,e),this.store=t,this.types={},this.handlers={},this.pinnedSourceId=null,this.pinnedSource=null}return u(e,[{key:"addSource",value:function(e,t){c(e),a(t);var n=this.addHandler(E.SOURCE,e,t);return this.store.dispatch((0,y.addSource)(n)),n}},{key:"addTarget",value:function(e,t){c(e,!0),i(t);var n=this.addHandler(E.TARGET,e,t);return this.store.dispatch((0,y.addTarget)(n)),n}},{key:"addHandler",value:function(e,t,n){var r=l(e);return this.types[r]=t,this.handlers[r]=n,r}},{key:"containsHandler",value:function(e){var t=this;return Object.keys(this.handlers).some(function(n){return t.handlers[n]===e})}},{key:"getSource",value:function(e,t){return(0,d.default)(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.handlers[e]}},{key:"getTarget",value:function(e){return(0,d.default)(this.isTargetId(e),"Expected a valid target ID."),this.handlers[e]}},{key:"getSourceType",value:function(e){return(0,d.default)(this.isSourceId(e),"Expected a valid source ID."),this.types[e]}},{key:"getTargetType",value:function(e){return(0,d.default)(this.isTargetId(e),"Expected a valid target ID."),this.types[e]}},{key:"isSourceId",value:function(e){return s(e)===E.SOURCE}},{key:"isTargetId",value:function(e){return s(e)===E.TARGET}},{key:"removeSource",value:function(e){var t=this;(0,d.default)(this.getSource(e),"Expected an existing source."),this.store.dispatch((0,y.removeSource)(e)),(0,v.default)(function(){delete t.handlers[e],delete t.types[e]})}},{key:"removeTarget",value:function(e){var t=this;(0,d.default)(this.getTarget(e),"Expected an existing target."),this.store.dispatch((0,y.removeTarget)(e)),(0,v.default)(function(){delete t.handlers[e],delete t.types[e]})}},{key:"pinSource",value:function(e){var t=this.getSource(e);(0,d.default)(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}},{key:"unpinSource",value:function(){(0,d.default)(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}}]),e}();t.default=O},1737:function(e,t,n){"use strict";function r(){if(l.length)throw l.shift()}function o(e){var t;t=c.length?c.pop():new a,t.task=e,i(t)}function a(){this.task=null}var i=n(1738),c=[],l=[],s=i.makeRequestCallFromTimer(r);e.exports=o,a.prototype.call=function(){try{this.task.call()}catch(e){o.onerror?o.onerror(e):(l.push(e),s())}finally{this.task=null,c[c.length]=this}}},1738:function(e,t,n){"use strict";(function(t){function n(e){i.length||(a(),c=!0),i[i.length]=e}function r(){for(;l<i.length;){var e=l;if(l+=1,i[e].call(),l>s){for(var t=0,n=i.length-l;t<n;t++)i[t]=i[t+l];i.length-=l,l=0}}i.length=0,l=0,c=!1}function o(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}e.exports=n;var a,i=[],c=!1,l=0,s=1024,u=void 0!==t?t:self,p=u.MutationObserver||u.WebKitMutationObserver;a="function"==typeof p?function(e){var t=1,n=new p(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}(r):o(r),n.requestFlush=a,n.makeRequestCallFromTimer=o}).call(t,n(9))},1739:function(e,t,n){"use strict";function r(){return o++}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=0},1740:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e)}return o(e,[{key:"canDrag",value:function(){return!0}},{key:"isDragging",value:function(e,t){return t===e.getSourceId()}},{key:"endDrag",value:function(){}}]),e}();t.default=a},1741:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e)}return o(e,[{key:"canDrop",value:function(){return!0}},{key:"hover",value:function(){}},{key:"drop",value:function(){}}]),e}();t.default=a},1742:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return new l(e)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=o;var i=n(111),c=function(e){return e&&e.__esModule?e:{default:e}}(i),l=function(){function e(t){r(this,e),this.actions=t.getActions()}return a(e,[{key:"setup",value:function(){this.didCallSetup=!0}},{key:"teardown",value:function(){this.didCallTeardown=!0}},{key:"connectDragSource",value:function(){return c.default}},{key:"connectDragPreview",value:function(){return c.default}},{key:"connectDropTarget",value:function(){return c.default}},{key:"simulateBeginDrag",value:function(e,t){this.actions.beginDrag(e,t)}},{key:"simulatePublishDragSource",value:function(){this.actions.publishDragSource()}},{key:"simulateHover",value:function(e,t){this.actions.hover(e,t)}},{key:"simulateDrop",value:function(){this.actions.drop()}},{key:"simulateEndDrag",value:function(){this.actions.endDrag()}}]),e}()},1743:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,c,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),u=n(1),p=function(e){return e&&e.__esModule?e:{default:e}}(u),f=n(1518),d=(c=i=function(e){function t(e,n){r(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.backend=(0,f.unpackBackendForEs5Users)(e.backend),a.childContext=(0,f.createChildContext)(a.backend,{window:function(){return e&&e.window?e.window:n&&n.window?n.window:"undefined"!=typeof window?window:void 0}()}),a}return a(t,e),l(t,[{key:"componentWillReceiveProps",value:function(e){if(e.backend!==this.props.backend||e.window!==this.props.window)throw new Error("DragDropContextProvider backend and window props must not change.")}},{key:"getChildContext",value:function(){return this.childContext}},{key:"render",value:function(){return s.Children.only(this.props.children)}}]),t}(s.Component),i.propTypes={backend:p.default.oneOfType([p.default.func,p.default.object]).isRequired,children:p.default.element.isRequired,window:p.default.object},i.defaultProps={window:void 0},i.childContextTypes=f.CHILD_CONTEXT_TYPES,i.displayName="DragDropContextProvider",i.contextTypes={window:p.default.object},c);t.default=d},1744:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return T.default.apply(void 0,["DragLayer","collect[, options]"].concat(Array.prototype.slice.call(arguments))),(0,w.default)("function"==typeof e,'Expected "collect" provided as the first argument to DragLayer to be a function that collects props to inject into the component. ',"Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-layer.html",e),(0,w.default)((0,y.default)(t),'Expected "options" provided as the second argument to DragLayer to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-layer.html',t),function(n){var r,c,d=t.arePropsEqual,m=void 0===d?_.default:d,v=n.displayName||n.name||"Component",y=(c=r=function(t){function r(e,t){o(this,r);var n=a(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return n.handleChange=n.handleChange.bind(n),n.manager=t.dragDropManager,(0,w.default)("object"===s(n.manager),"Could not find the drag and drop manager in the context of %s. Make sure to wrap the top-level component of your app with DragDropContext. Read more: http://react-dnd.github.io/react-dnd/docs-troubleshooting.html#could-not-find-the-drag-and-drop-manager-in-the-context",v,v),n.state=n.getCurrentState(),n}return i(r,t),u(r,[{key:"getDecoratedComponentInstance",value:function(){return(0,w.default)(this.child,"In order to access an instance of the decorated component it can not be a stateless component."),this.child}},{key:"shouldComponentUpdate",value:function(e,t){return!m(e,this.props)||!(0,O.default)(t,this.state)}}]),u(r,[{key:"componentDidMount",value:function(){this.isCurrentlyMounted=!0;var e=this.manager.getMonitor();this.unsubscribeFromOffsetChange=e.subscribeToOffsetChange(this.handleChange),this.unsubscribeFromStateChange=e.subscribeToStateChange(this.handleChange),this.handleChange()}},{key:"componentWillUnmount",value:function(){this.isCurrentlyMounted=!1,this.unsubscribeFromOffsetChange(),this.unsubscribeFromStateChange()}},{key:"handleChange",value:function(){if(this.isCurrentlyMounted){var e=this.getCurrentState();(0,O.default)(e,this.state)||this.setState(e)}}},{key:"getCurrentState",value:function(){var t=this.manager.getMonitor();return e(t,this.props)}},{key:"render",value:function(){var e=this;return f.default.createElement(n,l({},this.props,this.state,{ref:function(t){e.child=t}}))}}]),r}(p.Component),r.DecoratedComponent=n,r.displayName="DragLayer("+v+")",r.contextTypes={dragDropManager:h.default.object.isRequired},c);return(0,b.default)(y,n)}}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=c;var p=n(0),f=r(p),d=n(1),h=r(d),m=n(1472),b=r(m),v=n(266),y=r(v),g=n(1290),w=r(g),E=n(1473),O=r(E),C=n(1527),_=r(C),k=n(1392),T=r(k)},1745:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};u.default.apply(void 0,["DragSource","type, spec, collect[, options]"].concat(Array.prototype.slice.call(arguments)));var o=e;"function"!=typeof e&&((0,i.default)((0,O.default)(e),'Expected "type" provided as the first argument to DragSource to be a string, or a function that returns a string given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html',e),o=function(){return e}),(0,i.default)((0,l.default)(t),'Expected "spec" provided as the second argument to DragSource to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html',t);var a=(0,b.default)(t);return(0,i.default)("function"==typeof n,'Expected "collect" provided as the third argument to DragSource to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html',n),(0,i.default)((0,l.default)(r),'Expected "options" provided as the fourth argument to DragSource to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html',n),function(e){return(0,f.default)({connectBackend:function(e,t){return e.connectDragSource(t)},containerDisplayName:"DragSource",createHandler:a,registerHandler:h.default,createMonitor:y.default,createConnector:w.default,DecoratedComponent:e,getType:o,collect:n,options:r})}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=n(1290),i=r(a),c=n(266),l=r(c),s=n(1392),u=r(s),p=n(1528),f=r(p),d=n(1750),h=r(d),m=n(1751),b=r(m),v=n(1752),y=r(v),g=n(1753),w=r(g),E=n(1531),O=r(E)},1746:function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var o=n(1474),a=r(o);t.isDisposable=a.default;var i=n(1747),c=r(i);t.Disposable=c.default;var l=n(1748),s=r(l);t.CompositeDisposable=s.default;var u=n(1749),p=r(u);t.SerialDisposable=p.default},1747:function(e,t,n){"use strict";var r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.__esModule=!0;var a=function(){},i=function(){function e(t){r(this,e),this.isDisposed=!1,this.action=t||a}return e.prototype.dispose=function(){this.isDisposed||(this.action.call(null),this.isDisposed=!0)},o(e,null,[{key:"empty",enumerable:!0,value:{dispose:a}}]),e}();t.default=i,e.exports=t.default},1748:function(e,t,n){"use strict";var r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};t.__esModule=!0;var o=n(1474),a=function(e){return e&&e.__esModule?e:{default:e}}(o),i=function(){function e(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];r(this,e),Array.isArray(n[0])&&1===n.length&&(n=n[0]);for(var i=0;i<n.length;i++)if(!a.default(n[i]))throw new Error("Expected a disposable");this.disposables=n,this.isDisposed=!1}return e.prototype.add=function(e){this.isDisposed?e.dispose():this.disposables.push(e)},e.prototype.remove=function(e){if(this.isDisposed)return!1;var t=this.disposables.indexOf(e);return-1!==t&&(this.disposables.splice(t,1),e.dispose(),!0)},e.prototype.dispose=function(){if(!this.isDisposed){for(var e=this.disposables.length,t=new Array(e),n=0;n<e;n++)t[n]=this.disposables[n];this.isDisposed=!0,this.disposables=[],this.length=0;for(var n=0;n<e;n++)t[n].dispose()}},e}();t.default=i,e.exports=t.default},1749:function(e,t,n){"use strict";var r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};t.__esModule=!0;var o=n(1474),a=function(e){return e&&e.__esModule?e:{default:e}}(o),i=function(){function e(){r(this,e),this.isDisposed=!1,this.current=null}return e.prototype.getDisposable=function(){return this.current},e.prototype.setDisposable=function(){var e=void 0===arguments[0]?null:arguments[0];if(null!=e&&!a.default(e))throw new Error("Expected either an empty value or a valid disposable");var t=this.isDisposed,n=void 0;t||(n=this.current,this.current=e),n&&n.dispose(),t&&e&&e.dispose()},e.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var e=this.current;this.current=null,e&&e.dispose()}},e}();t.default=i,e.exports=t.default},1750:function(e,t,n){"use strict";function r(e,t,n){function r(){o.removeSource(a)}var o=n.getRegistry(),a=o.addSource(e,t);return{handlerId:a,unregister:r}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},1751:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){Object.keys(e).forEach(function(t){(0,l.default)(u.indexOf(t)>-1,'Expected the drag source specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html',u.join(", "),t),(0,l.default)("function"==typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html",t,t,e[t])}),p.forEach(function(t){(0,l.default)("function"==typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source.html",t,t,e[t])});var t=function(){function t(e){o(this,t),this.monitor=e,this.props=null,this.component=null}return i(t,[{key:"receiveProps",value:function(e){this.props=e}},{key:"receiveComponent",value:function(e){this.component=e}},{key:"canDrag",value:function(){return!e.canDrag||e.canDrag(this.props,this.monitor)}},{key:"isDragging",value:function(t,n){return e.isDragging?e.isDragging(this.props,this.monitor):n===t.getSourceId()}},{key:"beginDrag",value:function(){var t=e.beginDrag(this.props,this.monitor,this.component);return t}},{key:"endDrag",value:function(){e.endDrag&&e.endDrag(this.props,this.monitor,this.component)}}]),t}();return function(e){return new t(e)}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=a;var c=n(1290),l=r(c),s=n(266),u=(r(s),["canDrag","beginDrag","isDragging","endDrag"]),p=["beginDrag"]},1752:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return new u(e)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=o;var i=n(1290),c=function(e){return e&&e.__esModule?e:{default:e}}(i),l=!1,s=!1,u=function(){function e(t){r(this,e),this.internalMonitor=t.getMonitor()}return a(e,[{key:"receiveHandlerId",value:function(e){this.sourceId=e}},{key:"canDrag",value:function(){(0,c.default)(!l,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source-monitor.html");try{return l=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{l=!1}}},{key:"isDragging",value:function(){(0,c.default)(!s,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs-drag-source-monitor.html");try{return s=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{s=!1}}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),e}()},1753:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){function t(){s&&(s(),s=null),o&&a&&(s=e.connectDragSource(o,a,c))}function n(){f&&(f(),f=null),o&&u&&(f=e.connectDragPreview(o,u,p))}function r(e){e!==o&&(o=e,t(),n())}var o=void 0,a=void 0,c=void 0,s=void 0,u=void 0,p=void 0,f=void 0;return{receiveHandlerId:r,hooks:(0,i.default)({dragSource:function(e,n){e===a&&(0,l.default)(n,c)||(a=e,c=n,t())},dragPreview:function(e,t){e===u&&(0,l.default)(t,p)||(u=e,p=t,n())}})}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=n(1529),i=r(a),c=n(1530),l=r(c)},1754:function(e,t,n){"use strict";function r(e,t){var n=e.ref;return(0,a.default)("string"!=typeof n,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://facebook.github.io/react/docs/more-about-refs.html#the-ref-callback-attribute"),n?(0,i.cloneElement)(e,{ref:function(e){t(e),n&&n(e)}}):(0,i.cloneElement)(e,{ref:t})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(1290),a=function(e){return e&&e.__esModule?e:{default:e}}(o),i=n(0)},1755:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};u.default.apply(void 0,["DropTarget","type, spec, collect[, options]"].concat(Array.prototype.slice.call(arguments)));var o=e;"function"!=typeof e&&((0,i.default)((0,O.default)(e,!0),'Expected "type" provided as the first argument to DropTarget to be a string, an array of strings, or a function that returns either given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target.html',e),o=function(){return e}),(0,i.default)((0,l.default)(t),'Expected "spec" provided as the second argument to DropTarget to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target.html',t);var a=(0,b.default)(t);return(0,i.default)("function"==typeof n,'Expected "collect" provided as the third argument to DropTarget to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target.html',n),(0,i.default)((0,l.default)(r),'Expected "options" provided as the fourth argument to DropTarget to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target.html',n),function(e){return(0,f.default)({connectBackend:function(e,t){return e.connectDropTarget(t)},containerDisplayName:"DropTarget",createHandler:a,registerHandler:h.default,createMonitor:y.default,createConnector:w.default,DecoratedComponent:e,getType:o,collect:n,options:r})}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=n(1290),i=r(a),c=n(266),l=r(c),s=n(1392),u=r(s),p=n(1528),f=r(p),d=n(1756),h=r(d),m=n(1757),b=r(m),v=n(1758),y=r(v),g=n(1759),w=r(g),E=n(1531),O=r(E)},1756:function(e,t,n){"use strict";function r(e,t,n){function r(){o.removeTarget(a)}var o=n.getRegistry(),a=o.addTarget(e,t);return{handlerId:a,unregister:r}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},1757:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){Object.keys(e).forEach(function(t){(0,l.default)(u.indexOf(t)>-1,'Expected the drop target specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target.html',u.join(", "),t),(0,l.default)("function"==typeof e[t],"Expected %s in the drop target specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target.html",t,t,e[t])});var t=function(){function t(e){o(this,t),this.monitor=e,this.props=null,this.component=null}return i(t,[{key:"receiveProps",value:function(e){this.props=e}},{key:"receiveMonitor",value:function(e){this.monitor=e}},{key:"receiveComponent",value:function(e){this.component=e}},{key:"canDrop",value:function(){return!e.canDrop||e.canDrop(this.props,this.monitor)}},{key:"hover",value:function(){e.hover&&e.hover(this.props,this.monitor,this.component)}},{key:"drop",value:function(){if(e.drop){var t=e.drop(this.props,this.monitor,this.component);return t}}}]),t}();return function(e){return new t(e)}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=a;var c=n(1290),l=r(c),s=n(266),u=(r(s),["canDrop","hover","drop"])},1758:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return new s(e)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=o;var i=n(1290),c=function(e){return e&&e.__esModule?e:{default:e}}(i),l=!1,s=function(){function e(t){r(this,e),this.internalMonitor=t.getMonitor()}return a(e,[{key:"receiveHandlerId",value:function(e){this.targetId=e}},{key:"canDrop",value:function(){(0,c.default)(!l,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs-drop-target-monitor.html");try{return l=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{l=!1}}},{key:"isOver",value:function(e){return this.internalMonitor.isOverTarget(this.targetId,e)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),e}()},1759:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){function t(){c&&(c(),c=null),r&&o&&(c=e.connectDropTarget(r,o,a))}function n(e){e!==r&&(r=e,t())}var r=void 0,o=void 0,a=void 0,c=void 0;return{receiveHandlerId:n,hooks:(0,i.default)({dropTarget:function(e,n){e===o&&(0,l.default)(n,a)||(o=e,a=n,t())}})}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=n(1529),i=r(a),c=n(1530),l=r(c)},1760:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return new i.default(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyImage=t.NativeTypes=void 0,t.default=o;var a=n(1761),i=r(a),c=n(1769),l=r(c),s=n(1475),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s);t.NativeTypes=u,t.getEmptyImage=l.default},1761:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1762),c=r(i),l=n(1763),s=r(l),u=n(1764),p=r(u),f=n(1532),d=n(1766),h=n(1768),m=n(1475),b=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(m),v=function(){function e(t){o(this,e),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.context=t.getContext(),this.sourcePreviewNodes={},this.sourcePreviewNodeOptions={},this.sourceNodes={},this.sourceNodeOptions={},this.enterLeaveCounter=new p.default,this.dragStartSourceIds=[],this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.currentDragSourceNodeOffset=null,this.currentDragSourceNodeOffsetChanged=!1,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.getSourceClientOffset=this.getSourceClientOffset.bind(this),this.handleTopDragStart=this.handleTopDragStart.bind(this),this.handleTopDragStartCapture=this.handleTopDragStartCapture.bind(this),this.handleTopDragEndCapture=this.handleTopDragEndCapture.bind(this),this.handleTopDragEnter=this.handleTopDragEnter.bind(this),this.handleTopDragEnterCapture=this.handleTopDragEnterCapture.bind(this),this.handleTopDragLeaveCapture=this.handleTopDragLeaveCapture.bind(this),this.handleTopDragOver=this.handleTopDragOver.bind(this),this.handleTopDragOverCapture=this.handleTopDragOverCapture.bind(this),this.handleTopDrop=this.handleTopDrop.bind(this),this.handleTopDropCapture=this.handleTopDropCapture.bind(this),this.handleSelectStart=this.handleSelectStart.bind(this),this.endDragIfSourceWasRemovedFromDOM=this.endDragIfSourceWasRemovedFromDOM.bind(this),this.endDragNativeItem=this.endDragNativeItem.bind(this),this.asyncEndDragNativeItem=this.asyncEndDragNativeItem.bind(this),this.isNodeInDocument=this.isNodeInDocument.bind(this)}return a(e,[{key:"setup",value:function(){if(void 0!==this.window){if(this.window.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");this.window.__isReactDndBackendSetUp=!0,this.addEventListeners(this.window)}}},{key:"teardown",value:function(){void 0!==this.window&&(this.window.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.window),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&this.window.cancelAnimationFrame(this.asyncEndDragFrameId))}},{key:"addEventListeners",value:function(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}},{key:"removeEventListeners",value:function(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}},{key:"connectDragPreview",value:function(e,t,n){var r=this;return this.sourcePreviewNodeOptions[e]=n,this.sourcePreviewNodes[e]=t,function(){delete r.sourcePreviewNodes[e],delete r.sourcePreviewNodeOptions[e]}}},{key:"connectDragSource",value:function(e,t,n){var r=this;this.sourceNodes[e]=t,this.sourceNodeOptions[e]=n;var o=function(t){return r.handleDragStart(t,e)},a=function(t){return r.handleSelectStart(t,e)};return t.setAttribute("draggable",!0),t.addEventListener("dragstart",o),t.addEventListener("selectstart",a),function(){delete r.sourceNodes[e],delete r.sourceNodeOptions[e],t.removeEventListener("dragstart",o),t.removeEventListener("selectstart",a),t.setAttribute("draggable",!1)}}},{key:"connectDropTarget",value:function(e,t){var n=this,r=function(t){return n.handleDragEnter(t,e)},o=function(t){return n.handleDragOver(t,e)},a=function(t){return n.handleDrop(t,e)};return t.addEventListener("dragenter",r),t.addEventListener("dragover",o),t.addEventListener("drop",a),function(){t.removeEventListener("dragenter",r),t.removeEventListener("dragover",o),t.removeEventListener("drop",a)}}},{key:"getCurrentSourceNodeOptions",value:function(){var e=this.monitor.getSourceId(),t=this.sourceNodeOptions[e];return(0,c.default)(t||{},{dropEffect:this.altKeyPressed?"copy":"move"})}},{key:"getCurrentDropEffect",value:function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}},{key:"getCurrentSourcePreviewNodeOptions",value:function(){var e=this.monitor.getSourceId(),t=this.sourcePreviewNodeOptions[e];return(0,c.default)(t||{},{anchorX:.5,anchorY:.5,captureDraggingState:!1})}},{key:"getSourceClientOffset",value:function(e){return(0,d.getNodeClientOffset)(this.sourceNodes[e])}},{key:"isDraggingNativeItem",value:function(){var e=this.monitor.getItemType();return Object.keys(b).some(function(t){return b[t]===e})}},{key:"beginDragNativeItem",value:function(e){this.clearCurrentDragSourceNode();var t=(0,h.createNativeDragSource)(e);this.currentNativeSource=new t,this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}},{key:"asyncEndDragNativeItem",value:function(){this.asyncEndDragFrameId=this.window.requestAnimationFrame(this.endDragNativeItem)}},{key:"endDragNativeItem",value:function(){this.isDraggingNativeItem()&&(this.actions.endDrag(),this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)}},{key:"isNodeInDocument",value:function(e){return!(!document.body.contains(e)&&!this.window)&&this.window.document.body.contains(e)}},{key:"endDragIfSourceWasRemovedFromDOM",value:function(){var e=this.currentDragSourceNode;this.isNodeInDocument(e)||this.clearCurrentDragSourceNode()&&this.actions.endDrag()}},{key:"setCurrentDragSourceNode",value:function(e){var t=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e,this.currentDragSourceNodeOffset=(0,d.getNodeClientOffset)(e),this.currentDragSourceNodeOffsetChanged=!1;this.mouseMoveTimeoutTimer=setTimeout(function(){return t.mouseMoveTimeoutId=null,t.window.addEventListener("mousemove",t.endDragIfSourceWasRemovedFromDOM,!0)},1e3)}},{key:"clearCurrentDragSourceNode",value:function(){return!!this.currentDragSourceNode&&(this.currentDragSourceNode=null,this.currentDragSourceNodeOffset=null,this.currentDragSourceNodeOffsetChanged=!1,this.window.clearTimeout(this.mouseMoveTimeoutTimer),this.window.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0),this.mouseMoveTimeoutTimer=null,!0)}},{key:"checkIfCurrentDragSourceRectChanged",value:function(){var e=this.currentDragSourceNode;return!!e&&(!!this.currentDragSourceNodeOffsetChanged||(this.currentDragSourceNodeOffsetChanged=!(0,s.default)((0,d.getNodeClientOffset)(e),this.currentDragSourceNodeOffset),this.currentDragSourceNodeOffsetChanged))}},{key:"handleTopDragStartCapture",value:function(){this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]}},{key:"handleDragStart",value:function(e,t){this.dragStartSourceIds.unshift(t)}},{key:"handleTopDragStart",value:function(e){var t=this,n=this.dragStartSourceIds;this.dragStartSourceIds=null;var r=(0,d.getEventClientOffset)(e);this.monitor.isDragging()&&this.actions.endDrag(),this.actions.beginDrag(n,{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:r});var o=e.dataTransfer,a=(0,h.matchNativeItemType)(o);if(this.monitor.isDragging()){if("function"==typeof o.setDragImage){var i=this.monitor.getSourceId(),c=this.sourceNodes[i],l=this.sourcePreviewNodes[i]||c,s=this.getCurrentSourcePreviewNodeOptions(),u=s.anchorX,p=s.anchorY,f=s.offsetX,m=s.offsetY,b={anchorX:u,anchorY:p},v={offsetX:f,offsetY:m},y=(0,d.getDragPreviewOffset)(c,l,r,b,v);o.setDragImage(l,y.x,y.y)}try{o.setData("application/json",{})}catch(e){}this.setCurrentDragSourceNode(e.target);this.getCurrentSourcePreviewNodeOptions().captureDraggingState?this.actions.publishDragSource():setTimeout(function(){return t.actions.publishDragSource()})}else if(a)this.beginDragNativeItem(a);else{if(!(o.types||e.target.hasAttribute&&e.target.hasAttribute("draggable")))return;e.preventDefault()}}},{key:"handleTopDragEndCapture",value:function(){this.clearCurrentDragSourceNode()&&this.actions.endDrag()}},{key:"handleTopDragEnterCapture",value:function(e){if(this.dragEnterTargetIds=[],this.enterLeaveCounter.enter(e.target)&&!this.monitor.isDragging()){var t=e.dataTransfer,n=(0,h.matchNativeItemType)(t);n&&this.beginDragNativeItem(n)}}},{key:"handleDragEnter",value:function(e,t){this.dragEnterTargetIds.unshift(t)}},{key:"handleTopDragEnter",value:function(e){var t=this,n=this.dragEnterTargetIds;if(this.dragEnterTargetIds=[],this.monitor.isDragging()){this.altKeyPressed=e.altKey,(0,f.isFirefox)()||this.actions.hover(n,{clientOffset:(0,d.getEventClientOffset)(e)});n.some(function(e){return t.monitor.canDropOnTarget(e)})&&(e.preventDefault(),e.dataTransfer.dropEffect=this.getCurrentDropEffect())}}},{key:"handleTopDragOverCapture",value:function(){this.dragOverTargetIds=[]}},{key:"handleDragOver",value:function(e,t){this.dragOverTargetIds.unshift(t)}},{key:"handleTopDragOver",value:function(e){var t=this,n=this.dragOverTargetIds;if(this.dragOverTargetIds=[],!this.monitor.isDragging())return e.preventDefault(),void(e.dataTransfer.dropEffect="none");this.altKeyPressed=e.altKey,this.actions.hover(n,{clientOffset:(0,d.getEventClientOffset)(e)}),n.some(function(e){return t.monitor.canDropOnTarget(e)})?(e.preventDefault(),e.dataTransfer.dropEffect=this.getCurrentDropEffect()):this.isDraggingNativeItem()?(e.preventDefault(),e.dataTransfer.dropEffect="none"):this.checkIfCurrentDragSourceRectChanged()&&(e.preventDefault(),e.dataTransfer.dropEffect="move")}},{key:"handleTopDragLeaveCapture",value:function(e){this.isDraggingNativeItem()&&e.preventDefault(),this.enterLeaveCounter.leave(e.target)&&this.isDraggingNativeItem()&&this.endDragNativeItem()}},{key:"handleTopDropCapture",value:function(e){this.dropTargetIds=[],e.preventDefault(),this.isDraggingNativeItem()&&this.currentNativeSource.mutateItemByReadingDataTransfer(e.dataTransfer),this.enterLeaveCounter.reset()}},{key:"handleDrop",value:function(e,t){this.dropTargetIds.unshift(t)}},{key:"handleTopDrop",value:function(e){var t=this.dropTargetIds;this.dropTargetIds=[],this.actions.hover(t,{clientOffset:(0,d.getEventClientOffset)(e)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.endDragIfSourceWasRemovedFromDOM()}},{key:"handleSelectStart",value:function(e){var t=e.target;"function"==typeof t.dragDrop&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),t.dragDrop()))}},{key:"window",get:function(){return this.context&&this.context.window?this.context.window:"undefined"!=typeof window?window:void 0}}]),e}();t.default=v},1762:function(e,t,n){var r=n(495),o=n(84),a=n(284),i=n(116),c=Object.prototype,l=c.hasOwnProperty,s=r(function(e,t){e=Object(e);var n=-1,r=t.length,s=r>2?t[2]:void 0;for(s&&a(t[0],t[1],s)&&(r=1);++n<r;)for(var u=t[n],p=i(u),f=-1,d=p.length;++f<d;){var h=p[f],m=e[h];(void 0===m||o(m,c[h])&&!l.call(e,h))&&(e[h]=u[h])}return e});e.exports=s},1763:function(e,t,n){"use strict";function r(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=Object.prototype.hasOwnProperty,a=0;a<n.length;a+=1){if(!o.call(t,n[a])||e[n[a]]!==t[n[a]])return!1;if(e[n[a]]!==t[n[a]])return!1}return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},1764:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1765),c=r(i),l=n(1521),s=r(l),u=function(){function e(){o(this,e),this.entered=[]}return a(e,[{key:"enter",value:function(e){var t=this.entered.length,n=function(t){return document.documentElement.contains(t)&&(!t.contains||t.contains(e))};return this.entered=(0,c.default)(this.entered.filter(n),[e]),0===t&&this.entered.length>0}},{key:"leave",value:function(e){var t=this.entered.length;return this.entered=(0,s.default)(this.entered.filter(function(e){return document.documentElement.contains(e)}),e),t>0&&0===this.entered.length}},{key:"reset",value:function(){this.entered=[]}}]),e}();t.default=u},1765:function(e,t,n){var r=n(516),o=n(495),a=n(189),i=n(502),c=o(function(e){return a(r(e,1,i,!0))});e.exports=c},1766:function(e,t,n){"use strict";function r(e){var t=e.nodeType===p?e:e.parentElement;if(!t)return null;var n=t.getBoundingClientRect(),r=n.top;return{x:n.left,y:r}}function o(e){return{x:e.clientX,y:e.clientY}}function a(e){return"IMG"===e.nodeName&&((0,l.isFirefox)()||!document.documentElement.contains(e))}function i(e,t,n,r){var o=e?t.width:n,a=e?t.height:r;return(0,l.isSafari)()&&e&&(a/=window.devicePixelRatio,o/=window.devicePixelRatio),{dragPreviewWidth:o,dragPreviewHeight:a}}function c(e,t,n,o,c){var s=a(t),p=s?e:t,f=r(p),d={x:n.x-f.x,y:n.y-f.y},h=e.offsetWidth,m=e.offsetHeight,b=o.anchorX,v=o.anchorY,y=i(s,t,h,m),g=y.dragPreviewWidth,w=y.dragPreviewHeight,E=c.offsetX,O=c.offsetY,C=0===E||E,_=0===O||O;return{x:C?E:function(){return new u.default([0,.5,1],[d.x,d.x/h*g,d.x+g-h]).interpolate(b)}(),y:_?O:function(){var e=new u.default([0,.5,1],[d.y,d.y/m*w,d.y+w-m]),t=e.interpolate(v);return(0,l.isSafari)()&&s&&(t+=(window.devicePixelRatio-1)*w),t}()}}Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeClientOffset=r,t.getEventClientOffset=o,t.getDragPreviewOffset=c;var l=n(1532),s=n(1767),u=function(e){return e&&e.__esModule?e:{default:e}}(s),p=1},1767:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n){r(this,e);for(var o=t.length,a=[],i=0;i<o;i++)a.push(i);a.sort(function(e,n){return t[e]<t[n]?-1:1});for(var c=[],l=[],s=[],u=void 0,p=void 0,f=0;f<o-1;f++)u=t[f+1]-t[f],p=n[f+1]-n[f],l.push(u),c.push(p),s.push(p/u);for(var d=[s[0]],h=0;h<l.length-1;h++){var m=s[h],b=s[h+1];if(m*b<=0)d.push(0);else{u=l[h];var v=l[h+1],y=u+v;d.push(3*y/((y+v)/m+(y+u)/b))}}d.push(s[s.length-1]);for(var g=[],w=[],E=void 0,O=0;O<d.length-1;O++){E=s[O];var C=d[O],_=1/l[O],k=C+d[O+1]-E-E;g.push((E-C-k)*_),w.push(k*_*_)}this.xs=t,this.ys=n,this.c1s=d,this.c2s=g,this.c3s=w}return o(e,[{key:"interpolate",value:function(e){var t=this.xs,n=this.ys,r=this.c1s,o=this.c2s,a=this.c3s,i=t.length-1;if(e===t[i])return n[i];for(var c=0,l=a.length-1,s=void 0;c<=l;){s=Math.floor(.5*(c+l));var u=t[s];if(u<e)c=s+1;else{if(!(u>e))return n[s];l=s-1}}i=Math.max(0,l);var p=e-t[i],f=p*p;return n[i]+r[i]*p+o[i]*f+a[i]*p*f}}]),e}();t.default=a},1768:function(e,t,n){"use strict";function r(e,t){for(var n in t){var r=t[n];r.configurable=r.enumerable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n,r)}return e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t,n){var r=t.reduce(function(t,n){return t||e.getData(n)},null);return null!=r?r:n}function c(e){var t=d[e],n=t.exposeProperty,a=t.matchesTypes,i=t.getData;return function(){function e(){var t,a;o(this,e),this.item=(t={},a={},a[n]=a[n]||{},a[n].get=function(){return console.warn("Browser doesn't allow reading \""+n+'" until the drop event.'),null},r(t,a),t)}return u(e,[{key:"mutateItemByReadingDataTransfer",value:function(e){delete this.item[n],this.item[n]=i(e,a)}},{key:"canDrag",value:function(){return!0}},{key:"beginDrag",value:function(){return this.item}},{key:"isDragging",value:function(e,t){return t===e.getSourceId()}},{key:"endDrag",value:function(){}}]),e}()}function l(e){var t=Array.prototype.slice.call(e.types||[]);return Object.keys(d).filter(function(e){return d[e].matchesTypes.some(function(e){return t.indexOf(e)>-1})})[0]||null}Object.defineProperty(t,"__esModule",{value:!0});var s,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.createNativeDragSource=c,t.matchNativeItemType=l;var p=n(1475),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(p),d=(s={},a(s,f.FILE,{exposeProperty:"files",matchesTypes:["Files"],getData:function(e){return Array.prototype.slice.call(e.files)}}),a(s,f.URL,{exposeProperty:"urls",matchesTypes:["Url","text/uri-list"],getData:function(e,t){return i(e,t,"").split("\n")}}),a(s,f.TEXT,{exposeProperty:"text",matchesTypes:["Text","text/plain"],getData:function(e,t){return i(e,t,"")}}),s)},1769:function(e,t,n){"use strict";function r(){return o||(o=new Image,o.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),o}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=void 0},1796:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e,t){switch(e){case"answer":return"https://www.zhihu.com/answer/"+t;case"book":return"https//www.zhihu.com/pub/book/"+t;case"article":return"https://zhuanlan.zhihu.com/p/"+t;case"live":return"https://www.zhihu.com/lives/"+t;case"remix_album":case"remix":return"https://www.zhihu.com/remix/albums/"+t;default:return""}}},1797:function(e,t){},1798:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m,b,v,y,g=n(0),w=n.n(g),E=n(1),O=n.n(E),C=n(2),_=n.n(C),k=n(8),T="TopicVoteCheckbox",j=(n(1799),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),S=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),P=[0,1,2,3,4,5,6,7].map(function(e){return w.a.createElement("div",{className:T+"-Sparkle",key:e})}),x=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),S(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.onChange,r=e.checked,o=e.onClick,a=e.tooltipPosition;return w.a.createElement("div",j({className:_()(T,T+"--recommend",t),"data-tooltip":"推荐"},a&&{"data-tooltip-position":a}),w.a.createElement("input",{id:"topic-recommend",type:"checkbox",checked:r,onChange:n,onClick:o}),w.a.createElement("label",{htmlFor:"topic-recommend"},w.a.createElement(k._30,{size:19}),P))}}]),t}(g.Component),N=(n(1800),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),R=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),I=function(e){function t(){return i(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),R(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.onChange,r=e.checked,o=e.onClick,a=e.tooltipPosition;return w.a.createElement("div",N({className:_()(T,T+"--against",t),"data-tooltip":"不推荐"},a&&{"data-tooltip-position":a}),w.a.createElement("input",{id:"topic-against",type:"checkbox",checked:r,onChange:n,onClick:o}),w.a.createElement("label",{htmlFor:"topic-against"},w.a.createElement(k._30,{size:19})))}}]),t}(g.Component),D=(n(1801),{Recommend:x,Against:I}),A=(n(1802),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),M=function(e){return e.stopPropagation()},L=(b=m=function(e){function t(){return s(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),A(t,[{key:"render",value:function(){var e=this.props,t=e.noAnimation,n=e.status,r=e.onVoteChange,o=e.tooltipPosition;return w.a.createElement("span",{className:"VotableTopicCard",onClick:M},w.a.createElement("span",{className:_()("VotableTopicCard-RecommendStatus",{"VotableTopicCard-VoteActions--noAnimation":t})},w.a.createElement(D.Recommend,{className:"VotableTopicCard-VoteCheckbox",checked:"like"===n,onChange:function(e){r(e,"recommend")},tooltipPosition:o}),w.a.createElement(D.Against,{className:"VotableTopicCard-VoteCheckbox",checked:"dislike"===n,onChange:function(e){r(e,"unrecommend")},tooltipPosition:o})))}}]),t}(g.Component),m.propTypes={noAnimation:O.a.bool.isRequired,status:O.a.oneOf(["like","dislike","none"]).isRequired,noBorder:O.a.bool.isRequired,onVoteChange:O.a.func.isRequired,tooltipPosition:O.a.string},b),U=L,B=n(6),F=n(260),V=n(10),z=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),q={Upvote:"Upvote",UnUpvote:"UnUpvote",Downvote:"Downvote",UnDownvote:"UnDownvote"},H=function(e){return e>1e4?Object(F.b)(e):Object(F.a)(e)},W=(y=v=function(e){function t(){var e,n,r,o;f(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={noAnimation:!!r.props.metaInfo.vote&&"none"!==r.props.metaInfo.vote.status},r.handleVoteChange=r.context.authRequired(function(e,t){var n=r.props,o=n.metaInfo.vote.status,a=n.onUpdateVoteTopic;r.state.noAnimation&&r.setState({noAnimation:!1});var i={actionType:"",voteFor:"",method:""};"recommend"===t?"like"===o?(i.actionType=q.UnUpvote,i.voteFor="like",i.method="DELETE"):(i.actionType=q.Upvote,i.voteFor="like",i.method="POST"):"dislike"===o?(i.actionType=q.UnDownvote,i.voteFor="dislike",i.method="DELETE"):(i.actionType=q.Downvote,i.voteFor="dislike",i.method="POST"),i.actionType&&(B.default.trackEvent(e.target,{action:i.actionType,id:4176}),a(i))},V.L.vote),o=n,d(r,o)}return h(t,e),z(t,[{key:"renderVotableTopicCard",value:function(){var e=this.state.noAnimation,t=this.props,n=t.tooltipPosition,r=t.metaInfo;r=void 0===r?{}:r;var o=r.vote;o=void 0===o?{}:o;var a=o.status;return w.a.createElement(U,{noBorder:!0,status:a,noAnimation:e,onVoteChange:this.handleVoteChange,tooltipPosition:n})}},{key:"renderReviewCardExtraInfo",value:function(){var e=this.props,t=e.metaInfo,n=t.vote,r=t.meta.title,o=e.ReviewCardExtraInfoComponent,a=e.reviewerCountFormatter;if(!o)return null;var i=n.likeNum,c=n.dislikeNum,l=n.ratio,s=n.ratioStatus,u=n.status,p=(100*l).toFixed(0),f=a(i+c),d=void 0;return d="none"===u?"你推荐么？":"like"===u?"已推荐":"不推荐",w.a.createElement(o,{reviewerCount:f,insufficientText:d,percent:p,ratioStatus:s,title:r})}},{key:"render",value:function(){return w.a.createElement(g.Fragment,null,this.renderReviewCardExtraInfo(),this.props.children,this.renderVotableTopicCard())}}]),t}(g.Component),v.propTypes={onUpdateVoteTopic:O.a.func.isRequired,metaInfo:O.a.shape({meta:O.a.object.isRequired,vote:O.a.shape({status:O.a.oneOf(["none","dislike","like"]).isRequired})}),ReviewCardExtraInfoComponent:O.a.oneOfType([O.a.func,O.a.string,O.a.object]).isRequired,reviewerCountFormatter:O.a.func.isRequired,tooltipPosition:O.a.string},v.defaultProps={reviewerCountFormatter:H},v.contextTypes={authRequired:O.a.func},y);n.d(t,!1,function(){return U}),n.d(t,"a",function(){return W})},1799:function(e,t){},1800:function(e,t){},1801:function(e,t){},1802:function(e,t){},1808:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(1809),i=(n.n(a),function(e){var t=e.sidebar,n=e.children;return o.a.createElement("div",{className:"ContentLayout"},o.a.createElement("div",{className:"ContentLayout-mainColumn"},n),o.a.createElement("div",{className:"ContentLayout-sideColumn"},t))});t.a=i},1809:function(e,t){},2044:function(e,t){},2764:function(e,t){},2765:function(e,t){},2766:function(e,t){},2767:function(e,t){},2768:function(e,t){},2769:function(e,t){},2770:function(e,t){},2771:function(e,t){},2772:function(e,t){},2773:function(e,t){},2774:function(e,t){},2775:function(e,t){},2776:function(e,t){},2777:function(e,t){},2778:function(e,t){},2779:function(e,t){},2780:function(e,t){},2781:function(e,t){},2782:function(e,t){},2783:function(e,t){},2784:function(e,t){},2785:function(e,t){},2786:function(e,t){},2787:function(e,t){},2788:function(e,t){},2789:function(e,t){},2790:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),a=r(n(34)),i=function(e){return o.default.createElement(a.default,Object.assign({width:"40",height:"20"},e),o.default.createElement("g",{fill:"#0A0B09",fillRule:"evenodd"},o.default.createElement("path",{d:"M37.71.418c1.04 0 1.881.86 1.881 1.922v15.325c0 1.063-.84 1.922-1.881 1.922H2.285c-1.04 0-1.88-.86-1.88-1.922V2.34c0-1.062.84-1.922 1.88-1.922H37.71zm0-.413H2.285C1.025.005 0 1.052 0 2.34v15.325C0 18.952 1.025 20 2.285 20H37.71c1.26 0 2.286-1.048 2.286-2.335V2.34c0-1.288-1.026-2.335-2.286-2.335z"}),o.default.createElement("path",{d:"M5.759 15.901V4.24h2.96v11.662h-2.96zM15.036 4.24h3.872v11.662h-2.589l-.006-7.868-1.04 7.868h-1.847l-1.09-7.699-.01 7.7H9.73V4.238h3.839c.116.707.232 1.538.36 2.488l.42 2.962.686-5.45zm8.474 11.662h-3.59V4.24h2.207c1.433 0 2.263.069 2.766.205.504.135.89.355 1.15.661a2.1 2.1 0 0 1 .499 1.023c.06.379.105 1.119.105 2.221v4.093c0 1.046-.056 1.746-.155 2.097-.094.35-.266.627-.503.825-.238.204-.537.34-.885.419-.355.079-.886.118-1.594.118zm.028-9.559c-.116-.073-.337-.107-.658-.107v7.654c.426 0 .686-.085.785-.26.1-.175.15-.65.15-1.43V7.681c0-.526-.017-.865-.05-1.012a.48.48 0 0 0-.227-.328zm4.115-2.103h2.855v3.794c.238-.277.503-.486.791-.622.293-.141.73-.21 1.067-.21a2.6 2.6 0 0 1 1.024.187c.288.125.503.3.659.526.149.226.243.447.27.662.034.214.045.672.045 1.379v3.272c0 .696-.044 1.216-.138 1.56-.089.34-.305.64-.648.888-.338.254-.747.379-1.212.379-.337 0-.768-.074-1.062-.22a2.477 2.477 0 0 1-.796-.673l-.188.74h-2.667V4.24zm3.857 8.836v-2.99c0-.492-.034-.815-.094-.967-.062-.147-.305-.226-.488-.226-.171 0-.287.068-.342.197-.05.136-.078.464-.078.996v3.08c0 .515.034.843.089.984.06.147.177.214.353.214.183 0 .421-.072.476-.22.055-.147.084-.508.084-1.068z"})))},c=i;t.default=c},2791:function(e,t){},2792:function(e,t){},2793:function(e,t){},2794:function(e,t){},2795:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAACeVBMVEUAAAD/bxT/Yg//dxb/hyn/hi//YhH/bxf/iSv/ZhD/Yg38YAz/ehz/YQv/ch38bhj/fSH+ZA7/dBn/iyv/bxb/VgP/ji7/Wgb/chn/gyb/hSb/bBP/eBr/gyX/gyD+aRL/ex//ex//fSD/YAv/dhv/WAX/ji3/hyf/gyT/dRr/ZxD/fiL/eBz/eB3/dh3/ZQ//hyf/jy//eRz/Yg3/eB3/Xwr/aRH/ex/+aBH/Wgf/fiD+bxf/fiD/hSP/XQf/cBj/VQL/axP/iCn/aBH/bRX+ahP/cxr/hCX/eyD/jSz/bxb+ZA3/Wgf/bBT/cxn/kC7/cRj/ZxD/kC7/chj/ahP/YAv/bRX/XAn/ahP/hCX/iSn/fiH/VgP/Yw3/jCz/Xgr/hCb/VAL9VAP/Xgr/aBL/cRj/ex7/WAb/ahP/gCT/iCj/gSP/jyv+ZhH/YAv/bhT/Vwb/kC7/eB//gyf/XAb8Xwz/eh//eRr/chf/giT/ZQ/+XAj/kTD/hyf/kjD+chj+XQj+Yw7/jy//WAX/iCr/dBv+Xwr/gSP/ki//giX/ahL+bxb+eyD+ZA3+XAn/iCn/XQn+Yw7/VgT/fSH/ex7/ji7/eh/9VwX/VwP/cxr/hCX/bxX/hCb/fCP/dRv9ZRH9hCX/giP8bxj/dRn/dhv/Wgv/Vwf/gSL/aRH/bBP/gyP/Zw//ki//fR//fiH/cRf/cxn/WwX/hCX/eRz/Zg//kC3/jiz/dxz/chf/ahL/ZA3/WAP/jCv/fSD/dRr/bxb/bhX/Ygv/ky//iSj/Xgj/iyr/iCf/eh7/Xwn/XAj/hSX/ex7/VAH/hib/dxr/dRn/aA//ljD/UwF1jvE+AAAAp3RSTlMAGgYEHQwJY1tDNR0XFhAN++nhuqhvaF5YTUouKxMK/Pr07+3p4+HbxcLCv72jjoR9eWZjW1taV01KQDQxFRL5+fjw8O/s6+ro5eTf3dfS0MvHv728ubezsrGwr6+tn5mRin18cW5oaGJgXlpYVEY/PTw8LikoJCIg/Pz69vb08vLx8O7n5ubj4t7e2NTTzcXDvLu3qqenpZ+dl4iBfXx5bmxeSDgwI0r7S7QAAANrSURBVDjLtZRVWxtBFIYnSSEkgeJFW9yllBaKlbq7uztQvEDd3d1d1rMbV6IkJDj9RZ3NEgiQ9o7v5syc533OHNsFU65pdQcy1casA3XT/kctmLHlukqlNjqMDvuSyJrp/8AC5twdtpEkCUmj2ui0O7O+zfLHNW0chtTqPUVB8XE1RbtXOnvkPdlVk7kZl22kakvQAu89+HS2HMFT50/k5thIW2aQwNclOH0HkYYVT4hHqmyRkwptz5P2Jo+L2XRRRb7yk3noS0qxItGn3o0kGTnCBVdVxMVVtPD4HJmjUOTwfRJUZXrebfmYvfIcLseRsNSHr0+woTpumUxCLzdztVodBO3095ec/XIEQaTSzk6KolIKYMuFg8yDAG8lKvUTAXwmzw5jITgelpLcS1G9Gg01DwD+Jq02dgSMVBvZgF/tEJMiL+ZXtSU2zyvMTzelV0K3UEvvGtmDJY6bM6Hd3Q/fRFYFjLb8ZwdreMssy0M8jniHYw9r9/ZIYXJhhW1gvLZZdA2ewyG7vYi1J3BYQ3c3lZL/ucJ3cWZj2BfPIavfWevpZh4OOY1Go1CYIqJiR6d+Sofmeg5yeU88l1RBMgVBk4lhmEFmzQceB55BleEciMvjAKfmgnSFYoChadpsNmvXlHEgoefAewheC7zixb7bsJBhaIsFw7DFItY1l9Bv5orB8U/AR4GJwqhlZkyHoliugC1GqZ/NtQdB9oIJSliPoShKLGXT3G61iriGp3auYhveXvwjeKx5GEooifBqAELSrGkjZeVT7FBnbVAwK7YWCkWVCeLSXTpCqdQP7WdTtLp2Ak7FVG+OAIRGDNC0VktbkhYnYRy39izM+LHLFeNdswjNAFyQhq0LtbTZwlaBQm5I/wxyoL7LvW50TsfhKHhsCcej1i9P0ulQ4vy1RwfrPZ/ar6tdJ8c+hU2DzI5Az5HPSxCVlYnEktH9bxWDMVVeobVRkPSnwCPR/LHbd9pi3iHxx/H3yWTlPvdjZgy7Xzr+B9D4G3JvDX2LxL7uU0vhLHJLQ7z3kJinsgxJ9T5DX180GCfxZpQgiPD9R0vKy0uO7rztlhkMrYcNf/qOTMr62FpCb9VbrV1QbpnMkBENDhsWRYPJqp67Pc3lcrtlkLrx/CRMIzSmEfiXpOTguguyjDcxEjDV+guwwkmVbYrEogAAAABJRU5ErkJggg=="},2796:function(e,t){},2797:function(e,t){},2798:function(e,t){},2799:function(e,t){},2800:function(e,t){},2801:function(e,t){},2802:function(e,t){},2803:function(e,t){},2804:function(e,t){},2805:function(e,t){},2806:function(e,t){},2807:function(e,t){},2808:function(e,t){},2809:function(e,t){},2810:function(e,t){},2811:function(e,t){},2812:function(e,t){},2813:function(e,t){},2814:function(e,t,n){var r=n(119),o=n(2815),a=Object.prototype,i=a.hasOwnProperty,c=o(function(e,t,n){i.call(e,n)?e[n].push(t):r(e,n,[t])});e.exports=c},2815:function(e,t,n){function r(e,t){return function(n,r){var l=c(n)?o:a,s=t?t():{};return l(n,e,i(r,2),s)}}var o=n(2816),a=n(2817),i=n(107),c=n(24);e.exports=r},2816:function(e,t){function n(e,t,n,r){for(var o=-1,a=null==e?0:e.length;++o<a;){var i=e[o];t(r,i,n(i),e)}return r}e.exports=n},2817:function(e,t,n){function r(e,t,n,r){return o(e,function(e,o,a){t(r,e,n(e),a)}),r}var o=n(559);e.exports=r},2818:function(e,t){},2819:function(e,t){},2820:function(e,t){},2907:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function m(e){var t=e.excerpt,n=void 0===t?"":t,r=e.introduction,o=void 0===r?"":r;return n.length>kc||n.length!==o.length}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function T(e){var t=e.url,n=e.from,r=e.score,o=e.text,a=o?ji.a.createElement(Rc,null,o):ji.a.createElement(Rc,null,ji.a.createElement("strong",{className:"TopicMetaCard-badgeScore"},r),n);return t?ji.a.createElement("a",{className:"TopicMetaCard-badge",href:t,target:"_blank"},a):ji.a.createElement("span",{className:"TopicMetaCard-badge"},a)}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function P(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function R(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function A(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function U(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function B(e){var t=e.children,n=e.className;return ji.a.createElement("div",{className:oc()("TopicTagsContainer",n)},t)}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function W(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ee(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ne(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function re(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ae(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ie(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function le(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function se(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function fe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function de(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function he(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function me(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function be(e){var t=e.type,n=e.id;switch(t){case"question":return"/question/"+n;case"article":return"//zhuanlan.zhihu.com/p/"+n;default:return""}}function ve(e){var t=e.item;return ji.a.createElement("div",{className:"TopicIndexModule-item"},ji.a.createElement("a",{href:be(t)},t.title))}function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ge(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function we(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Ee(e){return"module-"+e}function Oe(e){return document.querySelector("#"+Ee(e)).offsetTop}function Ce(e){document.querySelector(e).scrollIntoView({behavior:"smooth",block:"start"})}function _e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ke(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Te(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Se(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Pe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ne(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Re(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function De(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ae(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Le(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ue(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Be(e){return{x:e.left+e.width/2,y:e.top+e.height/2}}function Fe(e,t){var n=e.width/t.width,r=Be(e),o=Be(t);return{translate:{x:r.x-o.x,y:r.y-o.y},scale:n}}function Ve(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function ze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function He(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function We(e){var t={},n=window,r=n.innerWidth,o=n.innerHeight;if(!e)return t.width=Math.min(As,innerWidth),t.height="auto",t;var a=e.width,i=e.height,c={x:r/2,y:o/2},l=a/i;if(l>Bs){var s=Math.min(As,a,innerWidth,innerHeight*l);t.width=s,t.height=Math.round(s*i/a)}else{var u=Math.min(Ms,i,innerHeight,innerWidth/l);t.height=u,t.width=Math.round(u*a/i)}return t.top=c.y-t.height/2,t.left=c.x-t.width/2,t}function Ge(e,t){var n=new Image;return n.addEventListener("load",t),n.src=e,n}function Xe(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function Ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ke(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Qe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Ze(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function Je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $e(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function et(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function tt(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function nt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ot(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function at(e){var t=e.avatar,n=e.name,r=e.desc;return ji.a.createElement("div",{className:"TopicMovieIntro-celebrityItem"},ji.a.createElement("div",{className:"TopicMovieIntro-celebrityItemAvatarContainer"},t&&/zhimg\.com/.test(t)?ji.a.createElement(Ri.a,{className:"TopicMovieIntro-celebrityItemAvatar",size:36,round:!0,url:t}):ji.a.createElement("div",{className:"TopicMovieIntro-celebrityDefaultAvatar"},ji.a.createElement(Bi._46,{className:"TopicMovieIntro-celebrityDefaultAvatar--icon"}))),ji.a.createElement("div",{className:"TopicMovieIntro-celebrityItemContent"},ji.a.createElement("div",{className:"TopicMovieIntro-celebrityItemName"},ji.a.createElement("b",null,n)),ji.a.createElement("div",{className:"TopicMovieIntro-celebrityItemPlay"},r)))}function it(e){var t=e.icon,n=e.desc,r=e.title;return ji.a.createElement("div",{className:"TopicMovieIntro-awardItem"},ji.a.createElement("div",{className:"TopicMovieIntro-awardItemTitle"},ji.a.createElement(Ri.a,{url:t}),r),ji.a.createElement("div",{className:"TopicMovieIntro-awardContent",dangerouslySetInnerHTML:{__html:n}}))}function ct(e){var t=e.title,n=e.desc;return ji.a.createElement("div",{className:"TopicMovieIntro-moreInfoItem"},ji.a.createElement("h3",{className:"TopicMovieIntro-moreInfoItemTitle"},t),ji.a.createElement("div",{className:"TopicMovieIntro-moreInfoItemDetail"},n))}function lt(e){var t=e.scores,n=t.find(function(e){return"IMDb"===e.from});return ji.a.createElement("div",{className:"OldTopicIntro-source TopicMovieIntro-score"},ji.a.createElement("div",null,ji.a.createElement("p",null,"数据由猫眼电影提供"),ji.a.createElement("p",null,"评分由猫眼电影",n?"和 IMDb ":"","提供")),n&&ji.a.createElement(Zs.a,null))}function st(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ut(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function pt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ht(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function mt(e){var t=e.abstract;return ji.a.createElement("div",null,t&&ji.a.createElement(Es.a,{className:"TopicBookIntro-authorItemContent",html:t}))}function bt(e){var t=e.translators,n=e.publishTime,r=e.paperNum,o=e.wordCount,a={"译者":t&&t.length&&t.map(function(e){return e.name}).join(),"出版时间":n,"页数":r,"字数":o},i=Object.keys(a).filter(function(e){return a[e]});return Boolean(i.length)&&ji.a.createElement(gs,{title:"更多信息"},i.map(function(e){return ji.a.createElement(ou,{key:e,label:e,value:a[e]})}))}function vt(e){var t=e.source;return t.from&&ji.a.createElement("div",{className:"OldTopicIntro-source TopicBookIntro-source"},"数据由",t.from,"提供")}function yt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function wt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Et(e){var t=e.gameGenres,n=e.publisher,r=e.producer,o=e.platforms,a=e.marketTime,i=e.officialSite,c={"类型":Boolean(t&&t.length)&&t.map(function(e){return e.text}).join(" / "),"制作":n,"发行":r,"平台":Boolean(o&&o.length)&&o.map(function(e){return e.text}).join(" / "),"发行时间":a&&Object(su.c)(a),"官方网址":i&&ji.a.createElement("a",{href:i,target:"_blank"},i)},l=Object.keys(c).filter(function(e){return c[e]});return Boolean(l.length)&&ji.a.createElement(gs,{title:"更多信息"},l.map(function(e){return ji.a.createElement(ou,{key:e,label:e,value:c[e]})}))}function Ot(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ct(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _t(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function kt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function jt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function St(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function Pt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Nt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Rt(e){return e.replace(/^Array<([^>]+)>/,"$1")}function It(e){var t=e.topic||e;return t.id||t.name}function Dt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function At(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Mt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Lt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ut(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Bt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Ft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function zt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function qt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ht(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Wt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Gt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Yt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Kt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Zt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Jt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $t(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function en(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function tn(e){var t=e.item;switch(t.type){case"answer":return ji.a.createElement(qu.a,{answer:t});case"article":return ji.a.createElement(Hu.a,{article:t});case"pin":return ji.a.createElement(ep.a,{pin:t});case"people":return ji.a.createElement(Cl.a,{user:t});default:return null}}function nn(e){var t=e.item.target,n=tn({item:t});return n?ji.a.createElement(wl.a,null,n):null}function rn(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function on(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function an(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function cn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ln(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function un(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function pn(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"hot",n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(e=up[t]).load.apply(e,r)}function fn(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"hot",n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(e=up[t]).selector.apply(e,r)}function dn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function mn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function bn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function yn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function gn(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=Ep[e]).load.apply(t,r)}function wn(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=Ep[e]).selector.apply(t,r)}function En(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function On(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Cn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Tn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function jn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Pn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function xn(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function Nn(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function Rn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function In(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Dn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function An(e){return e.name.startsWith("创建 ")&&e.name.endsWith(" 话题")}function Mn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ln(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Un(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Bn(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function Fn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function zn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function qn(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function Hn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Gn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Xn(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function Yn(e){return e.replace(/^Array<([^>]+)>/,"$1")}function Kn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Zn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Jn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function er(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function tr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function nr(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function rr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function or(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ar(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ir(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function lr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function sr(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function ur(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function fr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function dr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function br(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function vr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function gr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function wr(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function Er(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Or(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Cr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function kr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Sr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Pr(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function xr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Rr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Ir(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ar(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Mr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ur(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Br(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function zr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function qr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Wr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Gr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Yr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Kr(){return document.querySelector("#TopicMain").offsetTop}Object.defineProperty(t,"__esModule",{value:!0});var Qr,Zr,Jr,$r,eo,to,no,ro,oo,ao,io,co,lo,so,uo,po,fo,ho,mo,bo,vo,yo,go,wo,Eo,Oo,Co,_o,ko,To,jo,So,Po,xo,No,Ro,Io,Do,Ao,Mo,Lo,Uo,Bo,Fo,Vo,zo,qo,Ho,Wo,Go,Xo,Yo,Ko,Qo,Zo,Jo,$o,ea,ta,na,ra,oa,aa,ia,ca,la,sa,ua,pa,fa,da,ha,ma,ba,va,ya,ga,wa,Ea,Oa,Ca,_a,ka,Ta,ja,Sa,Pa,xa,Na,Ra,Ia,Da,Aa,Ma,La,Ua,Ba,Fa,Va,za,qa,Ha,Wa,Ga,Xa,Ya,Ka,Qa,Za,Ja,$a,ei,ti,ni,ri,oi,ai,ii,ci,li,si,ui,pi,fi,di,hi,mi,bi,vi,yi,gi,wi,Ei,Oi,Ci,_i,ki,Ti=n(0),ji=n.n(Ti),Si=n(19),Pi=n(102),xi=n.n(Pi),Ni=n(5),Ri=n(71),Ii=n(480),Di=n(6),Ai=n(16),Mi=n(1808),Li=n(482),Ui=n(1377),Bi=n(8),Fi=n(3),Vi=n(1681),zi=n(68),qi=n(1276),Hi=n(1493),Wi=n(1),Gi=n.n(Wi),Xi=n(69),Yi=n(506),Ki=n(1492),Qi=n(521),Zi=n(507),Ji=(n(2764),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),$i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ec=(Zr=Qr=function(e){function t(){var e,n,a,i;r(this,t);for(var c=arguments.length,l=Array(c),s=0;s<c;s++)l[s]=arguments[s];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.state={editing:!1,value:a.props.value},a.handleToggleEditing=function(){a.setState({editing:!a.state.editing})},a.handleChange=function(e){a.setState({value:e.target.value})},a.handleSubmit=function(e){e.preventDefault(),a.props.onSave(a.state.value),a.handleToggleEditing()},i=n,o(a,i)}return a(t,e),$i(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.canEdit,r=e.children,o=e.placeholder,a=e.max,i=e.rich,c=this.state,l=c.editing,s=c.value,u={value:s,onChange:this.handleChange,placeholder:o,autoFocus:!0,className:"ModifyField-input"};return l?ji.a.createElement("form",{className:t,onSubmit:this.handleSubmit,noValidate:!0},i?ji.a.createElement(Ki.a,Ji({rows:3},u)):ji.a.createElement(Xi.a,Ji({spread:!0},u)),ji.a.createElement("div",{className:"ModifyField-actionBar"},ji.a.createElement("div",{className:"ModifyField-buttonGroup"},ji.a.createElement(Fi.c,{color:"blue",preset:"primary",type:"submit"},"保存"),ji.a.createElement(Fi.c,{onClick:this.handleToggleEditing},"取消")),a&&ji.a.createElement(Yi.a,{current:Math.round(Object(Qi.b)(s)/2),max:a}))):ji.a.createElement("div",{className:t},r||s,n&&ji.a.createElement(Zi.a,Ji({preset:"plain",className:"ModifyField-modifyButton",onClick:this.handleToggleEditing},s||{text:o})))}}]),t}(Ti.Component),Qr.propTypes={placeholder:Gi.a.string},Qr.defaultProps={placeholder:"编辑"},Zr),tc=ec,nc=tc,rc=n(2),oc=n.n(rc),ac=n(67),ic=n(1281),cc=n(109),lc=n(42),sc=n(101),uc=(n(2765),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),pc=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),fc=(Jr=Object(Ni.connect)(function(e){return{items:Object(sc.x)(e)}},{loadMetaCategories:sc.l}),Object(Si.withRouter)($r=Jr($r=function(e){function t(){var e,n,r,o;i(this,t);for(var a=arguments.length,l=Array(a),s=0;s<a;s++)l[s]=arguments[s];return n=r=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={shown:!1,value:"",items:[]},r.handleToggle=function(){r.checkItems().then(function(){return r.setState({shown:!r.state.shown})})},r.handleChange=function(e){return r.setState({input:e})},r.handleSelect=function(e,t){return r.setState({value:t.id})},r.handleClick=function(){var e=r.props,t=e.params.id,n=e.router,o=r.state.value;n.push("/topic/"+t+"/create/"+o)},r.checkItems=function(){var e=r.props,t=e.items,n=e.loadMetaCategories;return Promise.resolve(t||n())},o=n,c(r,o)}return l(t,e),pc(t,[{key:"render",value:function(){var e=this.state,t=e.shown,n=e.input,r=e.value,o=(this.props.items||[]).filter(function(e){return e.desc.includes(n||"")}).map(function(e){return{id:e.name,name:e.desc}});return ji.a.createElement(Ti.Fragment,null,ji.a.createElement(Fi.c,uc({},this.props,{onClick:this.handleToggle})),ji.a.createElement(lc.b,{title:"选择话题类型",subtitle:"请为话题选择对应合适实体类型",onClose:this.handleToggle},t&&ji.a.createElement("div",{className:"TopicCreateMeta"},ji.a.createElement(cc.b,{value:n,items:o,onChange:this.handleChange,onSelect:this.handleSelect,inputProps:{placeholder:"选择话题类型",autoFocus:!0}}),ji.a.createElement(Fi.c,{className:"TopicCreateMeta-submit",preset:"primary",color:"blue",onClick:this.handleClick,disabled:!r},"下一步"))))}}]),t}(Ti.Component))||$r)||$r),dc=fc,hc=function(e){var t=e.headerCard;t=void 0===t?{}:t;var n=t.config;n=void 0===n?{}:n;var r=n.avatarType;return["rectangle","square"][void 0===r?0:r]},mc=(n(2766),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),bc=function(e){function t(){return s(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),mc(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.topic,r=e.currentUser,o=void 0===r?{}:r,a=n.id,i=n.type,c=n.name,l=n.meta,s=n.isFollowing,u=n.isIndexEditable,p=n.relationship,f=void 0===p?{}:p,d="/topic/"+a,h="square"===hc(n);return ji.a.createElement("div",{className:oc()("TopicActions",t)},ji.a.createElement(Li.a,{className:oc()("TopicActions-followButton",{"TopicActions-followButton--large":h}),preset:"primary",id:a,type:i,isFollowing:s}),u&&ji.a.createElement(ac.a,{icon:Bi.R,className:"TopicActions-link",preset:"plain",to:d+"/index_edit",label:"编辑索引"}),!o.isOrg&&ji.a.createElement(ac.a,{className:"TopicActions-link",icon:Bi._57,preset:"plain",to:d+"/organize",label:"管理"}),ji.a.createElement(ac.a,{className:"TopicActions-link",preset:"plain",to:d+"/log",icon:Bi._31,label:"日志"}),ji.a.createElement(ic.a,{className:"TopicActions-shareMenu",id:a,type:i,title:c}),!l&&f.isMetaEditable&&ji.a.createElement(dc,{icon:Bi.a,className:"TopicActions-link",preset:"plain",label:"添加更多信息"}))}}]),t}(Ti.Component),vc=bc,yc=n(273),gc=n(287),wc=n(17),Ec=n(21),Oc=n(76),Cc=n(1339),_c=(n(2767),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),kc=95,Tc=function(e){return"topic_"+e.id+"_avatar"},jc=(eo=Object(Ni.connect)(function(e,t){var n=t.topic;if(!n)return{};var r=Tc(n);return{uploadId:r,topicAvatar:Object(yc.c)(e,{id:r}),currentUser:Object(Ec.c)(e)}},{updateTopic:sc.U,uploadImage:yc.b,showNotification:wc.g,loadCurrentUser:Ec.j,setShowIntro:gc.y}),to=Object(Oc.a)({load:function(e){return e.loadCurrentUser("can_edit_topic")},shouldLoad:function(e){var t=e.currentUser;return t&&void 0===t.canEditTopic}}),eo(no=to(no=Object(Si.withRouter)(no=function(e){function t(){var e,n,r,o;f(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={shouldShowMoreIcon:!1},r.introContainer=ji.a.createRef(),r.handleToggleExpand=function(){var e=r.props,t=e.router,n=e.topic.id;t.push("/topic/"+n+"/intro")},r.handleUpload=function(e){var t=r.props;return(0,t.uploadImage)(e,t.uploadId)},r.handleUpdateAvatar=function(e,t){return r.handleUpdate(t)},r.handleUpdateName=function(e){return r.handleUpdate({name:e})},r.handleUpdateIntroduction=function(e){return r.handleUpdate({introduction:e})},r.handleUpdate=function(e){var t=r.props;return(0,t.updateTopic)(t.topic.id,e)},o=n,d(r,o)}return h(t,e),_c(t,[{key:"componentDidMount",value:function(){var e=this.introContainer.current;if(e){var t=e.offsetHeight,n=this.props,r=n.topic.id,o=n.setShowIntro,a=t>78;this.setState({shouldShowMoreIcon:a}),a&&o(r)}}},{key:"renderIntroText",value:function(){var e=this.state.shouldShowMoreIcon,t=this.props.topic;if(t.headerCard.category){if(m(t))return ji.a.createElement(Fi.c,{preset:"link",className:"TopicCard-linkIcon",onClick:this.handleToggleExpand},"查看全部",ji.a.createElement(Bi.i,{className:"TopicCard-icon",center:!0,size:20}))}else if(e)return ji.a.createElement(Fi.c,{preset:"link",className:"TopicCard-linkIcon",onClick:this.handleToggleExpand},"查看全部",ji.a.createElement(Bi.i,{className:"TopicCard-icon",center:!0,size:20}));return null}},{key:"render",value:function(){var e=this.state.shouldShowMoreIcon,t=this.props,n=t.currentUser,r=t.topic,o=t.topicAvatar,a=r.name,i=r.introduction,c=r.type,l=r.longExcerpt,s=r.excerpt,u=i||"暂无话题描述";"topic"===c&&(u=l||s||"暂无话题描述");var p=n&&n.canEditTopic,f=m(r),d=Object(zi.a)(r.avatarUrl);return ji.a.createElement("div",{className:"TopicCard"},ji.a.createElement(qi.e,{className:"TopicCard-content",title:ji.a.createElement(nc,{className:"TopicCard-title",value:a,onSave:this.handleUpdateName,canEdit:p,placeholder:"编辑话题标题",max:54},ji.a.createElement("h1",{className:"TopicCard-titleText"},a)),image:p?ji.a.createElement(Vi.a,{inEditPage:!1,url:d,className:"TopicCard-image",updateProfile:this.handleUpdateAvatar,uploadImage:this.handleUpload,handleShowNotifcation:this.props.showNotification,avatarUpload:o}):ji.a.createElement(Hi.a,{className:"TopicCard-image",src:d,alt:a}),meta:ji.a.createElement(nc,{className:"TopicCard-description",canEdit:p&&!f,value:i,onSave:this.handleUpdateIntroduction,placeholder:"添加话题描述",max:350,rich:!0},ji.a.createElement("div",{className:"TopicCard-ztext",ref:this.introContainer},e?Object(Cc.a)(u,kc):u,this.renderIntroText()))}),ji.a.createElement("div",{className:"TopicCard-actions"},ji.a.createElement(vc,{topic:r})))}}]),t}(Ti.Component))||no)||no)||no),Sc=jc,Pc=n(307),xc=(n(2768),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Nc=function(e){function t(){return b(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,e),xc(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children;return ji.a.createElement("div",{className:oc()("Badge",t)},n)}}]),t}(Ti.Component),Rc=Nc,Ic=n(483),Dc=n(263),Ac=n(12),Mc=n(1798),Lc=Object(Ac.compose)(Object(Ni.connect)(function(e,t){return{metaInfo:e.entities.topics[t.topicId]}},function(e,t){var n=t.topicId;return{onUpdateVoteTopic:function(t){var r=t.voteFor,o=t.method;return e(Object(gc.x)({id:n,voteFor:r,method:o}))}}}),Si.withRouter)(Mc.a),Uc=n(486),Bc=n.n(Uc),Fc=(n(2769),function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["","人评价"],["","人评价"])),Vc=function(e){var t=e.percent,n=e.reviewerCount,r=e.insufficientText,o=e.ratioStatus;return ji.a.createElement("div",{className:"TopicVoteReviewCardExtraInfo-RecommendData"},"normal"===o?ji.a.createElement(Ti.Fragment,null,ji.a.createElement("div",{className:"TopicVoteReviewCardExtraInfo-RecommendPercent"},t,ji.a.createElement("span",{className:"TopicVoteReviewCardExtraInfo-PercentIcon"},"%")),ji.a.createElement("div",null,ji.a.createElement("div",{className:"TopicVoteReviewCardExtraInfo-RecommendText"},"知友推荐"),ji.a.createElement("div",{className:"TopicVoteReviewCardExtraInfo-RecommendSubText"},Bc()(Fc,n)))):ji.a.createElement(Ti.Fragment,null,ji.a.createElement("div",{className:"TopicVoteReviewCardExtraInfo-RecommendNoData TopicVoteReviewCardExtraInfo-RecommendText"},r),ji.a.createElement("div",{className:"TopicVoteReviewCardExtraInfo-RecommendSubText"},ji.a.createElement("p",{className:"TopicVoteReviewCardExtraInfo-LessPeople"},"评价人数不足",ji.a.createElement("br",null),"数据积累中"))))},zc=(n(2770),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),qc=(ro=Object(Dc.a)(null),oo=Object(Ni.connect)(function(e,t){return{metaInfo:e.entities.topics[t.topicId]}}),ro(ao=oo(ao=function(e){function t(){return g(this,t),w(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),zc(t,[{key:"render",value:function(){var e=this.props,t=e.topicId,n=e.metaInfo,r=n.vote,o=n.isVote;return r&&o?ji.a.createElement(Ic.a,{view:{id:4174},id:"4174",card:{content:{type:"Topic",token:t}},trackCardShow:!0},ji.a.createElement(Ii.d,{className:"TopicVoteReviewCard-RecommendContainer"},ji.a.createElement(Lc,{topicId:t,ReviewCardExtraInfoComponent:Vc,tooltipPosition:"bottom"}))):null}}]),t}(Ti.Component))||ao)||ao),Hc=(n(2771),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),Wc=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Gc=["variety_show","tv","movie","book","game","n_artist","n_sports","n_game","n_variety_show","n_movie","n_tv"],Xc=Object(Si.withRouter)((lo=co=function(e){function t(){var e,n,r,o;C(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=_(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleReadMore=function(){var e=r.props,t=e.router,n=e.topic.id;t.push("/topic/"+n+"/intro")},o=n,_(r,o)}return k(t,e),Wc(t,[{key:"renderDesc",value:function(){var e=this.props.topic,t=e.category,n=e.headerCard,r=e.isVote,o=e.vote,a=n.description1,i=n.description2,c=n.wikiDescription,l=null;if(c&&(l=c.length<108?c+"...":Object(Cc.a)(c,98)),t&&t.startsWith("n_wiki"))return ji.a.createElement("div",{className:"TopicMetaCard-description TopicMetaCard-wikiDescription"},l,c&&ji.a.createElement(Pc.c,{preset:"link",className:"TopicMetaCard-linkIcon",onClick:this.handleReadMore},"查看全部",ji.a.createElement(Bi.i,{className:"TopicCard-icon",center:!0,size:20})));var s=Gc.includes(t);return ji.a.createElement("div",{className:"TopicMetaCard-description"},s?ji.a.createElement("div",{className:"TopicMetaCard-description-container"},ji.a.createElement("div",{className:"TopicMetaCard-description1"},a),ji.a.createElement("div",{className:"TopicMetaCard-description2"},i)):Object(Cc.a)(a+i||"",r&&o?75:98),!s&&ji.a.createElement(Pc.c,{preset:"link",className:"TopicMetaCard-linkIcon",onClick:this.handleReadMore},"查看全部",ji.a.createElement(Bi.i,{className:"TopicCard-icon",center:!0,size:20})))}},{key:"render",value:function(){var e=this.props,t=e.topic,n=t.headerCard,r=t.id,o=e.topic,a=e.currentUser;if(!n)return null;var i=n.title,c=n.subtitle,l=n.scores,s=void 0===l?[]:l,u=n.tags,p=void 0===u?[]:u,f=n.avatarUrl,d=hc(o),h=s&&Boolean(s.length)&&s||p&&Boolean(p.length)&&p||[];return ji.a.createElement("div",{className:oc()("TopicMetaCard",O({},"TopicMetaCard--"+d+"Image",d))},ji.a.createElement("div",{className:"TopicMetaCard-voteCard"},ji.a.createElement(qc,{topicId:r})),ji.a.createElement(qi.e,{className:"TopicMetaCard-item",image:ji.a.createElement(Hi.a,{className:"TopicMetaCard-image",alt:i,src:Object(zi.a)(f)}),title:ji.a.createElement("div",{className:"TopicMetaCard-title"},i),meta:ji.a.createElement("div",{className:"TopicMetaCard-MetaMagicWrapper"},ji.a.createElement("div",{className:"TopicMetaCard-content"},c&&ji.a.createElement("div",{className:"TopicMetaCard-label"},c),Boolean(h&&h.length)&&ji.a.createElement("div",{className:"TopicMetaCard-badges"},h.map(function(e,t){return ji.a.createElement(T,Hc({key:t},e))})),this.renderDesc()),ji.a.createElement(vc,{className:"TopicMetaCard-actions",topic:o,currentUser:a}))}))}}]),t}(Ti.Component),co.Badge=T,io=lo))||io,Yc=Xc,Kc=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Qc=(so=Object(Ni.connect)(function(e,t){return{topic:Object(sc.O)(e,{id:t.params.id})}}),Object(Si.withRouter)(uo=so(uo=function(e){function t(){return j(this,t),S(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return P(t,e),Kc(t,[{key:"renderMeta",value:function(){var e=this.props.topic;if(e){var t=e.excerpt,n=e.id,r=e.name,o=e.avatarUrl,a=e.bestAnswersCount,i=e.unansweredCount,c=e.questionsCount,l={description:t,url:"https://www.zhihu.com/topic/"+n,name:r,image:o,"zhihu:bestAnswersCount":a,"zhihu:unansweredCount":i,"zhihu:questionsCount":c};return Object.keys(l).map(function(e){return ji.a.createElement("meta",{itemProp:e,content:l[e],key:e})})}}},{key:"render",value:function(){var e=this.props,t=e.topic,n=e.topic.meta;return ji.a.createElement("div",{itemType:"http://schema.org/Thing",itemScope:!0},this.renderMeta(),n?ji.a.createElement(Yc,{topic:t}):ji.a.createElement(Sc,{topic:t}))}}]),t}(Ti.Component))||uo)||uo),Zc=Qc,Jc=Zc,$c=n(1324),el=n(1336),tl=n(489),nl=n(1327),rl=(n(2772),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),ol=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},al=(po=Object(Ni.connect)(function(e,t){var n=t.params;return ol({topic:Object(sc.O)(e,{id:n.id})},Object(sc.H)(e,{id:n.id}))},{loadTopicFollowers:sc.t}),Object(Si.withRouter)(fo=po(fo=function(e){function t(){var e,n,r,o;x(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=N(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={shown:!1},r.handleToggleFollowers=function(){return r.setState({shown:!r.state.shown})},r.handleLoad=function(){var e=r.props;return(0,e.loadTopicFollowers)(e.params.id)},o=n,N(r,o)}return R(t,e),rl(t,[{key:"render",value:function(){var e=this.state.shown,t=this.props,n=t.isFetching,r=t.isDrained,o=t.items,a=t.topic,i=a.id,c=a.followersCount,l=a.questionsCount;return ji.a.createElement(Ii.d,null,ji.a.createElement(tl.a,{divider:!0},ji.a.createElement(tl.a.Item,{className:"TopicNumberBoard-item",name:"关注者",value:c,onClick:this.handleToggleFollowers}),ji.a.createElement(tl.a.Item,{className:"TopicNumberBoard-item",name:"问题数",value:l,href:"/topic/"+i+"/questions"})),ji.a.createElement(lc.b,{size:"fullPage",onClose:this.handleToggleFollowers},e&&ji.a.createElement(nl.a,{isFetching:n,isDrained:r,items:o,voteupCount:c,onLoad:this.handleLoad,text:"关注了"})))}}]),t}(Ti.Component))||fo)||fo),il=al,cl=n(260),ll=n(487),sl=(n(2773),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),ul=(ho=Object(Ni.connect)(function(e,t){var n=t.params.id;return{answerers:Object(sc.D)(e,{id:n})}},{loadBestAnswerers:sc.f}),Object(Si.withRouter)(mo=ho(mo=function(e){function t(){return I(this,t),D(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return A(t,e),sl(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.params.id;(0,e.loadBestAnswerers)(t)}},{key:"render",value:function(){var e=this.props,n=e.answerers,r=e.params.id;return n&&n.length?ji.a.createElement(Ic.a,{module:"UserList",moduleName:"活跃回答者"},ji.a.createElement(Ii.d,null,ji.a.createElement(Ii.b,{options:ji.a.createElement(ac.a,{preset:"plain",className:"TopicTopWriterBoard-link",to:"/topic/"+r+"/top-writer","data-za-detail-view-element_name":"ViewAll"},"查看全部")},"优秀回答者"),ji.a.createElement("div",{className:"TopicTopWriterBoard-section"},n.map(function(e){var n=e.member,o=e.answerCount,a=e.articleCount,i=e.totalVotes;return ji.a.createElement("div",{key:n.urlToken,className:"TopicTopWriterBoard-author"},ji.a.createElement(ll.a,{author:n,target:"_blank"},ji.a.createElement("a",{className:"TopicTopWriterBoard-authorDesc",href:"/people/"+n.urlToken+"/creations/"+r,target:"_blank"},t.getAnswererDescription({answerCount:o,articleCount:a,totalVotes:i}))))})))):null}}],[{key:"getAnswererDescription",value:function(e){return"话题下 "+[{count:e.answerCount,text:" 回答"},{count:e.articleCount,text:" 文章"},{count:e.totalVotes,text:" 赞同"}].filter(function(e){var t=e.count;return Boolean(t)}).map(function(e){var t=e.count,n=e.text;return""+Object(cl.b)(t)+n}).join(", ")}}]),t}(Ti.Component))||mo)||mo),pl=ul,fl=n(538),dl=n(1300),hl=(n(2774),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),ml=function(e){function t(){return M(this,t),L(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return U(t,e),hl(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.topic;return ji.a.createElement(Ic.a,{module:"TopicItem"},ji.a.createElement(dl.a,{className:oc()(t,"TopicTag"),topic:n},ji.a.createElement(fl.a,null,n.name)))}}]),t}(Ti.Component),bl=ml,vl=(n(2775),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),yl=(bo=Object(Ni.connect)(function(e,t){var n=t.params.id;return{topic:Object(sc.O)(e,{id:n}),parent:Object(sc.M)(e,{id:n}),children:Object(sc.E)(e,{id:n}),currentUser:Object(Ec.c)(e)}},{loadTopicParent:sc.u,loadTopicChildren:sc.r}),Object(Si.withRouter)(vo=bo(vo=function(e){function t(){return F(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return z(t,e),vl(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.loadTopicParent,n=e.loadTopicChildren,r=e.topic,o=r.id;r.fatherCount&&t(o),n(o)}},{key:"render",value:function(){var e=this.props,t=e.parent,n=void 0===t?[]:t,r=e.children,o=void 0===r?[]:r,a=e.topic.id,i=e.currentUser,c=void 0===i?{}:i;return n.length||o.length?ji.a.createElement(Ii.d,null,ji.a.createElement(Ii.c,null,Boolean(n.length)&&ji.a.createElement(Ic.a,{module:"TopicList",moduleName:"子话题"},ji.a.createElement("div",{className:"TopicRelativeBoard-item"},ji.a.createElement("div",{className:"TopicRelativeBoard-title"},"父话题"),ji.a.createElement(B,{className:"TopicRelativeBoard-topics"},n.map(function(e){return ji.a.createElement(bl,{key:e.id,topic:e})})))),Boolean(o.length)&&ji.a.createElement(Ic.a,{module:"TopicList",moduleName:"子话题"},ji.a.createElement("div",{className:"TopicRelativeBoard-item"},ji.a.createElement("div",{className:"TopicRelativeBoard-title"},"子话题"),ji.a.createElement(B,{className:"TopicRelativeBoard-topics"},o.map(function(e){return ji.a.createElement(bl,{key:e.id,topic:e})})))),!c.isOrg&&ji.a.createElement("a",{className:"TopicRelativeBoard-link",href:"/topic/"+a+"/organize/entire#anchor-children-topic",target:"_blank"},"查看全部话题结构"))):null}}]),t}(Ti.Component))||vo)||vo),gl=yl,wl=n(1277),El=n(261),Ol=n(1344),Cl=n(1305),_l=(n(2776),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),kl=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Tl=(go=yo=function(e){function t(){var e,n,r,o;q(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=H(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.generateMeta=function(e){var t=e.editNum,n=e.createNum,r=t?Object(cl.b)(t)+" 次简介编辑":"",o=n?Object(cl.b)(n)+" 次创建":"";return r+(r&&o?", ":"")+o},o=n,H(r,o)}return W(t,e),kl(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.isFetching,r=t.isDrained,o=t.items,a=t.total,i=t.onLoad,c=t.handleFollowButtonClick,l={getContainer:function(e){return e}};return ji.a.createElement("div",{className:"TopicContributorList"},ji.a.createElement(Ol.a,{header:Object(cl.a)(a)+" 名话题贡献者"}),ji.a.createElement(El.b,_l({className:"TopicContributorList-content",isLoading:n,isDrained:r,onLoad:i,placeholder:ji.a.createElement(El.a,{className:"List-item",withAvatar:!0})},l),o.map(function(t,n){return ji.a.createElement(wl.a,{key:n+"."+t.author.urlToken},ji.a.createElement(Cl.a,{user:t.author,meta:e.generateMeta(t),onClick:function(){return c(t.author)}}))})))}}]),t}(Ti.Component),yo.propTypes={isFetching:Gi.a.bool.isRequired,isDrained:Gi.a.bool.isRequired,items:Gi.a.array.isRequired,total:Gi.a.number.isRequired,onLoad:Gi.a.func.isRequired},go),jl=Tl,Sl=(n(2777),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Pl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xl=(wo=Object(Ni.connect)(function(e,t){var n=t.params;return Pl({},Object(sc.F)(e,{id:n.id}))},{loadTopicContributors:sc.s,toggleTopicContributorFollowers:sc.B}),Object(Si.withRouter)(Eo=wo((Co=Oo=function(e){function t(){var e,n,r,o;G(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=X(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={shown:!1},r.handleToggleContributors=function(){return r.setState({shown:!r.state.shown})},r.handleLoad=function(){var e=r.props;return(0,e.loadTopicContributors)(e.params.id)},r.handleFollowButtonClick=function(e){var t=r.props;(0,t.toggleTopicContributorFollowers)(t.params.id,e.urlToken,!e.isFollowing)},o=n,X(r,o)}return Y(t,e),Sl(t,[{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.isDrained,r=e.items,o=e.total,a=e.contributors,i=this.state.shown;return a.length?ji.a.createElement(Ii.d,null,ji.a.createElement(Ii.b,{options:ji.a.createElement(ac.a,{preset:"plain",className:"TopicContributorBoard-link",onClick:this.handleToggleContributors},"查看全部 (",Object(cl.b)(o),")")},"话题贡献者"),ji.a.createElement("div",{className:"TopicContributorBoard-section"},a.map(function(e){var t=e.author,n=e.authorityType,r=void 0===n?"":n,o=e.editNum,a=e.createNum,i=t.urlToken,c=t.isOrg;return ji.a.createElement("div",{key:i,className:"TopicContributorBoard-author"},ji.a.createElement(ll.a,{author:t,target:"_blank"},ji.a.createElement("a",{className:"TopicContributorBoard-authorInfo",href:"/"+(c?"org":"people")+"/"+i,target:"_blank"},c?r:ji.a.createElement("span",null,o&&ji.a.createElement("span",{title:o},Object(cl.b)(o)," 次简介编辑"),o&&a&&"，",a&&ji.a.createElement("span",{title:a},Object(cl.b)(a)," 次创建")))))})),ji.a.createElement(lc.b,{size:"fullPage",onClose:this.handleToggleContributors},i&&ji.a.createElement(jl,{isFetching:t,isDrained:n,items:r,total:o,onLoad:this.handleLoad,handleFollowButtonClick:this.handleFollowButtonClick}))):null}}]),t}(Ti.Component),Oo.propTypes={total:Gi.a.number.isRequired,contributors:Gi.a.arrayOf(Gi.a.shape({author:Gi.a.object,createNum:Gi.a.number,editNum:Gi.a.number})).isRequired},Oo.defaultProps={total:0,contributors:[]},Eo=Co))||Eo)||Eo),Nl=n(192),Rl=n.n(Nl),Il=(n(2778),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Dl=(_o=Object(Ni.connect)(function(e,t){var n=t.params.id;return{state:e,topic:Object(sc.O)(e,{id:n})}},{toggleVoteTopicWiki:sc.C}),Object(Si.withRouter)(ko=_o((jo=To=function(e){function t(){var e,n,r,o;K(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=Q(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.toggleVote=Rl()(function(){var e=r.props,t=e.topic.id,n=e.voted;(0,e.toggleVoteTopicWiki)(t,!n)},300),o=n,Q(r,o)}return Z(t,e),Il(t,[{key:"render",value:function(){var e=this.props,t=e.voted,n=e.voteInfo;n=void 0===n?{}:n;var r=n.num,o=void 0===r?0:r;return ji.a.createElement(Ii.d,null,ji.a.createElement("div",{className:"TopicVoteBoard"},"认为本内容有帮助",ji.a.createElement(Fi.c,{className:oc()("TopicVoteBoard-button",{voted:t}),preset:"primary",onClick:this.toggleVote},ji.a.createElement(Bi.y,{center:!0,size:20}),ji.a.createElement("span",{className:"TopicVoteBoard-voteCount"},Object(cl.a)(o)))))}}]),t}(Ti.Component),To.propTypes={voted:Gi.a.bool.isRequired,voteInfo:Gi.a.shape({num:Gi.a.number}).isRequired},ko=jo))||ko)||ko),Al=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ml=(So=Object(Ni.connect)(function(e,t){var n=t.params;return{wikiMeta:Object(sc.R)(e,{id:n.id})}},{loadTopicWikiMeta:sc.v}),Object(Si.withRouter)(Po=So(Po=function(e){function t(){return J(this,t),$(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return ee(t,e),Al(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.params.id;(0,e.loadTopicWikiMeta)(t)}},{key:"render",value:function(){var e=this.props.wikiMeta;if(!e)return null;var t=e.contributorTotal,n=e.contributors,r=e.hasVoted,o=e.voteInfo;return ji.a.createElement(Ti.Fragment,null,ji.a.createElement(xl,{total:t,contributors:n}),ji.a.createElement(Dl,{voted:r,voteInfo:o}))}}]),t}(Ti.Component))||Po)||Po),Ll=(n(2779),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Ul=(xo=Object(Ni.connect)(null,{loadCreatorWall:gc.e}),No=Object(Dc.a)(),xo(Ro=No(Ro=Object(Si.withRouter)(Ro=function(e){function t(){var e,n,r,o;te(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=ne(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={userList:[]},o=n,ne(r,o)}return re(t,e),Ll(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.params.id;(0,t.loadCreatorWall)({id:n,isEntry:!0}).then(function(t){var n=t.payload.data;0!==n.length&&e.setState({userList:n.map(function(e){return e.member}).slice(0,5)})})}},{key:"render",value:function(){var e=this.state.userList,t=this.props.params.id;return 0===e.length?null:ji.a.createElement(Ii.d,null,ji.a.createElement(Ii.b,{options:ji.a.createElement(ac.a,{preset:"plain",className:"TopicCreatorWallEntry-link",to:"/topic/"+t+"/creator_wall","data-za-detail-view-id":3920},"查看全部")},"话题创作知友墙"),ji.a.createElement(Si.Link,{className:"TopicCreatorWallEntry-itemList",to:"/topic/"+t+"/creator_wall","data-za-detail-view-id":3920},e.map(function(t,n){var r=ji.a.createElement(Ri.a,{key:t.urlToken,size:38,url:t.avatarUrl});return n<e.length-1?r:ji.a.createElement("div",{className:"TopicCreatorWallEntry-itemContainer",key:t.urlToken},r,ji.a.createElement("div",{className:"TopicCreatorWallEntry-itemMask"},"···"))})))}}]),t}(Ti.Component))||Ro)||Ro)||Ro),Bl=n(10),Fl={n_game:"游戏",n_edu:"学校"},Vl={0:"rectangle",1:"square",2:"round",10:"smallRectangle",11:"smallSquare",12:"smallRound"},zl=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ql=(Io=Object(Dc.a)(null),Do=Object(Ni.connect)(function(e,t){var n=t.params;return{isDrained:Object(sc.G)(e,{id:n.id})}}),Io(Ao=Object(Si.withRouter)(Ao=Do((Lo=Mo=function(e){function t(){return oe(this,t),ae(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return ie(t,e),zl(t,[{key:"componentWillReceiveProps",value:function(e){!this.props.isDrained&&e.isDrained&&this.dynamicSticky&&this.dynamicSticky.check()}},{key:"render",value:function(){var e=this,t=this.props.isWiki;return ji.a.createElement(el.a,{className:"TopicSideBar",offset:Bl.f+10,ref:function(t){e.dynamicSticky=t}},ji.a.createElement(il,null),!t&&ji.a.createElement(pl,null),ji.a.createElement(Ul,null),ji.a.createElement(gl,null),Boolean(t)&&ji.a.createElement(Ml,null),ji.a.createElement($c.a,null))}}]),t}(Ti.Component),Mo.propTypes={isWiki:Gi.a.bool},Mo.defaultProps={isWiki:!1},Ao=Lo))||Ao)||Ao)||Ao),Hl=ql,Wl=Hl,Gl=n(1293),Xl=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Yl={hot:"热门排序",newest:"时间排序",unanswered:"热门排序",questions:"时间排序"},Kl=(Uo=Object(Ni.connect)(function(e,t){var n=t.params;return{topic:Object(sc.O)(e,{id:n.id}),hasTopicIntro:Object(sc.e)(e,{id:n.id})}}),Object(Si.withRouter)(Bo=Uo(Bo=function(e){function t(){return ce(this,t),le(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return se(t,e),Xl(t,[{key:"render",value:function(){var e=this.props,t=e.params.id,n=e.path,r=e.topic,o=e.borderTop,a=e.borderBottom,i=e.hasTopicIntro,c="/topic/"+t;return ji.a.createElement("div",{className:oc()("Topic-bar",{"Topic-bar--borderTop":o,"Topic-bar--borderBottom":a})},ji.a.createElement(Gl.b,{className:"Topic-tabs"},r.isIndexVisible&&ji.a.createElement(Gl.a,{"aria-controls":"Topic-index",key:"index"},ji.a.createElement(Si.IndexLink,{to:c+"/index"},"索引")),i&&ji.a.createElement(Gl.a,{"aria-controls":"Topic-intro",key:"intro"},ji.a.createElement(Si.IndexLink,{to:c+"/intro"},"简介")),ji.a.createElement(Gl.a,{"aria-controls":"Topic-hot"},ji.a.createElement(Si.Link,{to:c+"/hot",className:oc()({"is-active":"hot"===n})},"讨论")),ji.a.createElement(Gl.a,{"aria-controls":"Topic-top"},ji.a.createElement(Si.Link,{to:c+"/top-answers"},"精华")),ji.a.createElement(Gl.a,{"aria-controls":"Topic-wait"},ji.a.createElement(Si.Link,{to:c+"/unanswered",className:oc()({"is-active":"unanswered"===n})},"等待回答"))),n&&ji.a.createElement(ac.a,{preset:"plain",to:"/topic/"+t+"/"+n,className:"Topic-headerLink","data-za-detail-view-name":"切换为"+Yl[n],icon:Bi._65,label:"切换为"+Yl[n]}))}}]),t}(Ti.Component))||Bo)||Bo),Ql=Kl,Zl=n(179),Jl=(n(2780),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),$l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),es={hot:"newest",newest:"hot",unanswered:"questions",questions:"unanswered"},ts=(Fo=Object(Ni.connect)(function(e,t){return{topic:Object(sc.O)(e,{id:t.params.id}),isIntro:/\/topic\/\d+\/intro/.test(t.location.pathname)}},{loadFullTopic:sc.g}))((qo=zo=function(e){function t(){return ue(this,t),pe(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return fe(t,e),$l(t,[{key:"componentWillMount",value:function(){var e=this.props.topic;e=void 0===e?{}:e;var n=e.redirection,r=e.headerCard;n&&n.to&&n.to.id?t.redirectTo("/topic/"+n.to.id):r&&r.specialUrl&&t.redirectTo(r.specialUrl)}},{key:"componentDidMount",value:function(){this.props.topic?this.nextTopicReady():this.nextTopic()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.params.id,r=t.topic,o=t.location,a=e.params.id,i=e.topic,c=e.location;(!r&&i||r&&i&&r.id!==i.id)&&this.nextTopicReady(e),n===a&&o!==c&&this.nextUrl()}},{key:"nextTopic",value:function(e){var t=e||this.props,n=t.params.id;(0,t.loadFullTopic)(n)}},{key:"nextTopicReady",value:function(e){this.checkRedirect(e)||this.nextUrl(e)}},{key:"nextUrl",value:function(e){var t=e||this.props,n=t.topic.meta,r=void 0===n?{}:n;Di.default.trackCardShow(this,{name:r.category||"default"})}},{key:"checkRedirect",value:function(e){var t=e||this.props,n=t.router,r=t.params.id,o=t.topic.isBlack,a="/topic/"+r+"/"+(o?"intro":"hot");return!!n.isActive("/topic/"+r,!0)&&(n.replace(a),!0)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.topic,r=e.routes,o=e.isIntro;if(!n)return null;var a=n.avatarUrl,i=n.id,c=n.type,l=n.meta,s=n.isFollowing,u=n.name,p=n.excerpt,f=n.category,d=es[r[r.length-1].path],h=ji.a.createElement(Ui.a,null,ji.a.createElement("div",{className:"Topic-pageHeader"},ji.a.createElement("div",{className:"Topic-pageHeaderMain"},ji.a.createElement(Ri.a,{url:a,size:38}),ji.a.createElement(Ql,{path:d})),ji.a.createElement("div",null,ji.a.createElement(Li.a,{type:c,id:i,isFollowing:s,preset:"primary"}))));return ji.a.createElement(Ic.a,{module:"TopicItem",moduleName:n.meta?n.meta.category:"default",card:{content:Jl({type:"Topic"},Object(Zl.a)(n.type,n.id),n.meta&&{sub_type:"MetaCard"})}},ji.a.createElement(Mi.a,{sidebar:ji.a.createElement(Wl,{isWiki:o&&"n_wiki_zhihu"===f})},ji.a.createElement(Ii.d,null,ji.a.createElement(xi.a,{title:u,meta:[{name:"keywords",content:u},{name:"image",content:a},{name:"description",content:p}]}),ji.a.createElement(Jc,null)),ji.a.createElement("div",{id:"TopicMain"},l&&ji.a.createElement(Ti.Fragment,null,ji.a.createElement(Ql,{path:d,borderTop:!0}),h),!l&&ji.a.createElement(Ti.Fragment,null,ji.a.createElement(Ql,{path:d,borderBottom:!0}),h),t)))}}],[{key:"redirectTo",value:function(e){if(Object(Ai.b)()){var t=new Error;throw t.status=302,t.redirect=e,t}location.href=e}}]),t}(Ti.Component),zo.fetchData=function(e){var t=e.params.id;return Object(sc.g)(t)},Vo=qo))||Vo,ns=ts,rs=n(18),os=n(484),as=n(168),is=(n(2781),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),cs=(Ho=Object(as.a)({module:"TopicIndexItem",trackCardShow:!0}))(Wo=function(e){function t(){return de(this,t),he(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return me(t,e),is(t,[{key:"render",value:function(){var e=this.props.item,t=e.title,n=e.relatedtopics,r=e.items,o=e.id;return ji.a.createElement("div",{className:"TopicIndexModule"},ji.a.createElement("a",{id:"module-"+o},ji.a.createElement("h2",{className:"TopicIndexModule-title"},t)),ji.a.createElement("div",null,r.map(function(e){return ji.a.createElement(ve,{key:e.id,item:e})})),n&&Boolean(n.length)&&ji.a.createElement(Ic.a,{module:"TopicList",moduleName:"相关话题"},ji.a.createElement(B,{className:"TopicIndexModule-topics"},ji.a.createElement("h3",{className:"TopicIndexModule-topicsTitle"},"相关话题："),n.map(function(e){return ji.a.createElement(bl,{key:e.id,topic:e})}))))}}]),t}(Ti.Component))||Wo,ls=cs,ss=n(175),us=(n(2782),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),ps=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),fs=Object(Si.withRouter)(Go=function(e){function t(){var e,n,r,o;ye(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=ge(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={activeId:0},r.heights=null,r.handleScroll=function(){var e=window.pageYOffset,t=window.innerHeight/2+e,n=r.heights.find(function(e){return e.height<=t});n&&r.setState({activeId:n.id})},r.handleClick=function(e){e.preventDefault();var t=e.target.hash;r.props.router.push(us({},r.props.location,{hash:t})),Ce(t)},o=n,ge(r,o)}return we(t,e),ps(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.modules,n=e.location;this.heights=t.map(function(e){var t=e.id;return{id:t,height:Oe(t)}}).reverse(),n.hash&&Ce(n.hash),this.subscription=Object(ss.subscribe)("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"render",value:function(){var e=this,t=this.props.modules,n=this.state.activeId;return ji.a.createElement("ol",{className:"TopicIndexCatalog"},t.map(function(t){return ji.a.createElement("li",{className:oc()("TopicIndexCatalog-item",{"is-active":n===t.id}),key:t.id},ji.a.createElement("a",{href:"#"+Ee(t.id),onClick:e.handleClick},t.title))}))}}]),t}(Ti.Component))||Go,ds=fs,hs=(n(2783),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),ms=(Xo=Object(Ni.connect)(function(e,t){var n=t.params;return{topic:Object(sc.O)(e,{id:n.id}),item:Object(sc.J)(e,{id:n.id})}},{loadIndex:sc.i}),Object(Si.withRouter)(Yo=Xo((Qo=Ko=function(e){function t(){var e,n,r,o;_e(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=ke(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={overflow:!1},r.handleToggleShowOiaModal=!1,r.checkOverflow=function(){var e=r.content?Object(rs.findDOMNode)(r.content):null;e&&e.offsetHeight>1e3&&r.setState({overflow:!0})},o=n,ke(r,o)}return Te(t,e),hs(t,[{key:"componentDidMount",value:function(){this.props.topic&&this.nextTopicReady()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.topic,n=e.topic;n&&(t||{}).id!==n.id&&this.nextTopic(e)}},{key:"componentDidUpdate",value:function(e){}},{key:"nextTopicReady",value:function(e){var t=e||this.props,n=t.topic,r=t.item,o=t.loadIndex,a=t.params.id;void 0===r&&n.isIndexVisible&&o(a)}},{key:"renderModules",value:function(){var e=this,t=this.props.item||{},n=t.topicIndexModules;if(!n||!n.length)return null;var r=this.state.overflow;return ji.a.createElement(Ii.d,{className:oc()("TopicIndex-content",{"TopicIndex-mobileContent":!1}),ref:function(t){e.content=t}},ji.a.createElement(Ic.a,{module:"TopicIndexList"},ji.a.createElement("div",{className:oc()("TopicIndex-contentMain",{"TopicIndex-overflowContent":r})},!1,n.map(function(e){return ji.a.createElement(ls,{key:e.id,item:e})}))),r&&ji.a.createElement("button",{className:"TopicIndex-overflowButton",onClick:this.handleToggleShowOiaModal},"展开阅读全文",ji.a.createElement(Bi.g,{text:!0,center:!0,width:20,height:20})),ji.a.createElement("div",{className:"TopicIndex-contentSide",ref:function(t){e.contentSide=t}},ji.a.createElement(os.a,{offset:52,container:function(){return e.contentSide}},ji.a.createElement("div",null,ji.a.createElement(ds,{modules:n})))))}},{key:"renderEditors",value:function(){var e=this.props.item||{},t=e.topicIndexEditors;return t&&t.length?ji.a.createElement(Ic.a,{module:"UserList",moduleName:"编辑者",trackCardShow:!0},ji.a.createElement(Ii.d,null,ji.a.createElement(Ii.b,null,"编辑者"),t.map(function(e){return ji.a.createElement(wl.a,{key:e.id},ji.a.createElement(Cl.a,{user:e}))}))):null}},{key:"render",value:function(){return this.props.item?ji.a.createElement("div",null,this.renderModules(),this.renderEditors()):null}}]),t}(Ti.Component),Ko.fetchData=function(e){var t=e.params.id;return function(e){return e(Object(sc.i)(t)).catch(function(e){if(404===e.status){var n=new Error;throw n.status=302,n.redirect="/topic/"+t,n}throw e})}},Ko.contextTypes={authRequired:Gi.a.func},Yo=Qo))||Yo)||Yo),bs=ms,vs=(n(2784),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),ys=function(e){function t(){return je(this,t),Se(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Pe(t,e),vs(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.children;return ji.a.createElement("div",{className:"TopicIntroSection"},t&&ji.a.createElement("h2",{className:"TopicIntroSection-title"},t),n)}}]),t}(Ti.Component),gs=ys,ws=(n(2785),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Es=(function(e){function t(){var e,n,r,o;xe(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=Ne(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={expanded:!1},r.handleExpand=function(){r.setState({expanded:!0})},o=n,Ne(r,o)}Re(t,e),ws(t,[{key:"componentDidMount",value:function(){this.content.scrollHeight<=this.content.offsetHeight&&this.setState({expanded:!0})}},{key:"render",value:function(){var e=this,t=this.props,n=t.content,r=t.maxHeight,o=t.lines,a=t.isSpecial,i=this.state.expanded;return ji.a.createElement("div",{className:oc()("TopicContentAbbr",{"TopicContentAbbr-abbr":!i}),style:i?{lineHeight:r/o+"px"}:{lineHeight:r/o+"px",maxHeight:r+"px",WebkitLineClamp:o,WebkitBoxOrient:a?"initial":"vertical"},ref:function(t){e.content=t}},n,!1)}}])}(Ti.Component),n(264)),Os=(n(2786),n(2787),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Cs=(Jo=Zo=function(e){function t(){return Ie(this,t),De(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ae(t,e),Os(t,[{key:"render",value:function(){var e=this.props,t=e.margin,n=e.column,r=e.children,o=e.className,a=this.props,i=a.marginBottom,c=void 0===i?t:i,l=a.marginRight,s=void 0===l?t:l;return ji.a.createElement("div",{className:oc()("SquareGrid",o),style:{marginRight:-s,marginBottom:-c}},Ti.Children.toArray(r).map(function(e){return ji.a.createElement("div",{key:e.key,style:{marginRight:s,marginBottom:c,width:"calc("+100/n+"% - "+s+"px)"}},e)}))}}]),t}(Ti.Component),Zo.propTypes={margin:Gi.a.number,marginBottom:Gi.a.number,marginRight:Gi.a.number,column:Gi.a.number},Zo.defaultProps={margin:2,column:4},Jo),_s=Cs,ks=n(174),Ts=n(485),js=n(498),Ss=n.n(js),Ps=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xs=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ns=(ea=$o=function(e){function t(){var e,n,r,o;Me(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=Le(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={active:!1,translate:null,scale:null},o=n,Le(r,o)}return Ue(t,e),xs(t,[{key:"componentDidMount",value:function(){this.trans()}},{key:"componentWillReceiveProps",value:function(e){Ss()(e.from,this.props.from)||Ss()(e.to,this.props.to)||this.trans(e)}},{key:"trans",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=t.timeout,r=t.onClose;this.timeout&&clearTimeout(this.timeout),this.setState(Ps({active:!0},Fe(this.props.from,this.props.to)),function(){e.node.offsetWidth,e.setState({translate:null,scale:null})}),this.timeout=setTimeout(function(){e.setState({active:!1}),r&&r()},n)}},{key:"componentWillUnmount",value:function(){this.timeout&&clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.timeout,o=t.to,a=o.top,i=o.left,c=o.width,l=o.height,s=this.state,u=s.active,p=s.opacity,f=this.state.translate||{x:0,y:0},d=this.state.scale||1;return Object(Ti.cloneElement)(n,{style:Ps({position:"fixed",top:a,left:i,width:c,height:l},u&&{opacity:p,transition:"transform "+r+"ms ease-in-out, opacity "+r+"ms ease-in-out",transform:"translate3d("+f.x+"px, "+f.y+"px, 0) scale3d("+d+", "+d+", 1)"},n.props.style),ref:function(t){e.node=t}})}}]),t}(Ti.Component),$o.propTypes={timeout:Gi.a.number},$o.defaultProps={timeout:300},ea),Rs=Ns,Is=(n(2788),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),Ds=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),As=800,Ms=600,Ls={vertical:20,horizontal:20},Us={vertical:0,horizontal:0},Bs=4/3,Fs=(na=ta=function(e){function t(){var e,n,r,o;ze(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=qe(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={entered:!1,index:r.props.index||0,from:null,to:We(null),padding:null,sizeCollection:[]},r.images=[],r.trans=function(e){var t=r.state.index,n=r.props.images,o=We(e);r.setState({from:r.getEnterFromRect(),to:o}),r.setCollectionSizeValue(t,o),n[t-1]&&r.loadImage(t-1,r.getImageSize),n[t+1]&&r.loadImage(t+1,r.getImageSize)},r.toImage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=r.state.index+e;r.setState({index:t,to:r.state.sizeCollection[t]||We(null)});var n=t+e;r.state.sizeCollection[n]||r.loadImage(t+e,r.getImageSize)},r.handleRef=function(e){r.image=e},r.handleEnterImageLoad=function(){var e=r.image,t=e.naturalWidth,n=e.naturalHeight;r.trans({width:t,height:n})},r.getImageSize=function(e,t){var n=t.target,o=n.width,a=n.height;r.setCollectionSizeValue(e,We({width:o,height:a}))},r.setCollectionSizeValue=function(e,t){var n=r.state.sizeCollection,o=[].concat(Ve(n));o[e]=t,r.setState({sizeCollection:o})},r.handleNext=function(){return r.toImage()},r.handlePrev=function(){return r.toImage(-1)},r.handleTransEnd=function(){return r.setState({entered:!0})},o=n,qe(r,o)}return He(t,e),Ds(t,[{key:"componentDidMount",value:function(){Ts.a();var e=window.innerWidth>690?Ls:Us;this.setState({padding:e}),this.timeout=setTimeout(this.handleTransEnd,500)}},{key:"componentWillUnmount",value:function(){Ts.b()}},{key:"loadImage",value:function(e,t){var n=this.props.images[e]||{},r=n.origin;return r?Ge(r,function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.apply(void 0,[e].concat(r))}):null}},{key:"getEnterFromRect",value:function(){var e=this.props,t=e.getImage,n=e.getEnterFromRect;if(t){return t().getBoundingClientRect()}return n()}},{key:"render",value:function(){var e=this.props,t=e.images,n=e.enterToSize,r=e.onClose,o=this.state,a=o.index,i=o.entered,c=o.from,l=o.to,s=l||{},u=s.width,p=s.height,f=t[a]||this.props,d=f.origin,h=f.thumbnail,m=a===this.props.index;return ji.a.createElement(ks.a,null,ji.a.createElement("div",{className:"ImageViewAlias"},ji.a.createElement("div",{className:"ImageViewAlias-mask",onClick:r}),ji.a.createElement("div",{className:"ImageViewAlias-controls"},ji.a.createElement(Fi.c,{onClick:this.handlePrev,disabled:0===a,preset:"plain",className:"ImageViewAlias-controlsLeft"},ji.a.createElement(Bi.h,{fill:"#fff",size:42})),ji.a.createElement(Fi.c,{onClick:this.handleNext,disabled:a===t.length-1,preset:"plain",className:"ImageViewAlias-controlsRight"},ji.a.createElement(Bi.i,{fill:"#fff",size:42})),ji.a.createElement(Fi.c,{className:"ImageViewAlias-controlsClose",onClick:r,preset:"plain"},ji.a.createElement(Bi.z,{fill:"#fff"}))),ji.a.createElement("div",{className:"ImageViewAlias-viewPort"},ji.a.createElement("img",Is({className:"ImageViewAlias-image",src:d,alt:"image",width:u,height:p},m&&!n&&!i&&{onLoad:this.handleEnterImageLoad,ref:this.handleRef},!i&&{style:{opacity:0}}))),c&&l&&!i&&ji.a.createElement(Rs,{from:c,to:l,onClose:this.handleTransEnd},ji.a.createElement("img",{src:h,alt:"preview-transition"}))))}}]),t}(Ti.Component),ta.propTypes={getImage:Gi.a.func,getEnterFromRect:Gi.a.func,getLeaveToRect:Gi.a.func,enterToSize:Gi.a.object,images:Gi.a.array,index:Gi.a.number},ta.defaultProps={images:[]},na),Vs=Fs,zs=(n(2789),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),qs=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Hs=function(e){function t(){var e,n,r,o;Ye(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=Ke(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={previewing:!1},r.handleTogglePreview=function(){return r.setState({previewing:!r.state.previewing})},r.handleRef=function(e){r.imageEl=e},r.getImage=function(){return r.imageEl},o=n,Ke(r,o)}return Qe(t,e),qs(t,[{key:"render",value:function(){var e=this.props,t=e.image,n=e.index,r=e.images,o=e.className,a=e.surplus,i=e.total,c=e.onClickPlus,l=Xe(e,["image","index","images","className","surplus","total","onClickPlus"]),s=this.state.previewing,u="string"==typeof t?{src:t}:t,p=r&&r[n],f=p||{thumbnail:t,origin:this.props.origin};return ji.a.createElement("div",zs({className:oc()("ThumbnailAlias",o)},l),ji.a.createElement("img",zs({className:"ThumbnailAlias-image",ref:this.handleRef},u,f.origin&&{className:oc()("ThumbnailAlias-image","ThumbnailAlias-image--zoomIn"),onClick:this.handleTogglePreview})),s&&ji.a.createElement(Vs,zs({getImage:this.getImage,onClose:this.handleTogglePreview},r?{images:r,index:n}:f)),a>0&&ji.a.createElement("em",zs({className:"ThumbnailAlias-surplus"},f.origin&&{className:oc()("ThumbnailAlias-surplus",{"ThumbnailAlias-image--zoomIn":!c,"ThumbnailAlias-image--pointer":c}),onClick:c||this.handleTogglePreview}),ji.a.createElement("span",null,"点击查看",ji.a.createElement("br",null),"全部 ",i," 张")))}}]),t}(Ti.Component),Ws=Hs,Gs=Ws,Xs=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ys=function(e){function t(){return Je(this,t),$e(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return et(t,e),Xs(t,[{key:"render",value:function(){var e=this.props,t=e.max,n=void 0===t?8:t,r=e.images,o=e.onClickPlus,a=Ze(e,["max","images","onClickPlus"]);return ji.a.createElement(_s,a,r.slice(0,n).map(function(e,t){return ji.a.createElement(Gs,{key:t,image:e.thumbnail,index:t,images:r,onClickPlus:o,surplus:t>=n-1&&r.length-n,total:t>=n-1&&r.length})}))}}]),t}(Ti.Component),Ks=Ys,Qs=n(2790),Zs=n.n(Qs),Js=(n(2044),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),$s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),eu=(oa=ra=function(e){function t(){var e,n,r,o;nt(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=rt(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={celebritiesExpanded:!1,dramaExpanded:!1},r.handleExpandDrama=function(){r.setState({dramaExpanded:!0})},r.handleToggleExpanded=function(){r.setState({celebritiesExpanded:!r.state.celebritiesExpanded})},r.handleToggleShowOiaModal=!1,o=n,rt(r,o)}return ot(t,e),$s(t,[{key:"renderCelebrities",value:function(e){var t=this.state.celebritiesExpanded,n=(e||[]).map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.role,n=e.list;return n&&n.map(function(e){return Js({},e,{role:t})})}).reduce(function(e,t){return[].concat(tt(e),tt(t||[]))},[]),r=t?n:n.slice(0,6);return r.length?ji.a.createElement(gs,{title:"影人"},ji.a.createElement("div",{className:oc()({"TopicMovieIntro-sectionCelebritiesContainer":!1})},ji.a.createElement("div",{className:oc()({"TopicMovieIntro-sectionCelebrities":!1})},r.map(function(e){var t=e.movieAvatar,n=e.avatar,r=e.desc,o=e.name,a=e.role;return ji.a.createElement(at,{key:o,avatar:t||n,name:o,desc:r?("演员"===a?"饰 ":"")+r:a})}))),n.length>6&&ji.a.createElement(Fi.c,{className:"TopicMovieIntro-celebrityMore",preset:"plain",onClick:this.handleToggleExpanded},t?"收起":"查看全部",t?ji.a.createElement(Bi.j,{size:16,center:!0}):ji.a.createElement(Bi.g,{size:16,center:!0}))):null}},{key:"render",value:function(){var e=this.props,t=e.item,n=e.params.id;if(!t||!t.content.meta)return null;var r=t.content.meta,o=r.content,a=o.drama,i=o.celebrities,c=o.awards,l=o.parameters,s=o.scores,u=r.content,p=(t.content.relatedTopics,((u||{}).photos||[]).filter(function(e){return e&&e.olonk&&/zhimg\.com/.test(e.olonk)})),f=p.map(function(e){return e&&e.olonk&&{thumbnail:e.olonk,origin:Object(zi.a)(e.olonk,"r")}});return ji.a.createElement(Ii.d,{className:oc()({"TopicMovieIntro-mobile":!1})},ji.a.createElement(gs,{title:"简介"},ji.a.createElement("div",{className:"OldTopicIntro-intro TopicMovieIntro-sectionDrama"},a)),this.renderCelebrities(i),c&&Boolean(c.length)&&ji.a.createElement(gs,{title:"奖项"},c.map(function(e,t){return ji.a.createElement(it,Js({key:t},e))})),Boolean(f&&f.length)&&ji.a.createElement(gs,{title:"图片"},ji.a.createElement(Ks,{max:8,images:f,onClickPlus:function(){return location.href="/topic/"+n+"/images"}})),l&&Boolean(l.length)&&ji.a.createElement(gs,{title:"更多信息"},l.map(function(e,t){return ji.a.createElement(ct,Js({key:t},e))})),ji.a.createElement(gs,null,ji.a.createElement(lt,{scores:s})),!1)}}]),t}(Ti.Component),ra.contextTypes={authRequired:Gi.a.func},oa),tu=eu,nu=(n(2791),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),ru=function(e){function t(){return st(this,t),ut(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return pt(t,e),nu(t,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.value;return ji.a.createElement("div",null,ji.a.createElement("span",{className:"TopicIntro-moreInfoItemLabel"},t),ji.a.createElement("span",{className:"TopicIntro-moreInfoItemValue"},n))}}]),t}(Ti.Component),ou=ru,au=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iu=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),cu=Object(Si.withRouter)((ca=ia=function(e){function t(){var e,n,r,o;ft(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=dt(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleToggleShowOiaModal=!1,o=n,dt(r,o)}return ht(t,e),iu(t,[{key:"render",value:function(){var e=this.props.item;if(!e||!e.content.meta)return null;var t=e.content.meta,n=t.content,r=t.content,o=r.summary,a=r.authors,i=r.tableContent,c=r.source,l=(e.content.relatedTopics,ji.a.createElement(Es.a,{html:o})),s=ji.a.createElement(Es.a,{html:i}),u=a.map(function(e,t){return ji.a.createElement(mt,au({key:t},e))});return ji.a.createElement(Ii.d,{className:"TopicBookIntro"},o&&ji.a.createElement(gs,{title:"简介"},ji.a.createElement("div",{className:"OldTopicIntro-intro"},l)),a&&Boolean(a.length)&&ji.a.createElement(gs,{title:"作者简介"},ji.a.createElement("div",{className:"OldTopicIntro-intro"},u)),i&&ji.a.createElement(gs,{title:"目录"},ji.a.createElement("div",{className:"OldTopicIntro-intro"},s)),ji.a.createElement(bt,n),ji.a.createElement(gs,null,ji.a.createElement(vt,{source:c})),!1)}}]),t}(Ti.Component),ia.contextTypes={authRequired:Gi.a.func},aa=ca))||aa,lu=cu,su=n(481),uu=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),pu=Object(Si.withRouter)((ua=sa=function(e){function t(){var e,n,r,o;yt(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=gt(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleToggleShowOiaModal=!1,o=n,gt(r,o)}return wt(t,e),uu(t,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.params.id;if(!t||!t.content.meta)return null;var r=t.content.meta,o=r.content,a=r.content,i=a.introduction,c=a.screenshotsCollection,l=(t.content.relatedTopics,ji.a.createElement(Es.a,{html:i})),s=c.map(function(e){return{thumbnail:e,origin:Object(zi.a)(e,"r")}});return ji.a.createElement(Ii.d,{className:"TopicGameIntro"},i&&ji.a.createElement(gs,{title:"简介"},l),Boolean(s&&s.length)&&ji.a.createElement(gs,{title:"游戏截图"},ji.a.createElement(Ks,{max:8,images:s,onClickPlus:function(){return location.href="/topic/"+n+"/images"}})),ji.a.createElement(Et,o),!1)}}]),t}(Ti.Component),sa.contextTypes={authRequired:Gi.a.func},la=ua))||la,fu=pu,du=(n(2792),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),hu=function(e){var t=e.value,n=e.style,r=t.topic,o=t.remark,a=r.name,i=r.avatarUrl,c=n.imageTemplate;return ji.a.createElement("div",{className:"TopicColumnMeta-line TopicColumnMeta-singleLine"},ji.a.createElement(Ri.a,{className:oc()("TopicColumnMeta-avatar","TopicColumnMeta-avatar--"+(Vl[c]||"smallSquare")),size:36,url:i}),ji.a.createElement("div",{className:"TopicColumnMeta-topic"},ji.a.createElement("div",{className:"TopicColumnMeta-name"},a),o&&ji.a.createElement("div",{className:"TopicColumnMeta-remark"},o)))},mu=function(e){var t=e.value,n=e.style,r=t.topic,o=t.remark,a=r.name,i=r.avatarUrl,c=n.imageTemplate;return ji.a.createElement("div",{className:"TopicColumnMeta-line TopicColumnMeta-doubleLine"},ji.a.createElement("div",{className:"TopicColumnMeta-topic"},ji.a.createElement(Ri.a,{className:oc()("TopicColumnMeta-avatar","TopicColumnMeta-avatar--"+(Vl[c]||"smallSquare")),size:36,url:i}),ji.a.createElement("div",{className:"TopicColumnMeta-name"},a)),o&&ji.a.createElement("div",{className:"TopicColumnMeta-remark"},o))},bu=function(e){function t(){return Ot(this,t),Ct(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _t(t,e),du(t,[{key:"render",value:function(){var e=this.props,t=e.style,n=e.value,r=t.layout,o=(n||[]).map(function(e){return"3-2"===r||"row"===r?ji.a.createElement(hu,{value:e,style:t}):ji.a.createElement(mu,{value:e,style:t})});return ji.a.createElement("div",{className:"TopicColumnMeta"},ji.a.createElement("div",{className:"TopicColumnMeta-main"},o))}}]),t}(Ti.Component),vu=bu,yu=(n(2793),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),gu=function(e){function t(){return kt(this,t),Tt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return jt(t,e),yu(t,[{key:"render",value:function(){var e=this.props,t=e.target,n=t.type,r=t.value,o=e.style,a=e.isZhihuWiki;switch(n){case"String":return a?ji.a.createElement(Es.a,{html:r,className:"TopicCommonField-zhihuWiki--text",style:o}):ji.a.createElement("div",{className:"TopicCommonField-text",style:o,dangerouslySetInnerHTML:{__html:r}});case"Datetime":return ji.a.createElement("span",{className:"TopicCommonField-text",style:o},Object(su.c)(r));case"Image":var i=r;return ji.a.createElement(Gs,{image:i,origin:Object(zi.a)(i,"r"),style:o});case"Topic":var c=r.name;return ji.a.createElement("span",{className:"TopicCommonField-topicText"},c);default:return null}}}]),t}(Ti.Component),wu=gu,Eu=(n(2794),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),Ou=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Cu=function(e){function t(){return Pt(this,t),xt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Nt(t,e),Ou(t,[{key:"render",value:function(){var e=this.props,t=e.target,n=t.type,r=t.value,o=void 0===r?[]:r,a=t.style,i=void 0===a?{}:a,c=e.preset,l=e.topicId,s=St(e,["target","preset","topicId"]);if(!o||!o.length)return null;var u=Rt(n),p=i.layout;if("WrappedTopic"===u)return ji.a.createElement(vu,{value:o,style:i});var f=i[p+"s"],d=[];return d="Image"===u?ji.a.createElement(Ks,{images:o.map(function(e){return{thumbnail:e,origin:Object(zi.a)(e,"r")}}),max:8,onClickPlus:function(){return location.href="/topic/"+l+"/images"}}):o.map(function(e,t){return ji.a.createElement(wu,Eu({key:It(e||t),target:{type:u,value:e},preset:c},f&&{style:{flex:"0 0 "+1/f*100+"%"}}))}),ji.a.createElement("div",Eu({},s,{className:oc()("TopicCommonArray",{"TopicCommonArray--topic":"Topic"===u,"TopicCommonArray--image":"Image"===u,"TopicCommonArray--primary":"primary"===c})}),d)}}]),t}(Ti.Component),_u=Cu,ku=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tu=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ju=(pa=Object(Dc.a)())(fa=function(e){function t(){return Dt(this,t),At(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Mt(t,e),Tu(t,[{key:"render",value:function(){var e=this.props,t=e.target,n=e.target.value,r=e.topicId;return n?t.type.includes("Array")?ji.a.createElement(_u,ku({},this.props,{topicId:r})):ji.a.createElement(wu,this.props):null}}]),t}(Ti.Component))||fa,Su=ju,Pu=n(2795),xu=n.n(Pu),Nu=(n(2796),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Ru={sogou:"搜狗百科"},Iu=function(e){var t=e.target,n=t.value;return ji.a.createElement("div",null,n.map(function(e){var t=e.target.value;return!t||Array.isArray(t)&&0===t.length?null:ji.a.createElement("div",{key:e.name,className:"TopicCommonIntroTable-item"},ji.a.createElement("div",{className:"TopicCommonIntroTable-name"},e.name),ji.a.createElement("div",{className:"TopicCommonIntroTable-value"},ji.a.createElement(Su,{target:e.target,preset:"primary"})))}))},Du=Object(Si.withRouter)(da=function(e){function t(){return Lt(this,t),Ut(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Bt(t,e),Nu(t,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.item,r=n.copyright;r=void 0===r?{}:r;var o=r.dataSource,a=r.sourceLink,i=n.references,c=void 0===i?[]:i,l=e.params.id;if(!t||!t.modules)return null;var s=t.modules.filter(function(e){var t=e.target;return t&&t.value});if(!s.length)return null;var u="n_wiki_zhihu"===t.category;return ji.a.createElement(Ii.d,null,s.map(function(e,t){return ji.a.createElement(gs,{key:e.name+t,title:u?null:e.name},"Table"===e.target.type?ji.a.createElement(Iu,{target:e.target}):ji.a.createElement(Su,{target:e.target,topicId:l,preset:"primary",isZhihuWiki:u}))}),Array.isArray(c)&&c.length>0&&ji.a.createElement("div",{className:"ReferenceMeta"},ji.a.createElement("h2",null,"参考文献"),ji.a.createElement("ol",null,c.map(function(e){var t=e.text,n=e.link;return t||n?ji.a.createElement("li",{key:t+n},n?ji.a.createElement("a",{className:"ReferenceMeta-link",href:n},t||n):ji.a.createElement("span",{className:"ReferenceMeta-text"},t)):null}))),!u&&Ru[o]&&ji.a.createElement("div",{className:"CopyRightMeta"},ji.a.createElement("div",{className:"CopyRightInfo"},ji.a.createElement("img",{src:xu.a}),ji.a.createElement("p",null,"数据由",Ru[o],"提供")),ji.a.createElement("a",{className:"CopyRightSource",href:a},"查看百科全文 ",ji.a.createElement(Bi.i,{text:!0,center:!0}))))}}]),t}(Ti.Component))||da,Au=Du,Mu=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Lu=function(e){function t(){return Ft(this,t),Vt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return zt(t,e),Mu(t,[{key:"render",value:function(){var e=this.props.topic.introduction;return ji.a.createElement(Ii.d,null,ji.a.createElement(gs,{title:"简介"},ji.a.createElement(Es.a,{className:"OldTopicIntro-intro TopicMovieIntro-sectionDrama",html:e})))}}]),t}(Ti.Component),Uu=Lu,Bu=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Fu=(ha=Object(Ni.connect)(function(e,t){var n=t.params;return{topic:Object(sc.O)(e,{id:n.id}),item:Object(sc.K)(e,{id:n.id})}},{loadIntro:sc.j}),Object(Si.withRouter)(ma=ha((va=ba=function(e){function t(){return qt(this,t),Ht(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Wt(t,e),Bu(t,[{key:"componentDidMount",value:function(){this.props.topic&&this.nextTopicReady()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.topic,n=e.topic;n&&(t||{}).id!==n.id&&this.nextTopic(e)}},{key:"nextTopicReady",value:function(e){var t=e||this.props,n=t.topic,r=t.item,o=t.loadIntro,a=t.params.id;n.meta&&void 0===r&&o(a)}},{key:"render",value:function(){var e=this.props,t=e.item,n=e.topic,r="topic"===n.type?ji.a.createElement(Uu,this.props):null;if(!t)return r;switch(t.category){case"variety_show":case"tv":case"movie":return ji.a.createElement(tu,this.props);case"book":return ji.a.createElement(lu,this.props);case"game":return ji.a.createElement(fu,this.props);default:return t.category&&t.category.startsWith("n_")?ji.a.createElement(Au,this.props):null}}}]),t}(Ti.Component),ba.fetchData=function(e){var t=e.params.id;return function(e){return e(Object(sc.j)(t)).then(function(e){if(e&&e.payload&&"topic"===e.payload.category){var n=new Error;throw n.status=302,n.redirect="/topic/"+t,n}return e})}},ma=va))||ma)||ma),Vu=Fu,zu=n(279),qu=n(1325),Hu=n(1400),Wu=n(1433),Gu=n(1302),Xu=(n(2797),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),Yu=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ku=Object(Gu.e)((wa=ga=function(e){function t(){var e,n,r,o;Gt(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=Xt(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleWriteAnswer=!1,o=n,Xt(r,o)}return Yt(t,e),Yu(t,[{key:"renderContent",value:function(){var e=this.props,t=e.item.target,n=e.showLabelProps;switch(t.type){case"answer":return ji.a.createElement(qu.a,Xu({preset:"plain",answer:t},n,{lessExcerpt:!0}));case"article":return ji.a.createElement(Hu.a,Xu({preset:"plain",article:t},n,{lessExcerpt:!0}));case"question":return ji.a.createElement(Wu.a,{preset:qi.c.interactive,question:t,action:ji.a.createElement(ac.a,{color:"blue",to:"/question/"+t.id+"#write_answer",target:"_blank",icon:Bi.Q,label:"写回答","data-za-detail-view-name":"Answer"}),isConcise:!0});default:return null}}},{key:"renderSource",value:function(){var e=this.props.item.sourceTopic;return e&&ji.a.createElement("div",{className:"TopicQuestion-source"},"来自子话题：",ji.a.createElement(dl.a,{topic:e}))}},{key:"render",value:function(){return ji.a.createElement(wl.a,{className:"TopicFeedItem"},this.renderSource(),this.renderContent())}}]),t}(Ti.Component),ga.contextTypes={authRequired:Gi.a.func},ya=wa))||ya,Qu=Ku,Zu=(n(2798),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Ju=(Ea=Object(as.a)({module:"ContentList"}))(Oa=function(e){function t(){return Kt(this,t),Qt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Zt(t,e),Zu(t,[{key:"render",value:function(){var e=this.props,t=e.isFetching,n=void 0!==t&&t,r=e.isDrained,o=void 0!==r&&r,a=e.items,i=void 0===a?[]:a,c=e.onLoad;e.header;return ji.a.createElement(Ii.d,null,!i.length&&o?ji.a.createElement("div",{className:"TopicFeedList-empty"},ji.a.createElement(zu.a,{className:"TopicFeedList-empty",entityType:"activities",placeholder:"暂时还没有内容"})):ji.a.createElement(wl.b,null,!1,ji.a.createElement(El.b,{isLoading:n,isDrained:o,onLoad:c,placeholder:ji.a.createElement(wl.a,null,ji.a.createElement(El.a,null)),threshold:600},i.map(function(e){return e.target?ji.a.createElement(Qu,{key:e.target.id,item:e}):null}))))}}]),t}(Ti.Component))||Oa,$u=Ju,ep=n(1491),tp=(n(2799),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),np=(Ca=Object(Dc.a)())(_a=function(e){function t(){var e,n,r,o;Jt(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=$t(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={expanded:!1},r.handleClick=function(){return r.setState({expanded:!r.state.expanded})},o=n,$t(r,o)}return en(t,e),tp(t,[{key:"render",value:function(){var e=this.props.item||{},t=e.title,n=e.data;if(!n||!n.length)return null;var r=this.state.expanded,o=!r&&n.length>2,a=o?n.slice(0,2):n;return ji.a.createElement(Ii.d,null,t&&ji.a.createElement(Ii.b,null,t),a.map(function(e,t){return ji.a.createElement(nn,{key:t,item:e})}),o&&ji.a.createElement(Fi.c,{className:"TopicCreatorModule-more",onClick:this.handleClick},r?"收起":"查看更多"))}}]),t}(Ti.Component))||_a,rp=np,op=(n(2800),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),ap=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ip=(ka=Object(Dc.a)())(Ta=function(e){function t(){return on(this,t),an(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return cn(t,e),ap(t,[{key:"render",value:function(){var e=this.props,t=e.topic,n=e.topic,r=n.meta,o=n.id,a=e.intro;if(!r)return null;var i=void 0,c=a.content.meta,l=c.category,s=c.content;switch(l){case"variety_show":case"tv":case"movie":var u=s.drama,p=s.celebrities,f=(p||[]).map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.role,n=e.list;return n&&n.map(function(e){return op({},e,{role:t})})}).reduce(function(e,t){return[].concat(rn(e),rn(t||[]))},[]),d=op({},u&&{"剧情概要":u},f.length&&{"影人":f.map(function(e){return e.name+("导演"===e.role?"（导演）":"")}).join(" / ")});i=Object.keys(d).filter(function(e){return Boolean(d[e])}).map(function(e){return ji.a.createElement("p",{className:"TopicHot-introItem",key:e},ji.a.createElement("b",null,e,"："),d[e])});break;case"book":var h=s.summary,m=s.authors,b=((m||[]).slice(0,1)||{}).abstract,v=op({},h&&{"书籍介绍":ji.a.createElement(Es.a,{html:h,tag:"span"})},b&&{"作者简介":b});i=Object.keys(v).filter(function(e){return Boolean(v[e])}).map(function(e){return ji.a.createElement("p",{className:"TopicHot-introItem",key:e},ji.a.createElement("b",null,e,"："),v[e])});break;default:i=r.summary&&ji.a.createElement("p",{className:"TopicHot-introItem",dangerouslySetInnerHTML:{__html:r.summary}})}var y=((s||{}).screenshotsCollection||[]).filter(Boolean),g=((s||{}).photos||[]).filter(function(e){return e&&e.olonk&&/zhimg\.com/.test(e.olonk)}),w=[].concat(rn(y),rn(g.map(function(e){return e.olonk}))).map(function(e){return{thumbnail:e,origin:Object(zi.a)(e,"r")}}),E=Boolean(w&&w.length)&&ji.a.createElement("div",null,ji.a.createElement("div",null,ji.a.createElement("b",null,"图片"),ji.a.createElement("span",{className:"TopicHotIntroItem-imagesLength"},w.length)),ji.a.createElement("div",{className:"TopicHotIntroItem-images"},ji.a.createElement(Ks,{max:8,images:w,onClickPlus:function(){return location.href="/topic/"+o+"/images"}})));return i||E?ji.a.createElement(Ii.d,null,ji.a.createElement(Ii.c,null,i&&ji.a.createElement("div",{className:"TopicHotIntroItem-item"},i,ji.a.createElement(ac.a,{preset:"link",to:"/topic/"+t.id+"/intro"},"查看更多简介")),E&&ji.a.createElement("div",{className:"TopicHotIntroItem-item"},E))):null}}]),t}(Ti.Component))||Ta,cp=ip,lp=(n(2801),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),sp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},up={hot:{load:sc.h,selector:sc.I},newest:{load:sc.n,selector:sc.L}},pp=(ja=Object(Ni.connect)(function(e,t){var n=t.route,r=t.params;return sp({topic:Object(sc.O)(e,{id:r.id}),intro:Object(sc.K)(e,{id:r.id})},fn(n.path,e,{id:r.id}))},{load:pn,loadIntro:sc.j}))((xa=Pa=function(e){function t(){var e,n,r,o;ln(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=sn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleLoad=function(e){var t=e||r.props,n=t.load,o=t.params.id,a=t.route.path;t.items.length<10?n(a,o,{limit:10}):n(a,o)},o=n,sn(r,o)}return un(t,e),lp(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.params.id,n=e.intro,r=e.topic,o=e.loadIntro;r.meta&&!n&&o(t)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.params.id,r=t.route.path;n===e.params.id&&r===e.route.path||this.handleLoad(e)}},{key:"render",value:function(){var e=this.props,t=e.isDrained,n=e.isFetching,r=e.items,o=e.topic,a=e.route.path,i=e.stickyModule,c=e.intro,l=o.id,s=o.meta,u=ji.a.createElement(wl.a,{className:"TopicFeedList-header"},ji.a.createElement("div",{className:"TopicFeedList-sort"},("hot"===a?"热门":"时间")+"排序"),ji.a.createElement(Si.Link,{className:"TopicFeedList-sortSwitch",to:"/topic/"+l+"/"+("hot"===a?"newest":"hot")},"切换为"+("hot"===a?"时间":"热门")+"排序")),p=ji.a.createElement($u,{header:u,isDrained:t,isFetching:n,items:r,onLoad:this.handleLoad});return"newest"===a?p:ji.a.createElement("div",null,s&&c&&ji.a.createElement(cp,{topic:o,intro:c}),ji.a.createElement(rp,{item:i}),p)}}]),t}(Ti.Component),Pa.fetchData=function(e){var t=e.params.id;return pn(e.route.path,t)},Sa=xa))||Sa,fp=pp,dp=fp,hp=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),mp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bp=(Na=Object(Ni.connect)(function(e,t){return mp({},Object(sc.P)(e,{id:t.params.id}))},{loadTop:sc.p}))((Da=Ia=function(e){function t(){var e,n,r,o;dn(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=hn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),Aa.call(r),o=n,hn(r,o)}return mn(t,e),hp(t,[{key:"render",value:function(){var e=this.props,t=e.isDrained,n=e.isFetching,r=e.items;return ji.a.createElement(Gu.c,{value:{showLabels:!0,showLabelInfo:!1}},ji.a.createElement($u,{isDrained:t,isFetching:n,items:r,onLoad:this.handleLoad}))}}]),t}(Ti.Component),Ia.fetchData=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(sc.p)(t[0].params.id)},Aa=function(){var e=this;this.handleLoad=function(){var t=e.props,n=t.items,r=t.loadTop,o=t.params.id;n.length<10?r(o,{limit:10,offset:n.length}):r(o)}},Ra=Da))||Ra,vp=bp,yp=vp,gp=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),wp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ep={unanswered:{load:sc.w,selector:sc.Q},questions:{load:sc.o,selector:sc.N}},Op=(Ma=Object(Ni.connect)(function(e,t){return wp({},wn(t.route.path,e,{id:t.params.id}))},{load:gn}))((Ba=Ua=function(e){function t(){var e,n,r,o;bn(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=vn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleLoad=function(e){var t=e||r.props,n=t.load,o=t.params.id,a=t.route.path,i=t.items;i.length<20?n(a,o,{limit:20,offset:i.length}):n(a,o)},o=n,vn(r,o)}return yn(t,e),gp(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.params.id,r=t.route.path;n===e.params.id&&r===e.route.path||this.handleLoad(e)}},{key:"render",value:function(){var e=this.props,t=e.isDrained,n=e.isFetching,r=e.items,o=e.params.id,a=e.route.path,i=ji.a.createElement(wl.a,{className:"TopicFeedList-header"},ji.a.createElement("div",{className:"TopicFeedList-sort"},("unanswered"===a?"热门":"全部")+"问题"),ji.a.createElement(Si.Link,{className:"TopicFeedList-sortSwitch",to:"/topic/"+o+"/"+("unanswered"===a?"questions":"unanswered")},"切换为"+("unanswered"===a?"全部":"热门")+"问题"));return ji.a.createElement($u,{header:i,isDrained:t,isFetching:n,items:r,onLoad:this.handleLoad})}}]),t}(Ti.Component),Ua.fetchData=function(e){var t=e.params.id;return gn(e.route.path,t)},La=Ba))||La,Cp=Op,_p=Cp,kp=n(1684),Tp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jp=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Sp=function(e){function t(){var e,n,r,o;En(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=On(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleChange=function(e){r.props.onChange(e.target.value)},o=n,On(r,o)}return Cn(t,e),jp(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.placeholder,r=e.max,o=e.rich,a=e.className,i={value:t,onChange:this.handleChange,placeholder:n,autoFocus:!0,className:a};return ji.a.createElement("div",null,o?ji.a.createElement(Ki.a,Tp({rows:3},i)):ji.a.createElement(Xi.a,Tp({spread:!0},i)),r&&ji.a.createElement(Yi.a,{current:Math.round(Object(Qi.b)(t)/2),max:r}))}}]),t}(Ti.Component),Pp=Sp,xp=(n(2802),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Np=(Va=Fa=function(e){function t(){var e,n,r,o;_n(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=kn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleChange=function(e){var t=r.inputEl.files[0],n=r.props,o=n.onError,a=n.max,i=n.onChange;if(t.size>1024*a*1024)return o(new Error("请上传小于 "+a+"M 的图片。")),void r.resetUpload();i(e),r.resetUpload()},r.resetUpload=function(){r.inputEl.value=""},r.handleRef=function(e){r.inputEl=e},r.handleClick=function(){return r.inputEl.click()},o=n,kn(r,o)}return Tn(t,e),xp(t,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.spread,r=e.masked,o=e.url,a=e.children,i=e.className,c=e.placeholder,l=t||Bi._43;return ji.a.createElement("div",{className:oc()("ImageUploader",i,{"ImageUploader--spread":n})},a,o&&ji.a.createElement(Hi.a,{className:"ImageUploader-image",src:o}),ji.a.createElement("div",{className:oc()("ImageUploader-main",{"is-masked":r}),onClick:this.handleClick},ji.a.createElement(l,{size:36,className:"ImageUploader-icon"}),c&&ji.a.createElement("div",{className:"ImageUploader-placeholder"},c)),ji.a.createElement("input",{type:"file",accept:"image/png,image/jpeg",style:{display:"none"},ref:this.handleRef,onChange:this.handleChange}))}}]),t}(Ti.Component),Fa.propTypes={url:Gi.a.string,masked:Gi.a.bool,spread:Gi.a.bool,placeholder:Gi.a.string,max:Gi.a.number,onError:Gi.a.func,onChange:Gi.a.func},Fa.defaultProps={masked:!0,placeholder:"添加图片",max:Bl.G},Va),Rp=Np,Ip=(n(2803),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Dp=(za=Object(Ni.connect)(function(e){return{uploadId:"topic_meta_image",upload:Object(yc.c)(e,{id:"topic_meta_image"})}},{uploadImage:yc.b,showNotification:wc.g}))(qa=function(e){function t(){var e,n,r,o;jn(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=Sn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleChange=function(e){var t=r.props,n=t.uploadImage,o=t.uploadId,a=t.onChange,i=n(e.target.files[0],o);i.then&&i.then(function(){return a(r.props.upload.url,r.props.upload.id)})},r.handleError=function(e){r.props.showNotification(e.message,"red")},o=n,Sn(r,o)}return Pn(t,e),Ip(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.isArray;return ji.a.createElement(Rp,{className:oc()("TopicEditFieldImage",{"TopicEditFieldImage--isArray":n}),url:t,masked:!0,onChange:this.handleChange,placeholder:null,onError:this.handleError})}}]),t}(Ti.Component))||qa,Ap=Dp,Mp=n(183),Lp=n(310),Up=n(1533),Bp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fp=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Vp=(Ha=Object(Ni.connect)(function(e){return{currentUser:Object(Ec.c)(e)}},{createTopic:sc.c,loadCurrentUser:Ec.j}),Wa=Object(Oc.a)({load:function(e){return e.loadCurrentUser("can_edit_topic")},shouldLoad:function(e){var t=e.currentUser;return t&&void 0===t.canEditTopic}}),Ha(Ga=Wa(Ga=function(e){function t(){var e,n,r,o;Rn(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=In(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={value:(r.props.value||{}).name,items:[]},r.handleChange=function(e){r.setState({value:e});var t=r.props,n=t.isArray,o=t.onChange;n||o({name:e});var a=r.props.value||[],i=Array.isArray(a)?a:[a];Object(Mp.c)(e,i.map(function(e){return e.name}),{topic_filter:1}).then(function(t){t=Object(Up.a)(t);var n=r.props.currentUser;if(n&&n.canEditTopic){var o=e;t=t.find(function(e){return e.name===o})?t:[].concat(Nn(t),[{urlToken:"topic",name:"创建 "+o+" 话题",token:o}])}r.setState({items:t})})},r.handleSelect=function(e,t){var n=r.props,o=n.onChange,a=n.isArray,i=n.createTopic;if(An(t)){var c=i(t.token);Object(Lp.a)(c)&&o&&c.then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.payload;o&&o(Bp({},n,{id:t.id||t.urlToken}))})}else o&&o(Bp({},t,{id:t.id||t.urlToken}));a&&r.setState({value:""})},r.handleKeyDown=function(e){if(13===e.keyCode){e.preventDefault();var t=r.props,n=t.onChange,o=t.isArray,a=r.state.value;n&&n({name:a}),o&&r.setState({value:""})}},r.createTopic=function(e){(0,r.props.createTopic)(e).then(function(t){var n=t.payload,o=n.id,a=n.avatarUrl,i=r.props,c=i.value,l=i.onChange;l&&l(c.map(function(t){return t.name===e?{urlToken:o,name:e,avatarUrl:a}:t}))}).catch(function(){var t=r.props,n=t.value,o=t.onChange;o&&o(n.filter(function(t){return t.name!==e}))})},o=n,In(r,o)}return Dn(t,e),Fp(t,[{key:"render",value:function(){var e=this.state,t=e.value,n=e.items,r=this.props,o=r.placeholder,a=xn(r,["placeholder"]);return ji.a.createElement(cc.b,Bp({},a,{value:t,onChange:this.handleChange,items:n,autoSelect:!1,onSelect:this.handleSelect,inputProps:{placeholder:o,autoFocus:!0,spread:!0,onKeyDown:this.handleKeyDown}}))}}]),t}(Ti.Component))||Ga)||Ga),zp=Vp,qp=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Hp=function(e){function t(){var e,n,r,o;Mn(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=Ln(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleChange=function(e){r.props.onChange(Math.round(new Date(e.target.value).valueOf()/1e3))},o=n,Ln(r,o)}return Un(t,e),qp(t,[{key:"render",value:function(){return ji.a.createElement(Xi.a,{className:"TopicFieldDateTime",type:"date",value:Object(su.c)(this.props.value),onChange:this.handleChange})}}]),t}(Ti.Component),Wp=Hp,Gp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xp=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Yp=function(e){function t(){var e,n,r,o;Fn(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=Vn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleChange=function(e){var t=r.props,n=t.target;(0,t.onChange)(n?Gp({},n,{value:e}):e)},o=n,Vn(r,o)}return zn(t,e),Xp(t,[{key:"render",value:function(){var e=this.props,t=e.target,n=Bn(e,["target"]),r=this.props.type||t&&t.type,o=Gp({},n,{value:t&&t.value,onChange:this.handleChange});switch(r){case"String":return ji.a.createElement(Pp,o);case"Image":return ji.a.createElement(Ap,o);case"Topic":return ji.a.createElement(zp,o);case"Datetime":return ji.a.createElement(Wp,o);default:return null}}}]),t}(Ti.Component),Kp=Yp,Qp=(n(2804),function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()),Zp=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Jp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$p=Object(kp.a)(function(e){return e.type||"dragdrop"})(function(e){var t=e.children,n=e.className,r=e.isDragging,o=e.connectDragSource,a=e.connectDropTarget,i=Xn(e,["children","className","isDragging","connectDragSource","connectDropTarget"]);return ji.a.createElement("div",Jp({className:oc()(n,{"is-dragging":r}),ref:function(e){o(e),a(e)}},i),t)}),ef=function(e){var t=e.target,n=e.onRemove,r=e.type||t.type,o="Image"===r;return ji.a.createElement($p,{className:oc()("TopicEditArray-item",o?"TopicEditArray-item--block":"TopicEditArray-item--line")},ji.a.createElement(Su,{target:t}),n&&ji.a.createElement(Fi.c,{className:"TopicEditArray-closeButton",preset:"plain",onClick:n},ji.a.createElement(Bi.z,{center:!0,width:18,height:18,fill:"#d3d3d3"})))},tf=Object(kp.b)(Xa=function(e){function t(){var e,n,r,o;Hn(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=Wn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleAdd=function(e,t){var n=r.props,o=n.target,a=n.target.value,i=n.onChange,c=[].concat(qn(a||[]));c.find(function(t){return t===e||e.id&&t.id===e.id||e.name&&t.name===e.name})||i(Jp({},o,{value:[e].concat(qn(c)),rawValue:[t||e].concat(qn(c))}))},r.handleRemove=function(e,t){var n=r.props,o=n.target,a=n.target.value,i=n.onChange,c=[].concat(qn(a||[]));c.splice(t,1),i(Jp({},o,{value:c}))},o=n,Wn(r,o)}return Gn(t,e),Zp(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.target,r=n.type,o=n.value,a=t.placeholder,i=Yn(r),c=(o||[]).map(function(t,n){return ji.a.createElement(ef,{key:t.id||t.name||t,target:{type:i,value:t},onRemove:function(){return e.handleRemove(t,n)}})}),l="Image"===i?[_s,{column:6,margin:8}]:["div"],s=Qp(l,2),u=s[0],p=s[1];return ji.a.createElement(u,Jp({className:oc()("TopicEditArray",{"TopicEditArray--topic":"Topic"===i})},p),ji.a.createElement(Kp,{className:"TopicEditArray-input",type:i,placeholder:a,onChange:this.handleAdd,isArray:!0}),c)}}]),t}(Ti.Component))||Xa,nf=tf,rf=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),of=function(e){function t(){return Kn(this,t),Qn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Zn(t,e),rf(t,[{key:"render",value:function(){return this.props.target.type.includes("Array")?ji.a.createElement(nf,this.props):ji.a.createElement(Kp,this.props)}}]),t}(Ti.Component),af=of,cf=(n(2805),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),lf=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),sf=function(e){function t(){var e,n,r,o;$n(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=er(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={isEditing:!1,value:(r.props.target||{}).value,rawValue:(r.props.target||{}).value},r.isDisabled=function(){var e=r.state.rawValue;return Boolean(!e||Array.isArray(e)&&!e.length)},r.handleBeforUnload=function(e){if(r.state.isEditing){return(e||window.event).returnValue="尚未保存，确定离开此页？","尚未保存，确定离开此页？"}},r.handleToggleEdit=function(){r.setState({isEditing:!r.state.isEditing})},r.handleChange=function(e){r.setState({value:e.value,rawValue:e.rawValue||e.value})},r.handleSubmit=function(e){if(e.preventDefault(),!r.isDisabled()){var t=r.props,n=t.target.name,o=t.onSubmit,a=r.state.rawValue,i=o(Jn({},n,a));i.then&&i.then(function(){return r.setState({isEditing:!1})})}},r.handleCreateChange=function(e){var t=r.props,n=t.onChange,o=t.name,a=t.target;n({name:o,target:cf({},a,e)})},o=n,er(r,o)}return tr(t,e),lf(t,[{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",this.handleBeforUnload)}},{key:"render",value:function(){var e=this.props,t=e.target,n=e.name,r=e.onSubmit,o=e.topicId,a=this.state,i=a.isEditing,c=a.value;return r?ji.a.createElement("div",{className:"TopicEditItem"},i?ji.a.createElement("form",{onSubmit:this.handleSubmit,noValidate:!0},ji.a.createElement("div",{className:"TopicEditItem-formContent"},ji.a.createElement(af,{placeholder:"添加"+n,target:cf({},t,{value:c}),onChange:this.handleChange}),ji.a.createElement("div",{className:"TopicEditItem-formActions"},ji.a.createElement(Fi.c,{preset:"primary",color:"blue",type:"submit",disabled:this.isDisabled()},"保存"),ji.a.createElement(Fi.c,{onClick:this.handleToggleEdit},"取消")))):ji.a.createElement("div",{className:"TopicEditItem-displayContent"},ji.a.createElement(Su,{topicId:o,target:t}),ji.a.createElement("div",{className:"TopicEditItem-displayActions"},ji.a.createElement(Fi.c,{preset:"link",onClick:this.handleToggleEdit,icon:Bi.Q,label:"修改"})))):ji.a.createElement("div",{className:"TopicEditItem"},ji.a.createElement(af,{placeholder:"添加"+n,target:t,onChange:this.handleCreateChange}))}}]),t}(Ti.Component),uf=sf,pf=(n(2806),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),ff=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),df=function(e){function t(){return rr(this,t),or(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return ar(t,e),ff(t,[{key:"render",value:function(){var e=this.props,t=e.target.value,n=nr(e,["target"]);return ji.a.createElement("div",{className:"TopicEditTable"},t.map(function(e){var t=e.target,r=e.name;return ji.a.createElement("div",{key:r,className:"TopicEditTable-item"},ji.a.createElement("div",{className:"TopicEditTable-name"},r),ji.a.createElement("div",{className:"TopicEditTable-value"},ji.a.createElement(uf,pf({},n,{target:t,name:r}))))}))}}]),t}(Ti.Component),hf=df,mf=(n(2807),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),bf=function(e){function t(){return ir(this,t),cr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return lr(t,e),mf(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.component,r=void 0===n?"div":n,o=e.children;return ji.a.createElement(r,{className:"TopicEditModuleUI"},ji.a.createElement("div",{className:"TopicEditModuleUI-title"},t),o)}}]),t}(Ti.Component),vf=bf,yf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gf=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),wf=function(e){function t(){return ur(this,t),pr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return fr(t,e),gf(t,[{key:"renderContent",value:function(){var e=this.props,t=e.module.target,n=e.module,r=e.topicId,o=sr(e,["module","module","topicId"]);return"Table"===t.type?ji.a.createElement(hf,yf({},n,o)):Array.isArray(t)?ji.a.createElement(hf,yf({target:{value:t}},o)):ji.a.createElement(uf,yf({topicId:r},n,o))}},{key:"render",value:function(){var e=this.props.module.name;return ji.a.createElement(vf,{name:e},ji.a.createElement("div",{className:"TopicEditMoudle-content"},this.renderContent()))}}]),t}(Ti.Component),Ef=wf,Of=(n(2808),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),Cf=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_f=(Ya=Object(Ni.connect)(function(e,t){var n=t.topic;if(!n)return{};var r="topic_"+n.id+"_meta";return{uploadId:r,image:Object(yc.c)(e,{id:r})}},{uploadImage:yc.b,showNotification:wc.g}))(Ka=function(e){function t(){var e,n,r,o;hr(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=mr(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleUpload=function(e){var t=r.props,n=t.target,o=t.uploadImage,a=t.uploadId,i=t.onChange;o(e.target.files[0],a).then(function(){var e=r.props.image;i({target:Of({},n,{value:e.url,rawValue:e.id})})})},r.handleError=function(e){r.props.showNotification(e.message,"red")},o=n,mr(r,o)}return br(t,e),Cf(t,[{key:"render",value:function(){var e=this.props.target,t=e.value,n=e.style,r=n||{},o=r.imageTemplate,a=["rectangle","square"][o];return ji.a.createElement("div",{className:oc()("TopicEditAvatar",dr({},"TopicEditAvatar--"+a,a))},ji.a.createElement(Rp,{spread:!0,masked:!0,url:Object(zi.a)(t,"mdpi"),onChange:this.handleUpload,onError:this.handleError,placeholder:"修改图片",icon:Bi.v}))}}]),t}(Ti.Component))||Ka,kf=_f,Tf=(n(2809),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),jf=(Za=Qa=function(e){function t(){return vr(this,t),yr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return gr(t,e),Tf(t,[{key:"render",value:function(){var e=this.props,n=e.title,r=e.id,o=e.modules,a=e.side,i=e.onSubmit,c=i?"form":"div";return ji.a.createElement(Ii.d,{className:"TopicEdit"},ji.a.createElement(c,{onSubmit:i},ji.a.createElement(t.Header,{id:r,title:n}),ji.a.createElement("div",{className:"TopicEdit-main"},ji.a.createElement("div",{className:"TopicEdit-modules"},o),ji.a.createElement("div",{className:"TopicEdit-side"},a)),i&&ji.a.createElement(Fi.c,{className:"TopicEdit-submit",preset:"primary",color:"blue",type:"submit"},"提交")))}}]),t}(Ti.Component),Qa.Header=function(e){var t=e.title,n=e.id;return ji.a.createElement("div",{className:"TopicEdit-header"},ji.a.createElement("div",{className:"TopicEdit-headerTitle"},t),ji.a.createElement("div",null,ji.a.createElement(ac.a,{preset:"plain",to:"/topic/"+n},"返回话题主页",ji.a.createElement(Bi.i,{center:!0}))))},Za),Sf=jf,Pf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xf=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Nf=(Ja=Object(Ni.connect)(function(e,t){var n=t.params.id;return{topic:Object(sc.O)(e,{id:n}),meta:Object(sc.z)(e,{id:n})}},{loadFullTopic:sc.g,loadMeta:sc.k,updateMeta:sc.T}),Object(Si.withRouter)($a=Ja((ti=ei=function(e){function t(){var e,n,r,o;Er(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=Or(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleAvatarChange=function(e){var t=e.target,n=t.rawValue,o=t.value;r.handleSubmit({avatar:n||o})},r.handleSubmit=function(e){var t=r.props,n=t.params.id;return(0,t.updateMeta)(n,e)},o=n,Or(r,o)}return Cr(t,e),xf(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.params.id,n=e.topic,r=e.meta,o=e.loadFullTopic,a=e.loadMeta;n||o(t),r||a(t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.params.id,r=t.meta,o=void 0===r?[]:r,a=t.topic,i=o.reduce(function(e,t){return"avatar"===t.target.name?Pf({},e,{avatar:t}):Pf({},e,{modules:[].concat(wr(e.modules),[t])})},{modules:[]}),c=i.modules,l=i.avatar;return ji.a.createElement(Sf,{id:n,title:"编辑"+(Fl[(a.meta||{}).category]||"")+"信息",modules:c.map(function(t,r){return ji.a.createElement(Ef,{key:r,topicId:n,module:t,onSubmit:e.handleSubmit})}),side:l&&ji.a.createElement(kf,Pf({topic:a,onChange:this.handleAvatarChange},l))})}}]),t}(Ti.Component),ei.fetchData=function(e){var t=e.params.id;return function(e){return Promise.all([e(Object(sc.g)(t)),e(Object(sc.k)(t)).then(function(e){if(e&&e.payload&&"topic"===e.payload.category){var n=new Error;throw n.status=302,n.redirect="/topic/"+t,n}return e})])}},$a=ti))||$a)||$a),Rf=Nf,If=Rf,Df=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Af=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Mf=(ni=Object(Ni.connect)(function(e,t){var n=t.params;return{category:Object(sc.y)(e,n)}},{loadMetaCategory:sc.m,createMeta:sc.b}))((ai=oi=function(e){function t(){var e,n,r,o;Tr(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=jr(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={value:{}},r.handleBeforUnload=function(e){if(Object.keys(r.state.value).length){return(e||window.event).returnValue="尚未保存，确定离开此页？","尚未保存，确定离开此页？"}},r.handleSubmit=function(e){e.preventDefault();var t=r.props,n=t.params,o=n.id,a=n.type,i=t.createMeta,c=r.state.value;i(o,a,Object.keys(c).reduce(function(e,t){var n=c[t],r=n.value,o=n.rawValue;return Df({},e,kr({},t,o||r))},{}))},r.handleChange=function(e){var t=r.state.value,n=e.target.name;r.setState({value:Df({},t,kr({},n,e.target))})},o=n,jr(r,o)}return Sr(t,e),Af(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.params.type,n=e.category,r=e.loadMetaCategory;n||r(t),window.addEventListener("beforeunload",this.handleBeforUnload)}},{key:"render",value:function(){var e=this,t=this.props,n=t.category,r=t.params,o=r.id,a=r.type,i=this.state.value,c=(n||[]).reduce(function(e,t){return"avatar"===t.target.name?Df({},e,{avatar:t}):Df({},e,{modules:[].concat(_r(e.modules),[t])})},{modules:[]}),l=c.modules,s=c.avatar;return ji.a.createElement(Sf,{id:o,title:"编辑为"+(Fl[a]||""),modules:l.map(function(t,n){var r=t.target,o=t.target.name,a=i[o]?i[o].value:r.value,c="Table"===r.type?r.value.map(function(e){return Df({},e,{target:Df({},e.target,i[e.target.name]&&{value:i[e.target.name].value})})}):a;return ji.a.createElement(Ef,{key:n,module:Df({},t,{target:Df({},r,{value:c})}),onChange:e.handleChange})}),side:s&&ji.a.createElement(kf,Df({onChange:this.handleChange},s)),onSubmit:this.handleSubmit})}}]),t}(Ti.Component),oi.fetchData=function(e){var t=e.params.type;return Object(sc.m)(t)},ri=ai))||ri,Lf=Mf,Uf=(n(2810),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Bf=(ii=Object(Ni.connect)(function(e,t){var n=Object(sc.K)(e,t.params);return{topicData:Object(sc.O)(e,t.params),introData:n}},{loadIntro:sc.j,loadTopic:sc.q}))((si=li=function(e){function t(){return xr(this,t),Nr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Rr(t,e),Uf(t,[{key:"render",value:function(){var e=this.props,t=e.introData,n=t.content.meta.content;n=void 0===n?{}:n;var r=n.screenshotsCollection,o=void 0===r?[]:r,a=n.photos,i=void 0===a?[]:a,c=t.modules,l=void 0===c?[]:c,s=e.topicData,u=s.avatarUrl,p=s.name,f=s.followersCount,d=s.bestAnswersCount,h=e.params.id,m=i.filter(function(e){return e&&e.olonk&&/zhimg\.com/.test(e.olonk)}).map(function(e){return e.olonk}),b=o,v=l.find(function(e){return"Array<Image>"===e.target.type})||{},y=v.target;y=void 0===y?{}:y;var g=y.value,w=void 0===g?[]:g,E=[].concat(Pr(m),Pr(b),Pr(w)).map(function(e){return{thumbnail:e,origin:Object(zi.a)(e,"r")}});return ji.a.createElement("div",{className:"TopicImage-container"},ji.a.createElement(xi.a,{title:p}),ji.a.createElement("div",{className:"TopicImageMain-container"},ji.a.createElement(Ii.d,{className:"TopicImageMain-backBar"},ji.a.createElement("a",{href:"/topic/"+h+"/intro"},"返回话题简介")),ji.a.createElement(Ii.d,{className:"TopicImageMain-imageListWrapper"},ji.a.createElement("b",null,"图片"),ji.a.createElement("span",{className:"TopicHotIntroItem-imagesLength"},E.length),ji.a.createElement("div",{className:"TopicImageMain-imageList"},ji.a.createElement(Ks,{max:E.length,images:E})))),ji.a.createElement(el.a,{className:"TopicImageSidebar-container",offset:Bl.f+10},ji.a.createElement(Ii.d,null,ji.a.createElement(Ii.a,null,"所属话题"),ji.a.createElement("a",{href:"/topic/"+h,className:"TopicImageSidebar-content"},ji.a.createElement("img",{src:Object(zi.a)(u,"xl"),height:40}),ji.a.createElement("div",null,ji.a.createElement("div",{className:"TopicImageSidebar-contentTitle"},p),ji.a.createElement("div",{className:"TopicImageSidebar-contentStatus"},Object(cl.b)(f)+" 关注者 · "+Object(cl.b)(d)+" 个精华回答")))),ji.a.createElement($c.a,null)))}}]),t}(Ti.Component),li.fetchData=function(e){var t=e.params.id;return function(e){return Promise.all([e(Object(sc.q)(t)),e(Object(sc.j)(t))])}},ci=si))||ci,Ff=n(81),Vf=n(262),zf=n(1796),qf=n(568),Hf=(n(2811),function(e){var t=e.user,n=t.isOrg,r=t.badge,o=t.avatarUrl,a=e.className,i=e.size;return ji.a.createElement("div",{className:"TopicCreatorWall-avatarWithBadge",style:{width:i,height:i}},ji.a.createElement(Ri.a,{url:o,size:i,round:!0}),ji.a.createElement(qf.a,{isOrg:n,badge:r,noLink:!0,className:oc()("TopicCreatorWall-avatarWithBadgeIcon",a)}))}),Wf=(n(2812),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Gf=function(e){function t(){return Ir(this,t),Dr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ar(t,e),Wf(t,[{key:"render",value:function(){var e=this.props.data,t=e.excerpt,n=e.content,r=e.thumbnail;return ji.a.createElement("div",{className:"TopicCreatorWall-userModalContentItemExcerpt"},ji.a.createElement("div",{className:"TopicCreatorWall-userModalContentItemExcerptText",dangerouslySetInnerHTML:{__html:t||n}}),r&&ji.a.createElement("div",{className:"TopicCreatorWall-userModalContentItemExcerptImg"},ji.a.createElement("img",{className:"TopicCreatorWall-userModalContentItemExcerptImgItem",src:r}),this.hasVideo&&ji.a.createElement("div",{className:"TopicCreatorWall-userModalContentItemExcerptImgMask"},ji.a.createElement("div",{className:"TopicCreatorWall-userModalContentItemExcerptImgMaskRound"},ji.a.createElement(Bi._42,{size:12,className:"TopicCreatorWall-userModalContentItemExcerptImgMaskIcon"})))))}},{key:"hasVideo",get:function(){var e=this.props.data.thumbnailExtraInfo;return Boolean(e&&"video"===e.type)}}]),t}(ji.a.Component),Xf=(n(2813),function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()),Yf=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Kf=(ui=Object(Ni.connect)(function(e,t){var n=t.creator;return{user:Object(Ff.c)(e,n)}}))((di=fi=function(e){function t(){var e,n,r,o;Mr(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=Lr(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.getUrl=function(e){var t=r.props,n=Xf(t.userTopicData.contentList,1),o=n[0],a=t.topic.id,i=t.user,c=i.urlToken,l=i.isOrg,s="https://www.zhihu.com/"+(l?"org":"people")+"/"+c;return"profile"===e?s:"creation"===e?s+"/creations/"+a:"content"===e?Object(zf.a)(o.type,o.id):void 0},o=n,Lr(r,o)}return Ur(t,e),Yf(t,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose,r=e.userTopicData,o=e.topic,a=e.user;if(!r||!o||!a)return null;var i=o.name,c=r.answerCount,l=r.articleCount,s=r.totalVotes,u=Xf(r.contentList,1),p=u[0],f=a.name,d=a.headline,h=[{name:"回答",key:"answerCount",data:c},{name:"文章",key:"articleCount",data:l},{name:"赞同",key:"totalVotes",data:s}],m=p.question,b=p.title,v=m?m.title:b;return ji.a.createElement(lc.b,{onClose:n,className:"TopicCreatorWall-userModalWrapper"},t&&ji.a.createElement("div",null,ji.a.createElement("a",{className:"TopicCreatorWall-userModalHeader",target:"_blank",href:this.getUrl("profile"),"data-za-detail-view-id":3916},ji.a.createElement(Hf,{user:a,className:"TopicCreatorWall-userModalAvatarIcon",size:60}),ji.a.createElement("div",{className:"TopicCreatorWall-userModalContent"},ji.a.createElement("div",{className:"TopicCreatorWall-userModalName"},f),d&&ji.a.createElement("div",{className:"TopicCreatorWall-userModalHeadline"},ji.a.createElement(Vf.a,{html:d})))),ji.a.createElement("a",{className:"TopicCreatorWall-userModalCountSection",target:"_blank",href:this.getUrl("creation"),"data-za-detail-view-id":3919},ji.a.createElement("div",{className:"TopicCreatorWall-userModalCountSectionTitle"},"在"," 「"+i+"」 ","话题下:"),ji.a.createElement("div",{className:"TopicCreatorWall-userModalCountSectionData"},h.map(function(e){return ji.a.createElement("div",{key:e.key,className:"TopicCreatorWall-userModalCountSectionDataItem"},ji.a.createElement("div",{className:"TopicCreatorWall-userModalCountSectionDataItemTitle"},e.name),ji.a.createElement("div",{className:"TopicCreatorWall-userModalCountSectionDataItemData"},Object(cl.b)(e.data)))}))),ji.a.createElement("a",{className:"TopicCreatorWall-userModalContentList",target:"_blank",href:this.getUrl("content"),"data-za-detail-view-id":3917},ji.a.createElement("div",{className:"TopicCreatorWall-userModalContentListTitle"},"近期优质创作"),ji.a.createElement("div",{className:"TopicCreatorWall-userModalContentItem"},ji.a.createElement("div",{className:"TopicCreatorWall-userModalContentItemTitle"},v),ji.a.createElement(Gf,{data:p}))),ji.a.createElement("a",{className:"TopicCreatorWall-userModalAllCreation",target:"_blank",href:this.getUrl("creation"),"data-za-detail-view-id":3918},"查看此话题下的全部创作",ji.a.createElement(Bi.i,{center:!0})),ji.a.createElement(Li.a,{zaId:3915,id:a.urlToken,type:"people",preset:"primary",isFollowing:a.isFollowing,className:"TopicCreatorWall-userModalFollowButton"})))}}]),t}(ji.a.Component),fi.propTypes={shown:Gi.a.bool.isRequired,userTopicData:Gi.a.object,onClose:Gi.a.func.isRequired,topic:Gi.a.object},pi=di))||pi,Qf=n(2814),Zf=n.n(Qf),Jf=n(180),$f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ed=Object(Ti.createContext)(null),td=Object(Ti.createContext)(function(){}),nd=Object(Ti.createContext)(""),rd=function(e,t){return function(n){return function(r){return ji.a.createElement(e,null,function(e){return ji.a.createElement(n,$f({},r,Br({},t,e)))})}}},od=(n(2818),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),ad=(hi=Object(Ni.connect)(null,{loadTopicCreatorWallUserInfo:gc.s}),mi=Object(as.a)(function(e){return{module:"UserItem",view:{id:3911},content:{member_hash_id:e.user.member.id},trackCardShow:!0}}),bi=rd(td.Consumer,"openModal"),vi=rd(ed.Consumer,"topic"),hi(yi=mi(yi=bi(yi=vi((wi=gi=function(e){function t(){var e,n,r,o;Fr(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=Vr(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={showModal:!1,userTopicData:null},r.handleOpenModal=function(e){var t=r.props,n=t.loadTopicCreatorWallUserInfo,o=t.user.member,a=o.urlToken,i=o.id,c=t.topic.id,l=t.openModal;Di.default.trackEvent(e.target,{id:3914}),n(c,a).then(function(e){var t=e.payload;l({userTopicData:t,creator:{urlToken:a,id:i}})})},o=n,Vr(r,o)}return zr(t,e),od(t,[{key:"render",value:function(){var e=this.props.user,t=e.member,n=t.name,r=t.headline,o=e.member,a=e.isNew,i=e.totalVotes;return ji.a.createElement(Ii.d,{className:"TopicCreatorWall-userCardContainer",onClick:this.handleOpenModal},ji.a.createElement(Hf,{size:80,user:o,className:"TopicCreatorWall-userCardAvatar"}),ji.a.createElement("div",{className:"TopicCreatorWall-userCardName"},n),r&&ji.a.createElement("div",{className:"TopicCreatorWall-userCardHeadline"},ji.a.createElement(Vf.a,{html:r})),ji.a.createElement("div",{className:"TopicCreatorWall-userCardUpVoteCount"},"话题下获得"," "+Object(cl.b)(i)+" ","赞同"),a&&ji.a.createElement("div",{className:"TopicCreatorWall-userCardFirst"},"首次上墙"))}}]),t}(ji.a.Component),gi.propTypes={user:Gi.a.object.isRequired},yi=wi))||yi)||yi)||yi)||yi),id=(n(2819),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),cd=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ld=function(e){function t(){return qr(this,t),Hr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Wr(t,e),cd(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.paging,r=n.isEnd,o=n.loading,a=e.onLoad;if(!t)return null;var i=Array.from(id({},Zf()(t.map(function(e,t){return id({},e,{index:t})}),function(e){return e.index%4}),{length:4}));return ji.a.createElement(El.b,{isDrained:r,isLoading:o,onLoad:a,placeholder:ji.a.createElement(Jf.a,{className:"topicCreatorWall-listPlaceHolder"})},ji.a.createElement("div",{className:"topicCreatorWall-list"},i.map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];return ji.a.createElement("span",{className:"topicCreatorWall-listColumn",key:t},e.map(function(e){return ji.a.createElement(ad,{key:e.member.urlToken,user:e})}))})))}}]),t}(ji.a.Component),sd={weekly:"周",monthly:"月"},ud=(n(2820),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),pd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fd=(Ei=Object(Ni.connect)(function(e,t){var n=t.params.id,r=e.entities,o=e.topic,a=o.creatorWall[n];return{topic:r.topics[n],creatorWallInfo:a,userDataList:a&&(a.items||[]).map(function(e){return pd({},e,{member:r.users[e.member]})})}},{loadCreatorWall:gc.e,loadTopic:gc.p}),Oi=Object(Dc.a)(null),Ei(Ci=Oi((ki=_i=function(e){function t(){var e,n,r,o;Gr(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=Xr(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={modalProps:{onClose:function(){},shown:!1}},r.handleLoad=function(){var e=r.props;(0,e.loadCreatorWall)({id:e.params.id})},r.handleOpenModal=function(e){var t=e.userTopicData,n=e.creator,o=r.props.topic;r.setState({modalProps:{userTopicData:t,creator:n,onClose:r.handleCloseModal,shown:!0,topic:o}})},r.handleCloseModal=function(){r.setState({modalProps:pd({},r.state.modalProps,{shown:!1})})},o=n,Xr(r,o)}return Yr(t,e),ud(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.userDataList,n=e.topic,r=e.loadTopic,o=e.params.id;t&&0!==t.length||this.handleLoad(),n||r(o)}},{key:"render",value:function(){var e=this.props,t=e.creatorWallInfo,n=e.topic,r=e.userDataList,o=this.state.modalProps;if(!n||!t)return null;var a=t.updateFrequency,i=t.paging,c=n.avatarUrl,l=n.name,s=n.followersCount,u=n.questionsCount,p=n.bestAnswerersCount,f=n.id;return ji.a.createElement("div",null,ji.a.createElement(Ii.d,{className:"topicCreatorWall-HeaderWrapper"},ji.a.createElement(xi.a,{title:n.name+" - 话题创作知友墙"}),ji.a.createElement("div",{className:"topicCreatorWall-Header"},ji.a.createElement("div",null,ji.a.createElement("div",{className:"topicCreatorWall-HeaderTitle"},"话题创作知友墙"),ji.a.createElement("div",{className:"topicCreatorWall-HeaderUpdateHint"},a&&"每"+sd[a]+"更新")),ji.a.createElement("div",{className:"topicCreatorWall-TopicInfo"},ji.a.createElement("div",{className:"topicCreatorWall-TopicDescription"},ji.a.createElement("a",{className:"topicCreatorWall-TopicName",href:"/topic/"+f},l+" 话题"),ji.a.createElement("div",{className:"topicCreatorWall-TopicDetail"},Object(cl.a)(s)+" 关注 · "+Object(cl.a)(u)+" 问题 · "+Object(cl.a)(p)+" 精华内容")),ji.a.createElement("a",{href:"/topic/"+f},ji.a.createElement(Ri.a,{url:c,size:48,className:"topicCreatorWall-TopicImg"}))))),ji.a.createElement(nd.Provider,{value:a},ji.a.createElement(ed.Provider,{value:n},ji.a.createElement(td.Provider,{value:this.handleOpenModal},ji.a.createElement(ld,{data:r,paging:i,onLoad:this.handleLoad})))),o.creator&&ji.a.createElement(Kf,o))}}]),t}(Ti.Component),_i.fetchData=function(e){var t=e.params.id,n=e.dispatch;return Promise.all([n(Object(gc.e)({id:t})),n(Object(gc.p)(t))])},Ci=ki))||Ci)||Ci),dd=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.default=ji.a.createElement(Si.Route,null,ji.a.createElement(Si.Route,{path:":id/create/:type",component:Lf,name:"TopicEdit"}),ji.a.createElement(Si.Route,{path:":id/edit",component:If,name:"TopicEdit"}),ji.a.createElement(Si.Route,{path:":id",component:ns,name:"Topic",sticky:Kr},ji.a.createElement(Si.IndexRoute,{component:dp,name:"TopicHot",zaNotTrackPageShow:!0}),ji.a.createElement(Si.Route,{path:"index",component:bs,name:"TopicIndex"}),ji.a.createElement(Si.Route,{path:"intro",component:Vu,name:"TopicIntro"}),[["hot","TopicHot"],["newest","TopicNewest"]].map(function(e){var t=dd(e,2),n=t[0],r=t[1];return ji.a.createElement(Si.Route,{key:r,path:n,component:dp,name:r})}),ji.a.createElement(Si.Route,{path:"top-answers",component:yp,name:"TopicTop"}),[["unanswered","TopicUnanswered"],["questions","TopicQuestions"]].map(function(e){var t=dd(e,2),n=t[0],r=t[1];return ji.a.createElement(Si.Route,{key:r,path:n,component:_p,name:r})})),ji.a.createElement(Si.Route,{path:":id/images",component:Bf,name:"TopicImage"}),ji.a.createElement(Si.Route,{path:":id/creator_wall",component:fd,name:"TopicCreatorWall",zaPageId:3913}))}});
//# sourceMappingURL=main.topic-routes.285305dfec298316d711.js.map