WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-create-content-plugin:user-multiselect2', location = 'user-select2/user-multiselect.js' */
define("confluence-create-content-plugin/plugin/user-select2/user-multiselect",["jquery","ajs","document","confluence/meta","confluence/dark-features","confluence/api/constants"],function(f,c,a,e,d,b){return function(k,l,m){k=k||a.body;var h=(typeof l!=="undefined")?l:true;var j=(typeof m!=="undefined")?m:false;var g=function(){var n=f(".select2-drop-active > .select2-results");if(n.children(".select2-result-selectable").length===0&&n.children(".select2-disabled").length){n.append('<li class="select2-no-results">'+c.escapeHtml("No matches found")+"</li>")}};var i=h?".autocomplete-multiuser":".autocomplete-singleuser";f("input"+i+"[data-autocomplete-bound != 'true']",k).each(function(){var o=f(this);o.auiSelect2({multiple:h,minimumInputLength:2,formatInputTooShort:function(){return "Start typing to search for a user"},ajax:{transport:function(t){var u=t.success;delete t.success;return f.ajax.apply(f.ajax,arguments).done(u).done(g)},data:function(t){return{limit:6,cql:'user.fullname~"'+t+'"'}},dataType:"json",url:Confluence.getContextPath()+"/rest/api/search",results:function(u){var t=[];f.each(u.results,function(){t.push({id:j?this.user.accountId:this.user.username,text:this.user.displayName,imgSrc:this.user.profilePicture.path})});return{results:t}},quietMillis:300},formatResult:function(t){var u={size:"small",displayName:t.text,userId:t.id,avatarImageUrl:t.imgSrc};return j?CreateContent.avatar.avatarWithNameAccountId(u):CreateContent.avatar.avatarWithName(u)},escapeMarkup:function(t){return t},formatSelection:function(t){var u={size:"xsmall",displayName:t.text,userId:t.id,avatarImageUrl:t.imgSrc};return j?CreateContent.avatar.avatarWithNameAccountId(u):CreateContent.avatar.avatarWithName(u)},dropdownCssClass:"users-dropdown",containerCssClass:"users-autocomplete",hasAvatar:true});if(!o.data("autofill-user")){return}var r=e.get("remote-user"),s=e.get("atlassian-account-id"),q=e.get("current-user-fullname"),p=e.get("current-user-avatar-url");if(s&&q&&p){var n={id:j?s:r,text:q,imgSrc:b.CONTEXT_PATH+p};o.auiSelect2("data",h?[n]:n)}})}});require("confluence/module-exporter").exportModuleAsGlobal("confluence-create-content-plugin/plugin/user-select2/user-multiselect","Confluence.Binder.autocompleteMultiUser",function(a){Confluence.Binder.autocompleteMultiUser=a});
}catch(e){WRMCB(e)};