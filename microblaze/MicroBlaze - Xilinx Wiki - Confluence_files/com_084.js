WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-core-v5', location = 'v5/js/core/connect-host.js' */
(function(y,m){"object"===typeof exports&&"undefined"!==typeof module?module.exports=m():"function"===typeof define&&define.amd?define("connectHost",m):y.connectHost=m()})(this,function(){function y(){}function m(){m.init.call(this)}function Ea(b,a,d,c){var e,g;if("function"!==typeof d)throw new TypeError('"listener" argument must be a function');(e=b._events)?(e.newListener&&(b.emit("newListener",a,d.listener?d.listener:d),e=b._events),g=e[a]):(e=b._events=new y,b._eventsCount=0);g?("function"===
typeof g?g=e[a]=c?[d,g]:[g,d]:c?g.unshift(d):g.push(d),g.warned||(d=void 0===b._maxListeners?m.defaultMaxListeners:b._maxListeners)&&0<d&&g.length>d&&(g.warned=!0,d=Error("Possible EventEmitter memory leak detected. "+g.length+" "+a+" listeners added. Use emitter.setMaxListeners() to increase limit"),d.name="MaxListenersExceededWarning",d.emitter=b,d.type=a,d.count=g.length,"function"===typeof console.warn?console.warn(d):console.log(d))):(e[a]=d,++b._eventsCount);return b}function Fa(b,a,d){function c(){b.removeListener(a,
c);e||(e=!0,d.apply(b,arguments))}var e=!1;c.listener=d;return c}function Ga(b){var a=this._events;if(a){b=a[b];if("function"===typeof b)return 1;if(b)return b.length}return 0}function P(b,a){for(var d=Array(a);a--;)d[a]=b[a];return d}function lb(b,a){var d=document.querySelector('meta[name\x3d"ajs-fe-feature-flags"]');if(!d)return a;d=d.getAttribute("content");if(!d)return a;var c={};try{c=JSON.parse(d)}catch(e){return a}return c[b]&&"boolean"===typeof c[b].value?c[b].value:a}function Ha(b){if(!b)throw Error("No selector to escape");
return b.replace(/[!"#$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g,"\\$\x26")}function J(b,a){return a.encode?a.strict?mb(b):encodeURIComponent(b):b}function Ia(){}function Ja(b){try{return decodeURIComponent(b)}catch(a){return String.fromCharCode(65533)}}function nb(b){var a=4-b.length%4;1===a?b+="\x3d":2===a&&(b+="\x3d\x3d");return ob.prototype.decode(pb(b))}function la(b){if(null===b||""===b)throw"Invalid JWT: must be neither null nor empty-string.";var a=b.indexOf("."),d=b.indexOf(".",a+1);if(0>a||d<=a)throw'Invalid JWT: must contain 2 period (".") characters.';
b=b.substring(a+1,d);if(null===b||""===b)throw"Invalid JWT: encoded claims must be neither null nor empty-string.";b=nb.call(window,b);return JSON.parse(b)}function ma(b){return Y.parse(Y.extract(b)).jwt}function Ka(b){return{addon_key:b.addon_key,key:b.key,url:b.url,options:b.options}}function Z(b){b=(b=b.attr("class"))?b.match(/ap-plugin-key-([^\s]*)/):null;return Array.isArray(b)?b[1]:!1}function na(b){b=(b=b.attr("class"))?b.match(/ap-module-key-([^\s]*)/):null;return Array.isArray(b)?b[1]:!1}
function La(b){return Z(b)+"__"+na(b)}function Ma(b,a,d){b+="Modules";if(window._AP&&window._AP[b]&&window._AP[b][a]&&window._AP[b][a][d])return l.extend({},window._AP[b][a][d].options)}function Na(b,a){var d=Z(a);a=(a=a.attr("class"))?a.match(/ap-target-key-([^\s]*)/):null;a=Array.isArray(a)?a[1]:!1;return Ma(b,d,a)}function Oa(b){var a=b.attr("href"),d={},c;a||(a=b.find("a").attr("href"));if(a){var e=a.indexOf("#");if(0<=e){b=a.substring(e+1);try{c=JSON.parse(decodeURI(b))}catch(g){console.error("ACJS: cannot decode webitem anchor")}c&&
window._AP&&window._AP._convertConnectOptions?d=window._AP._convertConnectOptions(c):console.error("ACJS: cannot convert webitem url to connect iframe options")}else c=La(b),e=b.hasClass("ap-inline-dialog")?"inlineDialog":"dialog",d=Na(e,b),!d&&window._AP&&window._AP[e+"Options"]&&(d=l.extend({},window._AP[e+"Options"][c])||{}),d||(d={},console.warn("no webitem "+e+"Options for "+c)),d.productContext=d.productContext||{},a=Y.parse(Y.extract(a)),l.extend(d.productContext,a),d={addon_key:Z(b),key:na(b),
options:d}}return d}function E(){var b=AJS.LayerManager.global.getTopLayer();if(b&&qb.test(b.attr("id")))return b=AJS.dialog2(b),b._id=b.$el.attr("id").replace("ap-dialog-",""),b}function Pa(b){var a=b.find(".header-control-panel");a.length||(a=b.find(".aui-dialog2-footer-actions"));return a}function aa(b,a){return Pa(a).find(".aui-button").filter(function(){return v.getIdentifier(this)===b})}function rb(b){var a={},d=["closeable","fadeout","delay","duration","id"];"object"===("undefined"===typeof b?
"undefined":u(b))&&d.forEach(function(d){d in b&&(a[d]=b[d])});return a}function sb(){h(document).on("aui-message-close",function(b,a){b=a.attr("id").replace("ap-message-","");if(F[b]){if(h.isFunction(F[b].onCloseTrigger))F[b].onCloseTrigger();F[b]._destroy()}})}function K(b){return{constructor:function(a,d,c,e){e=l.last(arguments);var g=e._id;"string"!==typeof a&&(a="");"string"!==typeof d&&(d="");"object"!==("undefined"===typeof c?"undefined":u(c))&&(c={});c.id="ap-message-"+g;var k=a,f=d,L=c,x=
e,ba="AP.messages."+b;console.warn("DEPRECATED API - AP.messages."+b+" has been deprecated since ACJS 5.0 and will be removed in a future release. Use AP.flag.create instead.");ca.trackDeprecatedMethodUsed(ba,x._context.extension);if(x=p.getFrameworkAdaptor().getProviderByModuleName("messages"))ba=x[b],ba||(x[b]=x.generic),ba(k,f,L);else{Qa||(sb(),Qa=!0);x=h("#ac-message-container");1>x.length&&(x=h('\x3cdiv id\x3d"ac-message-container" /\x3e').appendTo("body"));L=rb(L);h.extend(L,{title:k,body:AJS.escapeHtml(f)});
if(0>Ra.indexOf(b))throw"Invalid message type. Must be: "+Ra.join(", ");Sa.test(L.id)&&(AJS.messages[b](x,L),x.css("margin-left","-"+x.innerWidth()/2+"px"))}F[g]=this}}}function tb(){Ta||(h(document).on("aui-flag-close",function(b){b=oa.cleanKey(b.target.id);Q.closed(b)}),h(document).on("click",".ac-flag-actions",function(b){var a=h(b.target);b=a.data("key");a=a.data("flag_id");Q.actionInvoked(b,a)}),Ta=!0)}function Ua(b,a,d){if(R[b]){var c=R[b].extension;d=d||{};d.flagIdentifier=b;t.broadcast(a,
{extension_id:c.extension_id},d)}}function Va(){window.removeEventListener("scroll",Wa);da=pa=void 0}function Wa(){var b=document.documentElement.scrollHeight,a=window.innerHeight,d=.1*b;window.pageYOffset<=d?Xa("nearTop"):a+window.pageYOffset+d>=b?Xa("nearBottom"):da=void 0}function Xa(b){da!==b&&(t.broadcast("scroll."+b,{id:pa},{}),da=b)}function ub(b){return b.map(function(a){if(a.list&&Array.isArray(a.list)){var d={heading:a.heading};d.items=a.list.map(function(d){var a={};if("string"===typeof d)a.content=
d;else if(d.text&&"string"===typeof d.text)a.content=d.text,"boolean"===typeof d.disabled&&(a.disabled=d.disabled),"undefined"!==typeof d.itemId&&(a.itemId=d.itemId);else throw Error("Unknown dropdown list item format.");return a});return d}})}y.prototype=Object.create(null);m.EventEmitter=m;m.usingDomains=!1;m.prototype.domain=void 0;m.prototype._events=void 0;m.prototype._maxListeners=void 0;m.defaultMaxListeners=10;m.init=function(){this.domain=null;!m.usingDomains||!(void 0).active||this instanceof
(void 0).Domain||(this.domain=(void 0).active);this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new y,this._eventsCount=0);this._maxListeners=this._maxListeners||void 0};m.prototype.setMaxListeners=function(b){if("number"!==typeof b||0>b||isNaN(b))throw new TypeError('"n" argument must be a positive number');this._maxListeners=b;return this};m.prototype.getMaxListeners=function(){return void 0===this._maxListeners?m.defaultMaxListeners:this._maxListeners};m.prototype.emit=
function(b){var a,d,c,e,g;e="error"===b;if(a=this._events)e=e&&null==a.error;else if(!e)return!1;d=this.domain;if(e){a=arguments[1];if(d)a||(a=Error('Uncaught, unspecified "error" event')),a.domainEmitter=this,a.domain=d,a.domainThrown=!1,d.emit("error",a);else{if(a instanceof Error)throw a;d=Error('Uncaught, unspecified "error" event. ('+a+")");d.context=a;throw d;}return!1}d=a[b];if(!d)return!1;a="function"===typeof d;c=arguments.length;switch(c){case 1:if(a)d.call(this);else for(a=d.length,d=P(d,
a),e=0;e<a;++e)d[e].call(this);break;case 2:e=arguments[1];if(a)d.call(this,e);else for(a=d.length,d=P(d,a),c=0;c<a;++c)d[c].call(this,e);break;case 3:e=arguments[1];c=arguments[2];if(a)d.call(this,e,c);else for(a=d.length,d=P(d,a),g=0;g<a;++g)d[g].call(this,e,c);break;case 4:e=arguments[1];c=arguments[2];g=arguments[3];if(a)d.call(this,e,c,g);else{a=d.length;d=P(d,a);for(var k=0;k<a;++k)d[k].call(this,e,c,g)}break;default:e=Array(c-1);for(g=1;g<c;g++)e[g-1]=arguments[g];if(a)d.apply(this,e);else for(a=
d.length,d=P(d,a),c=0;c<a;++c)d[c].apply(this,e)}return!0};m.prototype.addListener=function(b,a){return Ea(this,b,a,!1)};m.prototype.on=m.prototype.addListener;m.prototype.prependListener=function(b,a){return Ea(this,b,a,!0)};m.prototype.once=function(b,a){if("function"!==typeof a)throw new TypeError('"listener" argument must be a function');this.on(b,Fa(this,b,a));return this};m.prototype.prependOnceListener=function(b,a){if("function"!==typeof a)throw new TypeError('"listener" argument must be a function');
this.prependListener(b,Fa(this,b,a));return this};m.prototype.removeListener=function(b,a){var d,c,e,g,k;if("function"!==typeof a)throw new TypeError('"listener" argument must be a function');c=this._events;if(!c)return this;d=c[b];if(!d)return this;if(d===a||d.listener&&d.listener===a)0===--this._eventsCount?this._events=new y:(delete c[b],c.removeListener&&this.emit("removeListener",b,d.listener||a));else if("function"!==typeof d){e=-1;for(g=d.length;0<g--;)if(d[g]===a||d[g].listener&&d[g].listener===
a){k=d[g].listener;e=g;break}if(0>e)return this;if(1===d.length){d[0]=void 0;if(0===--this._eventsCount)return this._events=new y,this;delete c[b]}else{g=e+1;for(var f=d.length;g<f;e+=1,g+=1)d[e]=d[g];d.pop()}c.removeListener&&this.emit("removeListener",b,k||a)}return this};m.prototype.removeAllListeners=function(b){var a;a=this._events;if(!a)return this;if(!a.removeListener)return 0===arguments.length?(this._events=new y,this._eventsCount=0):a[b]&&(0===--this._eventsCount?this._events=new y:delete a[b]),
this;if(0===arguments.length){a=Object.keys(a);for(var d=0,c;d<a.length;++d)c=a[d],"removeListener"!==c&&this.removeAllListeners(c);this.removeAllListeners("removeListener");this._events=new y;this._eventsCount=0;return this}a=a[b];if("function"===typeof a)this.removeListener(b,a);else if(a){do this.removeListener(b,a[a.length-1]);while(a[0])}return this};m.prototype.listeners=function(b){var a=this._events;if(a)if(b=a[b])if("function"===typeof b)b=[b.listener||b];else{for(var a=Array(b.length),d=
0;d<a.length;++d)a[d]=b[d].listener||b[d];b=a}else b=[];else b=[];return b};m.listenerCount=function(b,a){return"function"===typeof b.listenerCount?b.listenerCount(a):Ga.call(b,a)};m.prototype.listenerCount=Ga;m.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]};var u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":
typeof b},n=function(b,a){if(!(b instanceof a))throw new TypeError("Cannot call a class as a function");},Ya=function(b,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)},Za=function(b,a){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!a||"object"!==typeof a&&"function"!==typeof a?b:a},f=new (function(b){function a(){n(this,a);var d=Za(this,b.call(this));d.setMaxListeners(20);return d}Ya(a,b);a.prototype.dispatch=function(d){for(var a=arguments.length,b=Array(1<a?a-1:0),g=1;g<a;g++)b[g-1]=arguments[g];this.emit.apply(this,["before:"+d].concat(b));this.emit.apply(this,arguments);this.emit.apply(this,["after:"+d].concat(b))};a.prototype.registerOnce=function(d,a){if("string"===typeof d)this.once(d,a);else throw"ACJS: event name must be string";
};a.prototype.register=function(d,a){if("string"===typeof d)this.on(d,a);else throw"ACJS: event name must be string";};a.prototype.unregister=function(d,a){if("string"===typeof d)this.removeListener(d,a);else throw"ACJS: event name must be string";};return a}(m)),h=window.AJS&&window.AJS.$||function(){},$a=Function.prototype.bind,r={locationOrigin:function(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:
"")},randomString:function(){return Math.floor(1E9*Math.random()).toString(16)},isString:function(b){return"string"===typeof b||b instanceof String},argumentsToArray:function(b){return Array.prototype.slice.call(b)},argumentNames:function(b){return b.toString().replace(/((\/\/.*$)|(\/\*[^]*?\*\/))/mg,"").replace(/[^(]+\(([^)]*)[^]+/,"$1").match(/([^\s,]+)/g)||[]},hasCallback:function(b){var a=b.length;return 0<a&&"function"===typeof b[a-1]},error:function(b){if(window.console&&window.console.error){var a=
[];"string"===typeof b?(a.push("[Simple-XDM] "+b),a=a.concat(Array.prototype.slice.call(arguments,1))):(a.push("[Simple-XDM] "),a=a.concat(Array.prototype.slice.call(arguments)));window.console.error.apply(null,a)}},warn:function(b){window.console&&console.warn("[Simple-XDM] "+b)},log:function(b){window.console&&window.console.log("[Simple-XDM] "+b)},_bind:function(b,a){return $a&&a.bind===$a?a.bind(b):function(){return a.apply(b,arguments)}},throttle:function(b,a,d){var c=0;return function(){var e=
Date.now();e-c>a&&(c=e,b.apply(d,arguments))}},each:function(b,a){var d,c;if(b)if(d=b.length,null!=d&&"function"!==typeof b)for(c=0;c<d&&!1!==a.call(b[c],c,b[c]);)c+=1;else for(c in b)if(b.hasOwnProperty(c)&&!1===a.call(b[c],c,b[c]))break},extend:function(b){var a=arguments;[].slice.call(a,1,a.length).forEach(function(d){"object"===("undefined"===typeof d?"undefined":u(d))&&Object.getOwnPropertyNames(d).forEach(function(a){b[a]=d[a]})});return b},sanitizeStructuredClone:function(b){function a(b){if("function"===
typeof b)return e("A function was detected and removed from the message."),null;if(c.some(function(a){return b instanceof a?(e(a.name+" object was detected and removed from the message."),!0):!1}))return{};if(b&&"object"===("undefined"===typeof b?"undefined":u(b))&&d.every(function(a){return!(b instanceof a)})){var k=void 0;if(Array.isArray(b))k=b.map(function(d){return a(d)});else{if(-1<g.indexOf(b))return e("A circular reference was detected and removed from the message."),null;g.push(b);var k=
{},f;for(f in b)if(b.hasOwnProperty(f)){var h=a(b[f]);null!==h&&(k[f]=h)}g.pop()}return k}return b}var d=[Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer],c=[Error,Node],e=r.warn,g=[];return a(b)},getOrigin:function(b,a){if("function"===typeof URL)try{return(new URL(b,a)).origin}catch(e){}var d=document.implementation.createHTMLDocument("");if(a){var c=d.createElement("base");c.href=a;d.head.appendChild(c)}a=d.createElement("a");a.href=b;d.body.appendChild(a);d=a.protocol+"//"+a.hostname;
b.match(/\/\/[^/]+:[0-9]+\//)&&(d+=a.port?":"+a.port:"");return d}},ea=[],fa=void 0,ab=function(b){ea=ea.filter(function(a){var d=a.callback;return a.element===b?(d(),!1):!0})};if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window)var qa=new IntersectionObserver(function(b){b.forEach(function(a){var d=a.target;0<a.intersectionRatio&&(qa.unobserve(d),ab(d))})},{threshold:.25}),fa=qa.observe.bind(qa);else{var fa=function(b){var a;a:{a=document.documentElement;if(a.contains(b)&&"none"!==
getComputedStyle(b).display){var d=b.getBoundingClientRect(),c=b.parentNode,e=d;do{var g=getComputedStyle(c);if("none"===g.display){a=void 0;break a}var k=void 0;c===document.body?k={top:0,left:0,right:a.clientWidth,bottom:a.clientHeight}:"visible"!==g.overflow&&(k=c.getBoundingClientRect());if(k){var g=Math.max(k.top,e.top),f=Math.max(k.left,e.left),h=Math.min(k.right,e.right),e=Math.min(k.bottom,e.bottom),k=h-f,l=e-g;if(0>=k||0>=l){a=void 0;break a}e={top:g,left:f,right:h,bottom:e,width:k,height:l}}c=
c.parentNode}while(c!==a);if(e){a=e.width*e.height/(d.width*d.height);break a}}a=void 0}.25<=a&&ab(b)},ra=r.throttle(function(){ea.forEach(function(b){return fa(b.element)})},500);window.addEventListener("resize",ra);document.addEventListener("scroll",ra);"MutationObserver"in window&&document.addEventListener("DOMContentLoaded",function(){(new MutationObserver(ra)).observe(document.body,{attributes:!0,childList:!0,characterData:!0,subtree:!0})})}var vb=function(b,a){"function"===typeof a&&b instanceof
Element&&(ea.push({element:b,callback:a}),fa(b))},z=new (function(){function b(){n(this,b);this._addons={}}b.prototype._track=function(a,d){var c=window;a="connect.addon."+a;d=d||{};d.version=c._AP&&c._AP.version?c._AP.version:void 0;d.userAgent=c.navigator.userAgent;if(!c.AJS)return!1;if(c.AJS.Analytics)c.AJS.Analytics.triggerPrivacyPolicySafeEvent(a,d);else if(c.AJS.trigger)AJS.trigger("analyticsEvent",{name:a,data:d});else return!1;return!0};b.prototype._time=function(){return window.performance&&
window.performance.now?window.performance.now():(new Date).getTime()};b.prototype.trackLoadingStarted=function(a){this._addons&&a&&a.id?(a.startLoading=this._time(),this._addons[a.id]=a):console.error("ACJS: cannot track loading analytics",this._addons,a)};b.prototype.trackLoadingEnded=function(a){if(this._addons&&a&&this._addons[a.id]){var d=a.url,d=void 0!==d&&-1===d.indexOf("xdm_e\x3d"),c=this._time()-this._addons[a.id].startLoading,b=this.getIframeLoadApdex(c);this._track("iframe.performance.load",
{addonKey:a.addon_key,moduleKey:a.key,iframeLoadMillis:c,iframeLoadApdex:b,iframeIsCacheable:d,value:2E4<c?"x":Math.ceil(c/100),dnsPrefetching:lb("connect-app-dns-prefetching",!1)})}else console.error("ACJS: cannot track loading end analytics",this._addons,a)};b.prototype.getIframeLoadApdex=function(a){return 300>=a?1:1200>=a?.5:0};b.prototype.trackLoadingTimeout=function(a){var d=window.navigator.onLine;"boolean"!==typeof d&&(d="not-supported");this._track("iframe.performance.timeout",{addonKey:a.addon_key,
moduleKey:a.key,connectedStatus:d.toString()});this.trackLoadingEnded(a)};b.prototype.trackLoadingCancel=function(a){this._track("iframe.performance.cancel",{addonKey:a.addon_key,moduleKey:a.key})};b.prototype.trackUseOfDeprecatedMethod=function(a,d){this._track("jsapi.deprecated",{addonKey:d.addon_key,moduleKey:d.key,methodUsed:a})};b.prototype.trackMultipleDialogOpening=function(a,d){this._track("jsapi.dialog.multiple",{addonKey:d.addon_key,moduleKey:d.key,dialogType:a})};b.prototype.trackVisible=
function(a){this._track("iframe.is_visible",{addonKey:a.addon_key,moduleKey:a.key})};b.prototype.dispatch=function(a,d){this._track(a,d)};return b}());h.fn&&f.register("iframe-create",function(b){z.trackLoadingStarted(b.extension)});f.register("iframe-bridge-start",function(b){z.trackLoadingStarted(b.extension)});f.register("iframe-bridge-established",function(b){z.trackLoadingEnded(b.extension);vb(document.getElementById(b.extension.id),function(){z.trackVisible(b.extension)})});f.register("iframe-bridge-timeout",
function(b){z.trackLoadingTimeout(b.extension)});f.register("iframe-bridge-cancelled",function(b){z.trackLoadingCancel(b.extension)});f.register("analytics-deprecated-method-used",function(b){z.trackUseOfDeprecatedMethod(b.methodUsed,b.extension)});f.register("iframe-destroyed",function(b){delete z._addons[b.extension.extension_id]});var bb={timeout:function(b,a){f.dispatch("iframe-bridge-timeout",{$el:b,extension:a})},cancelled:function(b,a){f.dispatch("iframe-bridge-cancelled",{$el:b,extension:a})}},
sa={loading:'\x3cdiv class\x3d"ap-loading"\x3e\x3cdiv class\x3d"small-spinner"\x3e\x3c/div\x3eLoading app...\x3c/div\x3e',"load-timeout":'\x3cdiv class\x3d"ap-load-timeout"\x3e\x3cdiv class\x3d"small-spinner"\x3e\x3c/div\x3eApp is not responding. Wait or \x3ca href\x3d"#" class\x3d"ap-btn-cancel"\x3ecancel\x3c/a\x3e?\x3c/div\x3e',"load-error":"App failed to load."},S=new (function(){function b(){n(this,b);this._stateRegistry={}}b.prototype._loadingContainer=function(a){return a.find(".ap-status-indicator")};
b.prototype.render=function(){var a=document.createElement("div");a.classList.add("ap-status-indicator");a.innerHTML=sa.loading;a=h(a);this._startSpinner(a);return a};b.prototype._startSpinner=function(a){setTimeout(function(){var d=a.find(".small-spinner");d.length&&d.spin&&d.spin({lines:12,length:3,width:2,radius:3,trail:60,speed:1.5,zIndex:1})},10)};b.prototype.hide=function(a,d){clearTimeout(this._stateRegistry[d]);delete this._stateRegistry[d];this._loadingContainer(a)[0].style.display="none"};
b.prototype.cancelled=function(a,d){d=sa["load-error"];this._loadingContainer(a).empty().text(d)};b.prototype._setupTimeout=function(a,d){this._stateRegistry[d.id]=setTimeout(function(){bb.timeout(a,d)},12E3)};b.prototype.timeout=function(a,d){var c=h(sa["load-timeout"]),b=this._loadingContainer(a);b.empty().append(c);this._startSpinner(b);h("a.ap-btn-cancel",b).click(function(){bb.cancelled(a,d)});delete this._stateRegistry[d];return b};return b}());f.register("iframe-create",function(b){b.extension.options.noDom||
S._setupTimeout(b.$el.parents(".ap-iframe-container"),b.extension)});f.register("iframe-bridge-established",function(b){b.extension.options.noDom||S.hide(b.$el.parents(".ap-iframe-container"),b.extension.id)});f.register("iframe-bridge-timeout",function(b){b.extension.options.noDom||S.timeout(b.$el,b.extension.id)});f.register("iframe-bridge-cancelled",function(b){b.extension.options.noDom||S.cancelled(b.$el,b.extension.id)});for(var wb=function(b){function a(d){n(this,a);d=d||{};var c=Za(this,b.call(this,
d));c._registeredExtensions=d.extensions||{};c._registeredAPIModules={};c._registeredAPIModules._globals={};c._pendingCallbacks={};c._keycodeCallbacks={};c._clickHandler=null;c._pendingEvents={};c._messageHandlers={init:c._handleInit,req:c._handleRequest,resp:c._handleResponse,broadcast:c._handleBroadcast,event_query:c._handleEventQuery,key_triggered:c._handleKeyTriggered,addon_clicked:c._handleAddonClick,get_host_offset:c._getHostOffset,unload:c._handleUnload,sub:c._handleSubInit};return c}Ya(a,
b);a.prototype._padUndefinedArguments=function(a,c){return a.length>=c?a:a.concat(Array(c-a.length))};a.prototype._verifyAPI=function(a,c){function d(a,c){Object.getOwnPropertyNames(c).forEach(function(b){"object"===u(c[b])&&a[b]?d(a[b],c[b]):"parent"===c[b]&&a[b]&&(f=!0)})}var b=a.data.targets;if(b){var k=this.getApiSpec(),f=!1;d(k,b);a.source.postMessage({type:"api_tamper",tampered:f},c.extension.url)}};a.prototype._handleInit=function(a,c){this._registeredExtensions[c.extension_id].source=a.source;
c.initCallback&&(c.initCallback(a.data.eid),delete c.initCallback);a.data.targets&&this._verifyAPI(a,c)};a.prototype._handleSubInit=function(a,c){this.registerExtension(a.data.ext.id,{extension:a.data.ext})};a.prototype._getHostOffset=function(a,c){var d=a.source,b=null;c=c||window;c===c.top&&"function"===typeof c.getHostOffsetFunctionOverride&&(b=c.getHostOffsetFunctionOverride(d));if("number"!==typeof b)for(b=0;!this._hasSameOrigin(d);)b++,d=d.parent;a.source.postMessage({hostFrameOffset:b},a.origin)};
a.prototype._hasSameOrigin=function(a){if(a===a.top)return!0;try{var d="test_var_"+Math.random().toString(16).substr(2);a[d]=!0;return a[d]}catch(e){}return!1};a.prototype._handleResponse=function(a){a=a.data;var d=this._pendingCallbacks[a.mid];d&&(delete this._pendingCallbacks[a.mid],d.apply(window,a.args))};a.prototype.registerRequestNotifier=function(a){this._registeredRequestNotifier=a};a.prototype._handleRequest=function(a,c){function d(){var d=r.sanitizeStructuredClone(r.argumentsToArray(arguments));
a.source.postMessage({mid:a.data.mid,type:"resp",forPlugin:!0,args:d},c.extension.url)}var b=a.data,k=this._registeredAPIModules[b.mod],f=this.getRegisteredExtensions(c.extension)[0];if(k){var h=b.fn;if(b._cls){var l=k[b._cls],m=b.mod+"-"+b._cls+"-";d._id=b._id;"constructor"===h?(l._construct||(l.constructor.prototype._destroy=function(){delete this._context._proxies[m+this._id]},l._construct=function(){for(var a=arguments.length,d=Array(a),c=0;c<a;c++)d[c]=arguments[c];a=new (Function.prototype.bind.apply(l.constructor,
[null].concat(d)));d=d[d.length-1];a._id=d._id;a._context=d._context;return a._context._proxies[m+a._id]=a}),k=l,h="_construct"):k=f._proxies[m+b._id]}var n=k[h];if(n){var p=b.args,q=n.length-1;"_construct"===h&&(q=k.constructor.length-1);d._context=f;p=this._padUndefinedArguments(p,q);p.push(d);k=n.apply(k,p);n.returnsPromise&&(k&&k instanceof Promise?k.then(function(a){d(void 0,a)}).catch(function(a){a=a instanceof Error?a.message:a;d(a)}):d("Defined module method did not return a promise."));this._registeredRequestNotifier&&
this._registeredRequestNotifier.call(null,{module:b.mod,fn:b.fn,type:b.type,addon_key:c.extension.addon_key,key:c.extension.key,extension_id:c.extension_id})}}};a.prototype._handleBroadcast=function(a,c){a=a.data;this.dispatch(a.etyp,function(a){return a.extension.addon_key===c.extension.addon_key&&a.extension_id!==c.extension_id},a.evnt,null,null)};a.prototype._handleKeyTriggered=function(a,c){var d=a.data;a=this._keycodeKey(d.keycode,d.modifiers,c.extension_id);(a=this._keycodeCallbacks[a])&&a.forEach(function(a){a.call(null,
{addon_key:c.extension.addon_key,key:c.extension.key,extension_id:c.extension_id,keycode:d.keycode,modifiers:d.modifiers})},this)};a.prototype.defineAPIModule=function(a,c){c=c||"_globals";this._registeredAPIModules[c]=r.extend({},this._registeredAPIModules[c]||{},a);return this._registeredAPIModules};a.prototype._pendingEventKey=function(a,c){var d=a.addon_key||"global";a.key&&(d=d+"@@"+a.key);return d+"@@"+c};a.prototype.queueEvent=function(a,c,b,g){if(this._findRegistrations(c).some(function(a){return void 0!==
a.registered_events},this))this.dispatch(a,c,b,g);else{this._cleanupInvalidEvents();var d=(new Date).getTime();this._pendingEvents[this._pendingEventKey(c,d)]={type:a,targetSpec:c,event:b,callback:g,time:d,uid:r.randomString()}}};a.prototype._cleanupInvalidEvents=function(){var a=this,c=(new Date).getTime();Object.keys(this._pendingEvents).forEach(function(d){3E4>=c-a._pendingEvents[d].time||delete a._pendingEvents[d]})};a.prototype._handleEventQuery=function(a,c){var d=this,b={},k=(new Date).getTime();
Object.keys(this._pendingEvents).forEach(function(e){var g=d._pendingEvents[e],f=3E4>=k-g.time,h=!g.targetSpec||0!==d._findRegistrations(g.targetSpec).length;h&&g.targetSpec.key&&(h=g.targetSpec.addon_key===c.extension.addon_key&&g.targetSpec.key===c.extension.key);f&&h?(b[e]=g,g.targetSpec=g.targetSpec||{},d.dispatch(g.type,g.targetSpec,g.event,g.callback,a.source)):f||delete d._pendingEvents[e]});this._registeredExtensions[c.extension_id].registered_events=a.data.args;return b};a.prototype._handleUnload=
function(a,c){c&&(c.extension_id&&this._registeredExtensions[c.extension_id]&&delete this._registeredExtensions[c.extension_id].source,c.unloadCallback&&c.unloadCallback(a.data.eid))};a.prototype.dispatch=function(a,c,b,g,k){function d(d,c){if(d.source&&d.source.postMessage){var b;g&&(b=r.randomString(),this._pendingCallbacks[b]=g);d.source.postMessage({type:"evt",mid:b,etyp:a,evnt:c},d.extension.url)}}this._findRegistrations(c||{}).forEach(function(a){k&&!a.source&&(a.source=k);a.source&&r._bind(this,
d)(a,b)},this)};a.prototype._findRegistrations=function(a){var d=this;if(0===this._registeredExtensions.length)return r.error("no registered extensions",this._registeredExtensions),[];var b=Object.getOwnPropertyNames(a),g=Object.getOwnPropertyNames(this._registeredExtensions).map(function(a){return d._registeredExtensions[a]});return a instanceof Function?g.filter(a):g.filter(function(d){return b.every(function(c){return d.extension[c]===a[c]})})};a.prototype.registerExtension=function(a,c){c._proxies=
{};c.extension_id=a;this._registeredExtensions[a]=c};a.prototype._keycodeKey=function(a,c,b){var d=a;c&&("string"===typeof c&&(c=[c]),c.sort(),c.forEach(function(a){d+="$$"+a},this));return d+"__"+b};a.prototype.registerKeyListener=function(a,c,b,g){"string"===typeof b&&(b=[b]);var d=this._registeredExtensions[a];a=this._keycodeKey(c,b,a);this._keycodeCallbacks[a]||(this._keycodeCallbacks[a]=[],d.source.postMessage({type:"key_listen",keycode:c,modifiers:b,action:"add"},d.extension.url));this._keycodeCallbacks[a].push(g)};
a.prototype.unregisterKeyListener=function(a,c,b,g){var d=this._keycodeKey(c,b,a),e=this._keycodeCallbacks[d];a=this._registeredExtensions[a];e&&(g?(g=e.indexOf(g),this._keycodeCallbacks[d].splice(g,1)):delete this._keycodeCallbacks[d],a.source&&a.source.postMessage&&a.source.postMessage({type:"key_listen",keycode:c,modifiers:b,action:"remove"},a.extension.url))};a.prototype.registerClickHandler=function(a){if("function"!==typeof a)throw Error("callback must be a function");if(null!==this._clickHandler)throw Error("ClickHandler already registered");
this._clickHandler=a};a.prototype._handleAddonClick=function(a,c){"function"===typeof this._clickHandler&&this._clickHandler({addon_key:c.extension.addon_key,key:c.extension.key,extension_id:c.extension_id})};a.prototype.unregisterClickHandler=function(){this._clickHandler=null};a.prototype.getApiSpec=function(){function a(a){function d(a){return Object.getOwnPropertyNames(a).reduce(function(c,b){var e=a[b];switch("undefined"===typeof e?"undefined":u(e)){case "function":c[b]={args:r.argumentNames(e),
returnsPromise:e.returnsPromise||!1};break;case "object":e.hasOwnProperty("constructor")&&(c[b]=d(e))}return c},{})}var b=c._registeredAPIModules[a];if(!b)throw Error("unregistered API module: "+a);return d(b)}var c=this;return Object.getOwnPropertyNames(this._registeredAPIModules).reduce(function(d,c){d[c]=a(c);return d},{})};a.prototype._originEqual=function(a,c){function d(a){return"string"===typeof a&&0<a.length}var b=r.getOrigin(a);return d(a)&&d(c)&&d(b)?c===b:!1};a.prototype._checkOrigin=function(a,
c){var d=["init"],b=c&&!c.source&&-1<d.indexOf(a.data.type),d=c&&a.source===c.source;c=c&&this._originEqual(c.extension.url,a.origin)&&(b||d);"get_host_offset"===a.data.type&&window===window.top&&(c=!0);"unload"!==a.data.type||!d&&void 0!==a.source||(c=!0);c||r.log("Failed to validate origin: "+a.origin);return c};a.prototype.getRegisteredExtensions=function(a){return a?this._findRegistrations(a):this._registeredExtensions};a.prototype.unregisterExtension=function(a){a=this._findRegistrations(a);
0!==a.length&&a.forEach(function(a){var d=this;Object.keys(this._pendingEvents).forEach(function(b){var c=d._pendingEvents[b].targetSpec||{};c.addon_key===a.extension.addon_key&&c.key===a.extension.key&&delete d._pendingEvents[b]});delete this._registeredExtensions[a.extension_id]},this)};return a}(function(){function b(a){n(this,b);this._registerListener((a||{}).listenOn)}b.prototype._registerListener=function(a){a&&a.addEventListener||(a=window);a.addEventListener("message",r._bind(this,this._receiveMessage),
!1)};b.prototype._receiveMessage=function(a){var d=this._messageHandlers[a.data.type],b=a.data.eid,e=void 0;b&&this._registeredExtensions&&(e=this._registeredExtensions[b]);if(!d||!this._checkOrigin(a,e))return!1;d.call(this,a,e)};return b}()),q=new (function(){function b(){n(this,b);this._xdm=new wb}b.prototype.dispatch=function(a,d,b,e){this._xdm.queueEvent(a,d,b,e);return this.getExtensions(d)};b.prototype.broadcast=function(a,d,b){this._xdm.dispatch(a,d,b,null,null);return this.getExtensions(d)};
b.prototype._createId=function(a){if(!a.addon_key||!a.key)throw Error("Extensions require addon_key and key");return a.addon_key+"__"+a.key+"__"+r.randomString()};b.prototype.create=function(a,d,b){d=this.registerExtension(a,d,b);b=a.options||{};b={extension_id:d,api:this._xdm.getApiSpec(),origin:r.locationOrigin(),options:b};return{id:d,name:JSON.stringify(b),src:a.url}};b.prototype.registerRequestNotifier=function(a){this._xdm.registerRequestNotifier(a)};b.prototype.registerExtension=function(a,
d,b){var c=this._createId(a);this._xdm.registerExtension(c,{extension:a,initCallback:d,unloadCallback:b});return c};b.prototype.registerKeyListener=function(a,d,b,e){this._xdm.registerKeyListener(a,d,b,e)};b.prototype.unregisterKeyListener=function(a,d,b,e){this._xdm.unregisterKeyListener(a,d,b,e)};b.prototype.registerClickHandler=function(a){this._xdm.registerClickHandler(a)};b.prototype.unregisterClickHandler=function(){this._xdm.unregisterClickHandler()};b.prototype.defineModule=function(a,d,b){this._xdm.defineAPIModule(d,
a,b)};b.prototype.defineGlobals=function(a){this._xdm.defineAPIModule(a)};b.prototype.getExtensions=function(a){return this._xdm.getRegisteredExtensions(a)};b.prototype.unregisterExtension=function(a){return this._xdm.unregisterExtension(a)};b.prototype.returnsPromise=function(a){a.returnsPromise=!0};return b}()),t={broadcast:function(b,a,d){q.dispatch(b,a,d);f.dispatch("event-dispatch",{type:b,targetSpec:a,event:d})},broadcastPublic:function(b,a,d){f.dispatch("event-public-dispatch",{type:b,event:a,
sender:d});q.dispatch(b,{},{sender:{addonKey:d.addon_key,key:d.key,options:r.sanitizeStructuredClone(d.options)},event:a})}},cb=Object.getOwnPropertySymbols,xb=Object.prototype.hasOwnProperty,yb=Object.prototype.propertyIsEnumerable,ta=function(){try{if(!Object.assign)return!1;var b=new String("abc");b[5]="de";if("5"===Object.getOwnPropertyNames(b)[0])return!1;for(var a={},b=0;10>b;b++)a["_"+String.fromCharCode(b)]=b;if("0123456789"!==Object.getOwnPropertyNames(a).map(function(d){return a[d]}).join(""))return!1;
var d={};"abcdefghijklmnopqrst".split("").forEach(function(a){d[a]=a});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},d)).join("")?!1:!0}catch(c){return!1}}()?Object.assign:function(b,a){var d,c;if(null===b||void 0===b)throw new TypeError("Object.assign cannot be called with null or undefined");c=Object(b);for(var e,g=1;g<arguments.length;g++){d=Object(arguments[g]);for(var k in d)xb.call(d,k)&&(c[k]=d[k]);if(cb){e=cb(d);for(var f=0;f<e.length;f++)yb.call(d,e[f])&&(c[e[f]]=d[e[f]])}}return c},
l={escapeSelector:Ha,stringToDimension:function(b){var a,d="px";"string"===typeof b&&(a=b.indexOf("%")===b.length-1,b=parseInt(b,10),a&&(d="%"));if(!isNaN(b))return b+d},getIframeByExtensionId:function(b){return h("iframe#"+Ha(b))},first:function(b,a){return a?b.slice(0,a):b[0]},last:function(b){return b[b.length-1]},pick:function(b,a){return"object"!==("undefined"===typeof b?"undefined":u(b))?{}:Object.keys(b).filter(function(d){return 0<=a.indexOf(d)}).reduce(function(a,c){var d;return ta(a,(d=
{},d[c]=b[c],d))},{})},debounce:function(b,a){var d;return function(){var c=this,e=[].slice.call(arguments);d&&clearTimeout(d);d=setTimeout(function(){d=null;b.apply(c,e)},a||50)}},extend:ta},T={open:function(b,a){f.dispatch("dialog-extension-open",{extension:b,options:a})},close:function(){f.dispatch("dialog-close-active",{})},addUserButton:function(b,a){f.dispatch("dialog-button-add",{button:{text:b.text,identifier:b.identifier,data:{userButton:!0}},extension:a})}},A={close:function(b){f.dispatch("dialog-close",
{dialog:b.dialog,extension:b.extension,customData:b.customData})},closeActive:function(b){f.dispatch("dialog-close-active",b)},clickButton:function(b,a,d){f.dispatch("dialog-button-click",{identifier:b,$el:a,extension:d})},toggleButton:function(b){f.dispatch("dialog-button-toggle",b)},toggleButtonVisibility:function(b){f.dispatch("dialog-button-toggle-visibility",b)}},G={registerKeyEvent:function(b){q.registerKeyListener(b.extension_id,b.key,b.modifiers,b.callback);f.dispatch("dom-event-register",
b)},unregisterKeyEvent:function(b){q.unregisterKeyListener(b.extension_id,b.key,b.modifiers,b.callback);f.dispatch("dom-event-unregister",b)},registerWindowKeyEvent:function(b){window.addEventListener("keydown",function(a){a.keyCode===b.keyCode&&b.callback()})},registerClickHandler:function(b){q.registerClickHandler(function(a){(a=document.getElementById(a.extension_id))&&b(a)})},unregisterClickHandler:function(){q.unregisterClickHandler()}},db=new (function(){function b(){n(this,b)}b.prototype.randomIdentifier=
function(){return Math.random().toString(16).substring(7)};return b}()),B=new (function(){function b(){n(this,b)}b.prototype._maxDimension=function(a,d){a=l.stringToDimension(a);var b=parseInt(a,10);d=parseInt(d,10);return-1<a.indexOf("%")&&100<=b||b>d?"100%":a};b.prototype._closeOnEscape=function(a){return!1===a.closeOnEscape?!1:!0};b.prototype._size=function(a){var d=a.size;"x-large"===a.size&&(d="xlarge");"maximum"!==a.size&&"100%"===a.width&&"100%"===a.height&&(d="fullscreen");return d};b.prototype._header=
function(a){var d="";switch("undefined"===typeof a?"undefined":u(a)){case "string":d=a;break;case "object":d=a.value}return d};b.prototype._hint=function(a){return"string"===typeof a?a:""};b.prototype._chrome=function(a){var d=!1;"boolean"===typeof a.chrome&&(d=a.chrome);"fullscreen"===a.size&&(d=!0);"maximum"===a.size&&(d=!1);return d};b.prototype._width=function(a){if(!a.size)return a.width?this._maxDimension(a.width,h(window).width()):"50%"};b.prototype._height=function(a){if(!a.size)return a.height?
this._maxDimension(a.height,h(window).height()):"50%"};b.prototype._actions=function(a){var d=[];a=a||{};a.actions||(d=[{name:"submit",identifier:"submit",text:a.submitText||"Submit",type:"primary",disabled:!0},{name:"cancel",identifier:"cancel",text:a.cancelText||"Cancel",type:"link",immutable:!0}]);a.buttons&&(d=d.concat(this._buttons(a)));return d};b.prototype._id=function(a){"string"!==typeof a&&(a=Math.random().toString(36).substring(2,8));return a};b.prototype._buttons=function(a){var d=[];
a.buttons&&Array.isArray(a.buttons)&&a.buttons.forEach(function(a){var b,c,k=!1;a.text&&"string"===typeof a.text&&(b=a.text);c=a.identifier&&"string"===typeof a.identifier?a.identifier:db.randomIdentifier();a.disabled&&!0===a.disabled&&(k=!0);d.push({text:b,identifier:c,type:"secondary",custom:!0,disabled:k})});return d};b.prototype._onHide=function(a){return"function"===typeof a.onHide?a.onHide:function(){}};b.prototype.sanitizeOptions=function(a){a=a||{};a={chrome:this._chrome(a),header:this._header(a.header),
hint:this._hint(a.hint),width:this._width(a),height:this._height(a),$content:a.$content,extension:a.extension,actions:this._actions(a),id:this._id(a.id),size:a.size,closeOnEscape:this._closeOnEscape(a),onHide:this._onHide(a)};a.size=this._size(a);return a};b.prototype.moduleOptionsFromGlobal=function(a,d){var b={chrome:!0};return window._AP&&window._AP.dialogModules&&window._AP.dialogModules[a]&&window._AP.dialogModules[a][d]?l.extend({},b,window._AP.dialogModules[a][d].options):!1};b.prototype.trackMultipleDialogOpening=
function(a,d){d=this._size(d);h(".ap-aui-dialog2:visible").length&&(d=h("#macro-browser-dialog").length||AJS.Confluence&&AJS.Confluence.Editor&&AJS.Confluence.Editor.currentEditMode?"fullscreen"===d?"connect-macro-multiple-fullscreen":"connect-macro-multiple":"connect-multiple",z.trackMultipleDialogOpening(d,a))};b.prototype.assertActiveDialogOrThrow=function(a,d){if(!a.isActiveDialog(d))throw Error("Failed to find an active dialog for: "+d);};return b}()),ga={notifyIframeCreated:function(b,a){f.dispatch("iframe-create",
{$el:b,extension:a})},notifyBridgeEstablished:function(b,a){f.dispatch("iframe-bridge-established",{$el:b,extension:a})},notifyIframeDestroyed:function(b){"string"===typeof b&&(b={id:b});q.getExtensions(b).forEach(function(a){f.dispatch("iframe-destroyed",{extension:a});q.unregisterExtension({id:a.extension_id})},this)},notifyUnloaded:function(b,a){f.dispatch("iframe-unload",{$el:b,extension:a})}},mb=function(b){return encodeURIComponent(b).replace(/[!'()*]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})},
Y={extract:function(b){return b.split("?")[1]||""},parse:function(b){var a=Object.create(null);if("string"!==typeof b)return a;b=b.trim().replace(/^(\?|#|&)/,"");if(!b)return a;b.split("\x26").forEach(function(d){var b=d.replace(/\+/g," ").split("\x3d");d=b.shift();b=0<b.length?b.join("\x3d"):void 0;d=decodeURIComponent(d);b=void 0===b?null:decodeURIComponent(b);void 0===a[d]?a[d]=b:Array.isArray(a[d])?a[d].push(b):a[d]=[a[d],b]});return a},stringify:function(b,a){a=ta({encode:!0,strict:!0},a);return b?
Object.keys(b).sort().map(function(d){var c=b[d];if(void 0===c)return"";if(null===c)return J(d,a);if(Array.isArray(c)){var e=[];c.slice().forEach(function(b){void 0!==b&&(null===b?e.push(J(d,a)):e.push(J(d,a)+"\x3d"+J(b,a)))});return e.join("\x26")}return J(d,a)+"\x3d"+J(c,a)}).filter(function(a){return 0<a.length}).join("\x26"):""}},pb=function(b){var a,d;d=b.length;if(0<d%4)throw Error("Invalid string. Length must be a multiple of 4");var c=b.indexOf("\x3d");-1===c&&(c=d);d=[c,c===d?0:4-c%4];a=
d[0];d=d[1];for(var c=new zb(3*(a+d)/4-d),e=0,g=0<d?a-4:a,k=0;k<g;k+=4)a=w[b.charCodeAt(k)]<<18|w[b.charCodeAt(k+1)]<<12|w[b.charCodeAt(k+2)]<<6|w[b.charCodeAt(k+3)],c[e++]=a>>16&255,c[e++]=a>>8&255,c[e++]=a&255;2===d&&(a=w[b.charCodeAt(k)]<<2|w[b.charCodeAt(k+1)]>>4,c[e++]=a&255);1===d&&(a=w[b.charCodeAt(k)]<<10|w[b.charCodeAt(k+1)]<<4|w[b.charCodeAt(k+2)]>>2,c[e++]=a>>8&255,c[e++]=a&255);return c},w=[],zb="undefined"!==typeof Uint8Array?Uint8Array:Array,ha=0;64>ha;++ha)w["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(ha)]=
ha;w[45]=62;w[95]=63;Ia.prototype.decode=function(b){for(var a=b.length,d="",c="",a=Math.min(b.length,a||Infinity),e=0;e<a;e++)127>=b[e]?(d+=Ja(c)+String.fromCharCode(b[e]),c=""):c+="%"+b[e].toString(16);return d+Ja(c)};var ob=Ia,eb=60;f.register("jwt-skew-set",function(b){eb=b.skew});var fb={parseJwtIssuer:function(b){return la(b).iss},parseJwtClaims:la,isJwtExpired:function(b,a){void 0===a&&(a=eb);b=la(b);var d=0,c=Math.floor(Date.now()/1E3);b&&b.exp&&(d=b.exp);return d-a<c?!0:!1}},M={hasJwt:function(b){return ma(b)&&
0!==ma(b).length},isJwtExpired:function(b){b=ma(b);return fb.isJwtExpired(b)}},ua={registerContentResolver:function(b){f.dispatch("content-resolver-register-by-extension",b)},requestRefreshUrl:function(b){if(!b.resolver)throw Error("ACJS: No content resolver supplied");var a=b.resolver.call(null,l.extend({classifier:"json"},b.extension));a.fail(function(a,c){f.dispatch("jwt-url-refreshed-failed",{extension:b.extension,$container:b.$container,errorText:c.text})});a.done(function(a){var d={};if("object"===
("undefined"===typeof a?"undefined":u(a)))d=a;else if("string"===typeof a)try{d=JSON.parse(a)}catch(e){console.error("ACJS: invalid response from content resolver")}b.extension.url=d.url;l.extend(b.extension.options,d.options);f.dispatch("jwt-url-refreshed",{extension:b.extension,$container:b.$container,url:b.extension.url})});f.dispatch("jwt-url-refresh-request",{data:b})},setClockSkew:function(b){"number"===typeof b?f.dispatch("jwt-skew-set",{skew:b}):console.error("ACJS: invalid JWT clock skew set")}},
Ab={optionsToAttributes:function(b){var a={};b&&"object"===("undefined"===typeof b?"undefined":u(b))&&(b.width&&(a.width=l.stringToDimension(b.width)),b.height&&(a.height=l.stringToDimension(b.height)));return a}},va=new (function(){function b(){n(this,b);this.store={}}b.prototype.set=function(a,d){if(d){var b={};b[a]=d}else b=a;l.extend(this.store,b)};b.prototype.get=function(a){return a?this.store[a]:l.extend({},this.store)};return b}()),wa={createSimpleXdmExtension:function(b){var a=Ka(b),d=va.get();
b.options=a.options=l.extend({},a.options);b.options.globalOptions=d;d=q.create(a,function(){b.options.noDOM||(b.$el=h(document.getElementById(b.id)));ga.notifyBridgeEstablished(b.$el,b)},function(){ga.notifyUnloaded(b.$el,b)});a.id=d.id;b.id=d.id;l.extend(d,Ab.optionsToAttributes(b.options));return{iframeAttributes:d,extension:b}},extensionConfigSanitizer:Ka},H=new (function(){function b(){n(this,b);this._contentResolver=!1}b.prototype.setContentResolver=function(a){this._contentResolver=a};b.prototype.resize=
function(a,d,b){a=l.stringToDimension(a);d=l.stringToDimension(d);b.css({width:a,height:d});b.trigger("resized",{width:a,height:d})};b.prototype.simpleXdmExtension=function(a,d){!a.url||M.hasJwt(a.url)&&M.isJwtExpired(a.url)?this._contentResolver?ua.requestRefreshUrl({extension:a,resolver:this._contentResolver,$container:d}):console.error("JWT is expired and no content resolver was specified"):this._appendExtension(d,this._simpleXdmCreate(a))};b.prototype._simpleXdmCreate=function(a){var d=wa.createSimpleXdmExtension(a);
a.id=d.iframeAttributes.id;a.$el=this.render(d.iframeAttributes);return a};b.prototype._appendExtension=function(a,d){var b=a.find("iframe");0<b.length&&b.destroy();d.options.hideIframeUntilLoad&&d.$el.css({visibility:"hidden"}).load(function(){d.$el.css({visibility:""})});a.prepend(d.$el);ga.notifyIframeCreated(d.$el,d)};b.prototype._appendExtensionError=function(a,d){var b=h('\x3cdiv class\x3d"connect-resolve-error"\x3e\x3c/div\x3e');d=h("\x3cp /\x3e").text(d);b.append('\x3cp class\x3d"error"\x3eError: The content resolver threw the following error:\x3c/p\x3e');
b.append(d);a.prepend(b)};b.prototype.resolverResponse=function(a){var b=this._simpleXdmCreate(a.extension);this._appendExtension(a.$container,b)};b.prototype.resolverFailResponse=function(a){this._appendExtensionError(a.$container,a.errorText)};b.prototype.render=function(a){a=a||{};a.referrerpolicy="no-referrer";return h("\x3ciframe /\x3e").attr(a).addClass("ap-iframe")};return b}());f.register("iframe-resize",function(b){H.resize(b.width,b.height,b.$el)});f.register("content-resolver-register-by-extension",
function(b){H.setContentResolver(b.callback)});f.register("jwt-url-refreshed",function(b){H.resolverResponse(b)});f.register("jwt-url-refreshed-failed",function(b){H.resolverFailResponse(b)});f.register("after:iframe-bridge-established",function(b){b.extension.options.noDom?b.extension.options.bridgeEstablished=!0:b.$el[0].bridgeEstablished=!0});var xa={clicked:function(b){f.dispatch("button-clicked",{$el:b})},toggle:function(b,a){f.dispatch("button-toggle",{$el:b,disabled:a})},toggleVisibility:function(b,
a){f.dispatch("button-toggle-visibility",{$el:b,hidden:a})}},Bb=["primary","link","secondary"],gb=0,v=new (function(){function b(){n(this,b);this.AP_BUTTON_CLASS="ap-aui-button"}b.prototype.setType=function(a,b){b&&0<=Bb.indexOf(b)&&a.addClass("aui-button-"+b);return a};b.prototype.setDisabled=function(a,b){"undefined"===typeof b||a.data("immutable")||a.attr("aria-disabled",b);return a};b.prototype.setHidden=function(a,b){"undefined"===typeof b||a.data("immutable")||a.toggle(!b);return a};b.prototype._setId=
function(a,b){b||(b="ap-button-"+gb,gb++);a.attr("id",b);return a};b.prototype._additionalClasses=function(a,b){b&&("string"!==typeof b&&(b=b.join(" ")),a.addClass(b));return a};b.prototype.getName=function(a){return h(a).data("name")};b.prototype.getText=function(a){return h(a).text()};b.prototype.getIdentifier=function(a){return h(a).data("identifier")};b.prototype.isVisible=function(a){return h(a).is(":visible")};b.prototype.isEnabled=function(a){return"true"!==h(a).attr("aria-disabled")};b.prototype.render=
function(a){var b=h("\x3cbutton /\x3e");a=a||{};b.addClass("aui-button "+this.AP_BUTTON_CLASS);b.text(a.text);b.data(a.data);b.data({name:a.name||a.identifier,identifier:a.identifier||db.randomIdentifier(),immutable:a.immutable||!1});this._additionalClasses(b,a.additionalClasses);this.setType(b,a.type);this.setDisabled(b,a.disabled||!1);this._setId(b,a.id);return b};return b}());h(function(){h("body").on("click","."+v.AP_BUTTON_CLASS,function(b){b=h(b.target).closest("."+v.AP_BUTTON_CLASS);"true"!==
b.attr("aria-disabled")&&xa.clicked(b)})});f.register("button-toggle",function(b){v.setDisabled(b.$el,b.disabled)});f.register("button-toggle-visibility",function(b){v.setHidden(b.$el,b.hidden)});var Cb=["ap-iframe-container"],ya=new (function(){function b(){n(this,b)}b.prototype.createExtension=function(a,b){var d=this._renderContainer();b&&!1===b.loadingIndicator||d.append(this._renderLoadingIndicator());H.simpleXdmExtension(a,d);return d};b.prototype._renderContainer=function(a){a=h("\x3cdiv /\x3e").attr(a||
{});a.addClass(Cb.join(" "));return a};b.prototype._renderLoadingIndicator=function(){return S.render()};return b}());f.register("iframe-create",function(b){var a="embedded-"+b.extension.id;b.extension.$el.parents(".ap-iframe-container").attr("id",a)});var Db={defineCustomModule:function(b,a){var d={};a?(d.methods=a,d.name=b):d.methods=b;f.dispatch("module-define-custom",d)}},ca={trackDeprecatedMethodUsed:function(b,a){f.dispatch("analytics-deprecated-method-used",{methodUsed:b,extension:a})},trackIframeBridgeStart:function(b){f.dispatch("iframe-bridge-start",
{extension:b})}},C={sanitizeTriggers:function(b){var a;Array.isArray(b)?a=b.join(" "):"string"===typeof b&&(a=b.trim());return a},uniqueId:function(){return"webitem-"+Math.floor(1E9*Math.random()).toString(16)},getExtensionKey:Z,getKey:na,getOptionsForWebItem:function(b){var a=La(b),d=b.hasClass("ap-inline-dialog")?"inlineDialog":"dialog",c=Na(d,b);!c&&window._AP&&window._AP[d+"Options"]&&(c=l.extend({},window._AP[d+"Options"][a])||{});c||(c={},console.warn("no webitem "+d+"Options for "+a));c.productContext=
c.productContext||{};c.structuredContext=c.structuredContext||{};(b=Oa(b))&&b.options&&(l.extend(c.productContext,b.options.productContext),l.extend(c.structuredContext,b.options.structuredContext),c.contextJwt=b.options.contextJwt);return c},getModuleOptionsByAddonAndModuleKey:Ma,getConfigFromTarget:Oa},U=new function a(){var d=this;n(this,a);this._providers={};this.registerProvider=function(a,e){d._providers[a]=e};this.getProvider=function(a){return d._providers[a]}},Eb=new (function(){function a(){this.moduleNamesToModules=
new Map}a.prototype.registerModule=function(a,c){c=a.getModuleRegistrationName();this.moduleNamesToModules.set(c,a)};a.prototype.getModuleByName=function(a){return this.moduleNamesToModules.get(a)};a.prototype.getProviderByModuleName=function(a){if((a=this.moduleNamesToModules.get(a))&&a.isEnabled())return a.getProvider()};return a}()),p=new (function(){function a(){var d=this;n(this,a);this.create=function(a){return ya.createExtension(wa.extensionConfigSanitizer(a))};this.dialog={create:function(a,
d){var c=C.getModuleOptionsByAddonAndModuleKey("dialog",a.addon_key,a.key);d=l.extend({},c||{},d);T.open(a,d)},close:function(a,e){var c=d.getFrameworkAdaptor().getProviderByModuleName("dialog");c?(B.assertActiveDialogOrThrow(c,a),t.broadcast("dialog.close",{addon_key:a},e),c.close()):T.close()}};this.registerContentResolver={resolveByExtension:function(a){d._contentResolver=a;ua.registerContentResolver({callback:a})}};this.getContentResolver=function(){return d._contentResolver};this.registerProvider=
function(a,d){U.registerProvider(a,d)};this.getProvider=function(a){return U.getProvider(a)};this.frameworkAdaptor=Eb}a.prototype.createExtension=function(a){a.options=a.options||{};a.options.noDom=!0;a=wa.createSimpleXdmExtension(a);ca.trackIframeBridgeStart(a.extension);return a};a.prototype.setFrameworkAdaptor=function(a){this.frameworkAdaptor=a};a.prototype.getFrameworkAdaptor=function(){return this.frameworkAdaptor};a.prototype._cleanExtension=function(a){return l.pick(a,["id","addon_key","key",
"options","url"])};a.prototype.onIframeEstablished=function(a){a._wrapper=function(d){a.call({},{$el:d.$el,extension:this._cleanExtension(d.extension)})}.bind(this);f.register("after:iframe-bridge-established",a._wrapper)};a.prototype.offIframeEstablished=function(a){if(a._wrapper)f.unregister("after:iframe-bridge-established",a._wrapper);else throw Error("cannot unregister event dispatch listener without _wrapper reference");};a.prototype.onIframeUnload=function(a){var d=this;f.register("after:iframe-unload",
function(c){a.call({},{$el:c.$el,extension:d._cleanExtension(c.extension)})})};a.prototype.onPublicEventDispatched=function(a){a._wrapper=function(d){a.call({},{type:d.type,event:d.event,extension:this._cleanExtension(d.sender)})}.bind(this);f.register("after:event-public-dispatch",a._wrapper)};a.prototype.offPublicEventDispatched=function(a){if(a._wrapper)f.unregister("after:event-public-dispatch",a._wrapper);else throw Error("cannot unregister event dispatch listener without _wrapper reference");
};a.prototype.onKeyEvent=function(a,c,e,g){G.registerKeyEvent({extension_id:a,key:c,modifiers:e,callback:g})};a.prototype.offKeyEvent=function(a,c,e,g){G.unregisterKeyEvent({extension_id:a,key:c,modifiers:e,callback:g})};a.prototype.onFrameClick=function(a){if("function"!==typeof a)throw Error("handleIframeClick must be a function");G.registerClickHandler(a)};a.prototype.offFrameClick=function(){G.unregisterClickHandler()};a.prototype.destroy=function(a){ga.notifyIframeDestroyed({id:a})};a.prototype.defineModule=
function(a,c){Db.defineCustomModule(a,c)};a.prototype.broadcastEvent=function(a,c,e){t.broadcast(a,c,e)};a.prototype.getExtensions=function(a){return q.getExtensions(a)};a.prototype.trackDeprecatedMethodUsed=function(a,c){ca.trackDeprecatedMethodUsed(a,c)};a.prototype.setJwtClockSkew=function(a){ua.setClockSkew(a)};a.prototype.isJwtExpired=function(a,c){return c?fb.isJwtExpired(a):M.isJwtExpired(a)};a.prototype.hasJwt=function(a){return M.hasJwt(a)};a.prototype.setExtensionConfigurationOptions=function(a,
c){va.set(a,c)};a.prototype.getExtensionConfigurationOption=function(a){return va.get(a)};return a}()),qb=/^ap-dialog-[0-9A-Za-z]+$/,Fb="small medium large xlarge fullscreen maximum".split(" "),I=new (function(){function a(){n(this,a)}a.prototype._renderHeaderCloseBtn=function(){var a=h("\x3ca /\x3e").addClass("aui-dialog2-header-close"),c=h("\x3cspan /\x3e").addClass("aui-icon aui-icon-small aui-iconfont-close-dialog").text("Close");a.append(c);return a};a.prototype._renderFullScreenHeader=function(a,
c){var d=h("\x3cdiv /\x3e").addClass("header-title-container aui-item expanded"),g=h("\x3cdiv /\x3e").append(h("\x3cspan /\x3e").addClass("header-title").text(c.header||""));d.append(g);a.append(d).append(this._renderHeaderActions(c.actions,c.extension));return a};a.prototype._renderHeader=function(a){var d=h("\x3cheader /\x3e").addClass("aui-dialog2-header");if("fullscreen"===a.size)return this._renderFullScreenHeader(d,a);a.header&&(a=h("\x3ch2 /\x3e").addClass("aui-dialog2-header-main").text(a.header),
d.append(a));d.append(this._renderHeaderCloseBtn());return d};a.prototype._renderHeaderActions=function(a,c){var d=h("\x3cdiv /\x3e").addClass("aui-item header-control-panel");a[0].additionalClasses=["aui-icon","aui-icon-small","aui-iconfont-success"];a[1].additionalClasses=["aui-icon","aui-icon-small","aui-iconfont-close-dialog"];this._renderActionButtons(a,c).forEach(function(a){d.append(a)});return d};a.prototype._renderContent=function(a){var d=h("\x3cdiv /\x3e").addClass("aui-dialog2-content");
a&&d.append(a);return d};a.prototype._renderFooter=function(a){var d=h("\x3cfooter /\x3e").addClass("aui-dialog2-footer");if("fullscreen"!==a.size){var e=this._renderFooterActions(a.actions,a.extension);d.append(e)}a.hint&&(a=h("\x3cdiv /\x3e").addClass("aui-dialog2-footer-hint").text(a.hint),d.append(a));return d};a.prototype._renderActionButtons=function(a,c){var d=this,g=[];[].concat(a).forEach(function(a){g.push(d._renderDialogButton({text:a.text,name:a.name,type:a.type,additionalClasses:a.additionalClasses,
custom:a.custom||!1,identifier:a.identifier,immutable:a.immutable,disabled:a.disabled||!1},c))});return g};a.prototype._renderFooterActions=function(a,c){var d=h("\x3cdiv /\x3e").addClass("aui-dialog2-footer-actions");this._renderActionButtons(a,c).forEach(function(a){d.append(a)});return d};a.prototype._renderDialogButton=function(a,c){a.additionalClasses=a.additionalClasses||[];a.additionalClasses.push("ap-aui-dialog-button");a.custom&&a.additionalClasses.push("ap-dialog-custom-button");a=v.render(a);
a.extension=c;return a};a.prototype.render=function(a){var d=l.extend({},a);a=B.sanitizeOptions(a);var e=h("\x3csection /\x3e").attr({role:"dialog",id:"ap-dialog-"+a.id});e.attr("data-aui-modal","true");e.data({"aui-remove-on-hide":!0,extension:a.extension});e.addClass("aui-layer aui-dialog2 ap-aui-dialog2");0<=Fb.indexOf(a.size)&&e.addClass("aui-dialog2-"+a.size);if("fullscreen"===a.size||"maximum"===a.size)a.chrome&&e.addClass("ap-header-controls"),e.addClass("aui-dialog2-maximum");e.append(this._renderContent(a.$content));
a.chrome?(e.prepend(this._renderHeader({header:a.header,actions:a.actions,size:a.size})),e.append(this._renderFooter({extension:a.extension,actions:a.actions,hint:a.hint,size:a.size}))):e.addClass("aui-dialog2-chromeless");var g=AJS.dialog2(e);g._id=a.id;"fullscreen"===a.size&&(a.height=a.width="100%");a.size&&"fullscreen"!==a.size||AJS.layer(e).changeSize(a.width,a.height);if(a.onHide)g.on("hide",a.onHide);g.show();g.$el.data("extension",a.extension);g.$el.data("originalOptions",d);return e};a.prototype.setIframeDimensions=
function(a){H.resize("100%","100%",a)};a.prototype.getActive=function(){return E()};a.prototype.buttonIsEnabled=function(a){var d=E();if(d)return a=aa(a,d.$el),v.isEnabled(a)};a.prototype.buttonIsVisible=function(a){var d=E();if(d)return a=aa(a,d.$el),v.isVisible(a)};a.prototype.getByExtension=function(a){var d;if("function"===typeof a)d=a;else{var e=Object.getOwnPropertyNames(a);d=function(d){var c=h(d).data("extension");return e.every(function(d){return c[d]===a[d]})}}return h(".ap-aui-dialog2").toArray().filter(d).map(function(a){return AJS.dialog2(a)})};
a.prototype.addButton=function(a,c){c.custom=!0;c=this._renderDialogButton(c,a);a=this.getByExtension({addon_key:a.addon_key,key:a.key})[0].$el;Pa(a).append(c);return a};return a}());f.register("iframe-bridge-established",function(a){if(a.extension.options.isDialog){var d=void 0,c=p.getFrameworkAdaptor().getProviderByModuleName("dialog");c?(d=c.close,c.setButtonDisabled("submit",!1)):(A.toggleButton({identifier:"submit",enabled:!0}),d=function(){A.close({dialog:E(),extension:a.extension})});a.extension.options.preventDialogCloseOnEscape||
(G.registerKeyEvent({extension_id:a.extension.id,key:27,callback:d}),f.registerOnce("dialog-close",function(d){G.unregisterKeyEvent({extension_id:a.extension.id,key:27})}))}});f.register("dialog-close-active",function(a){var d=E();d&&A.close({customData:a.customData,dialog:d,extension:a.extension})});f.register("dialog-close",function(a){a.dialog&&a.dialog.hide()});f.register("dialog-button-toggle",function(a){var d=E();d&&(d=aa(a.identifier,d.$el),xa.toggle(d,!a.enabled))});f.register("dialog-button-toggle-visibility",
function(a){var d=E();d&&(d=aa(a.identifier,d.$el),xa.toggleVisibility(d,a.hidden))});f.register("button-clicked",function(a){a=a.$el;if(a.hasClass("ap-aui-dialog-button")){var d=a.parents(".ap-aui-dialog2"),c=d.find("iframe");c.length&&c[0].bridgeEstablished?A.clickButton(v.getIdentifier(a),a,d.data("extension")):A.close({dialog:E(),extension:a.extension})}});h.fn&&(f.register("iframe-create",function(a){a.extension.options&&a.extension.options.isDialog&&I.setIframeDimensions(a.extension.$el)}),
f.register("dialog-button-add",function(a){I.addButton(a.extension,a.button)}),f.register("host-window-resize",l.debounce(function(){h(".ap-aui-dialog2").each(function(a,d){a=h(d);a=B.sanitizeOptions(a.data("originalOptions"));d.style.width=a.width;d.style.height=a.height})},100)));G.registerWindowKeyEvent({keyCode:27,callback:function(){A.closeActive({customData:{},extension:null})}});var N=new (function(){function a(){n(this,a)}a.prototype.render=function(a,c){a.options=a.options||{};c=c||{};a.options.isDialog=
!0;a.options.dialogId=c.id;a.options.preventDialogCloseOnEscape=!1===c.closeOnEscape;a.options.hideIframeUntilLoad=!0;var d=ya.createExtension(a);return I.render({extension:a,$content:d,chrome:c.chrome,width:c.width,height:c.height,size:c.size,header:c.header,hint:c.hint,submitText:c.submitText,cancelText:c.cancelText,buttons:c.buttons,onHide:c.onHide})};a.prototype.getActiveDialog=function(){return I.getActive()};a.prototype.buttonIsEnabled=function(a){return I.buttonIsEnabled(a)};a.prototype.buttonIsVisible=
function(a){return I.buttonIsVisible(a)};a.prototype.getByExtension=function(a){"string"===typeof a&&(a={id:a});return I.getByExtension(a)};return a}());f.register("dialog-extension-open",function(a){var d=a.extension,c=B.sanitizeOptions(a.options),e=p.getFrameworkAdaptor().getProviderByModuleName("dialog");if(e){var g=function(a){var c=d.key,e=d.addon_key,g={button:{identifier:a.identifier,name:a.identifier,text:a.text}};0<=["submit","cancel"].indexOf(a.identifier)&&t.broadcast("dialog."+a.identifier,
{addon_key:e,key:c},g);t.broadcast("dialog.button.click",{addon_key:e,key:c},g)};d.options.preventDialogCloseOnEscape=!1===c.closeOnEscape;c.actions.map(function(a){return a.onClick=g.bind(null,a)});e.create(c,d)}else N.render(a.extension,a.options)});var hb={};f.register("dialog-close",function(a){a.dialog&&a.extension&&t.broadcast("dialog.close",{addon_key:a.extension.addon_key},a.customData)});f.register("dialog-button-click",function(a){var d={button:{name:v.getName(a.$el),identifier:v.getIdentifier(a.$el),
text:v.getText(a.$el)}};a.$el.hasClass("ap-dialog-custom-button")||t.broadcast("dialog."+d.button.name,{addon_key:a.extension.addon_key,key:a.extension.key},d);t.broadcast("dialog.button.click",{addon_key:a.extension.addon_key,key:a.extension.key},d)});var D=function(){function a(d,c){n(this,a);c=l.last(arguments);var e=p.getFrameworkAdaptor().getProviderByModuleName("dialog");if(e)B.assertActiveDialogOrThrow(e,c._context.extension.addon_key),this.identifier=this.name=d;else{if(!N.getActiveDialog())throw Error("Failed to find an active dialog.");
this.identifier=this.name=d;this.enabled=N.buttonIsEnabled(d);this.hidden=!N.buttonIsVisible(d)}}a.prototype.enable=function(){this.setState({enabled:!0})};a.prototype.disable=function(){this.setState({enabled:!1})};a.prototype.isEnabled=function(a){a=l.last(arguments);var d=p.getFrameworkAdaptor().getProviderByModuleName("dialog");d?a(!d.isButtonDisabled(this.identifier)):a(this.enabled)};a.prototype.toggle=function(){var a=p.getFrameworkAdaptor().getProviderByModuleName("dialog");a?a.toggleButton(this.identifier):
this.setState({enabled:!this.enabled})};a.prototype.setState=function(a){var d=p.getFrameworkAdaptor().getProviderByModuleName("dialog");d?d.setButtonDisabled(this.identifier,!a.enabled):(this.enabled=a.enabled,A.toggleButton({identifier:this.identifier,enabled:this.enabled}))};a.prototype.trigger=function(a){a=l.last(arguments);this.enabled&&A.dialogMessage({name:this.name,extension:a._context.extension})};a.prototype.isHidden=function(a){a=l.last(arguments);var d=p.getFrameworkAdaptor().getProviderByModuleName("dialog");
d?a(d.isButtonHidden(this.identifier)):a(this.hidden)};a.prototype.hide=function(){this.setHidden(!0)};a.prototype.show=function(){this.setHidden(!1)};a.prototype.setHidden=function(a){var d=p.getFrameworkAdaptor().getProviderByModuleName("dialog");d?d.setButtonHidden(this.identifier,a):(this.hidden=a,A.toggleButtonVisibility({identifier:this.identifier,hidden:this.hidden}))};return a}(),Gb={create:{constructor:function d(c,e){n(this,d);e=l.last(arguments);var g=e._id,k=e._context.extension,k={addon_key:k.addon_key,
key:c.key,options:l.pick(k.options,["customData","productContext"])};k.options.customData=c.customData;var f=B.moduleOptionsFromGlobal(k.addon_key,k.key);c=l.extend({},f||{},c);c.id=g;B.trackMultipleDialogOpening(k,c);T.open(k,c);this.customData=c.customData;hb[g]=this}},close:function(d,c){c=l.last(arguments);var e=p.getFrameworkAdaptor().getProviderByModuleName("dialog");e?(B.assertActiveDialogOrThrow(e,c._context.extension.addon_key),t.broadcast("dialog.close",{addon_key:c._context.extension.addon_key},
d),e.close()):(e=c._context.extension.options.isDialog?N.getByExtension(c._context.extension.id)[0]:N.getActiveDialog(),A.close({customData:d,dialog:e,extension:c._context.extension}))},getCustomData:function(d){d=l.last(arguments);var c=hb[d._context.extension.options.dialogId];c?d(c.customData):d(void 0)},getButton:{constructor:D,enable:D.prototype.enable,disable:D.prototype.disable,toggle:D.prototype.toggle,isEnabled:D.prototype.isEnabled,trigger:D.prototype.trigger,hide:D.prototype.hide,show:D.prototype.show,
isHidden:D.prototype.isHidden},createButton:{constructor:function c(e,g){n(this,c);g=l.last(arguments);var k=p.getFrameworkAdaptor().getProviderByModuleName("dialog");k?(B.assertActiveDialogOrThrow(k,g._context.extension.addon_key),k.createButton({identifier:e.identifier,text:e.text,hidden:!1,disabled:e.disabled||!1,onClick:function(){t.broadcast("dialog.button.click",{addon_key:g._context.extension.addon_key,key:g._context.extension.key},{button:{identifier:e.identifier,text:e.text}})}})):T.addUserButton({identifier:e.identifier,
text:e.text},g._context.extension)}}};f.register("iframe-resize",function(c){H.resize(c.width,c.height,c.$el)});f.register("iframe-size-to-parent",function(c){var e=l.getIframeByExtensionId(c.extensionId);c.hideFooter?(e.addClass("full-size-general-page-no-footer"),h("#footer").css({display:"none"}),c=h(window).height()-h("#header \x3e nav").outerHeight()):(c=h(window).height()-h("#header \x3e nav").outerHeight()-h("#footer").outerHeight()-1,e.removeClass("full-size-general-page-no-footer"),h("#footer").css({display:"block"}));
f.dispatch("iframe-resize",{width:"100%",height:c+"px",$el:e})});f.register("hide-footer",function(c){c&&h("#footer").css({display:"none"})});window.addEventListener("resize",function(c){f.dispatch("host-window-resize",c)},!0);var ia={iframeResize:function(c,e,g){var k;k=g.extension_id?l.getIframeByExtensionId(g.extension_id):g;f.dispatch("iframe-resize",{width:c,height:e,$el:k,extension:g.extension})},sizeToParent:function(c,e){f.dispatch("iframe-size-to-parent",{hideFooter:e,extensionId:c})},hideFooter:function(c){f.dispatch("hide-footer",
c)}},ib=l.debounce,ja={},O=[],ka={},Hb={getLocation:function(c){c=l.last(arguments);c(window.location.href)},resize:function(c,e,g){g=l.last(arguments);var k=U.getProvider("addon");if(k)k.resize(c,e,g._context);else{var k=g._context.extension.id,f=g._context.extension.options;if(-1!==O.indexOf(k)||f&&f.isDialog)return!1;ja[k]||(ja[k]=ib(function(c,e,g){ia.iframeResize(c,e,g._context)},50));ja[k](c,e,g)}return!0},sizeToParent:ib(function(c,e){e=l.last(arguments);var g=U.getProvider("addon");g?g.sizeToParent(c,
e._context):e._context.extension.options.isFullPage?(l.getIframeByExtensionId(e._context.extension_id).addClass("full-size-general-page"),ia.sizeToParent(e._context.extension_id,c),ka[e._context.extension_id]={hideFooter:c}):l.getIframeByExtensionId(e._context.extension_id).addClass("full-size-general-page-fail")}),hideFooter:function(c){c&&ia.hideFooter(c)}};f.register("host-window-resize",function(c){Object.getOwnPropertyNames(ka).forEach(function(c){ia.sizeToParent(c,ka[c].hideFooter)})});f.register("after:iframe-unload",
function(c){delete ja[c.extension.id];delete ka[c.extension.id];-1!==O.indexOf(c.extension.id)&&O.splice(O.indexOf(c.extension.id),1)});f.register("before:iframe-size-to-parent",function(c){-1===O.indexOf(c.extensionId)&&O.push(c.extensionId)});var za={hide:function(c){f.dispatch("inline-dialog-hide",{$el:c})},refresh:function(c){f.dispatch("inline-dialog-refresh",{$el:c})},hideTriggered:function(c,e){f.dispatch("inline-dialog-hidden",{extension_id:c,$el:e})},close:function(){f.dispatch("inline-dialog-close",
{})},created:function(c){f.dispatch("inline-dialog-opened",{$el:c.$el,trigger:c.trigger,extension:c.extension})}},Ra="generic error warning success info hint".split(" "),Sa=/^ap-message-[0-9A-fa-f]+$/,F={},Qa=!1,Ib={clear:function(c){c="ap-message-"+c._id;if(Sa.test(c)){var e=p.getFrameworkAdaptor().getProviderByModuleName("messages");e?e.clear(c):h("#"+c).closeMessage()}},onClose:function(c,e){e=l.last(arguments);var g=c._id,f=p.getFrameworkAdaptor().getProviderByModuleName("messages");if(f)f.onClose("ap-message-"+
c._id,e);else F[g]&&(F[g].onCloseTrigger=e)},generic:K("generic"),error:K("error"),warning:K("warning"),success:K("success"),info:K("info"),hint:K("hint")},Q={actionInvoked:function(c,e){f.dispatch("flag-action-invoked",{id:e,actionId:c})},open:function(c){f.dispatch("flag-open",{id:c})},close:function(c){f.dispatch("flag-close",{id:c})},closed:function(c){f.dispatch("flag-closed",{id:c})}},oa=new (function(){function c(){n(this,c)}c.prototype.cleanKey=function(c){return(c=c.match(/^ap-flag-(.+)$/))&&
c[1]?c[1]:null};c.prototype._toHtmlString=function(c){if("string"===h.type(c))return c;if("object"===h.type(c)&&c instanceof h)return c.html()};c.prototype._renderBody=function(c){c=this._toHtmlString(c);c=h("\x3cdiv /\x3e").html(c);h("\x3cp /\x3e").addClass("ac-flag-actions").appendTo(c);return c.html()};c.prototype._renderActions=function(c,g,f){var e=c.find(".ac-flag-actions");f=f||{};var k;Object.getOwnPropertyNames(f).forEach(function(c){k=h("\x3ca /\x3e").attr("href","#").data({key:c,flag_id:g}).text(f[c]);
e.append(k)},this);return c};c.prototype.render=function(c){tb();var e="ap-flag-"+c.id,f=AJS.flag({type:c.type,title:c.title,body:this._renderBody(c.body),close:c.close});f.setAttribute("id",e);e=h(f);this._renderActions(e,c.id,c.actions);e.addClass("ac-aui-flag");e.close=f.close;return e};c.prototype.close=function(c){document.getElementById(c).close()};return c}()),Ta=!1;f.register("flag-close",function(c){oa.close(c.id)});var R={},jb=function(){function c(e,g){n(this,c);g=l.last(arguments);if("object"===
("undefined"===typeof e?"undefined":u(e))){var f=g._id,h=p.getFrameworkAdaptor().getProviderByModuleName("flag");if(h){var m=[];"object"===u(e.actions)&&(m=Object.getOwnPropertyNames(e.actions).map(function(c){return{actionKey:c,actionText:e.actions[c],executeAction:Q.actionInvoked.bind(null,c,f)}}));m={id:f,title:e.title,body:e.body,actions:m,onClose:Q.closed,close:e.close,type:(e.type||"info").toLowerCase()};this.flag=h.create(m);(h=U.getProvider("addon"))&&h.registerUnmountCallback&&h.registerUnmountCallback(this.close.bind(this),
g._context)}else this.flag=oa.render({type:e.type,title:e.title,body:AJS.escapeHtml(e.body),actions:e.actions,close:e.close,id:f}),Q.open(this.flag.attr("id"));this.onTriggers={};this.extension=g._context.extension;R[g._id]=this;g.call(null,g._id)}}c.prototype.close=function(){this.flag.close()};return c}();f.register("flag-closed",function(c){Ua(c.id,"flag.close");R[c.id]&&delete R[c.id]});f.register("flag-action-invoked",function(c){Ua(c.id,"flag.action",{actionIdentifier:c.actionId})});var Jb=
{create:{constructor:jb,close:jb.prototype.close}},pa=void 0,da=void 0;f.register("iframe-bridge-established",function(c){c.extension.options.isFullPage&&(window.addEventListener("scroll",Wa),pa=c.extension.id)});f.register("iframe-destroyed",function(c){Va()});f.register("iframe-unload",function(c){Va()});var kb={itemSelected:function(c,e,g){f.dispatch("dropdown-item-selected",{id:c,item:e,extension:g})}};f.register("dropdown-item-selected",function(c){t.broadcast("dropdown-item-selected",{addon_key:c.extension.addon_key,
key:c.extension.key},{dropdownId:c.id,item:c.item})});f.register("iframe-destroyed",function(c){var e=p.getFrameworkAdaptor().getProviderByModuleName("dropdown");e&&e.destroyByExtension(c.extension.extension_id)});f.register("after:iframe-unload",function(c){var e=p.getFrameworkAdaptor().getProviderByModuleName("dropdown");e&&e.destroyByExtension(c.extension.extension_id)});var V=new (function(){function c(){n(this,c);this._webitems={};this._contentResolver=function(){}}c.prototype.setContentResolver=
function(c){this._contentResolver=c};c.prototype.requestContent=function(c){if(c.addon_key&&c.key)return this._contentResolver.call(null,l.extend({classifier:"json"},c))};c.prototype.getWebItemsBySelector=function(c){var e=this,f=void 0;Object.getOwnPropertyNames(this._webitems).some(function(g){g=e._webitems[g];return g.selector&&g.selector.trim()===c.trim()?(f=g,!0):!1});return f};c.prototype.setWebItem=function(c){return this._webitems[c.name]={name:c.name,selector:c.selector,triggers:c.triggers}};
c.prototype._removeTriggers=function(c){var e=this,f=C.sanitizeTriggers(c.triggers);h(function(){h("body").off(f,c.selector,e._webitems[c.name]._on)});delete this._webitems[c.name]._on};c.prototype._addTriggers=function(c){var e=C.sanitizeTriggers(c.triggers);c._on=function(e){e.preventDefault();var g=h(e.target).closest(c.selector),f=C.getConfigFromTarget(g),f=f&&f.url?f.url:void 0,g={addon_key:C.getExtensionKey(g),key:C.getKey(g),options:C.getOptionsForWebItem(g),url:f};Aa.webitemInvoked(c,e,g)};
h(function(){h("body").on(e,c.selector,c._on)})};return c}());f.register("webitem-added",function(c){V._addTriggers(c.webitem)});f.register("content-resolver-register-by-extension",function(c){V.setContentResolver(c.callback)});document.addEventListener("aui-responsive-menu-item-created",function(c){var e=c.detail.originalItem.querySelector('a[class*\x3d"ap-"]');if(e){var g=c.detail.newItem.querySelector("a");[].slice.call(e.classList).forEach(function(c){/^ap-/.test(c)&&g.classList.add(c)})}});var Aa=
{addWebItem:function(c){if(V.getWebItemsBySelector(c.selector))return!1;c=V.setWebItem(c);f.dispatch("webitem-added",{webitem:c})},webitemInvoked:function(c,e,g){f.dispatch("webitem-invoked:"+c.name,{webitem:c,event:e,extension:g})}},Kb={addExtension:function(c){f.dispatch("inline-dialog-extension",{$el:c.$el,extension:c.extension})}},W=new (function(){function c(){n(this,c)}c.prototype.resize=function(c){var e=l.stringToDimension(c.width),f=l.stringToDimension(c.height),h=c.$el.find(".contents");
1===h.length&&(h.css({width:e,height:f}),za.refresh(c.$el))};c.prototype.refresh=function(c){c[0].popup.reset()};c.prototype._getInlineDialog=function(c){return AJS.InlineDialog(c)};c.prototype._renderContainer=function(){return h("\x3cdiv /\x3e").addClass("aui-inline-dialog-contents")};c.prototype._displayInlineDialog=function(c){za.created({$el:c.$el,trigger:c.trigger,extension:c.extension})};c.prototype.hideInlineDialog=function(c){c.hide()};c.prototype.closeInlineDialog=function(){h(".aui-inline-dialog").filter(function(){return 0<
h(this).find(".ap-iframe-container").length}).hide()};c.prototype.render=function(c){var e=this,f=h(document.getElementById("inline-dialog-"+c.id));0!==f.length&&f.remove();return AJS.InlineDialog(c.bindTo,c.id,function(g,f,k){g.append(c.$content);e._displayInlineDialog({extension:c.extension,$el:g,trigger:f});k()},c.inlineDialogOptions)};return c}());f.register("iframe-resize",function(c){var e=c.$el.parents(".aui-inline-dialog");1===e.length&&W.resize({width:c.width,height:c.height,$el:e})});f.register("inline-dialog-refresh",
function(c){W.refresh(c.$el)});f.register("inline-dialog-hide",function(c){W.hideInlineDialog(c.$el)});f.register("inline-dialog-close",function(c){W.closeInlineDialog()});var Lb=["mouseover","click"],X=new (function(){function c(){n(this,c);this._inlineDialogWebItemSpec={name:"inline-dialog",selector:".ap-inline-dialog",triggers:Lb};this._inlineDialogWebItems={}}c.prototype.getWebItem=function(){return this._inlineDialogWebItemSpec};c.prototype._createInlineDialog=function(c){return W.render({extension:c.extension,
id:c.id,bindTo:c.$target,$content:h("\x3cdiv /\x3e"),inlineDialogOptions:c.extension.options})};c.prototype.triggered=function(c){if("click"===c.event.type||c.extension.options.onHover){var e=h(c.event.currentTarget),f=e.data("inline-dialog-target-uid");this._createInlineDialog({id:f,extension:c.extension,$target:e,options:c.extension.options||{}}).show()}};c.prototype.opened=function(c){var e=c.$el.find("iframe");if(e&&1===e.length&&(e=e.attr("src"),0<e.length)){var f=M.hasJwt(e);if(f&&!M.isJwtExpired(e)||
!f)return!1}e=V.requestContent(c.extension);if(!e)return console.warn("no content resolver found"),!1;e.then(function(e){e.options=e.options||{};l.extend(e.options,{autoresize:!0,widthinpx:!0});Kb.addExtension({$el:c.$el,extension:e})});return!0};c.prototype.addExtension=function(c){var e=ya.createExtension(c.extension);c.$el.empty().append(e)};c.prototype.createIfNotExists=function(c){c=h(c.event.currentTarget);var e=c.data("inline-dialog-target-uid");e||(e=C.uniqueId(),c.data("inline-dialog-target-uid",
e))};return c}()),Ba=X.getWebItem();f.register("before:webitem-invoked:"+Ba.name,function(c){X.createIfNotExists(c)});f.register("webitem-invoked:"+Ba.name,function(c){X.triggered(c)});f.register("inline-dialog-opened",function(c){X.opened(c)});f.register("inline-dialog-extension",function(c){X.addExtension(c)});Aa.addWebItem(Ba);var Mb=["click"],Nb={chrome:!0},Ca=new (function(){function c(){n(this,c);this._dialogWebItem={name:"dialog",selector:".ap-dialog",triggers:Mb}}c.prototype.getWebItem=function(){return this._dialogWebItem};
c.prototype._dialogOptions=function(c){return l.extend({},Nb,c||{})};c.prototype.triggered=function(c){var e=h(c.event.currentTarget).data("dialog-target-uid"),f=this._dialogOptions(c.extension.options);f.id=e;T.open(c.extension,f)};c.prototype.createIfNotExists=function(c){c=h(c.event.currentTarget);var e=c.data("dialog-target-uid");e||(e=C.uniqueId(),c.data("dialog-target-uid",e))};return c}()),Da=Ca.getWebItem();f.register("webitem-invoked:"+Da.name,function(c){Ca.triggered(c)});f.register("before:webitem-invoked:"+
Da.name,Ca.createIfNotExists);Aa.addWebItem(Da);window._AP||(window._AP={});window._AP.version||(window._AP.version="5.2.2");q.defineModule("messages",Ib);q.defineModule("flag",Jb);q.defineModule("dialog",Gb);q.defineModule("inlineDialog",{hide:function(c){c=l.last(arguments);var e=p.getFrameworkAdaptor().getProviderByModuleName("inlineDialog");e?e.hide(c._context):za.close()}});q.defineModule("env",Hb);q.defineModule("events",{emit:function(c){for(var e=arguments.length,g=Array(1<e?e-1:0),f=1;f<
e;f++)g[f-1]=arguments[f];e=l.last(g);g=l.first(g,-1);t.broadcast(c,{addon_key:e._context.extension.addon_key},g)},emitPublic:function(c){for(var e=arguments.length,g=Array(1<e?e-1:0),f=1;f<e;f++)g[f-1]=arguments[f];e=l.last(g)._context.extension;g=l.first(g,-1);t.broadcastPublic(c,g,e)}});q.defineModule("_analytics",{trackDeprecatedMethodUsed:function(c,e){e=l.last(arguments);ca.trackDeprecatedMethodUsed(c,e._context.extension)}});q.defineModule("scrollPosition",{getPosition:function(c){c=l.last(arguments);
if(c._context.extension.options.isFullPage){var e=l.getIframeByExtensionId(c._context.extension_id).offset(),g=h(window);c({scrollY:g.scrollTop()-e.top,scrollX:g.scrollLeft()-e.left,width:window.innerWidth,height:window.innerHeight})}},setVerticalPosition:function(c,e){e=l.last(arguments);if(e._context.extension.options&&e._context.extension.options.isFullPage){var g=l.getIframeByExtensionId(e._context.extension_id).offset();"number"===typeof c&&(document.documentElement.scrollTop=g.top+c)}}});q.defineModule("dropdown",
{create:function(c,e){e=l.last(arguments);if("object"===("undefined"===typeof c?"undefined":u(c))){var g=p.getFrameworkAdaptor().getProviderByModuleName("dropdown");if(g){var f=ub(c.list),f={dropdownId:c.dropdownId,dropdownGroups:f,dropdownItemNotifier:function(c){kb.itemSelected(c.dropdownId,c.item,e._context.extension)}};g.create(f,e._context);return f}}},showAt:function(c,e,f,h){var g=l.last(arguments),k={left:0,top:0},m=document.getElementById(g._context.extension_id);m?k=m.getBoundingClientRect():
console.error("ACJS: no iframe found for dropdown");(m=p.getFrameworkAdaptor().getProviderByModuleName("dropdown"))&&m.showAt({dropdownId:c,x:e,y:f,width:h},{iframeDimensions:k,onItemSelection:function(c,e){kb.itemSelected(c,e,g._context.extension)}})},hide:function(c){var e=p.getFrameworkAdaptor().getProviderByModuleName("dropdown");e&&e.hide(c)},itemDisable:function(c,e){var f=p.getFrameworkAdaptor().getProviderByModuleName("dropdown");f&&f.itemDisable(c,e)},itemEnable:function(c,e){var f=p.getFrameworkAdaptor().getProviderByModuleName("dropdown");
f&&f.itemEnable(c,e)}});f.register("module-define-custom",function(c){q.defineModule(c.name,c.methods)});q.registerRequestNotifier(function(c){z.dispatch("bridge.invokemethod",{module:c.module,fn:c.fn,addonKey:c.addon_key,moduleKey:c.key})});return p});
}catch(e){WRMCB(e)};