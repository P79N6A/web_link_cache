(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{"1oXH":function(e,n,t){"use strict";function o(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function i(){return"".concat(o()+o(),"-").concat(o(),"-").concat(o(),"-").concat(o(),"-").concat(o()).concat(o()).concat(o())}t.d(n,"a",function(){return i})},"7eka":function(e,n,t){var o=t("7vTW"),i=t("7l8p");"string"==typeof o&&(o=[[e.i,o,""]]),e.exports=o.locals||{},e.exports._getContent=function(){return o},e.exports._getCss=function(){return o.toString()},e.exports._insertCss=function(e){return i(o,e)}},"7vTW":function(e,n,t){(n=e.exports=t("RDo7")(!1)).push([e.i,".CommentBody_author_1H4{padding-bottom:8px;padding-top:1px;cursor:pointer;display:inline-block}.CommentBody_author_1H4 div+div{font-weight:400}.CommentBody_author_1H4 a,.CommentBody_authorOld_1ei a{font-size:16px}.CommentBody_authorLabel_1nv{background-color:#3572b0;color:#fff;text-transform:uppercase;font-size:10px;margin-left:10px;padding:2px 3px;border-radius:3px;vertical-align:middle}.CommentBody_body_1Lt{padding-right:20px;word-wrap:break-word}",""]),n.locals={author:"CommentBody_author_1H4",authorOld:"CommentBody_authorOld_1ei",authorLabel:"CommentBody_authorLabel_1nv",body:"CommentBody_body_1Lt"}},"8rMV":function(e,n,t){(n=e.exports=t("RDo7")(!1)).push([e.i,".CommentsSection_root_3ge{padding-top:1px;list-style:none}.aui-page-panel-inner{overflow:visible}",""]),n.locals={root:"CommentsSection_root_3ge"}},C4P7:function(e,n,t){(n=e.exports=t("RDo7")(!1)).push([e.i,".Comment_comment_d0q{position:relative;padding-top:8px;padding-bottom:8px;overflow-y:visible;min-height:35px;word-wrap:break-word}.Comment_comment_d0q #rte{-webkit-box-sizing:border-box;box-sizing:border-box;display:block;margin:0;width:100%}.Comment_comment_d0q form.aui{margin:0}#comments-section .preformattedContent{word-wrap:normal}.Comment_addComment_24d{padding-top:20px}.Comment_focused_cml{border-bottom:1px solid #ccc;background:#ebf2f9;padding-left:10px!important;margin-bottom:-1px;padding-bottom:9px}.Comment_focused_cml+.Comment_focused_cml{-webkit-box-shadow:inset 0 1px 0 #ccc;box-shadow:inset 0 1px 0 #ccc}.Comment_avatar_2px{width:32px;height:32px;margin-right:10px;float:left;cursor:pointer}.Comment_spinner_27V{opacity:.5;height:100%;position:relative}.Comment_bodyContainer_sJT{padding-left:42px}#comments-section .comment{border-top:none!important;border-bottom:none!important}.quick-comment-loading-container{background-color:#f5f5f5;border:1px solid #f5f5f5;height:261px;width:100%}.quick-comment-form #previewArea{display:block}.quick-comment-container{margin-top:0!important}",""]),n.locals={comment:"Comment_comment_d0q",addComment:"Comment_addComment_24d",focused:"Comment_focused_cml",avatar:"Comment_avatar_2px",spinner:"Comment_spinner_27V",bodyContainer:"Comment_bodyContainer_sJT"}},TcLa:function(e,n,t){(n=e.exports=t("RDo7")(!1)).push([e.i,'.CommentActions_actions_Hnn{font-size:12px;color:#707070;margin-top:5px}.CommentActions_actionsList_3yu{padding:0}.CommentActions_actionItem_1ro{display:inline-block}.CommentActions_actionItem_1ro:not(.CommentActions_noDot_1Yj):before{content:"\\2022";color:#707070;padding:0 5px}.CommentActions_actionItem_1ro:first-child:before{display:none}.wiki-content .CommentActions_actionItem_1ro a,.wiki-content .CommentActions_actionItem_1ro a:hover,.wiki-content .CommentActions_actionItem_1ro a:link,.wiki-content .CommentActions_actionItem_1ro a:visited{color:#707070;cursor:pointer}.wiki-content .CommentActions_actionItem_1ro a:hover{text-decoration:underline}',""]),n.locals={actions:"CommentActions_actions_Hnn",actionsList:"CommentActions_actionsList_3yu",actionItem:"CommentActions_actionItem_1ro",noDot:"CommentActions_noDot_1Yj"}},UbDs:function(e,n,t){var o=t("8rMV"),i=t("7l8p");"string"==typeof o&&(o=[[e.i,o,""]]),e.exports=o.locals||{},e.exports._getContent=function(){return o},e.exports._getCss=function(){return o.toString()},e.exports._insertCss=function(e){return i(o,e)}},"V/ff":function(e,n,t){"use strict";t.d(n,"f",function(){return r}),t.d(n,"g",function(){return a}),t.d(n,"e",function(){return c}),t.d(n,"b",function(){return d}),t.d(n,"a",function(){return s}),t.d(n,"c",function(){return l}),t.d(n,"d",function(){return u}),t.d(n,"h",function(){return m});var o=t("Jygk"),i=t.n(o),r={activateEditor:function(e){return i.a.AJS.Confluence.QuickEdit.activateEditor(e)},deactivateEditor:function(){return i.a.AJS.Confluence.QuickEdit.deactivateEditor()},postInitialise:function(){return i.a.AJS.Confluence.QuickEdit.postInitialise()}},a={preInitialise:function(e){return i.a.AJS.Confluence.QuickEdit.QuickEditPage.preInitialise(e)}},c={preInitialise:function(){return i.a.AJS.Confluence.QuickEdit.QuickComment.preInitialise()},postInitialise:function(e){return i.a.AJS.Confluence.QuickEdit.QuickComment.postInitialise(e)}},d={removeAllCancelHandlers:function(){return i.a.AJS.Confluence.Editor.removeAllCancelHandlers()},addCancelHandler:function(e){return i.a.AJS.Confluence.Editor.addCancelHandler(e)},setSaveHandler:function(e){return i.a.AJS.Confluence.Editor.overrideSave(e)},addSaveHandler:function(e){return i.a.AJS.Confluence.Editor.addSaveHandler(e)},setSavingState:function(e){return i.a.AJS.Confluence.Editor.UI.toggleSavebarBusy(e)},getCommentsPlugins:function(){return i.a.AJS.Confluence.Editor._Profiles.createProfileForCommentEditor().plugins},getPagePlugins:function(){return i.a.AJS.Confluence.Editor._Profiles.createProfileForPageEditor({versionComment:!0,notifyWatchers:!0}).plugins}},s=function(){return new i.a.AJS.Confluence.QuickEditCaptchaManager},l=function(){return i.a.tinymce&&i.a.tinymce.activeEditor},u=function(){var e=l();return e?e.getContent().trim():null},m=function(){var e=l();return e?e.getContent()!==e.startContent:null}},ZGQn:function(e,n,t){"use strict";t.r(n);t("aWzz");var o,i,r,a=t("ERkP"),c=t.n(a),d=t("6DRV"),s=t("uDfI"),l=t("kD2R"),u=t("2srY"),m=t.n(u),f=t("zr3P"),p=t.n(f),y=t("sbiO"),v=t("bsva"),k=t("ilPL"),h=t("1oXH"),b=t("EfWO"),g=t.n(b),_=t("nnRT"),C=t.n(_),S=t("lKOy"),w=t.n(S),N=t("uZih"),E=t.n(N),I=t("L21V"),O=t("swvn"),P=t.n(O),j=t("IGvV"),F=t("bfgX"),A=t("LodO"),x=t("kSEI"),T=t("O94r"),L=t.n(T),D=t("OLUx"),V=t("sq+C"),H=t("x98U"),U=t("iUdj"),R=t("fLXQ"),M=t("M2LZ"),q=t("Sl8s"),B=t("cXZ3"),Q=t("9Kiz"),J=t("fYdy"),z=t("jqY8"),W=t("JzH8"),K=t("1vxf"),G=t("tsjR"),$=t("6lDt"),Y=t("v45N"),X=t.n(Y);function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function te(e,n){return(te=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ie,re=Object(j.a)(X.a)(o=Object(I.h)((r=i=function(e){function n(){var e;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),(e=function(e,n){return!n||"object"!==Z(n)&&"function"!=typeof n?oe(e):n}(this,ne(n).call(this)))._onDeleteClick=e._onDeleteClick.bind(oe(oe(e))),e._onReplyClick=e._onReplyClick.bind(oe(oe(e))),e._onEditClick=e._onEditClick.bind(oe(oe(e))),e}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&te(e,n)}(n,a["Component"]),function(e,n,t){n&&ee(e.prototype,n),t&&ee(e,t)}(n,[{key:"shouldComponentUpdate",value:function(e){return!C()(this.props,e)}},{key:"_onReplyClick",value:function(e){e.preventDefault();var n=this.props,t=n.comment;(0,n.replyToComment)(t.id)}},{key:"_onEditClick",value:function(e){e.preventDefault();var n=this.props,t=n.comment;(0,n.editComment)(t.id)}},{key:"_onDeleteClick",value:function(){var e=this.props.intl.formatMessage;if(Object(z.b)(e({id:"remove.comment.confirmation.message"}))){var n=this.props;(0,n.deleteComment)(n.comment.id)}}},{key:"_renderLikesAction",value:function(e,n,t,o){return c.a.createElement("li",{key:e.id,className:L()("comment-action-like",n.actionItem,n.noDot)},c.a.createElement(K.a,{contentId:e.id,contentType:"comment",containerId:t,containerType:o,isForComment:!0}))}},{key:"render",value:function(){var e=this,n=this.props,t=n.contentId,o=n.contentType,i=n.comment;return c.a.createElement("div",{className:X.a.actions},c.a.createElement("ul",{className:X.a.actionsList},c.a.createElement("li",{className:L()(X.a.actionItem,"action-reply-comment")},c.a.createElement("a",{className:"comment-reply-link",onClick:this._onReplyClick},c.a.createElement(I.c,{id:"comment.reply"}))),i.operations.find(function(e){return"update"===e.operation})?c.a.createElement("li",{className:L()(X.a.actionItem,"comment-action-edit")},c.a.createElement("a",{className:"comment-edit-link",onClick:this._onEditClick},c.a.createElement(I.c,{id:"comment.edit"}))):null,i.operations.find(function(e){return"delete"===e.operation})?c.a.createElement("li",{className:X.a.actionItem},c.a.createElement("a",{"data-test-id":"comment-delete-link",onClick:this._onDeleteClick,id:"remove-comment-".concat(i.id)},c.a.createElement(I.c,{id:"remove.name"}))):null,c.a.createElement(G.a,{contentId:t,location:$.a.ATL_PAGE_CONTENT_FOOTER_ACTIONS,style:{display:"inline-block"}},function(n){return n.panel?e._renderLikesAction(i,X.a,t,o):null}),c.a.createElement("li",{className:X.a.actionItem},c.a.createElement(W.a,{href:m()(i,"linkWebui")},m()(i,"createdFriendly")))))}}]),n}(),function(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t}(i,"displayName","CommentActions"),o=r))||o)||o,ae=t("7eka"),ce=t.n(ae);function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function le(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ue(e,n){return!n||"object"!==de(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fe(e,n){return(fe=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var pe=Object(j.a)(ce.a)(ie=function(e){function n(){var e,t;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(t=ue(this,(e=me(n)).call.apply(e,[this].concat(i))))._bodyContainer=c.a.createRef(),t}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&fe(e,n)}(n,a["Component"]),function(e,n,t){n&&le(e.prototype,n),t&&le(e,t)}(n,[{key:"componentDidMount",value:function(){var e=this.props.comment;M.a.require(m()(e,"webResourceKeys")||[]),Object(q.d)(this._bodyContainer.current)}},{key:"shouldComponentUpdate",value:function(e){return!C()(this.props,e)}},{key:"_renderUserLink",value:function(){var e=this.props,n=e.atlToken,t=e.canViewProfile,o=e.comment.createdBy,i=o.accountId,r=o.fullName,a=o.isAnonymous,d={userName:o.userName,fullName:r,isAnonymous:a,atlToken:n,linkDivStyle:{paddingBottom:8,paddingTop:1},hoverDivStyle:{display:"inline-block"},className:ce.a.authorOld,canViewProfile:t},s={userId:i,fullName:r,isAnonymous:a,canViewProfile:t};return c.a.createElement(D.a,null,function(e){return e.featureFlags["confluence.frontend.unified.profile.cards"]?c.a.createElement("div",{className:ce.a.author},c.a.createElement(J.a,s)):c.a.createElement(B.a,d)})}},{key:"_renderCommentActions",value:function(){var e=this.props,n=e.comment,t=e.commentActions,o=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},o=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.forEach(function(n){se(e,n,t[n])})}return e}({atlToken:e.atlToken,comment:n,contentId:e.contentId,contentType:e.contentType},t);return c.a.createElement(re,o)}},{key:"render",value:function(){var e=this,n=this.props,t=n.comment,o=n.showAuthorLabel,i=t.bodyExportView&&t.bodyExportView.replace(/confluence-userlink/g,"");return c.a.createElement(D.a,null,function(n){var r=n.featureFlags["confluence.frontend.unified.profile.cards"];return c.a.createElement("div",{className:"wiki-content"},c.a.createElement("h4",null,e._renderUserLink(),t.createdByAuthor&&o?c.a.createElement("span",{className:ce.a.authorLabel},c.a.createElement(I.c,{id:"author.name"})):null),c.a.createElement("div",{className:L()(ce.a.body,"comment-content"),ref:e._bodyContainer,dangerouslySetInnerHTML:{__html:i}}),e._renderCommentActions(),r?c.a.createElement(Q.a,{node:e._bodyContainer.current}):null)})}}]),n}())||ie;pe.displayName="CommentBody";var ye,ve,ke=t("pYTW"),he=t.n(ke);function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _e(e,n){return!n||"object"!==be(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Se(e,n){return(Se=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var we=(ye=Object(j.a)(he.a),Object(I.h)(ve=ye(ve=function(e){function n(){return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),_e(this,Ce(n).apply(this,arguments))}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&Se(e,n)}(n,a["Component"]),function(e,n,t){n&&ge(e.prototype,n),t&&ge(e,t)}(n,[{key:"render",value:function(){var e=this.props,n=e.intl.formatMessage,t=e.onClick;return c.a.createElement("div",{"data-test-id":"add-comment-button",title:n({id:"comment.name.tooltip"}),className:L()("quick-comment-prompt",he.a.root),onClick:t},c.a.createElement(I.c,{id:"quick.comment.placeholder.message"}))}}]),n}())||ve)||ve);we.displayName="CommentSpinner";var Ne,Ee=t("2hrV"),Ie=t("wjr4"),Oe=t.n(Ie);function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Fe(e,n){return!n||"object"!==Pe(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xe(e,n){return(xe=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var Te,Le,De,Ve=Object(j.a)(Oe.a)(Ne=function(e){function n(){return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),Fe(this,Ae(n).apply(this,arguments))}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&xe(e,n)}(n,a["Component"]),function(e,n,t){n&&je(e.prototype,n),t&&je(e,t)}(n,[{key:"componentDidMount",value:function(){this.props.onDidMount()}},{key:"render",value:function(){return c.a.createElement("div",{className:"quick-comment-loading-container",style:{display:"block"}},c.a.createElement("div",{className:Oe.a.spinner},c.a.createElement(Ee.a,{size:"medium"})))}}]),n}())||Ne;function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ue(){return(Ue=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}function Re(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},o=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.forEach(function(n){Je(e,n,t[n])})}return e}function Me(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function qe(e){return(qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Be(e,n){return(Be=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function Qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Je(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}Ve.displayName="CommentSpinner",Ve.defaultProps={onDidMount:function(){}};var ze=Object(j.a)(Oe.a)((De=Le=function(e){function n(){var e,t;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(t=function(e,n){return!n||"object"!==He(n)&&"function"!=typeof n?Qe(e):n}(this,(e=qe(n)).call.apply(e,[this].concat(i))))._editorSaveHandler=t._editorSaveHandler.bind(Qe(Qe(t))),t._editorCancelHandler=t._editorCancelHandler.bind(Qe(Qe(t))),t._editorAfterActivate=t._editorAfterActivate.bind(Qe(Qe(t))),t._assignContainer=t._assignContainer.bind(Qe(Qe(t))),t.state={Editor:null},t}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&Be(e,n)}(n,a["Component"]),function(e,n,t){n&&Me(e.prototype,n),t&&Me(e,t)}(n,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,Object(U.a)(function(n){e._isMounted&&e.setState({Editor:n})})}},{key:"shouldComponentUpdate",value:function(e,n){return!C()(this.props,e)||!C()(this.state,n)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"_editorSaveHandler",value:function(e){var n=this.props;return(0,n.editorSaveHandler)(Re({contentId:n.contentId,commentId:n.comment.id},e))}},{key:"_editorCancelHandler",value:function(){return this.props.editorCancelHandler()}},{key:"_editorAfterActivate",value:function(){Object(R.k)(this.commentContainer,{topGap:60,bottomGap:10,duration:100})}},{key:"_renderProfilePicture",value:function(){var e=this.props,n=e.atlToken,t=e.canViewProfile,o=e.userInfo,i=o.avatarUrl,r=o.accountId,a=o.userName,d={userId:r,src:i,isAnonymous:!r},s=Re({},{username:a,src:i,isAnonymous:!a},{atlToken:n,linkStyle:{display:"inline-block",position:"relative",verticalAlign:"top",marginTop:2},imageStyle:{width:32,height:32},canViewProfile:t,withUserHover:t}),l=Re({},d,{canViewProfile:t,withUserHover:t,size:"medium"});return c.a.createElement(D.a,null,function(e){return e.featureFlags["confluence.frontend.unified.profile.cards"]?c.a.createElement("div",{className:Oe.a.avatar},c.a.createElement(H.a,l)):c.a.createElement("div",{className:Oe.a.avatar},c.a.createElement(V.a,s))})}},{key:"_renderCommentBody",value:function(){var e=this.props,n=e.comment,t=e.contentId,o=e.contentType,i=e.commentActions,r={comment:n,contentId:t,contentType:o,canViewProfile:e.canViewProfile,showAuthorLabel:e.showAuthorLabel,atlToken:e.atlToken,commentActions:i};return c.a.createElement(pe,r)}},{key:"_renderCommentEditor",value:function(){var e=this.props,n=e.editor,t=e.comment,o=e.mode,i=e.editorReady,r=e.contentId,a=e.onEditorLoaded,d=this.state.Editor;if(!("edit"!==o||t.bodyEditorView&&i||"replyComment"===n.mode))return null;var s={saveHandler:this._editorSaveHandler,cancelHandler:this._editorCancelHandler,afterActivate:this._editorAfterActivate,hasError:!!n.errorMessage,updateTime:n.updateTime,content:{editorContent:t.bodyEditorView},contentType:"comment",commentId:t&&t.id,contentId:r,onLoadCompleteCallBack:a};return d?c.a.createElement(d,s):null}},{key:"_assignContainer",value:function(e){this.commentContainer=e}},{key:"render",value:function(){var e=this.props,n=e.comment,t=e.className,o=e.id,i=e.style,r=e.onClickCommentAddPrompt,a=e.editor,d=e.isEditorEnabled,s=e.mode,l=e.isFocused,u=e.isHighlighted,m={style:Re({},i,{marginLeft:40*n.depthLevel-(l||u?10:0)||0}),className:L()("comment",Oe.a.comment,Je({},Oe.a.focused,(l||u)&&"view"===s),t)};"view"!==s&&"edit"!==s||(m.id="comment-".concat(n.id),m["data-test-id"]="comment-".concat(n&&n.id?n.id:"new")),o&&(m.id=o);var f="replyComment"===a.mode;f&&(m["data-parent-comment-id"]=n.id);var p="add"===s&&d&&!a.isEditorLoaded,y="edit"===s&&(!a.isEditorLoaded||!n.bodyEditorView&&"editComment"===a.mode),v=p||y,k="view"===s?"":"quick-comment-container ".concat(f?"reply":s);return c.a.createElement("div",Ue({},m,{ref:this._assignContainer}),this._renderProfilePicture(),c.a.createElement("div",{className:L()(Oe.a.bodyContainer,k)},"view"===s?this._renderCommentBody():null,"edit"===s?this._renderCommentEditor():null,"add"!==s?null:d?this._renderCommentEditor():c.a.createElement(we,{onClick:r}),v?c.a.createElement(Ve,{onDidMount:this._editorAfterActivate}):null))}}]),n}(),Je(Le,"displayName","CommentComponent"),Je(Le,"defaultProps",{comment:{},onEditorLoaded:function(){}}),Te=De))||Te;var We=Object(s.connect)(function(e){return{editorReady:e.views.viewPage.quickEditPreload.get("hasLoaded")}},null)(ze);We.displayName="Comment";var Ke,Ge,$e,Ye=We,Xe=t("g/An"),Ze=t.n(Xe);function en(e){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nn(){return(nn=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}function tn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},o=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.forEach(function(n){dn(e,n,t[n])})}return e}function on(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function rn(e,n){return!n||"object"!==en(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function an(e){return(an=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cn(e,n){return(cn=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function dn(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var sn=Object(j.a)(Ze.a)(($e=Ge=function(e){function n(){return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),rn(this,an(n).apply(this,arguments))}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&cn(e,n)}(n,a["Component"]),function(e,n,t){n&&on(e.prototype,n),t&&on(e,t)}(n,[{key:"shouldComponentUpdate",value:function(e){return!C()(this.props,e)}},{key:"render",value:function(){var e=this.props,n=e.contentType,t=e.editor,o=e.userInfo,i=e.canViewProfile,r=e.contentId,a=e.editorSaveHandler,d=e.editorCancelHandler,s=e.comments,l=e.highlightedComments,u=e.commentActions,m=e.focusOnCommentId,f=e.showAuthorLabel,p=e.atlToken,y=e.onEditorLoaded,v=[],k={contentId:r,contentType:n,commentActions:u,canViewProfile:i,showAuthorLabel:f,editor:t,atlToken:p,editorSaveHandler:a,editorCancelHandler:d,onEditorLoaded:y};return s.forEach(function(e){var n=tn({},k,{comment:e,userInfo:e.createdBy,isFocused:m===e.id,isHighlighted:l.indexOf(e.id)>-1,mode:t.contentId===e.id&&"editComment"===t.mode?"edit":"view"});if(v.push(c.a.createElement(Ye,nn({key:e.id},n))),t.contentId===e.id&&"replyComment"===t.mode){var i=tn({},k,{userInfo:o,mode:"edit",isEditorEnabled:!0,comment:{id:e.id,depthLevel:e.depthLevel+1}});v.push(c.a.createElement(Ye,nn({key:"".concat(e.id,"-reply")},i)))}}),c.a.createElement("div",{className:"comment-threads top-level ".concat(Ze.a.root),id:"page-comments","data-test-id":"page-comments"},v)}}]),n}(),dn(Ge,"defaultProps",{highlightedComments:[],onEditorLoaded:function(){}}),Ke=$e))||Ke,ln=function(e){var n=e.contentId,t=e.onClick;return c.a.createElement("div",{id:"comments-actions",style:{display:"none"}},c.a.createElement("a",{href:"".concat(y.b,"/pages/viewpage.action?pageId=").concat(n,"&showComments=true&showCommentArea=true#addcomment"),id:"add-comment-rte",className:"full-load",onClick:t}))};ln.displayName="CommentLegacyAction";var un=ln;ln.displayName="CommentLegacyAction";var mn,fn,pn=t("V/ff"),yn=t("Xzcx"),vn=t("utTn"),kn=t("UbDs"),hn=t.n(kn);function bn(e){return(bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},o=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.forEach(function(n){Nn(e,n,t[n])})}return e}function _n(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Cn(e){return(Cn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sn(e,n){return(Sn=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function wn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nn(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var En={"Captcha check failed":"captcha.response.failed"},In=(mn=Object(j.a)(hn.a),Object(I.h)(fn=mn(fn=function(e){function n(){var e,t;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return Nn(wn(wn(t=function(e,n){return!n||"object"!==bn(n)&&"function"!=typeof n?wn(e):n}(this,(e=Cn(n)).call.apply(e,[this].concat(i))))),"state",{commentsIds:t.props.commentsIds,updatedCommentsIds:[],hasNextPage:t.props.hasNextPage,editorState:{contentId:null,mode:null,errorMessage:"",errorType:null,updateTime:0,isEditorLoaded:!1}}),Nn(wn(wn(t)),"domNodes",{}),Nn(wn(wn(t)),"_showEditor",function(e){t.setState({editorState:gn({},t.state.editorState,e)})}),Nn(wn(wn(t)),"_hideEditor",function(){t.setState({editorState:gn({},t.state.editorState,{contentId:null,mode:null})})}),Nn(wn(wn(t)),"_onEditorLoaded",function(){t.setState({editorState:gn({},t.state.editorState,{isEditorLoaded:!0})})}),Nn(wn(wn(t)),"_hideEditorIfNotForComments",function(){var e=Object(pn.c)();t.domNodes.root.querySelectorAll("#".concat(e.id)).length||t._hideEditor()}),Nn(wn(wn(t)),"_replyCommentAction",function(e){t._showEditor({contentId:e,mode:"replyComment"})}),Nn(wn(wn(t)),"_editCommentAction",function(e){t._showEditor({mode:"editComment",contentId:e})}),Nn(wn(wn(t)),"_showAddCommentEditor",function(e){var n=t.props.contentId;e&&e.preventDefault(),t._warnCommentLost(function(){return t._showEditor({mode:"addComment",contentId:n})})}),Nn(wn(wn(t)),"_triggerShowAddCommentEditor",function(e){setTimeout(function(){return t.scrollToElement("addcomment")},0),t._showAddCommentEditor(e)}),Nn(wn(wn(t)),"_warnCommentLost",function(e){var n=t.props.intl.formatMessage;Object(pn.h)()&&!Object(z.b)(n({id:"unsaved.comment.lost"}))||e()}),Nn(wn(wn(t)),"_callAnalyticsEvent",function(e){Object(A.a)().then(function(n){n.sendTrackEvent(e)})}),Nn(wn(wn(t)),"_getCommentAnalyticsObject",function(e){var n=e.id,t=e.spaceId,o=e.ownerId,i=e.requestType,r=e.isInlineComment,a=e.contentType,c=e.parentId;return{containerType:"space",containerId:t,source:"viewPageScreen",objectType:"page",objectId:o.toString(),action:"editComment"===i?"updated":"created",actionSubject:"comment",actionSubjectId:n,attributes:{commentType:r?"inline":"page",pageType:a,parentCommentId:c.toString()}}}),Nn(wn(wn(t)),"_editorSaveHandler",function(e){var n=t.props.intl.formatMessage,o=t.props,i=o.saveComment,r=o.onRefetchComments,a=t.state.editorState;if(e.html&&e.html.trim())e.requestType=a.mode,"replyComment"===a.mode&&(e.showCommentAfter=t._getThreadLastCommentId(a.contentId)),i(e).then(function(n){var o=n.data.experimentalSaveComment,i=o.id,c=o.parentId,d=o.ownerId,s=o.isInlineComment,l=t.props,u=l.spaceId,m=l.contentType,f=t._getCommentAnalyticsObject({id:i,spaceId:u,parentId:c,contentType:m,ownerId:d,isInlineComment:s,requestType:e.requestType});t._callAnalyticsEvent(f);var p={commentId:i,threadLastCommentId:t._getThreadLastCommentId(a.contentId),parentId:c,mode:a.mode};r(p).then(function(){t._hideEditor()})}),t._removeSlowCommentURLParams();else{var c={errorMessage:n({id:"content.empty"}),errorType:"warning"};t.setState({editorState:gn({},t.state.editorState,c)})}}),Nn(wn(wn(t)),"_editorCancelHandler",function(){t._hideEditor(),t._removeSlowCommentURLParams()}),Nn(wn(wn(t)),"_onDeleteComment",function(e){(0,t.props.deleteComment)(e)}),Nn(wn(wn(t)),"_closeEditorError",function(){t.setState({editorState:gn({},t.state.editorState,{errorMessage:"",updateTime:0})})}),Nn(wn(wn(t)),"_getReference",function(e){return function(n){return t.domNodes[e]=n}}),t}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&Sn(e,n)}(n,a["Component"]),function(e,n,t){n&&_n(e.prototype,n),t&&_n(e,t)}(n,[{key:"componentDidMount",value:function(){var e=this.props,n=e.replyToCommentId,t=e.shouldOpenAddComment,o=e.openEditCommentId,i=e.isEditCommentFound,r=e.focusOnCommentId,a=e.readyToScrollToElement,c=this.state.editorState;o&&i&&(this._editCommentAction(o),this.scrollToElement("comment-".concat(o))),n&&c.contentId!==n&&this._replyCommentAction(n),t&&this._triggerShowAddCommentEditor(),r&&a&&this.scrollToElement("comment-".concat(r)),t&&a&&this.scrollToElement("addcomment"),Object(F.a)("rte-quick-edit-ready",this._hideEditorIfNotForComments)}},{key:"componentDidUpdate",value:function(){Object(vn.d)()}},{key:"componentWillUnmount",value:function(){Object(F.c)("rte-quick-edit-ready",this._hideEditorIfNotForComments),this._hideEditor()}},{key:"scrollToElement",value:function(e){var n=Object(yn.d)(e);n&&n.scrollIntoView()}},{key:"_getThreadLastCommentId",value:function(e){var n,t,o,i;return this.props.commentsData.forEach(function(r){n||(void 0!==t&&(t>=r.depthLevel?n=o:i=r.id),r.id===e&&(t=r.depthLevel),o=r.id)}),n||(n=i||e),n}},{key:"_removeSlowCommentURLParams",value:function(){var e=this.props,n=e.replace,t=e.location,o=t.query,i=["showCommentArea","showComments","editComment","commentId"];if(i.map(function(e){return void 0!==o[e]}).filter(function(e){return e}).length){var r=E()(t.query,i);n(gn({},t,{query:r,search:g.a.format({query:r})}))}}},{key:"_canViewProfile",value:function(){var e=this.props.currentUserInfo,n=e.isAnonymous,t=e.currentUserCanViewProfile;return n?!0===t:!1!==t}},{key:"_getCommentActions",value:function(){var e=this;return{deleteComment:this._onDeleteComment,replyToComment:function(n){return e._warnCommentLost(function(){return e._replyCommentAction(n)})},editComment:function(n){return e._warnCommentLost(function(){return e._editCommentAction(n)})}}}},{key:"_isAddCommentEditorEnabled",value:function(){var e=this.props.contentId,n=this.state.editorState;return n.contentId===e&&"addComment"===n.mode}},{key:"_renderHeadLine",value:function(){var e=this.props.totalComments;return e?c.a.createElement("h2",{"data-test-id":"comments-count"},1===e?c.a.createElement(I.c,{id:"comment.singular",values:{0:e}}):c.a.createElement(I.c,{id:"comment.plural",values:{0:e}})):null}},{key:"_renderEditCommentErrorFlag",value:function(){var e=this.props,n=e.openEditCommentId,t=e.isEditCommentFound;return n&&!t?c.a.createElement(P.a,{type:"error"},c.a.createElement(I.c,{id:"comment.edit.not.found"})):null}},{key:"_renderCommentsList",value:function(){var e=this.props,n=e.contentId,t=e.currentUserInfo,o=e.commentsData,i=e.contentType,r=e.focusOnCommentId,a=e.editedCommentsIds,d=e.atlToken,s=this.state,l=s.updatedCommentsIds,u=s.commentsIds,m=s.editorState,f={atlToken:d,commentsIds:u,contentType:i,contentId:n,comments:o,commentActions:this._getCommentActions(),showAuthorLabel:"blogpost"===i,focusOnCommentId:r,highlightedComments:a.length>0?a:l,userInfo:t,editor:m,canViewProfile:this._canViewProfile(),editorSaveHandler:this._editorSaveHandler,editorCancelHandler:this._editorCancelHandler,onEditorLoaded:this._onEditorLoaded};return c.a.createElement(sn,f)}},{key:"_renderAddCommentField",value:function(){var e=this.props,n=e.contentId,t=e.canAddComments,o=e.currentUserInfo,i=e.atlToken,r=this.state.editorState;if(t){var a={style:{paddingTop:20},contentId:n,atlToken:i,mode:"add",id:"addcomment",userInfo:o,isEditorEnabled:this._isAddCommentEditorEnabled(),onClickCommentAddPrompt:this._showAddCommentEditor,editor:r,canViewProfile:this._canViewProfile(),editorSaveHandler:this._editorSaveHandler,editorCancelHandler:this._editorCancelHandler,onEditorLoaded:this._onEditorLoaded};return c.a.createElement(Ye,a)}}},{key:"_renderEditorMessage",value:function(){var e=this.props.intl.formatMessage,n=this.state.editorState;return c.a.createElement(x.a,{isShowing:!0,type:n.errorType||"error",body:En[n.errorMessage]?e({id:En[n.errorMessage]}):n.errorMessage,close:"manual",onClose:this._closeEditorError})}},{key:"_renderGraphQLErrorMessage",value:function(){var e=this.props.intl.formatMessage,n=this.props,t=n.saveCommentError,o=n.deleteCommentError,i=t||o,r=m()(i,"graphQLErrors[0].message");return c.a.createElement(x.a,{isShowing:!0,type:"error",body:En[r]?e({id:En[r]}):r,close:"manual",onClose:this._closeEditorError})}},{key:"render",value:function(){var e=this.props,n=e.contentId,t=e.saveCommentError,o=e.deleteCommentError,i=this._isAddCommentEditorEnabled(),r=this.state.editorState;return c.a.createElement("div",{className:hn.a.root,ref:this._getReference("root"),id:"comments-section","data-test-id":"comments-section-new"},this._renderHeadLine(),this._renderEditCommentErrorFlag(),t||o?this._renderGraphQLErrorMessage():null,this._renderCommentsList(),this._renderAddCommentField(),r.errorMessage?this._renderEditorMessage():null,i?null:c.a.createElement(un,{contentId:n,onClick:this._triggerShowAddCommentEditor}))}}],[{key:"getDerivedStateFromProps",value:function(e,n){return!C()(n.commentsIds,e.commentsIds)&&!1===n.hasNextPage&&!1===e.hasNextPage&&e.hasFetchedComments?{commentsIds:e.commentsIds,hasNextPage:e.hasNextPage,updatedCommentsIds:w()(e.commentsIds,n.commentsIds)}:gn({},n,{commentsIds:e.commentsIds,hasNextPage:e.hasNextPage})}}]),n}())||fn)||fn);function On(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},o=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.forEach(function(n){Fn(e,n,t[n])})}return e}function Pn(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function jn(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Fn(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function An(e){return(An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xn(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Tn(e,n){return!n||"object"!==An(n)&&"function"!=typeof n?Ln(e):n}function Ln(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dn(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&Un(e,n)}function Vn(e){var n="function"==typeof Map?new Map:void 0;return(Vn=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return Hn(e,arguments,Rn(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Un(t,e)})(e)}function Hn(e,n,t){return(Hn=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,n,t){var o=[null];o.push.apply(o,n);var i=new(Function.bind.apply(e,o));return t&&Un(i,t.prototype),i}).apply(null,arguments)}function Un(e,n){return(Un=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function Rn(e){return(Rn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}t.d(n,"default",function(){return Kn});var Mn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CommentsSectionQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"contentId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"child"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"comment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}},{kind:"Argument",name:{kind:"Name",value:"location"},value:{kind:"ListValue",values:[{kind:"StringValue",value:"footer",block:!1}]}},{kind:"Argument",name:{kind:"Name",value:"depth"},value:{kind:"StringValue",value:"all",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ancestors"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"container"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"history"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createdBy"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profilePicture"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"KnownUser"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accountId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"editor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"view"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"webresource"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"keys"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"history"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createdBy"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profilePicture"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"KnownUser"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accountId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"links"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"webui"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"operations"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"operation"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"version"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"friendlyWhen"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"when"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"by"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"KnownUser"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accountId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"operations"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"operation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"targetType"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"space"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"homepageId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"current"},value:{kind:"BooleanValue",value:!0}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"photos"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isPrimary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:2010,source:{body:'query CommentsSectionQuery($offset: Int, $first: Int, $contentId: ID!) {\n  content(id: $contentId) {\n    child {\n      comment(offset: $offset, first: $first, location: ["footer"], depth: "all") {\n        count\n        pageInfo {\n          hasNextPage\n          endCursor\n        }\n        edges {\n          cursor\n          node {\n            ancestors {\n              id\n            }\n            container {\n              history {\n                createdBy {\n                  type\n                  displayName\n                  profilePicture {\n                    path\n                  }\n                  ... on KnownUser {\n                    accountId\n                    username\n                  }\n                }\n              }\n            }\n            body {\n              editor {\n                value\n              }\n              view {\n                value\n                webresource {\n                  keys\n                }\n              }\n            }\n            history {\n              createdBy {\n                type\n                displayName\n                profilePicture {\n                  path\n                }\n                ... on KnownUser {\n                  accountId\n                  username\n                }\n              }\n            }\n            id\n            links {\n              webui\n            }\n            operations {\n              operation\n            }\n            version {\n              friendlyWhen\n              when\n              by {\n                ... on KnownUser {\n                  accountId\n                  username\n                  displayName\n                  type\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    nodes {\n      id\n      operations {\n        operation\n        targetType\n      }\n      space {\n        id\n        homepageId\n      }\n      type\n    }\n  }\n  user(current: true) {\n    userName\n    displayName\n    photos {\n      isPrimary\n      value\n    }\n    id\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}}}},qn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"CommentsSectionQuerySaveComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"params"}},type:{kind:"NamedType",name:{kind:"Name",value:"ExperimentalCommentInput"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"experimental"},arguments:[]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"experimentalSaveComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"params"},value:{kind:"Variable",name:{kind:"Name",value:"params"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"asyncRenderSafe"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"html"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isInlineComment"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ownerId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"parentId"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:224,source:{body:"mutation CommentsSectionQuerySaveComment($params: ExperimentalCommentInput) @experimental {\n  experimentalSaveComment(params: $params) {\n    asyncRenderSafe\n    html\n    id\n    isInlineComment\n    ownerId\n    parentId\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},Bn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"CommentsSectionQueryDeleteComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"experimental"},arguments:[]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"experimentalDeleteComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"contentId"},value:{kind:"Variable",name:{kind:"Name",value:"contentId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contentId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"statusCode"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:164,source:{body:"mutation CommentsSectionQueryDeleteComment($contentId: ID!) @experimental {\n  experimentalDeleteComment(contentId: $contentId) {\n    contentId\n    statusCode\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},Qn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetCommentDataQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"experimental"},arguments:[]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"experimental"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"comment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"contentId"},value:{kind:"Variable",name:{kind:"Name",value:"contentId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ancestors"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"container"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"history"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createdBy"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profilePicture"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"KnownUser"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accountId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"editor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"view"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"webresource"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"keys"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"history"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createdBy"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profilePicture"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"KnownUser"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accountId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"links"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"webui"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"operations"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"operation"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"version"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"friendlyWhen"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"when"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"by"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"KnownUser"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accountId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}],loc:{start:0,end:1134,source:{body:"query GetCommentDataQuery($contentId: String!) @experimental {\n  experimental {\n    comment(contentId: $contentId) {\n      ancestors {\n        id\n      }\n      container {\n        history {\n          createdBy {\n            type\n            displayName\n            profilePicture {\n              path\n            }\n            ... on KnownUser {\n              accountId\n              username\n            }\n          }\n        }\n      }\n      body {\n        editor {\n          value\n        }\n        view {\n          value\n          webresource {\n            keys\n          }\n        }\n      }\n      history {\n        createdBy {\n          type\n          displayName\n          profilePicture {\n            path\n          }\n          ... on KnownUser {\n            accountId\n            username\n          }\n        }\n      }\n      id\n      links {\n        webui\n      }\n      operations {\n        operation\n      }\n      version {\n        friendlyWhen\n        when\n        by {\n          ... on KnownUser {\n            accountId\n            username\n            displayName\n            type\n          }\n        }\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},Jn=function(e){function n(){var e,t;xn(this,n);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];t=Tn(this,(e=Rn(n)).call.apply(e,[this].concat(i)));var a=i[0];return t.message=a.message,t.graphQLErrors=a.graphQLErrors,t}return Dn(n,Vn(Error)),n}();var zn=Object(s.connect)(function(e,n){var t=n.commentsData,o=n.hasFetchedComments,i=t.map(function(e){return e.id}),r=Object(y.y)(e),a=r.query,c=a.focusedCommentId,d=a.replyToComment,s=a.showCommentArea,l=a.editComment,u=a.commentId,m="true"===l&&u||"";return{focusOnCommentId:c||d,replyToCommentId:d,shouldOpenAddComment:"true"===s,openEditCommentId:m,isEditCommentFound:!!m&&-1!==i.indexOf(m),readyToScrollToElement:o,hasFetched:o,commentsData:t,commentsIds:i,location:r,atlToken:""}},function(e){return{replace:function(n){return e(Object(l.replace)(n))}}})(In),Wn=[],Kn=function(e){function n(){var e,t;xn(this,n);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return Fn(Ln(Ln(t=Tn(this,(e=Rn(n)).call.apply(e,[this].concat(i))))),"_getCommentVersion",function(e){return{id:m()(e,"node.id"),by:m()(e,"node.version.by.username"),when:m()(e,"node.version.when")}}),Fn(Ln(Ln(t)),"_buildUserInfo",function(e){return{userName:m()(e,"userName"),fullName:m()(e,"displayName"),avatarUrl:m()(e,"photos.length")&&m()(e,"photos").find(function(e){return e.isPrimary}).value,accountId:m()(e,"id")}}),Fn(Ln(Ln(t)),"_saveComment",function(e,n){return function(t){var o=t.watch,i=void 0!==o&&o,r=t.contentId,a=t.commentId,c=void 0===a?"":a,d=t.html,s=t.requestType,l=t.captcha;return n({variables:{params:{contentId:r||e,commentId:c,requestType:s,html:d,watch:i,uuid:Object(h.a)(),captcha:l}}})}}),Fn(Ln(Ln(t)),"_deleteComment",function(e,n){return function(e){return n({variables:{contentId:e}})}}),Fn(Ln(Ln(t)),"_onRefetchComments",function(e,n){var t=e.commentId;return n({variables:{contentId:t},query:Qn,updateQuery:function(n,o){var i=o.fetchMoreResult;if(!i)return n;var r=i.experimental.comment,a=p()(n),c=[],d=e.threadLastCommentId,s=e.parentId,l=e.mode;if("editComment"===l){var u=n.content.child.comment.edges.findIndex(function(e){return e.node.id===t}),m=a.content.child.comment.edges.slice(0,u),f=[{cursor:u.toString(),node:r,__typename:"ContentEdge"}],y=a.content.child.comment.edges.slice(u+1);c=Pn(m).concat(f,Pn(y)),Wn=[t]}else if("replyComment"===l){var v=d||s,k=n.content.child.comment.edges.findIndex(function(e){return e.node.id===v}),h=a.content.child.comment.edges.slice(0,k+1),b=[{cursor:(k+1).toString(),node:r,__typename:"ContentEdge"}],g=a.content.child.comment.edges.slice(k+1);c=Pn(h).concat(b,Pn(g)),Wn=[]}else"addComment"!==l&&"0"!==s||(c=a.content.child.comment.edges.concat([{cursor:n.content.child.comment.count.toString(),node:r,__typename:"ContentEdge"}]),Wn=[]);return Object.assign({},n,{content:{child:{comment:{count:c.length,pageInfo:{endCursor:(c.length-1).toString(),hasNextPage:!1,__typename:a.content.child.comment.pageInfo.__typename},edges:c,__typename:a.content.child.comment.__typename},__typename:a.content.child.__typename},nodes:Pn(a.content.nodes),__typename:a.content.__typename}})}})}),t}return Dn(n,a["Component"]),function(e,n,t){n&&jn(e.prototype,n),t&&jn(e,t)}(n,[{key:"_buildCommentsData",value:function(e){var n=this,t=m()(e,"content.child.comment.edges");return t&&0!==t.length?t.map(function(e){var t=m()(e,"node.ancestors")||[],o=m()(t,"length")||0,i=m()(t,"ancestors[0].id")||null,r=m()(e,"node.body.view.value")||"",a=m()(e,"node.body.editor.value")||"",c=n._getCommentVersion(e),d=m()(e,"node.body.view.webresource.key")||[],s=Object(k.h)(m()(e,"node.history.createdBy"));return{ancestors:t,depthLevel:o,parentId:i,bodyExportView:r,contentContainerCreatedBy:Object(k.h)(m()(e,"node.container.history.createdBy")),bodyEditorView:a,version:c,webResourceKeys:d,createdBy:s,createdByAuthor:m()(e,"node.container.history.createdBy.accountId")&&m()(e,"node.version.by.accountId")&&m()(e,"node.container.history.createdBy.accountId")===m()(e,"node.version.by.accountId"),id:m()(e,"node.id")||"",linkWebui:m()(e,"node.links.webui")||"",operations:m()(e,"node.operations")||[],createdFriendly:m()(e,"node.version.friendlyWhen")||"",createdDate:m()(e,"node.version.when")||""}}):[]}},{key:"_fetchMore",value:function(e,n){return e({variables:n,updateQuery:function(e,n){var t=n.fetchMoreResult;return t?Object.assign({},e,{content:{child:{comment:{count:e.content.child.comment.count+t.content.child.comment.count,pageInfo:On({},t.content.child.comment.pageInfo,{__typename:t.content.child.comment.pageInfo.__typename}),edges:Pn(e.content.child.comment.edges).concat(Pn(t.content.child.comment.edges)),__typename:t.content.child.comment.__typename},__typename:t.content.child.__typename},nodes:Pn(t.content.nodes),__typename:t.content.__typename}}):e}})}},{key:"render",value:function(){var e=this,n=this.props.contentId;return n?c.a.createElement(v.f,null,c.a.createElement(d.Query,{query:Mn,variables:{contentId:n,offset:0,first:100},errorPolicy:"all"},function(t){var o=t.data,i=t.loading,r=t.error,a=t.fetchMore,s=t.networkStatus;return c.a.createElement(d.Mutation,{mutation:qn},function(t,l){var u=l.error,f=l.data;return c.a.createElement(d.Mutation,{mutation:Bn,update:function(e,t){var o=t.data.experimentalDeleteComment.contentId,i=e.readQuery({query:Mn,variables:{contentId:n,offset:0,first:100}}),r=i.content.child.comment.edges.filter(function(e){return e.node.id!==o}).map(function(e){var n=e.node.ancestors.filter(function(e){return e.id!==o}),t=e.node,i={container:t.container,body:t.body,history:t.history,id:t.id,links:t.links,operations:t.operations,version:t.version},r=e.cursor;return Object.assign({},e,{cursor:r,node:On({ancestors:n},i,{__typename:e.node.__typename}),__typename:e.__typename})}),a=i.user;e.writeQuery({query:Mn,variables:{contentId:n,offset:0,first:100},data:{content:{child:{comment:{count:r.length,pageInfo:{endCursor:(r.length-1).toString(),hasNextPage:!1,__typename:i.content.child.comment.pageInfo.__typename},edges:r,__typename:i.content.child.comment.__typename},__typename:i.content.child.__typename},nodes:Pn(i.content.nodes),__typename:i.content.__typename},user:a}})}},function(d,l){var p=l.error,y=l.data;if(r)throw new Jn(r);if(!m()(o,"content.nodes[0]")||!m()(o,"content.child.comment"))return null;var v=m()(o,"content.child.comment"),k=v.count,h=v.pageInfo,b=h.hasNextPage,g=h.endCursor,_=m()(o,"content.nodes[0]"),C=_.operations,S=_.space,w=S.homepageId,N=S.id,E=_.type,I=e._buildUserInfo(m()(o,"user")),O=w===n,P=C.find(function(e){return"create"===e.operation&&"comment"===e.targetType})&&Boolean(!O||k>0);return b&&!i&&e._fetchMore(a,{contentId:n,offset:Number(g)+1}),c.a.createElement(zn,{onRefetchComments:function(n){return e._onRefetchComments(n,a)},canAddComments:P,currentUserInfo:I,canViewProfile:!!I,commentsData:e._buildCommentsData(o),contentId:n,contentType:E,spaceId:N,currentUserCanViewProfile:!!I,isAnonymous:!I,totalComments:b?0:k,hasFetchedComments:!i,hasNextPage:b,networkStatus:s,saveComment:e._saveComment(n,t),deleteComment:e._deleteComment(n,d),saveCommentData:f,saveCommentError:u,deleteCommentData:y,deleteCommentError:p,editedCommentsIds:Wn})})})})):null}}]),n}();Kn.displayName="CommentsSection"},dNso:function(e,n,t){(n=e.exports=t("RDo7")(!1)).push([e.i,".CommentsList_root_47I{margin-top:5px}",""]),n.locals={root:"CommentsList_root_47I"}},eeAI:function(e,n,t){(n=e.exports=t("RDo7")(!1)).push([e.i,".CommentAddPrompt_root_24r{border:1px solid #ccc;border-radius:3px;height:42px;color:#999;padding-top:5px}.CommentAddPrompt_root_24r span{padding:6px}",""]),n.locals={root:"CommentAddPrompt_root_24r"}},fYdy:function(e,n,t){"use strict";t("aWzz");var o=t("ERkP"),i=t.n(o),r=t("L21V"),a=t("uDfI"),c=t("yLtY"),d=t("sbiO"),s=t("bQlP"),l=t("3iG9");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(e,n){return!n||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,n){return(y=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var v=function(e){function n(){return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),f(this,p(n).apply(this,arguments))}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&y(e,n)}(n,o["Component"]),function(e,n,t){n&&m(e.prototype,n),t&&m(e,t)}(n,[{key:"renderUserLink",value:function(){var e=this.props,n=e.userId,t=e.fullName,o=e.isFabricProfileRedirectEnabled,r=e.referralSource,a=e.onUserLinkClick,c=o?"_blank":"_self";return i.a.createElement("a",{target:c,onClick:a,href:Object(d.m)(n,r)},t)}},{key:"render",value:function(){var e=this.props,n=e.userId,t=e.className,o=e.isAnonymous,a=e.canViewProfile,c=e.withUserHover;return o?i.a.createElement("div",{className:t},i.a.createElement(r.c,{id:"anonymous.name"})):c?i.a.createElement(l.a,{isAnonymous:o,canViewProfile:a,userId:n},this.renderUserLink()):this.renderUserLink()}}]),n}();!function(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t}(v,"defaultProps",{onUserLinkClick:function(){},withUserHover:!0}),v.displayName="ProfileLink";n.a=Object(a.connect)(function(e){return{isFabricProfileRedirectEnabled:Object(c.H)(e,s.t)}},function(){return{}})(v)},"g/An":function(e,n,t){var o=t("dNso"),i=t("7l8p");"string"==typeof o&&(o=[[e.i,o,""]]),e.exports=o.locals||{},e.exports._getContent=function(){return o},e.exports._getCss=function(){return o.toString()},e.exports._insertCss=function(e){return i(o,e)}},iUdj:function(e,n,t){"use strict";n.a=function(e){Promise.all([t.e(31),t.e(84),t.e(234)]).then(t.bind(null,"LbM8")).then(function(n){return e(n.default)})}},pYTW:function(e,n,t){var o=t("eeAI"),i=t("7l8p");"string"==typeof o&&(o=[[e.i,o,""]]),e.exports=o.locals||{},e.exports._getContent=function(){return o},e.exports._getCss=function(){return o.toString()},e.exports._insertCss=function(e){return i(o,e)}},utTn:function(e,n,t){"use strict";t.d(n,"c",function(){return a}),t.d(n,"b",function(){return c}),t.d(n,"a",function(){return d}),t.d(n,"d",function(){return s});var o=t("Jygk"),i=t.n(o),r=t("M2LZ"),a=function(){r.a.require(["wr!com.atlassian.confluence.plugins.confluence-create-content-plugin:resources"]).then(function(){i.a.Confluence.SpaceBlueprint.Dialog.launch()})},c=function(){r.a.require(["wr!com.atlassian.confluence.plugins.confluence-create-content-plugin:resources"]).then(function(){i.a.Confluence.Blueprint.loadDialogAndOpenTemplate({})})},d=function(){return Confluence.Link},s=("undefined"!=typeof Confluence&&Confluence,function(){return"undefined"!=typeof Confluence&&Confluence.Binder&&Confluence.Binder.userHover&&Confluence.Binder.userHover()})},v45N:function(e,n,t){var o=t("TcLa"),i=t("7l8p");"string"==typeof o&&(o=[[e.i,o,""]]),e.exports=o.locals||{},e.exports._getContent=function(){return o},e.exports._getCss=function(){return o.toString()},e.exports._insertCss=function(e){return i(o,e)}},wjr4:function(e,n,t){var o=t("C4P7"),i=t("7l8p");"string"==typeof o&&(o=[[e.i,o,""]]),e.exports=o.locals||{},e.exports._getContent=function(){return o},e.exports._getCss=function(){return o.toString()},e.exports._insertCss=function(e){return i(o,e)}},x98U:function(e,n,t){"use strict";t.d(n,"a",function(){return p});t("aWzz");var o=t("ERkP"),i=t.n(o),r=t("bz/o"),a=t("sbiO"),c=t("3iG9");function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,n){return!n||"object"!==d(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,n){return(m=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var f="".concat(a.b,"/images/icons/profilepics/anonymous.png"),p=function(e){function n(){return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),l(this,u(n).apply(this,arguments))}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&m(e,n)}(n,o["Component"]),function(e,n,t){n&&s(e.prototype,n),t&&s(e,t)}(n,[{key:"canHoverUser",value:function(){var e=this.props,n=e.withUserHover,t=e.userId;return n&&t}},{key:"renderAvatar",value:function(){var e=this.props,n=e.enableTooltip,t=e.canViewProfile,o=e.isAnonymous,a=e.userId,c=e.size,d=this.props.src;return d=!0!==t||o?f:d,i.a.createElement(r.a,{userId:a,src:d,size:c,target:"_blank",enableTooltip:!this.canHoverUser()&&n})}},{key:"render",value:function(){var e=this.props,n=e.userId,t=e.canViewProfile;return this.canHoverUser()?i.a.createElement(c.a,{userId:n,canViewProfile:t},this.renderAvatar()):this.renderAvatar()}}]),n}();!function(e,n,t){n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t}(p,"defaultProps",{enableTooltip:!0,withUserHover:!0,isHover:!1}),p.displayName="ProfilePictureWithCard"}}]);
//# sourceMappingURL=page.comments~space.overview.6faa35403aed24c76a72-v35.js.map