define("wkview:widget/common_toc/reader_html/page_body/main.js",function(e,i,t){e("wkcommon:widget/ui/lib/async_widget/async_widget.js");var n=e("wkcommon:widget/ui/lib/browser/browser.js"),o=e("wkview:widget/crmAd/crmAd2.js"),d=e("wkview:widget/crm_multi/crm_multi.js"),r=e("wkview:widget/ui/detectImgBlock/detectImgBlock.js"),w=e("wkview:widget/ui/detectImgBlock/hijack.js"),c=e("wkcommon:widget/ui/lib/BigPipe/BigPipe.js"),g=e("wkview:widget/crmAd/crmAd3.js"),a=e("wkview:widget/fengchao_right/fengchao_right.js"),s=e("wkcommon:widget/lib/tangram/base/base.js"),l=e("wkcommon:widget/ui/lib/jquery/jquery.js"),m=e("wkview:widget/ad_xpageForm/xpageForm.js"),h=function(e){l.extend(!0,this.ops,e),this.bindEvent().run()};h.prototype={constructor:h,ops:{docId:"",docTitle:"",flag:1,needShowAd:1,needShowAd2:1,orgName:""},bindEvent:function(){var e=function(){var e=l(".daily-recom-wrap"),i=l(".reader-container").width();e.css("width",i),900>i?e.addClass("small-wrap"):e.removeClass("small-wrap")};return e(),s.lang.eventCenter.addEventListener("Reader.zoomChange",e),this},run:function(){var e=this.ops;if(l(function(){l(".async-widget").widgetAsync({effect:n.ie&&n.ie<8?"show":"slideDown",effect_speed:!1})}),!e.flag)return this;var i=r.detectImgBlock(),t=[];t.push({url:"/browse/widget/viewrecom?pagelets[]=view-like-recom&doc_id="+e.docId,id:"view-like-recom"});var s=function(){this.next=function(){if(t.length){var n=t.shift();c.fetch(n.url,n.id)}else l.event.trigger("orgRightRecon"),l.event.trigger("rightDocLoadEnd");e.needShowAd&&l.when(i).then(l(".other-like-doc").height()>10?function(){new g({ele:l("#guess-like-doc"),pid:7})}:function(){a.init()});new w;if(e.needShowAd2){var r=new d({title:e.docTitle}),s=function(){var i=(new o({ele:l("#wkad18"),pid:18}),new o({ele:l("#wkad21"),pid:21}),Math.random());r.show2To3(function(){new g({ele:l("#wkad21-2"),pid:5})},i),navigator.userAgent.indexOf("MSIE 6.0")<0&&r.showDocBtm(function(){new o({ele:l("#wkgg"),pid:3})},i),l("#html-reader-AD-4t5").length>0&&r.show4To5(i);new m({el:"#html-reader-AD-5t6",orgName:e.orgName}),new g({ele:l("#ggbtm"),pid:2})};l.when(i).then(function(){s()})}}},h=new s;if(c.on("pagerendercomplete",h.next,this),t.length){var u=t.shift();c.fetch(u.url,u.id)}return this}},t.exports=h});