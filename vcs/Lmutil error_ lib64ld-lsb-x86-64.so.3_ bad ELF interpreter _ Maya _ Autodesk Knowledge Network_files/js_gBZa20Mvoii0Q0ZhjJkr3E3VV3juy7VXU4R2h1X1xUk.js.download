function _adskLsEndsWithNonBreakingWord(e){if(!e)return!1;for(var t=0;t<mAdskLsNonBreakingRegex.length;t++)if(e.match(mAdskLsNonBreakingRegex[t]))return!0;return!1}function adskLsTranslate(e,t,n){if(!e)return;adskLsOriginal();if(e.clientId)_adskLsSegment(e,t);else for(var r=0;r<e.length;r++)_adskLsSegment(e[r],t);mAdskNbTranslateApiInProgress=0,mAdskNbRequestsProcessing=0,_adskLsTranslateApi(t,n)}function adskLsOriginal(){for(var e=0;e<mAdskLsObjs.length;e++){var t=mAdskLsObjs[e];t.doOriginal()}mAdskNbTranslateApiInProgress=0,mAdskNbRequestsProcessing=0}function _adskLsGetLanguageNoSpecialCharacters(e){return e.replace(/[^\w\s]/gi,"")}function _adskLsHasClass(e,t){return t&&e&&e.className&&e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function _adskLsIsAutodeskCom(){var e=document.domain,t=e&&e.toLowerCase().indexOf(mAutodeskDomain)>=0&&e.toLowerCase().indexOf(mAutodeskDomain)==e.length-mAutodeskDomain.length;return t}function _adskLsIsIe(){return navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident/")>=0}function _adskLsIsFirefox(){return typeof InstallTrigger!="undefined"}function _adskLsIsSupportCors(){var e=mAdskLsJq.support.cors;return e&&(!_adskLsIsIe()||!!_adskLsIsAutodeskCom())}function _adskGetParentNodeWithClass(e,t){if(!e||!t)return undefined;var n=e;while(n=n.parentNode)if(_adskLsHasClass(n,t))return n;return undefined}function _adskLsSegment(e,t){var n=mAdskLsSegmentedClassName+"AnyLocale",r=[],i=e.toTranslateElements;if(i)for(var s=0;s<i.length;s++){var o=i[s];o&&!_adskLsHasClass(o,n)&&(r.push(o),o.className=o.className+" "+n)}var u=e.toTranslateIds;if(u)for(var s=0;s<u.length;s++){var o=document.getElementById(u[s]);o&&!_adskLsHasClass(o,n)&&(r.push(o),o.className=o.className+" "+n)}var a=e.toTranslateClasses;if(a)for(var s=0;s<a.length;s++){var o=getElementsByClassName(a[s]);if(o)for(var f=0;f<o.length;f++){var l=o[f];l&&!_adskLsHasClass(l,n)&&(r.push(l),l.className=l.className+" "+n)}}for(var s=0;s<r.length;s++){var c=new AdskLocalizationWidget(e);mAdskLsObjs.push(c),c.parseText(r[s],n)}}function _adskLsTranslateFake(){for(var e=0;e<mAdskLsObjs.length;e++){var t=mAdskLsObjs[e];t.translateFake()}}function _adskTranslateApiInternalCallback(e){mAdskNbTranslateApiInProgress--,mAdskNbTranslateApiInProgress<=0&&mAdskNbRequestsProcessing<=0&&e&&(mAdskNbTranslateApiInProgress=0,mAdskNbRequestsProcessing=0,e())}function _adskLsTranslateApi(e,t){if(mAdskLsObjs.length==0)_adskTranslateApiInternalCallback(t);else{mAdskNbTranslateApiInProgress+=mAdskLsObjs.length;for(var n=0;n<mAdskLsObjs.length;n++){var r=mAdskLsObjs[n];r.translateApi(e,t)}}}function AdskLocalizationWidget(e){return typeof jQuery=="undefined"?function(){var e=(new Date).getTime(),t=document.createElement("SCRIPT");t.src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js",t.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(t);var n=function(e){window.jQuery?e(jQuery):window.setTimeout(function(){n(e)},20)};n(function(t){t(function(){var t=(new Date).getTime(),n=t-e;mAdskLsJq=jQuery})})}():mAdskLsJq||(mAdskLsJq=jQuery),this.mProduct=e.product,this.mHostedUrl=document.URL,this.mSrcLng=e.srcLng,this.mClientId=e.clientId,this.mNbSegmentsPerRequest=e.nbSegmentsPerRequest,this.mNbSegmentsPerRequest||(this.mNbSegmentsPerRequest=10),this.mMaxSegmentsSizePerRequest=e.maxSegmentsSizePerRequest,this.mMaxSegmentsSizePerRequest||(this.mMaxSegmentsSizePerRequest=1e4),this.mToMergeSpecialCases=[],this.mToMergeSpecialCases.push(["Infr.","Map Server",!1]),this.mTagsToSkip=new Object,this.mTagsToSkip.SCRIPT="true",this.mTagsToSkip.STYLE="true",this.mTagsToSkip.META="true",this.mTagsToSkip.LINK="true",this.mTagsToSkip.IMG="true",this.mTagsDelimiter=new Object,this.mTagsDelimiter.HTML="true",this.mTagsDelimiter.HEAD="true",this.mTagsDelimiter.BODY="true",this.mTagsDelimiter.P="true",this.mTagsDelimiter.p="true",this.mTagsDelimiter.H1="true",this.mTagsDelimiter.H2="true",this.mTagsDelimiter.H3="true",this.mTagsDelimiter.H4="true",this.mTagsDelimiter.H5="true",this.mTagsDelimiter.H6="true",this.mTagsDelimiter.H7="true",this.mTagsDelimiter.H8="true",this.mTagsDelimiter.H9="true",this.mTagsDelimiter.OPTION="true",this.mTagsDelimiter.LI="true",this.mTagsDelimiter.DIV="true",this.mTagsDelimiter.TABLE="true",this.mTagsDelimiter.TH="true",this.mTagsDelimiter.TR="true",this.mTagsDelimiter.TD="true",this.mToTranslate=[],this.mToTranslateSegmented=[],this.mParsed=!1,this.mNoTranslateTextNodes=[],this.mPhFollowingTextNodes=[],this.mOriginalData=[],this.mTranslatedData=new Object,this.mSplitTextFunction=this.splitTextEn,this.mMergeSegments=this.mergeSegmentsEn,this.mIsMergeSegments=this.isMergeSegmentsEn,e.highlightSegments?this.highlightSegments=e.highlightSegments:this.highlightSegments=!1,this.mtClass=e.mtClass,this.mtClass||(this.mtClass=mAdskLsMtClassNameDefault),this.exactClass=e.exactClass,this.exactClass||(this.exactClass=mAdskLsExactClassNameDefault),this.iceClass=e.iceClass,this.iceClass||(this.iceClass=mAdskLsIceClassNameDefault),this.titleSrc=e.titleSrc,this.noTranslateClass=e.noTranslateClass,this.noTranslateClass||(this.noTranslateClass=mAdskLsNoTranslateClassNameDefault),e.logSegments?this.logSegments=e.logSegments:this.logSegments=!1,e.logSegmentOnMouseOver?this.logSegmentOnMouseOver=e.logSegmentOnMouseOver:this.logSegmentOnMouseOver=!1,e.corsEnabled===!1?this.corsEnabled=!1:this.corsEnabled=!0,this}function handleTranlatedResponse(e,t,n,r,i,s,o,u){if(e&&e.status=="ok")for(var a=0;a<e.result.length;a++){var f=t[a],l=e.result[a],c=undefined,h=undefined;if(l)c=e.result[a].trgText,h=e.result[a].type;else{c="N/A";for(var p=0;p<f.length-1;p++)c+="{"+(p+1)+"}"}var d=n.getSplitByPlaceholders(c);if(d.length!=f.length)return;var v=!1;for(var m=0;m<f.length;m++){var g=f[m];if(g&&g.length>0){var y="",b=0;m==0&&(b=n.getNbWhiteSpaceLeft(g[0].data));var w=0;m==f.length-1&&(w=n.getNbWhiteSpaceRight(g[g.length-1].data)),y=n.addWhiteSpacesLeft(y,b),y+=d[m],y=n.addWhiteSpacesRight(y,w);var E=!1;for(var S=0;S<g.length;S++){if(!v&&(h=="MT"&&r||h=="EXACT"&&i||h=="ICE"&&s)){var x=undefined;h=="MT"?x=r:h=="EXACT"?x=i:h=="ICE"&&(x=s);var T=g[S];while(T=T.parentNode)if(_adskLsHasClass(T,mAdskLsDecoClassName)){r&&(T.className=T.className.replace(new RegExp("\\b"+r+"\\b"),"")),i&&(T.className=T.className.replace(new RegExp("\\b"+i+"\\b"),"")),s&&(T.className=T.className.replace(new RegExp("\\b"+s+"\\b"),"")),x&&(T.className=T.className+" "+x),v=!0;break}}!E&&g[S].data.trim().length>0?(g[S].data=y,E=!0):g[S].data="";for(var N=0;N<n.mTranslatedData[o].length;N++)n.mTranslatedData[o][N][0]==g[S]&&(n.mTranslatedData[o][N][1]=g[S].data,n.mTranslatedData[o][N][2]=h)}}}}mAdskNbRequestsProcessing--,mAdskNbRequestsProcessing<=0&&(mAdskNbRequestsProcessing=0,_adskTranslateApiInternalCallback(u))}var mAutodeskDomain="autodesk.com",mAdskLsServerName="translate."+mAutodeskDomain,mAdskLsObjs=[],mAdskLsSegmentedClassName="adskLsSeg",mAdskLsDecoClassName="adskLsDeco",mAdskLsExactClassNameDefault="adskLsExact",mAdskLsMtClassNameDefault="adskLsMt",mAdskLsIceClassNameDefault="adskLsIce",mAdskLsNoTranslateClassNameDefault="noTranslate",mAdskLsSegNotAvailable="<NOT_AVAILABLE>",mAdskLsJq=undefined,mAdskNbTranslateApiInProgress=0,mAdskNbRequestsProcessing=0,mAdskLsNonBreakingWords=["a.m.","b.i.p.","co.","corp.","deg.","diff.","d.o.f.","dr.","e.","e.g.","etc.","e.v.","gen.","horiz.","hr.","ie.","i.e.","inc.","incl.","loc.","ltd.","mat.","max.","min.","mr.","ms.","n.c.","no.","n.o.","nov.","n.v.","oct.","p.","p.m.","p.o.i.","proj.","res.","resp.","segs.","st.","str.","temp.","u.k.","u.s.","u.s.a.","v.","vol.","vs.","w.r.t.","sr."],mAdskLsNonBreakingRegex=[];RegExp.quote=function(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")};for(var i=0;i<mAdskLsNonBreakingWords.length;i++){var regex=new RegExp("(\\s|\\(|^)"+RegExp.quote(mAdskLsNonBreakingWords[i])+"$","i");mAdskLsNonBreakingRegex.push(regex)}var getElementsByClassName=function(e,t,n){return document.getElementsByClassName?getElementsByClassName=function(e,t,n){n=n||document;var r=n.getElementsByClassName(e),i=t?new RegExp("\\b"+t+"\\b","i"):null,s=[],o;for(var u=0,a=r.length;u<a;u+=1)o=r[u],(!i||i.test(o.nodeName))&&s.push(o);return s}:document.evaluate?getElementsByClassName=function(e,t,n){t=t||"*",n=n||document;var r=_adskLsSplitCrossBrowser(e," "),i="",s="http://www.w3.org/1999/xhtml",o=document.documentElement.namespaceURI===s?s:null,u=[],a,f;for(var l=0,c=r.length;l<c;l+=1)i+="[contains(concat(' ', @class, ' '), ' "+r[l]+" ')]";try{a=document.evaluate(".//"+t+i,n,o,0,null)}catch(h){a=document.evaluate(".//"+t+i,n,null,0,null)}while(f=a.iterateNext())u.push(f);return u}:getElementsByClassName=function(e,t,n){t=t||"*",n=n||document;var r=_adskLsSplitCrossBrowser(e," "),i=[],s=t==="*"&&n.all?n.all:n.getElementsByTagName(t),o,u=[],a;for(var f=0,l=r.length;f<l;f+=1)i.push(new RegExp("(^|\\s)"+r[f]+"(\\s|$)"));for(var c=0,h=s.length;c<h;c+=1){o=s[c],a=!1;for(var p=0,d=i.length;p<d;p+=1){a=i[p].test(o.className);if(!a)break}a&&u.push(o)}return u},getElementsByClassName(e,t,n)};typeof String.prototype.trim!="function"&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),typeof String.prototype.startsWith!="function"&&(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t}),AdskLocalizationWidget.prototype.doOriginal=function(){if(!this.mParsed)return;for(var e=0;e<this.mToTranslateSegmented.length;e++){var t=this.mToTranslateSegmented[e],n=!1;if(t.segment&&t.segment.trim().length>0)for(var r=0;r<t.textNodes.length;r++){var i=t.textNodes[r];for(var s=0;s<i.length;s++){for(var o=0;o<this.mOriginalData.length;o++)if(this.mOriginalData[o][0]===i[s]){i[s].data=this.mOriginalData[o][1];break}if(!n){var u=i[s];while(u=u.parentNode)if(_adskLsHasClass(u,mAdskLsDecoClassName)){this.mtClass&&(u.className=u.className.replace(new RegExp("\\b"+this.mtClass+"\\b"),"")),this.exactClass&&(u.className=u.className.replace(new RegExp("\\b"+this.exactClass+"\\b"),"")),this.iceClass&&(u.className=u.className.replace(new RegExp("\\b"+this.iceClass+"\\b"),"")),n=!0;break}}}}}},AdskLocalizationWidget.prototype.contains=function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1},AdskLocalizationWidget.prototype.getPlaceholders=function(e){return e?e.match(/\{[0-9]+\}/gmi):!1},AdskLocalizationWidget.prototype.getSplitByPlaceholders=function(e){return e?_adskLsSplitCrossBrowser(e,/\{[0-9]+\}/gmi):undefined},AdskLocalizationWidget.prototype.getPlaceholders2=function(e){return e?e.match(/\[[0-9]+\]/gmi):!1},AdskLocalizationWidget.prototype.getSplitByPlaceholders2=function(e){return e?_adskLsSplitCrossBrowser(e,/\[[0-9]+\]/gmi):undefined},AdskLocalizationWidget.prototype.getPlaceholders3=function(e){return e?e.match(/\([0-9]+\)/gmi):!1},AdskLocalizationWidget.prototype.getSplitByPlaceholders3=function(e){return e?_adskLsSplitCrossBrowser(e,/\([0-9]+\)/gmi):undefined},AdskLocalizationWidget.prototype.splitSegments=function(e){for(var t=0;t<this.mToTranslate.length;t++){var n=this.mToTranslate[t],r=undefined;this.contains(this.mNoTranslateTextNodes,n.textNodes[0])?r=[n.text]:r=e(n.text),n.segments=r;if(r.length>1){var i=[],s=n.textNodes[0],o=s.parentNode;for(var u=0;u<r.length;u++){u<r.length-1&&(r[u]+=" ");var a=document.createTextNode(r[u]);o.insertBefore(a,s),i.push([a])}o.removeChild(s),n.textNodes=i}else n.textNodes=[n.textNodes]}},AdskLocalizationWidget.prototype.mergeSegmentsEn=function(){var e="",t=[];t.push([]);var n=[];for(var r=0;r<this.mToTranslate.length;r++){var i=this.mToTranslate[r];if(e.length>0&&r>0&&this.isContainsBreakingTag(this.mToTranslate[r-1].endedByTag)){e=e.trim();if(e.length>0){var s={};s.segment=e,s.textNodes=t,s.phValues=n,this.mToTranslateSegmented.push(s)}e="",t=[],t.push([]),n=[]}if(i.segments)for(var o=0;o<i.segments.length;o++){if(i.placeholders&&i.placeholders["ph"+o])for(var u=0;u<i.placeholders["ph"+o].length;u++)n.push(i.placeholders["ph"+o][u]);if(e.length==0)e+=i.segments[o],t=this.pushTextNodes(t,t.length-1,i.textNodes[o]);else if(this.mIsMergeSegments(e,i.segments[o])){e=e.trim();var a=i.segments[o].replace(/^\s+/g,""),f=this.isNeedSpaceBetweenSegments(e,a);if(e.length>1&&o==0&&r>0&&(!this.isFollowingTextNodes(this.getFlatArray(this.mToTranslate[r-1].textNodes),this.getFlatArray(i.textNodes))||!this.isSameNodesStack(this.mToTranslate[r-1].nodesStack,i.nodesStack))){var l=0;i.placeholders&&i.placeholders["ph"+o]&&(l=i.placeholders["ph"+o].length);var c=this.getPlaceholderValue(this.getFlatArray(this.mToTranslate[r-1].textNodes),this.getFlatArray(i.textNodes),this.mToTranslate[r-1].nodesStack,i.nodesStack);c.startsWith("</")&&f?e+="{"+(n.length+1)+"}"+" ":f?e+=" {"+(n.length+1)+"}":e+="{"+(n.length+1)+"}",f=!1,n.splice(n.length-l,0,c),t.push([])}f&&(e+=" ");var a=i.segments[o].replace(/^\s+/g,"");e+=a,t=this.pushTextNodes(t,t.length-1,i.textNodes[o])}else{e=e.trim();if(e.length>0){var s={};s.segment=e,s.textNodes=t,s.phValues=n,this.mToTranslateSegmented.push(s)}e=i.segments[o],t=[],t.push([]),t=this.pushTextNodes(t,0,i.textNodes[o]),n=[]}}}e=e.trim();if(e.length>0){var s={};s.segment=e,s.textNodes=t,s.phValues=n,this.mToTranslateSegmented.push(s)}},AdskLocalizationWidget.prototype.parseText=function(e,t){if(this.mParsed)return;this.recurseDomChildren(e,0,!1,t),this.splitSegments(this.mSplitTextFunction),this.identifyPlaceholders(this.getPlaceholders,this.getSplitByPlaceholders),this.identifyPlaceholders(this.getPlaceholders2,this.getSplitByPlaceholders2),this.identifyPlaceholders(this.getPlaceholders3,this.getSplitByPlaceholders3),this.mMergeSegments(),this.fixPlaceholders(),this.replaceNoTranslateNodes(),this.consolidatePlaceholders(),this.storeOriginalSegments(),this.decorateSegments(this.highlightSegments,this.titleSrc,this.mtClass,this.exactClass,this.iceClass),this.logSegments&&this.logSegmentsToConsole(),this.mParsed=!0},AdskLocalizationWidget.prototype.constructSegment=function(e){if(!e)return"";var t="";for(var n=0;n<e.length;n++){var r=e[n];for(var i=0;i<r.length;i++)t+=r[i].data;n<e.length-1&&(t+="{"+(n+1)+"}")}return t},AdskLocalizationWidget.prototype.replaceNoTranslateNodes=function(){for(var e=0;e<this.mToTranslateSegmented.length;e++){var t=this.mToTranslateSegmented[e],n=t.segment,r=t.textNodes;if(r){var i={};i.segmentIndex=[],i.textNodes=[],i.textNodeIndex=[];for(var s=0;s<r.length;s++)for(var o=0;o<r[s].length;o++){var u=r[s][o];this.contains(this.mNoTranslateTextNodes,u)&&(i.segmentIndex.push(s),i.textNodes.push(u),i.textNodeIndex.push(o))}for(var a=i.segmentIndex.length-1;a>=0;a--){var f=i.textNodes[a],l=document.createTextNode(""),c=document.createTextNode(""),h=f.parentNode;h.insertBefore(c,f),h.insertBefore(l,c),t.textNodes[i.segmentIndex[a]].splice(i.textNodeIndex[a],1,c),t.textNodes.splice(i.segmentIndex[a],0,[l]);var p=this.constructSegment(t.textNodes);t.segment=p,t.phValues||(t.phValues=[]),t.phValues.splice(i.segmentIndex[a],0,i.textNodes[a].data)}}}},AdskLocalizationWidget.prototype.consolidatePlaceholders=function(){for(var e=0;e<this.mToTranslateSegmented.length;e++){var t=this.mToTranslateSegmented[e],n=t.segment,r=undefined;if(r=this.getConsecutivePlaceholders(n)){var i=n,s=undefined;for(var o=r.length-1;o>=0;o--){var u=this.getPlaceholdersIndexes(r[o]);if(u.length>1){s||(s=[]);var a="";for(var f=u.length-1;f>=0;f--){if(f>0){var l=t.textNodes.splice(u[f]-1,1);if(!l||l.length!=1||l[0].data&&l[0].data.length>0)throw"Node should now be removed (segment: '"+n+"')"}var c=0;for(var h=0;h<o-1;h++)c+=r[h].length;c+=u.length-f-1,a+=t.phValues[c]}i=i.replace(r[o],"{"+(o+1)+"}"),s.unshift(a)}}t.segment=i,s&&(t.phValues=s)}}},AdskLocalizationWidget.prototype.getPlaceholdersIndexes=function(e){if(!e)return[];var t=this.getPlaceholders(e);if(!t)return[];var n=[];for(var r=0;r<t.length;r++)n.push(parseInt(t[r].substring(1,t[r].length-1)));return n},AdskLocalizationWidget.prototype.getConsecutivePlaceholders=function(e){return e?e.match(/(\{[0-9]+\}){1,}/gmi):undefined},AdskLocalizationWidget.prototype.storeOriginalSegments=function(){for(var e=0;e<this.mToTranslateSegmented.length;e++){var t=this.mToTranslateSegmented[e];if(t.segment&&t.segment.trim().length>0)for(var n=0;n<t.textNodes.length;n++){var r=t.textNodes[n];for(var i=0;i<r.length;i++)this.mOriginalData.push([r[i],r[i].data])}}},AdskLocalizationWidget.prototype.getFirstNotEmptyTextNode=function(e){if(!e)return undefined;for(var t=0;t<e.length;t++)for(j=0;j<e[t].length;j++)if(e[t][j].data&&e[t][j].data.trim().length>0)return e[t][j];return undefined},AdskLocalizationWidget.prototype.getLastNotEmptyTextNode=function(e){if(!e)return undefined;for(var t=e.length-1;t>=0;t--)for(j=e[t].length-1;j>=0;j--)if(e[t][j].data&&e[t][j].data.trim().length>0)return e[t][j];return undefined},AdskLocalizationWidget.prototype.decorateSegments=function(e,t,n,r,i){for(var s=0;s<this.mToTranslateSegmented.length;s++){var o=this.mToTranslateSegmented[s];if(o.segment&&o.segment.trim().length>0){var u=this.getFirstNotEmptyTextNode(o.textNodes),a=this.getLastNotEmptyTextNode(o.textNodes);if(u&&a){var f=u===a?u:this.getCommonAncestor(u,a);if(!f)throw"Ancestor not found (segment: '"+o.segment+"')";if(!_adskGetParentNodeWithClass(u,mAdskLsDecoClassName)){var l=document.createElement("SPAN");l.className=l.className+" "+mAdskLsDecoClassName,l.srcText=o.segment;var c=mAdskLsSegNotAvailable,h=mAdskLsSegNotAvailable;s>0&&this.mToTranslateSegmented[s-1].segment&&this.mToTranslateSegmented[s-1].segment.trim().length>0&&(c=this.mToTranslateSegmented[s-1].segment),s<this.mToTranslateSegmented.length-1&&this.mToTranslateSegmented[s+1].segment&&this.mToTranslateSegmented[s+1].segment.trim().length>0&&(h=this.mToTranslateSegmented[s+1].segment),l.prevText=c,l.nextText=h,e&&(l.onmouseover=this.segmentOnMouseOver,l.onmouseout=this.segmentOnMouseOut,this.logSegmentOnMouseOver&&(l.logSegMouseOver="true"));if(t){var p=o.segment;if(o.phValues)for(var d=0;d<o.phValues.length;d++)p+=" /// {"+(d+1)+"}: "+o.phValues[d];l.title=p}var v=[],m=!1,g=!1,y=undefined;if(f===u){var b=u.parentNode;b.insertBefore(l,u),l.appendChild(u)}else{for(var w=0;w<f.childNodes.length;w++){var E=f.childNodes[w];m||(m=this.isContainsNode(E,u),m&&(y=E));if(m){v.push(E),g=this.isContainsNode(E,a);if(g)break}}y&&f.insertBefore(l,y);for(var w=0;w<v.length;w++)l.appendChild(v[w])}}}}}},AdskLocalizationWidget.prototype.identifyPlaceholders=function(e,t){for(var n=0;n<this.mToTranslate.length;n++){var r=this.mToTranslate[n],i=r.textNodes;if(i)for(var s=0;s<i.length;s++){var o={};o.segmentIndex=[],o.newTextNodes=[],o.textNodeIndex=[];for(var u=0;u<i[s].length;u++){var a=0,f=i[s][u];if(this.contains(this.mNoTranslateTextNodes,f))continue;var l=f.data,c=e(l);if(c){var h=t(l),p=f.parentNode,d="";if(u>0)for(var v=0;v<u;v++){var m=i[s][v];d+=m.data,this.contains(this.mPhFollowingTextNodes,m)&&(d+="{"+ ++a+"}")}var g=[];for(var v=0;v<h.length;v++){var y=document.createTextNode(h[v]);d+=h[v],p.insertBefore(y,f),g.push(y),v<h.length-1&&(this.mPhFollowingTextNodes.push(y),y=document.createTextNode(c[v]),p.insertBefore(y,f),d+="{"+ ++a+"}")}this.contains(this.mPhFollowingTextNodes,f)&&(d+="{"+ ++a+"}",this.mPhFollowingTextNodes.push(g[g.length-1]));if(u<i[s].length)for(var v=u+1;v<i[s].length;v++){var m=i[s][v];d+=m.data,this.contains(this.mPhFollowingTextNodes,m)&&(d+="{"+ ++a+"}")}o.segmentIndex.push(s),o.textNodeIndex.push(u),o.newTextNodes.push(g),p.removeChild(f),r.segments[s]=d,r.placeholders||(r.placeholders=new Object),r.placeholders["ph"+s]||(r.placeholders["ph"+s]=[]);for(var b=c.length-1;b>=0;b--)r.placeholders["ph"+s].splice(u,0,c[b])}}for(var w=0;w<o.segmentIndex.length;w++){r.textNodes[o.segmentIndex[w]].splice(o.textNodeIndex[w],1);for(var E=o.newTextNodes[w].length-1;E>=0;E--)r.textNodes[o.segmentIndex[w]].splice(o.textNodeIndex[w],0,o.newTextNodes[w][E])}}}},AdskLocalizationWidget.prototype.fixPlaceholders=function(){for(var e=0;e<this.mToTranslateSegmented.length;e++)if(this.mToTranslateSegmented[e].phValues&&this.mToTranslateSegmented[e].phValues.length>0){var t=this.mToTranslateSegmented[e].segment.match(/^(\s*\{[0-9]+\}\s*)+/gmi),n=0;if(t&&t.length==1)var n=t[0].match(/\{[0-9]+\}/gmi).length;for(var r=0;r<n;r++)this.mToTranslateSegmented[e].phValues.shift(),this.mToTranslateSegmented[e].textNodes.shift();this.mToTranslateSegmented[e].segment=this.mToTranslateSegmented[e].segment.replace(/^(\s*\{[0-9]+\}\s*)+/gmi,function(){return""});var i=this.mToTranslateSegmented[e].segment.match(/(\s*\{[0-9]+\}\s*)+$/gmi),s=0;if(i&&i.length==1)var s=i[0].match(/\{[0-9]+\}/gmi).length;for(var r=0;r<s;r++)this.mToTranslateSegmented[e].phValues.pop(),this.mToTranslateSegmented[e].textNodes.pop();this.mToTranslateSegmented[e].segment=this.mToTranslateSegmented[e].segment.replace(/(\s*\{[0-9]+\}\s*)+$/gmi,function(){return""});var o=0;this.mToTranslateSegmented[e].segment=this.mToTranslateSegmented[e].segment.replace(/\{[0-9]+\}/gmi,function(){return"{"+ ++o+"}"})}},AdskLocalizationWidget.prototype.logSegmentsToConsole=function(){for(var e=0;e<this.mToTranslateSegmented.length;e++)console.log(this.mToTranslateSegmented[e].segment),this.mToTranslateSegmented[e].phValues&&this.mToTranslateSegmented[e].phValues.length>0&&console.log(this.mToTranslateSegmented[e].phValues)},AdskLocalizationWidget.prototype.pushTextNodes=function(e,t,n){var r=t;for(var i=0;i<n.length;i++){var s=n[i];e[r].push(s),this.contains(this.mPhFollowingTextNodes,s)&&(e.push([]),r++)}return e},AdskLocalizationWidget.prototype.isContainsNode=function(e,t){if(e&&e===t)return!0;if(!e||!e.hasChildNodes()||!t)return!1;for(var n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r===t||this.isContainsNode(r,t))return!0}return!1},AdskLocalizationWidget.prototype.segmentOnMouseOver=function(){var e=this.style.backgroundColor,t=this.style.color;this.style.backgroundColor="yellow",this.style.color="black",e&&(this.originalBg=e),t&&(this.originalColor=t),this.logSegMouseOver=="true"&&console.log("Src: "+this.srcText+"\nPrev: "+this.prevText+"\nNext: "+this.nextText)},AdskLocalizationWidget.prototype.segmentOnMouseOut=function(){var e=this.originalBg;e?this.style.backgroundColor=e:mAdskLsJq(this).css("backgroundColor","");var t=this.originalColor;t?this.style.color=t:mAdskLsJq(this).css("color","")},AdskLocalizationWidget.prototype.getParents=function(e){var t=[e];for(;e;e=e.parentNode)t.unshift(e);return t},AdskLocalizationWidget.prototype.getCommonAncestor=function(e,t){if(e===t)return e.parentNode;var n=this.getParents(e),r=this.getParents(t);if(n[0]!=r[0])return undefined;for(var i=0;i<n.length;i++)if(n[i]!=r[i])return n[i-1]},AdskLocalizationWidget.prototype.translateFake=function(){for(var e=0;e<this.mToTranslateSegmented.length;e++){var t=this.mToTranslateSegmented[e];if(t.segment&&t.segment.trim().length>0){var n=t.segment,r=this.getFakeTranslation(n),i=this.getSplitByPlaceholders(r),s=this.getFlatArray(t.textNodes);if(i.length!=t.textNodes.length){console.log("Placeholders missmatch for source segment: '"+n+"', target: '"+r+"'"),console.log(t.textNodes);continue}for(var o=0;o<t.textNodes.length;o++){var u=t.textNodes[o];if(u&&u.length>0){var a="",f=0;o==0&&(f=this.getNbWhiteSpaceLeft(u[0].data));var l=0;o==t.textNodes.length-1&&(l=this.getNbWhiteSpaceRight(u[u.length-1].data)),a=this.addWhiteSpacesLeft(a,f),a+=i[o],a=this.addWhiteSpacesRight(a,l);for(var c=0;c<u.length;c++)c==0?u[c].data=a:u[c].data=""}}}}},AdskLocalizationWidget.prototype.addWhiteSpacesLeft=function(e,t){for(var n=0;n<t;n++)e=" "+e;return e},AdskLocalizationWidget.prototype.addWhiteSpacesRight=function(e,t){for(var n=0;n<t;n++)e+=" ";return e},AdskLocalizationWidget.prototype.getNbWhiteSpaceLeft=function(e){if(!e)return 0;var t=e.match(/^\s+/);return t?t[0].length:0},AdskLocalizationWidget.prototype.getNbWhiteSpaceRight=function(e){if(!e)return 0;var t=e.match(/\s+$/);return t?t[0].length:0},AdskLocalizationWidget.prototype.getFakeTranslation=function(e){if(!e)return e;var t=this.getPlaceholders(e),n="";if(t){n+="FAKE";for(var r=0;r<t.length;r++)n+=t[r],n+="FAKE"}else n="FAKE";return n},AdskLocalizationWidget.prototype.isNeedSpaceBetweenSegments=function(e,t){var n=!this.isTrailing(",",t)&&!t.match(/^[.!?].*$/)&&!this.isTrailing("®",t)&&!this.isTrailing("©",t)&&!this.isTrailing("™",t)&&!this.isTrailing(" ",t)&&(!e.match(/.*\d[\,.]{1}$/)||!t.match(/^\d.*$/));return n},AdskLocalizationWidget.prototype.isEndingOrTrailing=function(e,t,n){return t&&t.length>0&&t.charAt(t.length-1)==e||n&&n.length>0&&n.charAt(0)==e},AdskLocalizationWidget.prototype.isTrailing=function(e,t){return t&&t.length>0&&t.charAt(0)==e},AdskLocalizationWidget.prototype.isContainsBreakingTag=function(e){if(!e)return!1;for(var t=0;t<e.length;t++)if(this.mTagsDelimiter[e[t]])return!0;return!1},AdskLocalizationWidget.prototype.splitTextEn=function(e){var t=/\n|([^\r\n]+$)/gim,n=/(^[.!?]+)|(.+?((\S[.!?]+)+|$))/gim,r=e.match(t),i=undefined;if(r){i=[];for(var s=0;s<r.length;s++)if(r[s].length>0&&r[s]!="\n"){var o=r[s],u=o.match(n);if(u)for(var a=0;a<u.length;a++)u[a].length>0&&u[a]!="\n"&&i.push(u[a]);else i.push(o)}}else i=[e];return i},AdskLocalizationWidget.prototype.isMergeSegmentsEn=function(e,t){if(!e||!t)return!1;var n=e.trim(),r=t.trim();for(var i=0;i<this.mToMergeSpecialCases.length;i++){var s=undefined,o=undefined,u=undefined,a=undefined;this.mToMergeSpecialCases[i][2]?(s=n,o=r,u=this.mToMergeSpecialCases[i][0],a=this.mToMergeSpecialCases[i][1]):(s=n.toLowerCase(),o=r.toLowerCase(),u=this.mToMergeSpecialCases[i][0].toLowerCase(),a=this.mToMergeSpecialCases[i][1].toLowerCase());var f=s.lastIndexOf(u),l=o.indexOf(a);if(f>=0&&f==s.length-u.length&&l==0)return!0}return _adskLsEndsWithNonBreakingWord(n)?!0:e.match(/.*\d[\,.]{1}$/)&&t.match(/^\d.*$/)?!0:n.match(/^.*[.!?]$/)?!1:!e.match(/^.*\s$/)&&r.match(/^[.!?].*$/)?!0:e.lastIndexOf(" ")!=e.length-1&&t.indexOf(" ")!=0&&!this.isEndingOrTrailing(",",e,t)&&!this.isEndingOrTrailing('"',e,t)&&!this.isEndingOrTrailing("'",e,t)&&!this.isEndingOrTrailing("®",e,t)&&!this.isEndingOrTrailing("©",e,t)&&!this.isEndingOrTrailing("™",e,t)&&!this.isEndingOrTrailing(" ",e,t)?!1:!0},AdskLocalizationWidget.prototype.recurseDomChildren=function(e,t,n,r){if(e.tagName&&this.mTagsToSkip[e.tagName]||r&&_adskGetParentNodeWithClass(e,r))return;e.tagName&&e.tagName.length>0&&this.mToTranslate.length>0&&(this.mToTranslate[this.mToTranslate.length-1].endedByTag?this.mToTranslate[this.mToTranslate.length-1].endedByTag.push(e.tagName):this.mToTranslate[this.mToTranslate.length-1].endedByTag=[e.tagName]);if(e.childNodes){var i=e.childNodes,s=n||_adskLsHasClass(e,this.noTranslateClass);this.loopNodeChildren(i,t,s)}},AdskLocalizationWidget.prototype.pushToTranslate=function(e,t){var n={};n.text=e.data,n.texts=[e.data],n.textNodes=[e],t&&this.mNoTranslateTextNodes.push(e);var r=[],i=e;while(i=i.parentNode)r.unshift(i);n.nodesStack=r,this.mToTranslate.push(n)},AdskLocalizationWidget.prototype.getFlatArray=function(e){if(!e)return e;var t=[];for(var n=0;n<e.length;n++){var r=e[n];for(var i=0;i<r.length;i++){var s=r[i];if(s instanceof Array)for(var o=0;o<s.length;o++)t.push(s[o]);else t.push(s)}}return t},AdskLocalizationWidget.prototype.getPlaceholderValue=function(e,t,n,r){var i="",s=e[e.length-1],o=t[0],u=undefined,a=undefined;while(s!==o)u&&u.tagName&&u.nextSibling===s&&(i+=this.getClosingTag(u),a=u),s.tagName&&(u&&u.parentNode===s?(i+=this.getClosingTag(s),a=s):i+=this.getOpeningTag(s)),(!u||u.parentNode!==s)&&s.childNodes&&s.childNodes.length>0?(u=s,s=s.childNodes[0]):s.nextSibling?(u=s,s=s.nextSibling):s.parentNode&&(u=s,s=s.parentNode);return u&&u.tagName&&u.nextSibling===s&&u!==a&&(i+=this.getClosingTag(u)),i},AdskLocalizationWidget.prototype.getOpeningTag=function(e){var t="",n=e.attributes,r;t+="<"+e.tagName.toLowerCase().trim();for(var i=0,s=n.length;i<s;i++)typeof n[i].nodeValue=="string"&&(r=n[i].nodeValue.replace('"','\\"'),r&&r.trim().length>0&&(t+=" ",t+=n[i].nodeName.trim()+'="'+r.trim()+'"'));return t+=">",t},AdskLocalizationWidget.prototype.getClosingTag=function(e){return"</"+e.tagName.toLowerCase()+">"},AdskLocalizationWidget.prototype.getPlaceholderValue3=function(e,t,n,r){var i="",s=e[e.length-1],o=t[0];while(s!==o)if(s.childNodes&&s.childNodes.length>0)s=s.childNodes[0],s.tagName&&(i+="<"+s.tagName+"> YYY");else if(s.nextSibling)s=s.nextSibling,s.tagName&&(i+="<"+s.tagName+"> XXX");else if(s.parentNode){s.tagName&&(i+="</"+s.tagName+">"),s=s.parentNode,s.tagName&&(i+="</"+s.tagName+">");while(!s.nextSibling)s=s.parentNode,s.tagName&&(i+="</"+s.tagName+">");s=s.nextSibling}return i},AdskLocalizationWidget.prototype.getPlaceholderValue2=function(e,t,n,r){var i=n.length>r.length?n.length:r.length,s=-1;for(var o=0;o<i;o++)if(o<n.length&&o<r.length){if(s==-1&&n[o]!==r[o]){s=o;break}}else if(s==-1){s=o;break}var u="";if(s>-1&&s<n.length)for(var o=n.length-1;o>=s;o--)u+="</"+n[o].tagName+">";if(s>-1&&s<r.length)for(var o=s;o<r.length;o++)u+="<"+r[o].tagName+">";return u},AdskLocalizationWidget.prototype.isSameNodesStack=function(e,t){if(e===t)return!0;if(!e)return!1;if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},AdskLocalizationWidget.prototype.isFollowingTextNodes=function(e,t){if(!e||!t||e.length==0||t.length==0)return!1;var n=e[e.length-1],r=t[0],i=n.nextSibling;return i===r},AdskLocalizationWidget.prototype.loopNodeChildren=function(e,t,n){var r;for(var i=0;i<e.length;i++)r=e[i],this.storeNode(r,n),r.childNodes&&this.recurseDomChildren(r,t+1,n)},AdskLocalizationWidget.prototype.storeNode=function(e,t){e.nodeType!==1&&e.nodeType===3&&e.data&&this.pushToTranslate(e,t)},AdskLocalizationWidget.prototype.translateApi=function(e,t){var n=this;if(!mAdskLsJq){window.setTimeout(function(){n.translateApi(e,t)},50);return}if(this.mTranslatedData[e]){for(var r=0;r<this.mToTranslateSegmented.length;r++){var i=this.mToTranslateSegmented[r],s=!1;if(i.segment&&i.segment.trim().length>0)for(var o=0;o<i.textNodes.length;o++){var u=i.textNodes[o];for(var a=0;a<u.length;a++){for(var f=0;f<this.mTranslatedData[e].length;f++)if(this.mTranslatedData[e][f][0]===u[a]){this.mTranslatedData[e][f][1]?u[a].data=this.mTranslatedData[e][f][1]:u[a].data="";break}var l=this.mTranslatedData[e][f][2];if(!s&&(l=="MT"&&this.mtClass||l=="EXACT"&&this.exactClass||l=="ICE"&&this.iceClass)){var c=undefined;l=="MT"?c=this.mtClass:l=="EXACT"?c=this.exactClass:l=="ICE"&&(c=this.iceClass);var h=u[a];while(h=h.parentNode)if(_adskLsHasClass(h,mAdskLsDecoClassName)){this.mtClass&&(h.className=h.className.replace(new RegExp("\\b"+this.mtClass+"\\b"),"")),this.exactClass&&(h.className=h.className.replace(new RegExp("\\b"+this.exactClass+"\\b"),"")),this.iceClass&&(h.className=h.className.replace(new RegExp("\\b"+this.iceClass+"\\b"),"")),c&&(h.className=h.className+" "+c),s=!0;break}}}}}_adskTranslateApiInternalCallback(t)}else{var p=new Array,d=new Array,v=new Array,m=new Array,g=0;for(var r=0;r<this.mToTranslateSegmented.length;r++){var i=this.mToTranslateSegmented[r];if(i.segment&&i.segment.trim().length>0){var y=i.segment,b=mAdskLsSegNotAvailable,w=mAdskLsSegNotAvailable;r>0&&this.mToTranslateSegmented[r-1].segment&&this.mToTranslateSegmented[r-1].segment.trim().length>0&&(b=this.mToTranslateSegmented[r-1].segment),r<this.mToTranslateSegmented.length-1&&this.mToTranslateSegmented[r+1].segment&&this.mToTranslateSegmented[r+1].segment.trim().length>0&&(w=this.mToTranslateSegmented[r+1].segment);if(e=="fake")atLeastOneCall=!0,this.translateCallFake(y,b,w,i.textNodes,e,this.mtClass,this.exactClass,this.iceClass,t);else if(this.corsEnabled&&_adskLsIsSupportCors()){g+=y.length,p.push(y),d.push(b),v.push(w),m.push(i.textNodes);if(p.length>=this.mNbSegmentsPerRequest||r==this.mToTranslateSegmented.length-1||g>this.mMaxSegmentsSizePerRequest)this.translateCallCors(p,d,v,m,e,this.mtClass,this.exactClass,this.iceClass,t),p=new Array,d=new Array,v=new Array,m=new Array,g=0}else this.translateCall(y,b,w,i.textNodes,e,this.mtClass,this.exactClass,this.iceClass,t)}}_adskTranslateApiInternalCallback(t)}},AdskLocalizationWidget.prototype.translateCallFake=function(e,t,n,r,i,s,o,u){this.mTranslatedData[i]||(this.mTranslatedData[i]=[]);for(var a=0;a<r.length;a++){var f=r[a];if(f&&f.length>0)for(var l=0;l<f.length;l++)this.mTranslatedData[i].push([f[l],undefined,undefined])}var c="FAKE",h="MT";for(var p=0;p<r.length-1;p++)c+="{"+(p+1)+"}";var d=this.getSplitByPlaceholders(c);if(d.length!=r.length)return;var v=!1;for(var a=0;a<r.length;a++){var f=r[a];if(f&&f.length>0){var m="",g=0;a==0&&(g=this.getNbWhiteSpaceLeft(f[0].data));var y=0;a==r.length-1&&(y=this.getNbWhiteSpaceRight(f[f.length-1].data)),m=this.addWhiteSpacesLeft(m,g),m+=d[a],m=this.addWhiteSpacesRight(m,y);var b=!1;for(var l=0;l<f.length;l++){if(!v&&(h=="MT"&&s||h=="EXACT"&&
o||h=="ICE"&&u)){var w=undefined;h=="MT"?w=s:h=="EXACT"?w=o:h=="ICE"&&(w=u);var E=f[l];while(E=E.parentNode)if(_adskLsHasClass(E,mAdskLsDecoClassName)){s&&(E.className=E.className.replace(new RegExp("\\b"+s+"\\b"),"")),o&&(E.className=E.className.replace(new RegExp("\\b"+o+"\\b"),"")),u&&(E.className=E.className.replace(new RegExp("\\b"+u+"\\b"),"")),w&&(E.className=E.className+" "+w),v=!0;break}}!b&&f[l].data.trim().length>0?(f[l].data=m,b=!0):f[l].data="";for(var S=0;S<this.mTranslatedData[i].length;S++)this.mTranslatedData[i][S][0]==f[l]&&(this.mTranslatedData[i][S][1]=f[l].data,this.mTranslatedData[i][S][2]=h)}}}},AdskLocalizationWidget.prototype.translateCallCors=function(e,t,n,r,i,s,o,u,a){var f=this;if(!mAdskLsJq){window.setTimeout(function(){f.translateCallCors(e,t,n,r,i,s,o,u,a)},50);return}var f=this,l=("https:"==document.location.protocol?"https://":"http://")+mAdskLsServerName+"/api/translate/v1/widget",c={};c.contentOwner="doc",c.trgLng=i,c.mtEnabled="true",c.repoEnabled="true",this.mSrcLng&&(c.srcLng=this.mSrcLng),this.mProduct&&(c.product=this.mProduct),this.mClientId&&(c.clientId=this.mClientId),this.mHostedUrl&&(c.hostedUrl=this.mHostedUrl),c.src=[];for(var h=0;h<e.length;h++)c.src[h]={},c.src[h].srcText=e[h],this.mResource&&(c.src[h].resource=this.mResource),t&&t[h]&&(c.src[h].prevText=t[h]),n&&n[h]&&(c.src[h].nextText=n[h]);this.mTranslatedData[i]||(this.mTranslatedData[i]=[]);for(var p=0;p<r.length;p++){var d=r[p];for(var h=0;h<d.length;h++){var v=d[h];if(v&&v.length>0)for(var m=0;m<v.length;m++)this.mTranslatedData[i].push([v[m],undefined,undefined])}}mAdskNbRequestsProcessing++,mAdskLsJq.ajax({type:"POST",url:l,data:JSON.stringify(c),contentType:"application/json",dataType:"text",failure:function(e){console.log(e)},success:function(e){handleTranlatedResponse(JSON.parse(e),r,f,s,o,u,i,a)},error:function(e,t,n){console.log("error:"+JSON.stringify(e)+" - "+t+" - "+n),mAdskNbRequestsProcessing--,mAdskNbRequestsProcessing<=0&&(mAdskNbRequestsProcessing=0,_adskTranslateApiInternalCallback(a))}})},AdskLocalizationWidget.prototype.translateCall=function(e,t,n,r,i,s,o,u,a){var f=this;if(!mAdskLsJq){window.setTimeout(function(){f.translateCall(e,t,n,r,i,s,o,u,a)},50);return}var f=this;if(!e||e.trim().length==0||!r||r.length==0)return;var l=e;l&&l.length>0&&(l=encodeURIComponent(l));var c=("https:"==document.location.protocol?"https://":"http://")+mAdskLsServerName+"/api/translate/v1/widget?contentOwner=doc&trgLng="+encodeURIComponent(i)+"&mtEnabled=true&repoEnabled=true&src="+l;t&&(c+="&prevText="+encodeURIComponent(t)),n&&(c+="&nextText="+encodeURIComponent(n)),this.mProduct&&(c+="&product="+encodeURIComponent(this.mProduct)),this.mResource&&(c+="&resource="+encodeURIComponent(this.mResource)),this.mSrcLng&&(c+="&srcLng="+encodeURIComponent(this.mSrcLng)),this.mClientId&&(c+="&clientId="+encodeURIComponent(this.mClientId)),this.mHostedUrl&&(c+="&hostedUrl="+encodeURIComponent(this.mHostedUrl)),this.mTranslatedData[i]||(this.mTranslatedData[i]=[]);for(var h=0;h<r.length;h++){var p=r[h];if(p&&p.length>0)for(var d=0;d<p.length;d++)this.mTranslatedData[i].push([p[d],undefined,undefined])}mAdskNbRequestsProcessing++,mAdskLsJq.ajax({type:"GET",url:c,contentType:"application/json",dataType:"jsonp",jsonp:"jsonp",success:function(e){var t=new Array;t.push(r),handleTranlatedResponse(e,t,f,s,o,u,i,a)},error:function(e,t,n){mAdskNbRequestsProcessing--,mAdskNbRequestsProcessing<=0&&(mAdskNbRequestsProcessing=0,_adskTranslateApiInternalCallback(a))}})};var _adskLsSplitCrossBrowser;_adskLsSplitCrossBrowser=_adskLsSplitCrossBrowser||function(e){var t=String.prototype.split,n=/()??/.exec("")[1]===e,r;return r=function(r,i,s){if(Object.prototype.toString.call(i)!=="[object RegExp]")return t.call(r,i,s);var o=[],u=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.extended?"x":"")+(i.sticky?"y":""),a=0,i=new RegExp(i.source,u+"g"),f,l,c,h;r+="",n||(f=new RegExp("^"+i.source+"$(?!\\s)",u)),s=s===e?-1>>>0:s>>>0;while(l=i.exec(r)){c=l.index+l[0].length;if(c>a){o.push(r.slice(a,l.index)),!n&&l.length>1&&l[0].replace(f,function(){for(var t=1;t<arguments.length-2;t++)arguments[t]===e&&(l[t]=e)}),l.length>1&&l.index<r.length&&Array.prototype.push.apply(o,l.slice(1)),h=l[0].length,a=c;if(o.length>=s)break}i.lastIndex===l.index&&i.lastIndex++}return a===r.length?(h||!i.test(""))&&o.push(""):o.push(r.slice(a)),o.length>s?o.slice(0,s):o},String.prototype.split=function(e,t){return r(this,e,t)},r}(),window.adskLsAsyncInit&&!window.adskLsAsyncInit.hasRun&&(window.adskLsAsyncInit.hasRun=!0,adskLsAsyncInit());;
// TODO: catch 400 error when using JSONP (e.g. see for details http://stackoverflow.com/questions/6395821/jquery-catching-jsonp-400-bad-request)
function adskLsCollabGetSegmentDetails(e,t,n){if(e)for(var r=0;r<e.length;r++){var i=new AdskLocalizationCollab(e[r]);i.nbDetailsToGet=t.length,i.detailsResult=new Array(t.length);if(i.nbDetailsToGet==0)n();else{if(!mAdskLsCollabJq){window.setTimeout(function(){adskLsCollabGetSegmentDetails(e,t,n)},50);return}if(mAdskLsCollabUseCors&&mAdskLsCollabJq.support.cors)if(mAdskLsCollabMaxUuidsPerRequest>0&&t.length>mAdskLsCollabMaxUuidsPerRequest){var s=0;do{var o=s+mAdskLsCollabMaxUuidsPerRequest;o>t.length&&(o=t.length);var u=t.slice(s,o);i.getSegmentsDetailsCors(u,s,n),s=o}while(o<t.length)}else i.getSegmentsDetailsCors(t,0,n);else for(var r=0;r<t.length;r++)i.getSegmentDetailClassic(t[r],r,n)}}}function adskLsCollabRateTopic(e,t,n,r,i){adskLsCollabRateTopicByUser(e,t,n,r,mAdskLsCollabAnonymousUsername,i)}function adskLsCollabRateTopicByUser(e,t,n,r,i,s){if(e){var o=undefined;!i||i.trim().length==0?o=mAdskLsCollabAnonymousUsername:o=i.trim();for(var u=0;u<e.length;u++){var a=new AdskLocalizationCollab(e[u]);a.rateTopic(t,n,r,o,s)}}}function adskLsCollabAddContrib(e,t,n,r){adskLsCollabAddContribByUser(e,t,n,mAdskLsCollabAnonymousUsername,r)}function adskLsCollabAddContribByUser(e,t,n,r,i){if(e)for(var s=0;s<e.length;s++){var o=new AdskLocalizationCollab(e[s]);if(!mAdskLsCollabJq){window.setTimeout(function(){adskLsCollabAddContribByUser(e,t,n,r,i)},50);return}var u=undefined;!r||r.trim().length==0?u=mAdskLsCollabAnonymousUsername:u=r.trim(),mAdskLsCollabUseCors&&mAdskLsCollabJq.support.cors?o.putContribCors(t,n,u,i):o.putContrib(t,n,u,i)}}function AdskLocalizationCollab(e){typeof jQuery=="undefined"?function(){var e=(new Date).getTime(),t=document.createElement("SCRIPT");t.src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js",t.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(t);var n=function(e){window.jQuery?e(jQuery):window.setTimeout(function(){n(e)},20)};n(function(t){t(function(){var t=(new Date).getTime(),n=t-e;mAdskLsCollabJq=jQuery})})}():mAdskLsCollabJq||(mAdskLsCollabJq=jQuery),e&&(this.mClientId=e.clientId),this.detailsNotified=!1}function handleGetDetailsResponse(e,t,n,r){n.nbDetailsToGet-=e.result.length;if(e&&e.result)for(var i=0;i<e.result.length;i++)n.detailsResult[t+i]=e.result[i];n.nbDetailsToGet<=0&&(n.nbDetailsToGet=0,n.detailsNotified||(r&&r({status:"ok",result:n.detailsResult}),n.detailsNotified=!0))}function isBlank(e){return!e||/^\s*$/.test(e)}var mAdskLsCollabJq=undefined,mAdskLsCollabServerName="translate.autodesk.com",mAdskLsCollabUseCors=!0,mAdskLsCollabMaxUuidsPerRequest=50,mAdskLsCollabAnonymousUsername="<anonymous>";AdskLocalizationCollab.prototype.getSegmentsDetailsCors=function(pSegmentsUuids,pStartIndex,pCallbackFunction){var me=this;if(!mAdskLsCollabJq){window.setTimeout(function(){me.getSegmentsDetailsCors(pSegmentsUuids,pStartIndex,pCallbackFunction)},50);return}var theUrl=("https:"==document.location.protocol?"https://":"http://")+mAdskLsCollabServerName+"/api/collaborative/v1",jsonParams={};jsonParams.uuid=[];for(var i=0;i<pSegmentsUuids.length;i++)jsonParams.uuid.push({uuid:pSegmentsUuids[i]});this.mClientId&&(jsonParams.clientId=this.mClientId),jsonParams.refererForced=document.URL,mAdskLsCollabJq.ajax({type:"POST",url:theUrl,data:JSON.stringify(jsonParams),contentType:"application/json",dataType:"text",failure:function(e){if(!me.detailsNotified){me.nbDetailsToGet-=pSegmentsUuids.length;var t=new Error("Failure");pCallbackFunction(undefined,t),me.detailsNotified=!0}},success:function(pData){me.detailsNotified||handleGetDetailsResponse(eval("("+pData+")"),pStartIndex,me,pCallbackFunction)},error:function(e,t,n){if(!me.detailsNotified){me.nbDetailsToGet-=pSegmentsUuids.length;var r=new Error("Error");pCallbackFunction(undefined,r),me.detailsNotified=!0}}})},AdskLocalizationCollab.prototype.getSegmentDetailClassic=function(e,t,n){var r=this;if(!mAdskLsCollabJq){window.setTimeout(function(){r.getSegmentDetailClassic(e,t,n)},50);return}var i=("https:"==document.location.protocol?"https://":"http://")+mAdskLsCollabServerName+"/api/collaborative/v1?clientId="+encodeURIComponent(this.mClientId)+"&uuid="+encodeURIComponent(e)+"&refererForced="+encodeURIComponent(document.URL);mAdskLsCollabJq.ajax({type:"GET",url:i,contentType:"application/json",dataType:"jsonp",jsonp:"jsonp",failure:function(e){if(!r.detailsNotified){r.nbDetailsToGet-=pSegmentsUuids.length;var t=new Error("Failure");n&&n(undefined,t),r.detailsNotified=!0}},success:function(e){r.detailsNotified||handleGetDetailsResponse(e,t,r,n)},error:function(e,t,i){if(!r.detailsNotified){r.nbDetailsToGet--;var s=new Error("Error");n&&n(undefined,s),r.detailsNotified=!0}}})},AdskLocalizationCollab.prototype.rateTopic=function(e,t,n,r,i){var s=this;if(!mAdskLsCollabJq){window.setTimeout(function(){s.rateTopic(e,t,n,r,i)},50);return}var o=("https:"==document.location.protocol?"https://":"http://")+mAdskLsCollabServerName+"/api/collaborative/v1/rate/put?clientId="+encodeURIComponent(this.mClientId)+"&topic="+encodeURIComponent(e)+"&language="+encodeURIComponent(t)+"&rating="+encodeURIComponent(n)+"&user="+encodeURIComponent(r)+"&refererForced="+encodeURIComponent(document.URL);mAdskLsCollabJq.ajax({type:"GET",url:o,contentType:"application/json",dataType:"jsonp",jsonp:"jsonp",failure:function(e){if(i){var t=new Error("Failure");i(undefined,t)}},success:function(e){i&&i(e)},error:function(e,t,n){if(i){var r=new Error("Error");i(undefined,r)}}})},AdskLocalizationCollab.prototype.putContrib=function(e,t,n,r){var i=this;if(!mAdskLsCollabJq){window.setTimeout(function(){i.putContrib(e,t,n,r)},50);return}var s=("https:"==document.location.protocol?"https://":"http://")+mAdskLsCollabServerName+"/api/collaborative/v1/contrib/put?clientId="+encodeURIComponent(this.mClientId)+"&uuid="+encodeURIComponent(e)+"&trg="+encodeURIComponent(t)+"&contributor="+encodeURIComponent(n)+"&refererForced="+encodeURIComponent(document.URL);mAdskLsCollabJq.ajax({type:"GET",url:s,contentType:"application/json",dataType:"jsonp",jsonp:"jsonp",failure:function(e){if(r){var t=new Error("Failure");r(undefined,t)}},success:function(e){r&&r(e)},error:function(e,t,n){if(r){var i=new Error("Error");r(undefined,i)}}})},AdskLocalizationCollab.prototype.putContribCors=function(pUuid,pContrib,pContributor,pCallbackFunction){var me=this;if(!mAdskLsCollabJq){window.setTimeout(function(){me.putContribCors(pUuid,pContrib,pContributor,pCallbackFunction)},50);return}var theUrl=("https:"==document.location.protocol?"https://":"http://")+mAdskLsCollabServerName+"/api/collaborative/v1/contrib/put",jsonParams={};jsonParams.uuid=pUuid,jsonParams.trg=pContrib,jsonParams.contributor=pContributor,this.mClientId&&(jsonParams.clientId=this.mClientId),jsonParams.refererForced=document.URL,mAdskLsCollabJq.ajax({type:"POST",url:theUrl,data:JSON.stringify(jsonParams),contentType:"application/json",dataType:"text",failure:function(e){if(pCallbackFunction){var t=new Error("Failure");pCallbackFunction(undefined,t)}},success:function(pData){pCallbackFunction&&pCallbackFunction(eval("("+pData+")"))},error:function(e,t,n){if(pCallbackFunction){var r=new Error("Error");pCallbackFunction(undefined,r)}}})};;
var LanguageMap = (function () {

  // Bing Codes with Translated Values
  var languageArray = {
    "indonesian": {
      "original": "indonesian",
      "native":  "Bahasa Indonesia",
      "bingCode": "ind-ID",
      "beehiveCode": "FRA"
    },
    "french": {
      "original": "french",
      "native":  "Français",
      "bingCode": "fra-FR",
      "beehiveCode": "FRA"
    },
    "bulgarian": {
      "original": "bulgarian",
      "native": "Български",
      "bingCode": "bul-BG",
      "beehiveCode": ""
    },
    "catalan": {
      "original": "catalan",
      "native": "Català",
      "bingCode": "cat-ES",
      "beehiveCode": ""
    },
    "czech": {
      "original": "czech",
      "native": "Čeština",
      "bingCode": "ces-CZ",
      "beehiveCode": "CSY"
    },
    "danish": {
      "original": "danish",
      "native": "Dansk",
      "bingCode": "dan-DK",
      "beehiveCode": ""
    },
    "german": {
      "original": "german",
      "native": "Deutsch",
      "bingCode": "deu-DE",
      "beehiveCode": "DEU"
    },
    "greek": {
      "original": "greek",
      "native": "Ελληνικά",
      "bingCode": "ell-GR",
      "beehiveCode": ""
    },
    "english": {
      "original": "english",
      "native": "English",
      "bingCode": "eng-EN",
      "beehiveCode": "ENU"
    },
    "finnish": {
      "original": "finnish",
      "native": "Suomi",
      "bingCode": "fin-FI",
      "beehiveCode": ""
    },
     "hindi": {
       "original": "hindi",
       "native": "हिन्दी",
       "bingCode": "hin-IN",
       "beehiveCode": ""
    },
    "hungarian": {
      "original": "hungarian",
      "native": "Magyar",
      "bingCode": "hun-HU",
      "beehiveCode": "HUN"
    },
    "italian": {
      "original": "italian",
      "native": "Italiano",
      "bingCode": "ita-IT",
      "beehiveCode": "ITA"
    },
    "japanese": {
      "original": "japanese",
      "native": "日本語",
      "bingCode": "jpn-JP",
      "beehiveCode": "JPN"
    },
    "korean": {
      "original": "korean",
      "native": "한국어",
      "bingCode": "kor-KR",
      "beehiveCode": "KOR"
    },
    "latvian": {
      "original": "latvian",
      "native": "Latviešu valoda",
      "bingCode":  "lav-LV",
      "beehiveCode": ""
    },
    "lithuanian": {
      "original": "lithuanian",
      "native": "Lietuvių kalba",
      "bingCode": "lit-LT",
      "beehiveCode": ""
    },
    "malay": {
      "original": "malay",
      "native": "Bahasa Melayu",
      "bingCode":  "msa-MY",
      "beehiveCode": ""
    },
    "dutch": {
      "original": "dutch",
      "native": "Nederlands",
      "bingCode": "nld-NL",
      "beehiveCode": ""
    },
    "norwegian": {
      "original": "norwegian",
      "native": "Norsk",
      "bingCode": "nor-NO",
      "beehiveCode": ""
    },
    "polish": {
      "original": "polish",
      "native": "Polski",
      "bingCode": "pol-PL",
      "beehiveCode": "PLK"
    },
    "brazilian portuguese": {
      "original": "brazilian portuguese",
      "native": "Português",
      "bingCode": "por-BR",
      "beehiveCode": "PTB"
    },
    "romanian": {
      "original": "romanian",
      "native": "Română",
      "bingCode":  "ron-RO",
      "beehiveCode": ""
    },
    "russian": {
      "original": "russian",
      "native": "Русский",
      "bingCode": "rus-RU",
      "beehiveCode": "RUS"
    },
    "slovak": {
      "original": "slovak",
      "native": "Slovenčina",
      "bingCode":  "slk-SK",
      "beehiveCode": ""
    },
    "slovenian": {
      "original": "slovenian",
      "native": "Slovenščina",
      "bingCode": "slv-SI",
      "beehiveCode": ""
    },
    "spanish": {
      "original": "spanish",
      "native": "Español",
      "bingCode": "spa-ES",
      "beehiveCode": "ESP"
    },
    "swedish": {
      "original": "swedish",
      "native": "Svenska",
      "bingCode": "swe-SE",
      "beehiveCode": ""
    },
    "thai": {
      "original": "thai",
      "native": "ภาษาไทย",
      "bingCode": "tha-TH",
      "beehiveCode": ""
    },
    "turkish": {
      "original": "turkish",
      "native": "Türkçe",
      "bingCode":  "tur-TR",
      "beehiveCode": ""
    },
    "ukrainian": {
      "original": "ukrainian",
      "native": "Українська",
      "bingCode": "ukr-UA",
      "beehiveCode": ""
    },
    "vietnamese": {
      "original": "vietnamese",
      "native": "Tiếng Việt",
      "bingCode": "vie-VN",
      "beehiveCode": ""
    },
    "chinese (simplified)": {
      "original": "chinese (simplified)",
      "native": "简体",
      "bingCode": "zho-CN",
      "beehiveCode": "CHS"
    },
    "chinese (traditional)": {
      "original": "chinese (traditional)",
      "native": "繁體",
      "bingCode": "zho-TW",
      "beehiveCode": "CHT"
    }
  };


  var convertLanguage = function(lang, conversion) {
    for (var prop in languageArray) {
      if (lang === prop) {
        return languageArray[prop][conversion];
      }
    }
    for (var prop in languageArray) {
      log.debug(prop);
      for (var subProp in languageArray[prop]) {
        log.debug(languageArray[prop][subProp]);
        if (lang === languageArray[prop][subProp]) {
          return languageArray[prop][conversion];
        }
      }
    }
  };

  return {
    "convertLanguage": convertLanguage
  };



})();



;
(function(jQuery, Drupal) {
  Drupal.behaviors.autodesk_mtc_widget = {
    attach: function (context, settings) {
      log.info("MTC Init");

      /*
       The translation widget requires a valid caasKey to perform the human and mtc translation steps.
       If a caasKey is not available, the translation widget may still appear, and it will use bing translation.

       The caasKey is made available as a javascript variable in Drupal.settings.caas.caasKey
       The caasKey is extracted from Drupal in the following places.

       - Caas Documents adsk_core.module - line 413
       - Topic Articles autodesk_topic_article.module - line 444
       */

      // Configure MTC Variables
      var mtc = {};

      // Set MTC Site Language
      mtc.site_language = Drupal.settings.l10n.beehive_name; // english

      // Set MTC Article Language
      if (Drupal.settings.article != undefined && Drupal.settings.article.field_simple_content_language != undefined) {
        mtc.article_language = LanguageMap.convertLanguage(Drupal.settings.article.field_simple_content_language, "original");
      } else {
        mtc.article_language = Drupal.settings.l10n.beehive_name;
      }

      // Set MTC Translation Type
      if (Drupal.settings.caas === undefined) {
        mtc.translation_type = "human";
      } else if (Drupal.settings.caas.translationType === undefined) {
        mtc.translation_type = "human";
      } else if (Drupal.settings.caas.translationType !== "mtc") {
        mtc.translation_type = "human";
      } else {
        mtc.translation_type = "mtc";
      }

      var sharedTranslation = false;
      // Set MTC Translation Cookie
      /**if (window.location.hash && window.location.hash.substr(0, 4) == "#mtc") {
        // Check for # in URL, and set language preference if it exists
        var hashFragment = window.location.hash.substr(1); // Saves URL hash as variable, and removes the # character
        hashFragment = hashFragment.substr(4);
        hashFragment = hashFragment.replace(/-/g, ' ');
        log.debug("MTC language cookie in URL:", hashFragment);
        Cookies.set('translation_cookie', hashFragment, {expires: 7, path: '/'});
        mtc.translation_language_preference = hashFragment;
        sharedTranslation = true;
      } else {
        if (Cookies.get('translation_cookie')) {
          log.debug("MTC language cookie exists!");
          mtc.translation_language_preference = Cookies.get('translation_cookie');
        } else {
          log.debug("MTC language cookie not found, setting default...");
          Cookies.set('translation_cookie', mtc.site_language, {expires: 7, path: '/'});
          mtc.translation_language_preference = Cookies.get('translation_cookie');
        }
      }**/

      // Set MTC Segments
      Drupal.settings.mtc.enable_segments = false;

      // Widget Enabled
      mtc.widget_enabled = true;

      // Variables for Bing translation service
      var bingConfig = bingConfig || [];
      bingConfig.push({
        clientId: 'productsupport',
        product: '123D',
        toTranslateClasses: ['caas-content-result-bing']
      });

      // OriginalHTML
      var originalBody = "";
      var originTitle = "";

      // Beehive Tier
      var beehiveTier = Drupal.settings.tier.autodesk_beehive_tier_selected;

      // Set Widget to Default UI State
      var widgetDefaultState = true;

      // Log Variables
      log.debug("MTC", mtc);
      // log.debug("MTC site_language:", mtc.site_language);
      // log.debug("MTC article_language:", mtc.article_language);
      // log.debug("MTC translation_language_preference:", mtc.translation_language_preference);
      // log.debug("MTC translation_type:", mtc.translation_type);

      // Cache DOM Selectors
      var translationButtonOriginal = jQuery('#translation-button-original');
      var translationButtonTranslated = jQuery('#translation-button-translated');
      var translationSelect = jQuery('#translation-select');
      var translationMsg = jQuery('#translation-msg');
      var translationError = jQuery('#translation-error');
      var pageTitle = jQuery('title').html();
      var caasBody = jQuery('.caas__body').html();

      /*
       // onLoad & onClick Events
       */
      jQuery(document).ready(function () {

        // onLoad
        translationButtonOriginal.html(LanguageMap.convertLanguage(mtc.site_language, "native"));
        translationButtonTranslated.html(LanguageMap.convertLanguage(mtc.translation_language_preference, "native"));
        translationSelect.val(mtc.translation_language_preference);


        // onLoad Conditions
        /**if (mtc.site_language === "english" && mtc.translation_language_preference != "english" && GetIEVersion() > 0) {
          log.debug("*************************");
          log.debug("MTC onLoad 1 (IE)");
          log.debug("IE Version:", GetIEVersion());
          updateWidgetUi(mtc.site_language);
          // For IE do not translate onLoad, reset to site language, with language preference on translationButtonTranslated
          translationButtonOriginal.html(LanguageMap.convertLanguage(mtc.site_language, "native"));
          translationButtonTranslated.html(LanguageMap.convertLanguage(mtc.translation_language_preference, "native"));
          translationButtonTranslated.html(LanguageMap.convertLanguage(mtc.translation_language_preference, "native"));
          translationButtonTranslated.attr("value", mtc.translation_language_preference);
          jQuery(".translation__body").show();
        }
        else if (mtc.site_language === "english" && mtc.translation_language_preference != "english") {
          log.debug("*************************");
          log.debug("MTC onLoad 1");

          adskTranslate(mtc.translation_language_preference);
        }
        else if (mtc.site_language != "english" && mtc.translation_type === "mtc") {
          log.debug("*************************");
          log.debug("MTC onLoad 2");
          updateWidgetUi(mtc.site_language);
          updateWidgetMessage(mtc.site_language);
          updateSegments("mtc");
        }
        else if (mtc.site_language === "english" && mtc.article_language != "english") {
          log.debug("*************************");
          log.debug("MTC onLoad 3");
          jQuery(".translation__widget").hide();
        }
        else if (mtc.site_language != "english" && mtc.translation_type === "human") {
          log.debug("*************************");
          log.debug("MTC onLoad 4");
          jQuery(".translation__widget").hide();
        }
        else {
          log.debug("MTC onLoad 5");
          jQuery(".translation__body").show();
        }**/

        if (mtc.site_language === "english") {
          jQuery(".translation__widget").hide();
        }
        else if (mtc.site_language != "english" && mtc.translation_type === "mtc") {
          log.debug("*************************");
          log.debug("MTC onLoad 2");
          updateWidgetUi(mtc.site_language);
          updateWidgetMessage(mtc.site_language);
          updateSegments("mtc");
        }
        else if (mtc.site_language != "english" && mtc.translation_type === "human") {
          log.debug("*************************");
          log.debug("MTC onLoad 4");
          jQuery(".translation__widget").hide();
        }


        // onChange - Select Box
        translationSelect.change(function () {
          if (mtc.widget_enabled === true) {
            log.debug("*************************");
            mtc.translation_language_preference = jQuery(this).val();
            log.debug(mtc.translation_language_preference);
            unsetTranslateLanguage();
            adskTranslate(mtc.translation_language_preference);
          }
        });

        // onClick - Original Button
        translationButtonOriginal.on('click', function () {
          if (mtc.widget_enabled === true) {
            log.debug("*************************");
            mtc.translation_language_preference = mtc.site_language;
            log.debug(mtc.translation_language_preference);
            translationSelect.val(mtc.translation_language_preference);
            unsetTranslateLanguage();
            adskTranslate(mtc.translation_language_preference);

            //dataLayer Push Analytics
            var selectedLanguage = jQuery('#translation-select option:selected').text();
            var eventTrackingObject = {
              "event": 'translateViewOriginal',
              "selectedLanguage": selectedLanguage,
              "originalLanguage": 'Yes'
            }
            GA_AKP.dataLayerSend(eventTrackingObject);
          }
        });

        // onClick - Translated Button
        translationButtonTranslated.on('click', function () {
          if (mtc.widget_enabled === true) {
            log.debug("*************************");
            mtc.translation_language_preference = jQuery(this).val();
            log.debug(mtc.translation_language_preference);
            translationSelect.val(mtc.translation_language_preference);
            unsetTranslateLanguage();
            adskTranslate(mtc.translation_language_preference);

            //dataLayer Push Analytics
            var selectedLanguage = jQuery('#translation-select option:selected').text();
            var eventTrackingObject = {
              "event": 'translateViewOriginal',
              "selectedLanguage": selectedLanguage,
              "originalLanguage": 'No'
            }
            GA_AKP.dataLayerSend(eventTrackingObject);
          }
        });
      });


      /*
       // Widget UI
       */
      var updateWidgetUi = function (lang) {
        jQuery('.translation__info').removeClass("bing human mtc").addClass(mtc.translation_type);

        if (widgetDefaultState) {
          jQuery('.translation__widget').addClass("translation__widget--toggle");
          translationSelect.val(lang);
          translationButtonOriginal.toggleClass('hide');
          translationButtonTranslated.toggleClass('hide');
          if (mtc.site_language !== "english") {
            translationSelect.val(mtc.site_language);
            translationSelect.hide();
            translationButtonTranslated.html("English");
            translationButtonTranslated.attr("value", "english");
          }
          widgetDefaultState = false;
        }

        if (lang === mtc.site_language) {
          translationSelect.val(lang);
          translationButtonOriginal.addClass('active');
          translationButtonTranslated.removeClass('active');
          translationSelect.removeClass('active');
        } else {
          translationSelect.val(lang);
          translationButtonOriginal.removeClass('active');
          translationButtonTranslated.addClass('active');
          translationSelect.addClass('active');
          translationButtonTranslated.attr("value", lang);
          translationButtonTranslated.html(LanguageMap.convertLanguage(lang, "native"));
        }
        jQuery(".translation__body").show();
      };

      var updateWidgetMessage = function (lang) {
        translationError.html("");
        if (mtc.translation_type === "mtc") {
          var mtcDisclaimerStrings = (TranslationStrings.mtcDisclaimerStrings[lang] ? TranslationStrings.mtcDisclaimerStrings[lang] : TranslationStrings.mtcDisclaimerStrings.english);
          var mtcStrings = (TranslationStrings.mtcStrings[lang] ? TranslationStrings.mtcStrings[lang] : TranslationStrings.mtcStrings.english);
          translationMsg.html(mtcStrings);
          translationMsg.prepend('<div class="tooltip-css"><a href="#"><i class="fa fa-info-circle" aria-hidden="true"></i><span>' + mtcDisclaimerStrings + '</span></a></div>');
        } else if (mtc.translation_type === "bing") {
          var mtcDisclaimerStrings = (TranslationStrings.mtcDisclaimerStrings[lang] ? TranslationStrings.mtcDisclaimerStrings[lang] : TranslationStrings.mtcDisclaimerStrings.english);
          var widgetTranslationString = (TranslationStrings.bingStrings[mtc.translation_language_preference] ? TranslationStrings.bingStrings[mtc.translation_language_preference] : TranslationStrings.bingStrings.english);
          translationMsg.html(widgetTranslationString);
          translationMsg.prepend('<div class="tooltip-css"><a href="#"><i class="fa fa-info-circle" aria-hidden="true"></i><span>' + mtcDisclaimerStrings + '</span></a></div>');
        } else {
          translationMsg.html("");
        }
      };


      /*
       // Translation Boot Sequence
       */
      var adskTranslate = function (lang) {

        var beehiveLang = lang;
        // You cannot request an english translation of an english document.
        // Ie: Requesting an english caas_key with a language param of l=english will not work. The UPI code will not work either.
        if (mtc.site_language === "english" && lang === "english") {
          beehiveLang = "";
          log.debug("MTC requesting translation >> '' (english default)");
        } else {
          log.debug("MTC requesting translation >>", lang);
        }

        if (jQuery("#caas-body-beehive").length === 0) {
          jQuery("<div id='caas-title-beehive' class='caas__title caas-content-result-beehive'></div>").insertAfter(jQuery("#caas-title"));
          jQuery("<div id='caas-body-beehive' class='caas__body caas-content-result-beehive'></div>").insertAfter(jQuery("#caas-body"));
        }

        if (jQuery("#caas-body-bing").length === 0) {
          jQuery("<div id='caas-title-bing' class='caas__title caas-content-result-bing'></div>").insertAfter(jQuery("#caas-title"));
          jQuery("<div id='caas-body-bing' class='caas__body caas-content-result-bing'></div>").insertAfter(jQuery("#caas-body"));
        }

        if (originalBody === "") {
          log.debug("MTC no placeholder found, creating...");
          createEnglishBingPlaceholder(lang);
        } else {
          // Query Beehive and see if the the caas document exists in the users preferred language
          jQuery.ajax({
            method: "GET",
            url: beehiveTier + "/community/service/rest/caas/resource/caasdoc2/jsonp",
            crossDomain: true,
            jsonp: "cb",
            dataType: 'jsonp',
            data: {
              key: Drupal.settings.caas.caasKey,
              l: beehiveLang
            },
            beforeSend: function (jqXHR, settings) {
              log.debug("MTC beehive request:", settings.url);
            }
          }).done(function (data, textStatus, jqXHR) {
            if (data.status === "Success") {
              log.debug("MTC language found in beehive, perform beehiveTranslation...");
              beehiveTranslation(data, lang);
            } else {
              log.debug("MTC language NOT found in beehive, perform bingTranslation...");
              bingTranslation(lang);
            }
          }).fail(function (jqXHR, textStatus, errorThrown) {
            log.debug("MTC:", data);
            translationError.html("Translation not available");
          })
        }

      };


      /*
       // Beehive Translation
       */
      var beehiveTranslation = function (data, lang) {
        log.debug("MTC:", data);

        if (typeof OO !== "undefined") {
          // recreateOoyalaVideos();
        }

        // Update translation_type to either human or machine translated
        if (data.entries.item[0].translationType !== "mtc") {
          mtc.translation_type = "human";
        } else {
          mtc.translation_type = "mtc";
        }

        // Nuke & Hide all DOM's
        jQuery(".caas__body").html("");
        jQuery(".caas__title").html("");
        jQuery(".caas__body").hide();
        jQuery(".caas__title").hide();

        // Inject HTML into DOM
        jQuery("#caas-body-beehive").html(data.entries.item[0].caasContent);
        jQuery("#caas-title-beehive").html(data.entries.item[0].titleHtml || data.entries.item[0].title);

        // Show DOM
        jQuery("#caas-body-beehive").show();
        jQuery("#caas-title-beehive").show();

        // Update the widget UI
        updateWidgetUi(lang);
        updateWidgetMessage(lang);
        updateSegments(mtc.translation_type, data);

        // Rectify
        rectifyDom("#caas-body-beehive");

        // Update translation Cookie
        /**Cookies.set('translation_cookie', lang, {expires: 7, path: '/'});**/
        mtc.translation_language_preference = lang;

        // Set language preference as a hash fragment in the URL (for sharing articles in a language)
        /**setHashFragment(lang);**/

        // Log Status
        log.debug("MTC site_language:", mtc.site_language);
        log.debug("MTC article_language:", mtc.article_language);
        log.debug("MTC translation_language_preference:", mtc.translation_language_preference);
        log.debug("MTC translation_type:", mtc.translation_type);
      };


      /*
       // Bing Translation
       */
      var bingTranslation = function (lang) {

        // We need to convert the beehive code to the bing language code
        var bingLang = LanguageMap.convertLanguage(lang, "bingCode");
        log.debug("MTC processing bing translation >>", bingLang);

        // Update translation_type to bing
        mtc.translation_type = "bing";

        if (typeof OO !== "undefined") {
          // recreateOoyalaVideos();
        }

        // Nuke & Hide all DOM's
        jQuery(".caas__body").html("");
        jQuery(".caas__title").html("");
        jQuery(".caas__body").hide();
        jQuery(".caas__title").hide();

        // Inject HTML into DOM
        log.debug("MTC appending bing to DOM");
        jQuery("#caas-body-bing").html(originalBody);
        jQuery("#caas-title-bing").html(originTitle);

        // Call Bing translation function
        jQuery("#caas-title-bing").removeClass("adskLsSegAnyLocale");
        jQuery("#caas-body-bing").removeClass("adskLsSegAnyLocale");

        adskLsTranslate(bingConfig, bingLang, callback);
        function callback() {
          // Show DOM
          jQuery("#caas-body-bing").show();
          jQuery("#caas-title-bing").show();
        }

        // Set language in Google Analytics
        setTranslateLanguage(lang);


        updateWidgetMessage(lang);
        updateWidgetUi(lang);

        // Update translation Cookie
        /**Cookies.set('translation_cookie', lang, {expires: 7, path: '/'});**/
        mtc.translation_language_preference = lang;

        // Set language preference as a hash fragment in the URL (for sharing articles in a language)
        /**setHashFragment(mtc.translation_language_preference);**/

        // Rectify
        rectifyDom("#caas-body-bing");

        // Log Status
        log.debug("MTC site_language:", mtc.site_language);
        log.debug("MTC article_language:", mtc.article_language);
        log.debug("MTC translation_language_preference:", lang);
        log.debug("MTC translation_type:", mtc.translation_type);
      };


      /*
       // Create English Translation
       */
      var createEnglishBingPlaceholder = function (lang) {
        if (mtc.site_language === "english" && mtc.article_language != "english") {
          log.debug("MTC error trying to create an english placeholder when the original document is not in EN/JA/DE");
          translationError.html("Translation not available");
        } else if (mtc.site_language === "english" && mtc.article_language === "english") {
          log.debug("MTC creating placeholder by clone");
          originalBody = jQuery("#caas-body").html();
          originTitle = jQuery("#caas-title").html();
          jQuery("#caas-body").html("");
          jQuery("#caas-title").html("");
          adskTranslate(lang);
        } else {
          log.debug("MTC creating placeholder by Beehive call");
          if (mtc.site_language === "english" && lang === "english") {
            beehiveLang = "";
          }
          jQuery.ajax({
            method: "GET",
            url: beehiveTier + "/community/service/rest/caas/resource/caasdoc2/jsonp",
            crossDomain: true,
            jsonp: "cb",
            dataType: 'jsonp',
            async: false,
            data: {
              key: Drupal.settings.caas.caasKey,
              l: "english"
            },
            beforeSend: function (jqXHR, settings) {
              log.debug("MTC Beehive placeholder request:", settings.url);
            }
          }).done(function (data, textStatus, jqXHR) {
            if (data.status === "Success") {
              log.debug("MTC success creating placeholder by beehive call");
              log.debug("MTC:", data);
              originalBody = data.entries.item[0].caasContent;
              originTitle = data.entries.item[0].titleHtml || data.entries.item[0].title;
              adskTranslate(lang);
            } else {
              log.debug("MTC error trying to create a placeholder by beehive call. Without an english original from beehive, Bing translation is not possible.", data);
              translationError.html("Sorry, a translated document could not be found.");
            }
          }).fail(function (jqXHR, textStatus, errorThrown) {
            log.debug("MTC:", data);
            translationError.html("Sorry, a translated document could not be found.");
          });
        }
      };


      /*
       // Enable MTC Segments - see mtc_segments.js
       */
      var updateSegments = function (translationType, data) {
        var disallowedSources = ["topicarticles"];
        if (data) {
          for (var i = 0; i < disallowedSources.length; i++) {
            if (data.entries.item[0].source === disallowedSources[i]) {
              log.debug("MTC segments disallowed for this source:", disallowedSources[i]);
              return false;
            }
          }
        }
        if (translationType === "mtc") {
          jQuery("body").addClass("mtc-segments");
          Drupal.settings.mtc.enable_segments = true;
        } else {
          jQuery("body").removeClass("mtc-segments");
          Drupal.settings.mtc.enable_segments = false;
        }
        // a valid lsuuid is still required on DOM elements for segments to be visible
        log.debug("MTC segments_enabled:", Drupal.settings.mtc.enable_segments);
      };


      /*
       // Hash Fragment Helper
       // Appends #mtc-english to the URL for sharing
       */
      var setHashFragment = function (lang) {
        window.location.hash = "mtc-" + lang.replace(/\s+/g, '-');
      };


      /*
       // Detect IE Version Helper. IE10/11 crash on sfdc articles that auto translation. Not sure why.
       */
      var GetIEVersion = function () {
        var sAgent = window.navigator.userAgent;
        var Idx = sAgent.indexOf("MSIE");
        // If IE, return version number.
        if (Idx > 0) {
          return parseInt(sAgent.substring(Idx + 5, sAgent.indexOf(".", Idx)));
        }
        // If IE 11 then look for Updated user agent string.
        else if (!!navigator.userAgent.match(/Trident\/7\./)) {
          return 11;
        }
        else {
          return 0; //It is not IE
        }
      };


      /*
       // Runs various Drupal.behaviours to the caas page.
       */
      var rectifyDom = function () {
        if (Drupal.settings.caas.source === "discussion") {
          // Attach Drupal behaviours
          Drupal.behaviors.autodesk_theme_caascontent_discussion.attach();
        }
        Drupal.behaviors.autodesk_theme_caascontent.attach();
      };


      /*
       // Recreate Ooyala Videos
       */
      var recreateOoyalaVideos = function () {
        jQuery(".caas script[src*='https://player.ooyala.com']").remove();
        jQuery(".caas .oo_error").parent().parent().remove();
        if (typeof OO !== "undefined") {
          OO.ready(function () {
            OO.__internal.players[Object.keys(OO.__internal.players)[0]].destroy();
          });
        }
      };
    }
  }

})(jQuery, Drupal);
;
var TranslationStrings = (function () {

  var strings = {
    "mtcStrings": {
      "arabic": "هذه هي ترجمة آلية",
      "bulgarian": "Това е машинен превод",
      "catalan": "Això és una traducció automàtica",
      "czech": "Toto je strojový překlad",
      "danish": "Dette er en maskinoversættelse",
      "german": "Dies ist eine maschinelle Übersetzung",
      "greek": "Το παρόν αποτελεί προϊόν μηχανικής μετάφρασης",
      "estonian": "See on masintõlge",
      "english": "This is machine translation",
      "finnish": "Tämä on konekäännös",
      "french": "Vous affichez une traduction automatique",
      "haitian": "Sa a se tradiksyon machin",
      "hindi": "यह मशीन अनुवाद",
      "hungarian": "Ez gépi fordítás",
      "indonesian": "Ini adalah terjemahan mesin",
      "italian": "Questo testo è stato tradotto mediante un servizio di traduzione automatica",
      "japanese": "この記事は機械翻訳",
      "korean": "이것은 기계 번역",
      "latvian": "Šis ir maīntulkojums",
      "lithuanian": "Tai automatinis vertimas",
      "malay": "Ini ialah penterjemahan mesin",
      "dutch": "Dit is een computervertaling",
      "norwegian": "Dette er en maskinoversettelse",
      "polish": "To jest tłumaczenie maszynowe",
      "brazilian portuguese": "Este texto foi traduzido automaticamente",
      "romanian": "Aceasta este o traducere automată",
      "russian": "Данный перевод выполнен с использованием автоматических средств",
      "slovak": "Ide o strojový preklad",
      "slovenian": "To je strojni prevod",
      "spanish": "Esto es una traducción automática",
      "swedish": "Detta är datoröversättning",
      "thai": "นี่เป็นการแปลด้วยเครื่อง",
      "turkish": "Bu makine çevirisidir",
      "ukrainian": "Це машинний переклад",
      "vietnamese": "Đây là bản dịch máy ",
      "chinese (simplified)": "这是机器翻译",
      "chinese (traditional)": "本文係由機器翻譯",
    },
    "mtcStringsHtml": {
      "arabic": "هذه هي <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">ترجمة آلية</span>. لعرض النص الإنجليزي الأصلي، انقر فوق نص المقالة.",
      "bulgarian": "Това е <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">машинен превод</span>. За да видите оригинала на английски език, щракнете върху текста на статията.",
      "catalan": "Això és una <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">traducció automàtica</span>. Per veure l'original anglès, feu clic al text de l'article.",
      "czech": "Toto je <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">strojový překlad</span>. Pro zobrazení původního anglického textu, klikněte na text článku.",
      "danish": "Dette er <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">en maskinoversættelse</span>. Klik på artikelteksten for at se den originale engelske udgave.",
      "german": "Dies ist eine <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">maschinelle Übersetzung</span>. Klicken Sie auf den Text des Artikels, um das englische Original anzuzeigen.",
      "greek": "Το παρόν αποτελεί <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">προϊόν μηχανικής μετάφρασης</span>. Για να δείτε το αρχικό κείμενο στα Αγγλικά, κάντε κλικ στο κείμενο του άρθρου.",
      "estonian": "See on <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">masintõlge</span>. Ingliskeelse originaalversiooni vaatamiseks klõpsake artiklil.",
      "english": "This is <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">machine translation</span> To view the original English, click article text",
      "finnish": "Tämä on <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">konekäännös</span>. Napsauta tekstiä lukeaksi alkuperäisen englanninkielisen artikkelin.",
      "french": "Vous affichez une <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">traduction automatique</span> du texte. Pour afficher le texte original anglais, cliquez sur le texte de l'article.",
      "haitian": "Sa a se <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">tradiksyon machin</span>. Pou gade orijinal la nan lang angle, klike sou tèks atik la.",
      "hindi": "यह <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">मशीन अनुवाद</span> है. मूल अंग्रेज़ी देखने के लिए, आलेख का पाठ क्लिक करें.",
      "hungarian": "Ez <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">gépi fordítás</span>. Az angol eredetit a cikk szövegére kattintva tekintheti meg.",
      "indonesian": "Ini adalah <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">terjemahan mesin</span>. Untuk melihat teks asli dalam bahasa Inggris, klik teks artikel.",
      "italian": "Questo testo è stato tradotto mediante un <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">servizio di traduzione automatica</span>. Per visualizzare la versione originale inglese, fare clic sul testo dell'articolo.",
      "japanese": "この記事は<span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">機械翻訳</span>です。原文の英語を表示するには、記事のテキストをクリックしてください。",
      "korean": "이것은 <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">기계 번역</span>입니다. 영어 본문을 보시려면 기사 텍스트를 클릭하십시오.",
      "latvian": "Šis ir <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">maīntulkojums</span>. Lai skatītu oriģinālu angļu valodā, noklikšķiniet uz raksta teksta.",
      "lithuanian": "Tai <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">automatinis vertimas</span>. Norėdami peržiūrėti originalų tekstą anglų kalba, spustelėkite straipsnio tekstą.",
      "malay": "Ini ialah <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">penterjemahan mesin</span>. Untuk melihat Bahasa Inggeris asal, klik teks artikel.",
      "dutch": "Dit is een <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">computervertaling</span>. Klik op de artikeltekst om de oorspronkelijke Engelse tekst te bekijken.",
      "norwegian": "Dette er en <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">maskinoversettelse</span>. Klikk på teksten for å se den engelske originalteksten.",
      "polish": "To jest <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">tłumaczenie maszynowe</span>. Aby wyświetlić oryginalny tekst w języku angielskim, należy kliknąć tekst artykułu.",
      "brazilian portuguese": "Este texto foi <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">traduzido automaticamente</span>. Para ver o inglês original, clique no texto do artigo.",
      "romanian": "Aceasta este o <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">traducere automată</span>. Pentru a vizualiza textul original în limba engleză, faceți clic pe textul articolului.",
      "russian": "Данный перевод <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">выполнен с использованием автоматических средств</span>. Чтобы просмотреть исходный текст на английском, щелкните содержимое статьи.",
      "slovak": "Ide o <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">strojový preklad</span>. Ak si chcete pozrie originál v angliètine, kliknite na text èlánku.",
      "slovenian": "To je <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">strojni prevod</span>. Če si želite ogledati angleški izvirnik, kliknite besedilo članka.",
      "spanish": "Esto es una <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">traducción automática</span>. Para ver el texto original en inglés, haga clic en el texto del artículo.",
      "swedish": "Detta är <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">datoröversättning</span>. För att visa den ursprungliga engelska texten ska du klicka i artikeltexten.",
      "thai": "นี่เป็น<span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">การแปลด้วยเครื่อง</span> หากต้องการดูต้นฉบับภาษาอังกฤษ ให้คลิกที่ข้อความในบทความ",
      "turkish": "Bu <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">makine çevirisidir</span>. Orijinal İngilizce metni görüntülemek için makale metnini tıklatın.",
      "ukrainian": "Це <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">машинний переклад</span>. Щоб переглянути оригінал статті англійською мовою, клацніть у її тексті.",
      "vietnamese": "Đây là <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">bản dịch máy </span>. Để xem bản gốc tiếng Anh, nhấp vào nội dung bài viết.",
      "chinese (simplified)": "这是<span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">机器翻译</span>内容。要查看英文原文，请单击文章中对应的文字。",
      "chinese (traditional)": "本文係由<span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" title=\"\">機器翻譯</span>。若要檢視英文版原文，請按一下文章文字。"
    },
    "mtcDisclaimerStrings": {
      "arabic": "هذه الصفحة تمت ترجمتها لراحتك باستخدام خدمة الترجمة الآلية. و لكنها لا تعتبر ترجمة رسمية وربما تحتوي على أخطاء وترجمة غير دقيقة. لا تقدم Autodesk أي ضمانات، صريحة أو ضمنية، فيما يتعلق بدقة أو موثوقية أو اكتمال أي معلومات مترجمة من قبل خدمة الترجمة الآلية، ويجب ألا تكون مسؤولة عن أي أضرار أو خسائر من جراء اعتمادك على خدمة الترجمة.",
      "bulgarian": "За ваше удобство тази статия е преведена с помощта на услуга за машинен превод. Текстът не може да служи като официален превод и може да съдържа грешки и неточности в превода. Autodesk не дава никакви изрични или косвени гаранции по отношение на точността, надеждността и пълнотата на която и да е информация, преведена чрез услуга за машинен превод, и не носи отговорност за щети или загуби, възникнали в резултат на вашето позоваване на тази услуга за превод.",
      "catalan": "Aquesta pàgina s'ha traduït per a la vostra conveniència amb un servei de traducció automàtica. No es tracta d'una traducció oficial, per la qual cosa podria incloure errors i traduccions imprecises. Autodesk no garanteix, ni de manera expressa ni implícita, la precisió, la fiabilitat o la totalitat de la informació traduïda pel servei de traducció automàtica, i tampoc no es fa responsable dels danys o les pèrdues producte de la confiança dipositada en el servei de traducció.",
      "czech": "Tato stránka byla pro vaši potřebu přeložena s využitím služby strojového překladu. Nelze jej považovat za úřední překlad a může obsahovat chyby a nepřesně provedené překlady. Společnost Autodesk neposkytuje žádnou záruku, výslovně uvedenou nebo nepřímou, pokud jde o přesnost, věrohodnost a úplnost jakékoliv informace přeložené s využitím služby strojového překladu, a nenese odpovědnost za jakékoliv škody nebo ztráty vzniklé v důsledku Vašeho používání služby strojového překladu.",
      "danish": "Denne side er blevet oversat for at hjælpe dig vha. en maskinoversættelsestjeneste. Oversættelsen tjener ikke som en officiel oversættelse og kan indeholde fejl og upræcise oversættelser. Autodesk giver ingen garanti, hverken udtrykkeligt eller underforstået, for præcisionen, pålideligheden eller fuldstændigheden af nogen oplysninger, der er oversat af maskinoversættelsestjenesten, og er ikke ansvarlig for nogen skader eller tab, der skyldes, at du stoler på oversættelsestjenesten.",
      "german": "Diese Seite wurde für Sie mithilfe eines maschinellen Übersetzungsdiensts übersetzt. Es handelt sich dabei um keine offizielle Übersetzung und enthält möglicherweise Fehler und ungenaue Übersetzungen. Autodesk übernimmt weder ausdrücklich noch stillschweigend eine Gewährleistung für die Genauigkeit, Zuverlässigkeit oder Vollständigkeit von Informationen, die durch den maschinellen Übersetzungsdienst übersetzt wurden, und haftet nicht für Schäden oder Verluste, die daraus entstehen, dass Sie sich auf den Übersetzungsdienst verlassen.",
      "greek": "Αυτή η σελίδα μεταφράστηκε για τη δική σας διευκόλυνση με τη χρήση μιας υπηρεσίας μηχανικής μετάφρασης. Δεν αποτελεί επίσημη μετάφραση και μπορεί να περιέχει σφάλματα και μη ακριβείς μεταφράσεις. Η Autodesk δεν παρέχει καμία εγγύηση, ρητή ή άρρητη, σχετικά με την ακρίβεια, την αξιοπιστία ή την πληρότητα των πληροφοριών που μεταφράστηκαν από την υπηρεσία μηχανικής μετάφρασης και δεν φέρει ευθύνη για τυχόν ζημίες ή απώλειες που προκύπτουν από την επίδειξη εμπιστοσύνης σε αυτήν την υπηρεσία μετάφρασης.",
      "estonian": "See lehekülg on tõlgitud masintõlketeenusega. See pole ametlik tõlge ja võib sisaldada vigu ning ebatäpset tõlget. Autodesk ei taga, ei otseselt ega kaudselt, masintõlketeenusega tõlgitud teabe täpsust, usaldusväärsust või terviklikkust ega vastuta mis tahes kahjude või kadude eest, mis võivad tuleneda sellele tõlketeenusele tuginemisest.",
      "english": "This page has been translated for your convenience using a machine translation service. This does not serve as an official translation and may contain errors and inaccurate translations. Autodesk makes no warranty, express or implied, as to accuracy, reliability or completeness of any information translated by the machine translation service and shall not be liable for any damages or loss from your reliance on the translation service.",
      "finnish": "Tämä sivu on käännetty konekäännöspalvelun avulla. Se ei ole virallinen käännös, ja se voi sisältää virheellisiä ja epätarkkoja ilmaisuja. Autodesk ei anna mitään nimenomaisia tai hiljaisia takuita konekäännöspalvelun kääntämien tietojen tarkkuudesta, luotettavuudesta tai kaikenkattavuudesta. Autodesk ei ole korvausvastuussa vahingoista tai tappioista, joiden voidaan katsoa aiheutuneen konekäännöspalveluun luottamisesta.",
      "french": "Pour votre commodité, cette page a été traduite à l'aide d'un service de traduction automatique. Elle ne fait pas office de traduction officielle et peut contenir des erreurs et des imprécisions.  Autodesk n'offre aucune garantie, expresse ou implicite, quant à l'exactitude, la fiabilité ou l'exhaustivité des informations traduites par le service de traduction automatique et l'entreprise ne doit pas être tenue responsable de tout dommage ou perte dus à la confiance que vous accordez à ce service de traduction. ",
      "haitian": "Paj sa a te tradwi ak yon sèvis tradiksyon machin pou rann li pi fasil pou ou. Li pa yon tradiksyon ofisyèl epi li kapab genyen kèk erè oswa tradiksyon ki pa bon ladan. Autodesk pa fè okenn garanti, swa dirèkteman oswa endirèkteman, ki di nenpòt enfòmasyon sèvis tradiksyon machin nan tradwi egzat, fyab, oswa konplè epi li pa dwe responsab pou okenn domaj oswa pèt ou sibi paske ou te depann sou sèvis tradiksyon an.",
      "hindi": "इस पृष्ठ का अनुवाद, मशीन अनुवाद सेवा का उपयोग करके आपकी सुविधा के लिए किया गया है. यह आधिकारिक अनुवाद के रूप में प्रदान नहीं किया गया है और इसमें त्रुटियां और गलत अनुवाद हो सकता है. Autodesk मशीन अनुवाद सेवा द्वारा अनूदित किसी भी जानकारी की सटीकता, विश्वसनीयता या पूर्णता के संबंध में व्यक्त या निहित कोई वारंटी नहीं देता है और वह अनुवाद सेवा पर आपके विश्वास से होने वाली किसी भी क्षति या हानि के लिए उत्तरदायी नहीं होगा.",
      "hungarian": "Ez az oldal az Ön kényelme érdekében le lett fordítva egy gépi fordítási szolgáltatás segítségével. Ez nem tekinthető hivatalos fordításnak, és hibákat, valamint pontatlan fordításokat tartalmazhat. Az Autodesk nem vállal sem kifejezett, sem vélelmezett garanciát, a gépi fordítási szolgáltatás segítségével lefordított információk pontosságára, olvashatóságára vagy teljességére vonatkozóan, és nem vonható felelősségre a fordítási szolgáltatás használatából adódó károkért és veszteségekért.",
      "indonesian": "Demi kenyamanan Anda, halaman ini telah diterjemahkan menggunakan layanan penerjemahan mesin. Terjemahan ini tidak mewakili terjemahan resmi dan mungkin berisi kesalahan maupun ketidakakuratan. Autodesk tidak memberikan jaminan, baik secara tersurat maupun tersirat, atas keakuratan, keterandalan atau kelengkapan dari setiap informasi yang diterjemahkan oleh layanan penerjemahan mesin ini, dan Autodesk tidak bertanggungjawab atas kerusakan maupun kerugian yang Anda tanggung karena mengandalkan layanan terjemahan ini.",
      "italian": "Per comodità, questa pagina è stata tradotta utilizzando un servizio di traduzione automatica. Non si tratta di una traduzione ufficiale e può contenere errori e imprecisioni. Autodesk non fornisce alcuna garanzia, espressa o implicita, sull'accuratezza, l'affidabilità e la completezza delle informazioni tradotte dal servizio di traduzione automatica e non potrà essere ritenuto responsabile dei danni o delle perdite derivate dalla fiducia riposta nel servizio di traduzione.",
      "japanese": "このページは利便性のため、機械翻訳サービスによって翻訳されました。正式な翻訳ではないため、文章にはエラーや不正確な翻訳が含まれる場合があることをご承知おきください。オートデスクは、機械翻訳サービスによって翻訳された情報の正確性、信頼性、完全性について、明示または黙示の別を問わず、一切の保証を行いません。また、お客様が機械翻訳サービスを信用することで生じた損失または損害については、いかなる責任も負わないものとします。",
      "korean": "해당 페이지는 귀하의 편리를 위하여 기계 번역 서비스를 이용하여 번역하였습니다. 해당 페이지는 공식 번역 서비스로 제공해 드리는 것이 아닌 탓으로 오류와 정확하지 못한 번역이 포함될 수 있습니다. Autodesk는 기계 번역 서비스로 번역된 모든 정보의 정확성, 신뢰성 또는 완벽성에 대해 명시적 또는 암시적으로 보증하지 않으며 사용자가 번역 서비스에 의존함으로 인해 입은 손상 또는 손실에 책임지지 않습니다.",
      "latvian": "Jūsu ērtībām šī lapa ir tulkota, izmantojot mašīntulkošanas pakalpojumu. is nav oficiālais tulkojums, un tajā var būt kļūdas un neprecizitātes. Autodesk nesniedz tieās vai netieās garantijas par maīntulkoanas pakalpojumā tulkotās informācijas precizitāti, uzticamību vai pabeigtību un neatbild par bojājumiem vai zaudējumiem, kas jums radās tādēļ, ka paļāvāties uz informāciju tulkoanas pakalpojumā.",
      "lithuanian": "Kad jums būtų patogiau, šis puslapis išverstas naudojant automatinio vertimo paslaugą. Tai nėra oficialus vertimas, todėl jame gali būti klaidų ir netikslumų. „Autodesk“ neteikia jokių garantijų, tiek išreikštų, tiek numanomų, dėl informacijos, išverstos naudojantis automatinio vertimo paslauga, tikslumo, patikimumo arba užbaigtumo ir nebus atsakinga už jokią žalą ar nuostolius, patirtus pasikliaujant vertimo paslauga.",
      "malay": "Halaman ini telah diterjemahkan untuk memudahkan anda menggunakan perkhidmatan penterjemahan mesin. Ia tidak dianggap sebagai terjemahan rasmi dan mungkin mengandungi ralat dan terjemahan yang tidak tepat. Autodesk tidak memberikan waranti, tersurat atau tersirat, dari segi ketepatan, kewibawaan atau kesempurnaan mana-mana maklumat yang diterjemahkan oleh perkhidmatan penterjemahan mesin dan tidak akan bertanggungjawab ke atas sebarang kerosakan atau kehilangan disebab oleh kebergantungan kepada perkhidmatan penterjemahan ini.",
      "dutch": "Deze pagina is voor uw gemak vertaald met gebruikmaking van een computervertaalservice. Deze vertaling moet niet worden gezien als een officiële vertaling en bevat mogelijk fouten en onjuiste vertalingen. Autodesk biedt geen enkele garantie, hetzij impliciet hetzij uitdrukkelijk, voor de juistheid, betrouwbaarheid of volledigheid van enige informatie die is vertaald door de computervertaalservice en wijst alle verantwoordelijkheid van de hand voor eventuele schade of verliezen als gevolg van uw vertrouwen op de vertaalservice.",
      "norwegian": "Denne siden er maskinoversatt for å gjøre det mer bekvemt å lese den. Denne versjonen skal ikke betraktes som en offisiell oversettelse, og den kan inneholde feil og unøyaktige oversettelser. Autodesk gir ingen garanti – verken uttrykt eller underforstått – hva gjelder nøyaktigheten, påliteligheten eller fullstendigheten til informasjon som er maskinoversatt, og de kan ikke holdes ansvarlige for eventuelle skader eller tap som oppstår som følge av at du stoler på oversettelsestjenesten.",
      "polish": "Ta strona została dla wygody użytkowników przetłumaczona przy użyciu usługi tłumaczenia maszynowego. Nie stanowi ona oficjalnego tłumaczenia. Tekst może zawierać błędy lub być niedokładnie przetłumaczony. Firma Autodesk nie udziela żadnych gwarancji wyraźnych ani dorozumianych w zakresie dokładności i prawidłowości informacji przetłumaczonych przez usługę tłumaczenia maszynowego ani nie gwarantuje, że tłumaczenie zawiera wszystkie informacje z tekstu oryginalnego. Firma Autodesk nie ponosi odpowiedzialności za jakiekolwiek szkody lub straty wynikające z korzystania z tekstu przetłumaczonego przez usługę tłumaczenia.",
      "brazilian portuguese": "Esta página foi traduzida para sua comodidade por um serviço de tradução automática. Observe que não é uma tradução oficial e pode conter erros e traduções imprecisas. A Autodesk não fornece garantias, expressas ou implícitas, quanto à precisão, confiabilidade ou integridade das informações traduzidas pelo serviço de tradução automática e não deve ser responsabilizada por quaisquer danos ou perdas causados pela sua confiança no serviço de tradução.",
      "romanian": "Această pagină a fost tradusă pentru dvs. utilizând un serviciu de traducere automată. Aceasta nu servește drept traducere oficială, putând conține erori și traduceri incorecte. Autodesk nu oferă nicio garanție, explicită sau implicită, cu privire la acuratețea, veridicitatea sau caracterul complet al informațiilor traduse de serviciul de traducere automată și nu va răspunde pentru daunele sau pierderile care rezultă din încrederea dvs. în serviciul de traducere.",
      "russian": "Содержимое данной страницы было переведено для вашего удобства с использованием автоматических средств. Данный перевод не является официальным и может содержать ошибки и неточности. Компания Autodesk не дает никаких гарантий, явных или подразумеваемых, в отношении точности, достоверности и полноты любой информации, полученной в результате перевода с использованием автоматических средств, и не несет ответственности за любые убытки, возникшие в результате использования такой информации.",
      "slovak": "Táto stránka bola kvôli vámu pohodliu preloená pomocou sluby strojového prekladu. Neslúi ako oficiálny preklad a môe obsahova chyby a nepresné preklady. Spoloènos Autodesk neposkytuje iadnu záruku, výslovnú ani predpokladanú, pokia¾ ide o presnos, spo¾ahlivos alebo úplnos akejko¾vek informácie preloenej slubou strojového prekladu a nebude zodpovedná za iadne kody ani stratu v dôsledku váho spoliehania sa na prekladate¾skú slubu.",
      "slovenian": "Ta stran je prevedena s storitvijo strojnega prevajanja. To ni uradni prevod in lahko vsebuje napake in nenatančne prevode. Autodesk ne daje nobenega izrecnega ali nakazanega jamstva glede točnosti, zanesljivosti ali popolnosti katerih koli informacij, prevedenih s storitvijo strojnega prevajanja, in ne odgovarja za kakršno koli škodo ali izgubo, ki izvira iz vašega zanašanja na storitev strojnega prevajanja.",
      "spanish": "Esta página se ha traducido para su conveniencia con un servicio de traducción automática. Esto no es una traducción oficial y podría contener errores y traducciones imprecisas. Autodesk no garantiza, ni expresa ni implícitamente, la exactitud, la fiabilidad o la totalidad de la información traducida por el servicio de traducción automática, y no será responsable de los daños o las pérdidas producidos por la confianza depositada en el servicio de traducción.",
      "swedish": "Denna sida har för enkelhetens skull översatts med en datoröversättningstjänst. Det är ingen officiell översättning och den kan innehålla fel och oriktigheter. Autodesk lämnar ingen garanti, uttrycklig eller implicerad, gällande noggrannhet, pålitlighet eller fullständighet för någon information som översatts genom datoröversättningstjänster och kan inte hållas ansvarigt för skador eller förluster på grund av din tillit till sådana översättningstjänster.",
      "thai": "หน้านี้ได้มีการแปลโดยใช้บริการแปลภาษาด้วยเครื่องเพื่อความสะดวกของคุณ ซึ่งไม่ได้เป็นการแปลอย่างเป็นทางการและอาจมีข้อผิดพลาดและคำแปลที่ไม่ถูกต้อง Autodesk ไม่มีการรับประกันทั้งโดยชัดแจ้งหรือโดยนัยต่อความถูกต้อง ความน่าเชื่อถือ หรือความครบถ้วนสมบูรณ์ของข้อมูลใดๆ ที่แปลโดยบริการแปลภาษาด้วยเครื่อง และจะไม่รับผิดชอบต่อความเสียหายหรือการสูญเสียใดๆ จากความไว้วางใจของคุณในบริการแปลภาษานี้",
      "turkish": "Bu sayfa, size kolaylık sağlamak için makine çeviri hizmeti kullanılarak çevrilmiştir. Resmi bir çeviri değildir ve hatalar ve yanlış çeviriler içerebilir. Autodesk, makine çeviri hizmetiyle çevrilen bilgilerin doğruluğuna, güvenilirliğine veya eksiksiz olduğuna dair açık veya zımni herhangi bir garanti sunmaz ve çeviri hizmetine güvenmenizden kaynaklı oluşan zarar ya da kayıplardan sorumlu tutulamaz.",
      "ukrainian": "Для зручності цю сторінку перекладено за допомогою служби машинного перекладу. Такий переклад не вважається офіційно затвердженим і може містити помилки й неточності. Корпорація Autodesk не надає жодних прямих чи непрямих гарантій щодо точності, достовірності або повноти інформації, перекладеної за допомогою служби машинного перекладу, і не бере на себе відповідальності за будь-які збитки чи втрати, які стали наслідком вашої довіри до якості послуг такого перекладу.",
      "vietnamese": "Trang này đã được dịch để thuận tiện cho bạn bằng một dịch vụ dịch máy. Đây không phải là bản dịch chính thức và có thể chứa lỗi và dịch không chính xác. Autodesk không bảo đảm, dù rõ ràng hay ngụ ý, về tính chính xác, tin cậy hoặc đầy đủ của thông tin được dịch bởi dịch vụ dịch máy và không chịu trách nhiệm cho bất kỳ thiệt hại hoặc tổn thất nào từ sự tin tưởng của bạn vào dịch vụ dịch thuật.",
      "chinese (simplified)": "已使用机器翻译服务对此页面进行了翻译，以便于您查看。此翻译不可用作正式译文，可能包含错误和不准确的翻译。对于机器翻译的任何信息的准确性、可靠性或完整性，Autodesk 不作任何明示或默示的保证，并且对于您因使用此翻译服务而遭受的任何损害或损失概不负责。",
      "chinese (traditional)": "為方便您使用，本頁已進行機器翻譯。此翻譯不能作為正式翻譯，可能包含錯誤及不正確的翻譯。對於機器翻譯的任何資訊的正確性、可靠性或完整性，Autodesk 不提供任何明示或暗示的保證，並且對於您因使用此翻譯服務而遭受的任何損害或損失亦不承擔責任。"
    },
    "bingStrings": {
      "arabic": "ترجمت بواسطة",
      "bulgarian": "Преведено от",
      "catalan": "Traduït per",
      "czech": "Přeložil",
      "danish": "Oversat af",
      "german": "Übersetzt von",
      "greek": "Μεταφράστηκε από",
      "estonian": "Tõlgitud teenusega",
      "english": "Translated by",
      "finnish": "Kääntäjä",
      "french": "Traduit par",
      "haitian": "Tradwi pa",
      "hindi": "इसके द्वारा अनूदित",
      "hungarian": "Fordította:",
      "indonesian": "Diterjemahkan oleh",
      "italian": "Tradotto da",
      "japanese": "翻訳: ",
      "korean": "번역 제공",
      "latvian": "Tulkoja:",
      "lithuanian": "Išversta",
      "malay": "Diterjemahkan oleh",
      "dutch": "Vertaald door",
      "norwegian": "Oversatt av",
      "polish": "Przetłumaczone przez",
      "brazilian portuguese": "Traduzido por",
      "romanian": "Tradus de",
      "russian": "Переведено с использованием",
      "slovak": "Preloené slubou",
      "slovenian": "Prevedel",
      "spanish": "Traducido por",
      "swedish": "Översatt av",
      "thai": "แปลโดย",
      "turkish": "Çeviren",
      "ukrainian": "Перекладено:",
      "vietnamese": "Dịch bởi:",
      "chinese (simplified)": "译者",
      "chinese (traditional)": "翻譯者"
    },
    "segmentTitleStrings": {
      "arabic": "معاينة النص الانجليزي الاصلي",
      "bulgarian": "Преглед на оригинала на английски език",
      "catalan": "Veu l'original anglès",
      "czech": "Zobrazit anglický originál",
      "danish": "Se den originale engelske udgave",
      "german": "Englisches Original anzeigen",
      "greek": "Προβολή της αρχικής έκδοσης στα Αγγλικά",
      "estonian": "Kuva ingliskeelne originaalversioon",
      "english": "English Original",
      "finnish": "Tutustu alkuperäiseen englanninkieliseen versioon",
      "french": "Afficher le texte original anglais",
      "haitian": "Gade Orijinal Angle a",
      "hindi": "अंग्रेज़ी मूल देखें",
      "hungarian": "Angol eredeti megtekintése",
      "indonesian": "Lihat Teks Asli dalam bahasa Inggris",
      "italian": "Visualizza versione originale inglese",
      "japanese": "原文の英語を表示",
      "korean": "영어 본문 보기",
      "latvian": "Skatīt oriģinālu angļu valodā",
      "lithuanian": "Peržiūrėti originalų tekstą anglų kalba",
      "malay": "Lihat Bahasa Inggeris Asal",
      "dutch": "Oorspronkelijke Engelse tekst bekijken",
      "norwegian": "Se den engelske originalteksten",
      "polish": "Wyświetl oryginalny tekst w języku angielskim",
      "brazilian portuguese": "Exibir inglês original",
      "romanian": "Vizualizați textul original în limba engleză",
      "russian": "Открыть исходный текст на английском",
      "slovak": "Zobrazi originál v angliètine",
      "slovenian": "Ogled angleškega izvirnika",
      "spanish": "Ver original en inglés",
      "swedish": "Visa engelsk originaltext",
      "thai": "ดูต้นฉบับภาษาอังกฤษ",
      "turkish": "İngilizce Orijinali Görüntüle",
      "ukrainian": "Переглянути оригінал англійською мовою",
      "vietnamese": "Xem bản gốc tiếng Anh",
      "chinese (simplified)": "查看英文原文",
      "chinese (traditional)": "檢視英文版原文"
    },
    "segmentButtonStrings": {
      "arabic": "النص الانجليزي الاصلي",
      "bulgarian": "Оригинал на английски език",
      "catalan": "Original anglès",
      "czech": "Anglický originál",
      "danish": "Original engelsk udgave",
      "german": "Englisches Original",
      "greek": "Αρχική έκδοση στα Αγγλικά",
      "estonian": "Ingliskeelne originaalversioon",
      "english": "View Original",
      "finnish": "Alkuperäinen englanninkielinen versio",
      "french": "Texte original anglais",
      "haitian": "Orijinal Angle a",
      "hindi": "अंग्रेज़ी मूल",
      "hungarian": "Angol eredeti",
      "indonesian": "Teks Asli dalam bahasa Inggris",
      "italian": "Versione originale inglese",
      "japanese": "原文の英語",
      "korean": "영어 본문",
      "latvian": "Oriģināls angļu valodā",
      "lithuanian": "Originalus tekstas anglų kalba",
      "malay": "Bahasa Inggeris Asal",
      "dutch": "Oorspronkelijke Engelse tekst",
      "norwegian": "Engelsk original",
      "polish": "Oryginalny tekst w języku angielskim",
      "brazilian portuguese": "Inglês original",
      "romanian": "Text original în limba engleză",
      "russian": "Исходный текст на английском",
      "slovak": "Originál v angliètine",
      "slovenian": "Angleški izvirnik",
      "spanish": "Original en inglés",
      "swedish": "Engelsk originaltext",
      "thai": "ต้นฉบับภาษาอังกฤษ",
      "turkish": "İngilizce Orijinal",
      "ukrainian": "Оригінал англійською мовою",
      "vietnamese": "Bản gốc tiếng Anh",
      "chinese (simplified)": "英文原文",
      "chinese (traditional)": "英文版原文"
    }
  }

  return {
    mtcStrings: strings.mtcStrings,
    mtcDisclaimerStrings: strings.mtcDisclaimerStrings,
    bingStrings: strings.bingStrings,
    segmentButtonStrings: strings.segmentButtonStrings,
    segmentTitleStrings: strings.segmentTitleStrings,
  };

})();



;
var e_pos;
var selected_span_pos;
var curr_lsUuid;
var disclaimer_pos;
var container_pos_content;

(function($) {
  Drupal.behaviors.autodesk_mtc_segments = {
    attach: function (context, settings) {

      log.info("MTC Segments Init");

      container_pos_content = $('#main .caas').offset();
      $("#mtc-segment-overlay-container").width($('#mtc_disclaimer').innerWidth());
      disclaimer_pos = $('#mtc_disclaimer').position();

      // define LS client
      var _alcontrib = _alcontrib || [];
      _alcontrib.push({
        clientId: 'akn'
      });



      // on click outside open overlays
      $(document).click(function (e) {
        // on mtc overlay click outside when open
        var popup = $("#mtc-segment-overlay-container");
        if (!popup.is(e.target) && popup.is(':visible') && popup.has(e.target).length === 0 ) {
          hideMtcOverlay();
        }

        // Hide view original button on click outside element
        var view_origin_btn = $("#mtc_view_original");
        if (
          !view_origin_btn.is(e.target) // button is not the target
          && view_origin_btn.is(':visible')  // button is visibile
          && view_origin_btn.has(e.target).length === 0  // not a child element either
          && !e.target.hasAttribute("lsUuid") // and is not a ls segment
        ) {
          closeViewOrginal();
        }
      });

      // on view original close button click
      $( "#mtc_view_original" ).on( "click", "#mtc_view_original_close", function() {
        closeViewOrginal();
      });

      // on view original selection
      $( "#mtc_view_original" ).on( "click", "#mtc_view_original_button", function() {
        if (curr_lsUuid.length) {
          log.debug(curr_lsUuid);
          adskLsCollabGetSegmentDetails(_alcontrib, curr_lsUuid , getDetailsCallback) ; // call LS service
          $('#mtc_view_original').offset({ top: 0, left: 0 });
          $('#mtc_view_original').hide();
        }
      });

      // on mtc overlay close button click
      $( "#mtc-segment-overlay-container" ).on( "click", "#mtc-segment-overlay-close", function() {
        hideMtcOverlay();
      });

      // on window resize, if mtc overlay open then close
      $( window ).resize(function() {
        setTimeout(doneResizing, 500);
      });

      // on orientation resize, if mtc overlay open then close
      $(window).on("orientationchange",function(){
        doneResizing();
      });


      // reset alignment/overlays
      function doneResizing() {
        container_pos_content = $('#main .caas').offset();
        $("#mtc-segment-overlay-container").width($('#mtc_disclaimer').innerWidth());
        disclaimer_pos = $('#mtc_disclaimer').position();
        if ($("#mtc-segment-overlay-container").is(':visible')) {
          hideMtcOverlay();
        }
        else if($("#mtc_view_original").is(':visible')) {
          closeViewOrginal();
        }
      }

      // hide overlay
      function hideMtcOverlay() {
        curr_lsUuid = '';
        $("#mtc-segment-overlay-content").html('');
        $('#mtc-segment-overlay-container').hide();
        $('span[lsUuid]').removeClass('active');
      }

      // close view original button
      function closeViewOrginal() {
        curr_lsUuid = '';
        $('#mtc_view_original').offset({ top: 0, left: 0 });
        $('#mtc_view_original').hide();
        $('span[lsUuid]').removeClass('active');
      }

      // on segment hover
      $("span[lsUuid]").hover(function(e){
        // skip links
        if($(e.target).closest('a').length === 0) {
          $(this).addClass("active");
        }
      }, function(e){
        // skip links
        if(
          $(e.target).closest('a').length === 0
          && this.getAttribute("lsUuid") != curr_lsUuid
        ) {
          $(this).removeClass("active");
        }
      });

      // on segment click

        $(".caas-content-result").on("click", "span[lsUuid]", function (e) {
          log.debug("segment click");
          // skip links
          if (Drupal.settings.mtc.enable_segments === true) {
            log.debug("segments enabled true");
            if ($(e.target).closest('a').length) {
              return;
            }

            var widgetButtonString = (TranslationStrings.segmentButtonStrings[Drupal.settings.l10n.beehive_name] ? TranslationStrings.segmentButtonStrings[Drupal.settings.l10n.beehive_name] : TranslationStrings.segmentButtonStrings.english);
            $("#mtc_view_original_button").html(widgetButtonString);

            // span has uid data
            if (typeof this.getAttribute("lsUuid") != "undefined") {

              // hide any open overlays - happens on mobile
              if ($("#mtc-segment-overlay-container").is(':visible')) {
                hideMtcOverlay();
              }

              // unhighlight previous selections - happens on mobile
              if ($("#mtc_view_original").is(':visible')) {
                $('span[lsUuid]').removeClass('active');
              }

              curr_lsUuid = [this.getAttribute("lsUuid")];
              e_pos = e; // cursor position
              selected_span_pos = $(this).offset(); // selected span top-left position
              var vo_btn_top_pos = selected_span_pos.top - $('#mtc_view_original').height() - 10;
              var vo_btn_left_pos = e.pageX - $('#mtc_view_original').width() - 5;
              // if outside left container, reposition
              if (vo_btn_left_pos < container_pos_content.left) {
                vo_btn_left_pos = container_pos_content.left + 5;
              }
              $(this).addClass('active');
              $('#mtc_view_original').show(); // show view original button
              $('#mtc_view_original').offset({top: vo_btn_top_pos, left: vo_btn_left_pos}); // position view original button
            }
          }
        });

      function getDetailsCallback(pData, pError) {
        log.debug(pData);
        if (pError) {
          // alert("Error: " + pError.message);
        }

        else if (pData && pData.status == 'ok') {
          var result = pData.result;
          var msg = "";
          for (var i = 0; i < result.length; i++) {
            if (result[i]) {
              msg += result[i].src;
            }
            else {
              msg += "No data available for element at position " + i;
            }
            if (i < result.length - 1) {
              msg += "\n\n";
            }
          }

          var widgetTitleString = (TranslationStrings.segmentTitleStrings[Drupal.settings.l10n.beehive_name] ? TranslationStrings.segmentTitleStrings[Drupal.settings.l10n.beehive_name] : TranslationStrings.segmentTitleStrings.english);
          jQuery("#mtc-segment-overlay-title").html(widgetTitleString);
          jQuery("#mtc-segment-overlay-content").html(msg);
          var overlay_top_pos = selected_span_pos.top - jQuery('#mtc-segment-overlay-container').height() - 15;

          jQuery('#mtc-segment-overlay-container').show(); // show view original button
          jQuery('#mtc-segment-overlay-container').offset({ top: overlay_top_pos }); // position view original button , left: overlay_left_pos
          //var getLeftPos = disclaimer_pos.left + Number($("#mtc_disclaimer").css('marginLeft').replace('px', ''));
          //jQuery('#mtc-segment-overlay-container').offset({ left: getLeftPos});
        }
        else {
          // alert("Error");
        }
      }

    }
  }
})(jQuery);
	
	;
/**
 * @file Common data layer helper.
 */

(function ($) {
  Drupal.behaviors.dataLayer = {

    /**
     * The language prefix list (no blank).
     *
     * @return {array}
     */
    langPrefixes: function langPrefixes() {
      var languages = Drupal.settings.dataLayer.languages,
          langList = [];

      for (var lang in languages) {
        if (languages[lang].prefix !== '') {
          langList.push(languages[lang].prefix);
        }
      }
      return langList;

      // With Underscore.js dependency.
      //var list = _.pluck(Drupal.settings.datalayer.languages, 'prefix');
      //return _.filter(list, function(lang) { return lang });
    },

    /**
     * Drupal behavior.
     */
    attach: function() { return }

  };
})(jQuery);
;
(function ($) {
  Drupal.behaviors.adsk_subnav = {
    attach: function (context, settings) {
      log.info("adsk_subnav Init");
      var expanded = false;

      $("div.caas_article_context .teaser").click(function() {
        if (expanded) {
          log.debug("show less");
          var articleContext = $(this).parent();
          articleContext.children(".complete").hide();
          $(this).children('.applies-to-expand-collapse').removeClass('fa-caret-up').addClass('fa-caret-down');
          expanded = false;
        } else {
          log.debug("show more");
          var articleContext = $(this).parent();
          articleContext.children(".complete").show();
          $(this).children('.applies-to-expand-collapse').removeClass('fa-caret-down').addClass('fa-caret-up');
          expanded = true;
        }
      });

      // Click to enlarge images on Caas-Pages..
      // '.caas-content-result img' was not specific to just the caas body content. It was applying the colourbox effect to images in the table of contents.
      $(".caas-content-result .content img")
        .filter(function () {
          return $(this).parent("a").length === 0;
        })
        .each(
          function () {
            var origImg = $(this);
            // Create new offscreen image to test
            var theImage = new Image();
            theImage.src = origImg.attr("src");
            var imageWidth = origImg.width();
            // Get accurate measurements from that.
            $(theImage)
              .load(
                function () {
                  var imageRealWidth = this.width;
                  if (imageRealWidth > imageWidth) {
                    var onOpenCallback = 'function(){var cboxParent=$("img.cboxPhoto").closest("#colorbox"); cboxParent.addClass( "imageEnlarge" );'
                      + ' cboxParent.prevAll("#cboxOverlay:first").addClass("imageEnlarge"); }';
                    var anchor = $('<a/>')
                      .attr(
                        {
                          'class': 'click-image-enlarge',
                          'onclick': '(function($){$.colorbox({href:"'
                          + origImg.attr("src")
                          + '",width:"auto",height:"auto",photo:true,closeButton:true, onComplete:'
                          + onOpenCallback
                          + ' })})(jQuery);return false;'
                        });
                    origImg.wrap(anchor);
                  }
                });
          });
    }
  };
})(jQuery,Drupal);
;
